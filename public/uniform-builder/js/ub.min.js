!function(){var require=function(e,t){var i=require.resolve(e,t||"/"),n=require.modules[i];if(!n)throw new Error("Failed to resolve module "+e+", tried "+i);var a=require.cache[i];return a?a.exports:n()},ca;require.paths=[],require.modules={},require.cache={},require.extensions=[".js",".coffee"],require._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},require.resolve=function(e,t){if(t=t||"/",require._core[e])return e;var s=require.modules.path(),i=(t=s.resolve("/",t))||"/";if(e.match(/^(?:\.\.?\/|\/)/)){var n=l(s.resolve(i,e))||c(s.resolve(i,e));if(n)return n}var a=function(e,t){for(var i=function(e){var t;t="/"===e?[""]:s.normalize(e).split("/");for(var i=[],n=t.length-1;0<=n;n--)if("node_modules"!==t[n]){var a=t.slice(0,n+1).join("/")+"/node_modules";i.push(a)}return i}(t),n=0;n<i.length;n++){var a=i[n];if(r=l(a+"/"+e))return r;var o=c(a+"/"+e);if(o)return o}var r;if(r=l(e))return r}(e,i);if(a)return a;throw new Error("Cannot find module '"+e+"'");function l(e){if(e=s.normalize(e),require.modules[e])return e;for(var t=0;t<require.extensions.length;t++){var i=require.extensions[t];if(require.modules[e+i])return e+i}}function c(e){e=e.replace(/\/+$/,"");var t=s.normalize(e+"/package.json");if(require.modules[t]){var i=require.modules[t](),n=i.browserify;if("object"==typeof n&&n.main){if(a=l(s.resolve(e,n.main)))return a}else if("string"==typeof n){if(a=l(s.resolve(e,n)))return a}else if(i.main){var a;if(a=l(s.resolve(e,i.main)))return a}}return l(e+"/index")}},require.alias=function(t,e){var i=require.modules.path(),n=null;try{n=require.resolve(t+"/package.json","/")}catch(e){n=require.resolve(t,"/")}for(var a=i.dirname(n),o=(Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t})(require.modules),r=0;r<o.length;r++){var s=o[r];if(s.slice(0,a.length+1)===a+"/"){var l=s.slice(a.length);require.modules[e+l]=require.modules[a+l]}else s===a&&(require.modules[e]=require.modules[a])}},ca={},require.define=function(e,t){function i(e){var t=require(e,n),i=require.cache[require.resolve(e,n)];return i&&null===i.parent&&(i.parent=a),t}require.modules.__browserify_process&&(ca=require.modules.__browserify_process());var n=require._core[e]?"":require.modules.path().dirname(e);i.resolve=function(e){return require.resolve(e,n)},i.modules=require.modules,i.define=require.define,i.cache=require.cache;var a={id:e,filename:e,exports:{},loaded:!1,parent:null};require.modules[e]=function(){return require.cache[e]=a,t.call(a.exports,i,a,a.exports,n,e,ca),a.loaded=!0,a.exports}},require.define("path",function(e,t,i,n,a,o){function r(e,t){for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}function s(e,t){for(var i=0,n=e.length;0<=n;n--){var a=e[n];"."==a?e.splice(n,1):".."===a?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;)e.unshift("..");return e}var l=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;i.resolve=function(){for(var e="",t=!1,i=arguments.length;-1<=i&&!t;i--){var n=0<=i?arguments[i]:o.cwd();"string"==typeof n&&n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=s(r(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},i.normalize=function(e){var t="/"===e.charAt(0),i="/"===e.slice(-1);return(e=s(r(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},i.join=function(){var e=Array.prototype.slice.call(arguments,0);return i.normalize(r(e,function(e,t){return e&&"string"==typeof e}).join("/"))},i.dirname=function(e){var t=l.exec(e)[1]||"";return t?1===t.length?t:t.substring(0,t.length-1):"."},i.basename=function(e,t){var i=l.exec(e)[2]||"";return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},i.extname=function(e){return l.exec(e)[3]||""}}),require.define("__browserify_process",function(t,e,i,n,a,o){var r,s,l,c;(o=e.exports={}).nextTick=(r=[],(s="undefined"!=typeof window&&window.postMessage&&window.addEventListener)&&window.addEventListener("message",function(e){e.source===window&&"browserify-tick"===e.data&&(e.stopPropagation(),0<r.length&&r.shift()())},!0),function(e){s?(r.push(e),window.postMessage("browserify-tick","*")):setTimeout(e,0)}),o.title="browser",o.browser=!0,o.env={},o.argv=[],o.binding=function(e){if("evals"===e)return t("vm");throw new Error("No such module. (Possibly not yet loaded)")},c="/",o.cwd=function(){return c},o.chdir=function(e){l=l||t("path"),c=l.resolve(e,c)}}),require.define("vm",function(e,t,i,n,a,o){t.exports=e("vm-browserify")}),require.define("/node_modules/vm-browserify/package.json",function(e,t,i,n,a,o){t.exports={main:"index.js"}}),require.define("/node_modules/vm-browserify/index.js",function(require,module,exports,__dirname,__filename,process){var Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i++)t(e[i],i,e)},Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInNewContext=function(t){t=t||{};var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var i=e.contentWindow;forEach(Object_keys(t),function(e){i[e]=t[e]}),!i.eval&&i.execScript&&i.execScript("null");var n=i.eval(this.code);return forEach(Object_keys(i),function(e){t[e]=i[e]}),document.body.removeChild(e),n},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInContext=function(e){return this.runInNewContext(e)},forEach(Object_keys(Script.prototype),function(i){exports[i]=Script[i]=function(e){var t=Script(e);return t[i].apply(t,[].slice.call(arguments,1))}}),exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(t){var i={};return"object"==typeof t&&forEach(Object_keys(t),function(e){i[e]=t[e]}),i}}),require.define("/lib/natural/phonetics/soundex.js",function(e,t,i,n,a,o){function r(e){return e.replace(/[bfpv]/g,"1")}function s(e){return e.replace(/[cgjkqsxz]/g,"2")}function l(e){return e.replace(/[dt]/g,"3")}function c(e){return e.replace(/l/g,"4")}function u(e){return e.replace(/[mn]/g,"5")}function p(e){return e.replace(/r/g,"6")}function d(e){return e.replace(/(\d)[hw]?\1+/g,"$1").replace(/[hw]/g,"")}function f(e){return e.length<4?e+Array(4-e.length).join("0"):e}var h=new(e("./phonetic"));(t.exports=h).process=function(e,t){return(e=e.toLowerCase()).charAt(0).toUpperCase()+f(d(r(s(l(c(u(p(e.substr(1,e.length-1).replace(/[aeiouy]/g,""))))))))).substr(0,t&&t-1||3)},h.transformLipps=r,h.transformThroats=s,h.transformToungue=l,h.transformL=c,h.transformHum=u,h.transformR=p,h.condense=d,h.padRight0=f}),require.define("/lib/natural/phonetics/phonetic.js",function(e,t,i,n,a,o){var r=e("../util/stopwords"),s=new e("../tokenizers/aggressive_tokenizer");tokenizer=new s,t.exports=function(){this.compare=function(e,t){return this.process(e)==this.process(t)},this.attach=function(){var t=this;String.prototype.soundsLike=function(e){return t.compare(this,e)},String.prototype.phonetics=function(){return t.process(this)},String.prototype.tokenizeAndPhoneticize=function(t){var i=[];return tokenizer.tokenize(this).forEach(function(e){(t||r.words.indexOf(e)<0)&&i.push(e.phonetics())}),i}}}}),require.define("/lib/natural/util/stopwords.js",function(e,t,i,n,a,o){i.words=["about","after","all","also","am","an","and","another","any","are","as","at","be","because","been","before","being","between","both","but","by","came","can","come","could","did","do","each","for","from","get","got","has","had","he","have","her","here","him","himself","his","how","if","in","into","is","it","like","make","many","me","might","more","most","much","must","my","never","now","of","on","only","or","other","our","out","over","said","same","see","should","since","some","still","such","take","than","that","the","their","them","then","there","these","they","this","those","through","to","too","under","up","very","was","way","we","well","were","what","where","which","while","who","with","would","you","your","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","$","1","2","3","4","5","6","7","8","9","0","_"]}),require.define("/lib/natural/phonetics/metaphone.js",function(e,t,i,n,a,o){function r(e){return e.replace(/([^c])\1/g,"$1")}function s(e){return e.match(/^(kn|gn|pn|ae|wr)/)?e.substr(1,e.length-1):e}function l(e){return e.replace(/mb$/,"m")}function c(e){return e=(e=(e=(e=e.replace(/([^s]|^)(c)(h)/g,"$1x$3").trim()).replace(/cia/g,"xia")).replace(/c(i|e|y)/g,"s$1")).replace(/c/g,"k")}function u(e){return e=(e=e.replace(/d(ge|gy|gi)/g,"j$1")).replace(/d/g,"t")}function p(e){return e=(e=e.replace(/gh(^$|[^aeiou])/g,"h$1")).replace(/g(n|ned)$/g,"$1")}function d(e){return e=(e=(e=e.replace(/([^g]|^)(g)(i|e|y)/g,"$1j$3")).replace(/gg/g,"g")).replace(/g/g,"k")}function f(e){return e.replace(/([aeiou])h([^aeiou])/g,"$1$2")}function h(e){return e.replace(/ck/g,"k")}function m(e){return e.replace(/ph/g,"f")}function b(e){return e.replace(/q/g,"k")}function g(e){return e.replace(/s(h|io|ia)/g,"x$1")}function v(e){return e=(e=e.replace(/t(ia|io)/g,"x$1")).replace(/th/,"0")}function _(e){return e.replace(/tch/g,"ch")}function y(e){return e.replace(/v/g,"f")}function w(e){return e.replace(/^wh/,"w")}function S(e){return e.replace(/w([^aeiou]|$)/g,"$1")}function x(e){return e=(e=e.replace(/^x/,"s")).replace(/x/g,"ks")}function k(e){return e.replace(/y([^aeiou]|$)/g,"$1")}function $(e){return e.replace(/z/,"s")}function C(e){return e.charAt(0)+e.substr(1,e.length).replace(/[aeiou]/g,"")}var T=new(e("./phonetic"));(t.exports=T).process=function(e,t){return(e=C(e=$(e=k(e=S(e=w(e=y(e=_(e=v(e=x(e=g(e=b(e=m(e=f(e=d(e=p(e=u(e=c(e=h(e=l(e=s(e=r(e=e.toLowerCase())))))))))))))))))))))).toUpperCase(),e.length>=t&&(e=e.substring(0,t)),e.toUpperCase()},T.dedup=r,T.dropInitialLetters=s,T.dropBafterMAtEnd=l,T.cTransform=c,T.dTransform=u,T.dropG=p,T.transformG=d,T.dropH=f,T.transformCK=h,T.transformPH=m,T.transformQ=b,T.transformS=g,T.transformT=v,T.dropT=_,T.transformV=y,T.transformWH=w,T.dropW=S,T.transformX=x,T.dropY=k,T.transformZ=$,T.dropVowels=C}),require.define("/lib/natural/phonetics/double_metaphone.js",function(e,t,i,n,a,o){var r=new(e("./phonetic"));function m(e){return e&&e.match(/[aeiouy]/i)}function b(e,t){return e.length>=t&&(e=e.substring(0,t)),e}function o(n,e){n=n.toUpperCase();var i="",a="",o=0;function t(e,t,i){return r(o+e,o+t,i)}function r(e,t,i){return-1<i.indexOf(n.substring(e,t))}function s(e,t){i+=e,a+=t}function l(e){s(e,e)}function c(e,t){n[o+1]==e&&o++,l(t||e)}function u(){if("L"==n[o+1]){if(o==n.length-3&&(t(-1,3,["ILLO","ILLA","ALLE"])||"ALLE"==n.substring(o-1,o+3)&&(-1<t(-2,-1,["AS","OS"])||-1<["A","O"].indexOf(n[n.length-1]))))return s("L",""),void o++;o++}l("L")}var p,d="SAN"==n.substring(0,3),f=m(n[0]),h=n.match(/(W|K|CZ|WITZ)/);for(t(0,2,["GN","KN","PN","WR","PS"])&&o++;o<n.length;){switch(n[o]){case"A":case"E":case"I":case"O":case"U":case"Y":case"Ê":case"É":case"É":case"À":0==o&&l("A");break;case"B":c("B","P");break;case"C":1<o&&!m(n[o-2])&&"A"==n[o-1]&&"H"==n[o+1]&&"I"!=n[o+2]&&"I"!=n[o+2]||t(-2,4,["BACHER","MACHER"])?(l("K"),o++):0==o&&"EASAR"==n.substring(1,6)?(l("S"),o++):"HIA"==n.substring(o+1,o+4)?(l("K"),o++):"H"==n[o+1]?(0<o&&"AE"==n.substring(o+2,o+4)?s("K","X"):0==o&&(t(1,6,["HARAC","HARIS"])||t(1,3,["HOR","HUM","HIA","HEM"]))&&"HORE"!=n.substring(o+1,o+5)?l("K"):r(0,3,["VAN","VON"])||"SCH"==n.substring(0,3)||t(-2,4,["ORCHES","ARCHIT","ORCHID"])||t(2,3,["T","S"])||(t(-1,0,["A","O","U","E"])||0==o)&&t(2,3,["B","F","H","L","M","N","R","V","W"])?l("K"):0<o?"MC"==n.substring(0,2)?l("K"):s("X","K"):l("X"),o++):"CZ"==n.substring(o,o+2)&&"WICZ"!=n.substring(o-2,o+1)?(s("S","X"),o++):"CIA"==n.substring(o,o+3)?(l("X"),o+=2):"C"==n[o+1]&&1!=o&&"M"!=n[0]?-1<["I","E","H"].indexOf(n[o+2])&&"HU"!=n.substring(o+2,o+4)?(1==o&&"A"==n[o-1]||t(-1,4,["UCCEE","UCCES"])?l("KS"):l("X"),o+=2):(l("K"),o++):-1<["K","G","Q"].indexOf(n[o+1])?(l("K"),o++):-1<["E","I","Y"].indexOf(n[o+1])?(t(1,3,["IA","IE","IO"])?s("S","X"):l("S"),o++):(l("K")," "==n[o+1]&&["C","Q","G"].indexOf(n[o+2])?o+=2:-1<["C","K","Q"].indexOf(n[o+1])&&!t(1,3,["CE","CI"])&&o++);break;case"Ç":l("S");break;case"D":"G"==n[o+1]?-1<["I","E","Y"].indexOf(n[o+2])?(l("J"),o+=2):(l("TK"),o++):"T"==n[o+1]?(l("T"),o++):c("D","T");break;case"F":case"K":case"N":c(n[o]);break;case"G":"H"==n[o+1]?(0<o&&!m(n[o-1])?l("K"):0==o?"I"==n[o+2]?l("J"):l("K"):1<o&&(-1<["B","H","D"].indexOf(n[o-2])||-1<["B","H","D"].indexOf(n[o-3])||-1<["B","H"].indexOf(n[o-4]))||(2<o&&"U"==n[o-1]&&-1<["C","G","L","R","T"].indexOf(n[o-3])?l("F"):"I"!=n[o-1]&&l("K")),o++):"N"==n[o+1]?(1==o&&f&&!h?s("KN","N"):"EY"==n.substring(o+2,o+4)||"Y"==n[o+1]||h?l("KN"):s("N","KN"),o++):"LI"!=n.substring(o+1,o+3)||h?0!=o||"Y"!=n[o+1]&&!t(1,3,["ES","EP","EB","EL","EY","IB","IL","IN","IE","EI","ER"])?c("G","K"):s("K","J"):(s("KL","L"),o++);break;case"H":(0==o||m(n[o-1]))&&m(n[o+1])&&(l("H"),o++);break;case"J":void 0,p="OSE"==n.substring(o+1,o+4),d||p?0==o&&" "==n[o+4]||d?l("H"):l("J"):0==o?s("J","A"):!m(n[o-1])||h||"A"!=n[o+1]&&"O"!=n[o+1]?o==n.length-1?s("J"," "):c("J"):s("J","H");break;case"L":u();break;case"M":c("M"),"U"!=n[o-1]||"B"!=n[o+1]||o!=n.length-2&&"ER"!=n.substring(o+2,o+4)||o++;break;case"Ñ":l("N");break;case"P":"H"==n[o+1]?(l("F"),o++):(c("P"),"B"==n[o+1]&&o++);break;case"Q":c("Q","K");break;case"R":o!=n.length-1||h||"IE"!=n.substring(o-2,o)||t(-4,-3,["ME","MA"])?c("R"):s("","R");break;case"S":0==o&&"SUGAR"==n.substring(0,5)?s("X","S"):"H"==n[o+1]?(t(2,5,["EIM","OEK","OLM","OLZ"])?l("S"):l("X"),o++):t(1,3,["IO","IA"])?(h?l("S"):s("S","X"),o++):0==o&&-1<["M","N","L","W"].indexOf(n[o+1])||"Z"==n[o+1]?(s("S","X"),"Z"==n[o+1]&&o++):"SC"==n.substring(o,o+2)?("H"==n[o+2]?t(3,5,["ER","EN"])?s("X","SK"):t(3,5,["OO","UY","ED","EM"])?l("SK"):0!=o||m(n[3])||"W"==n[3]?l("X"):s("X","S"):-1<["I","E","Y"].indexOf(n[o+2])?l("S"):l("SK"),o+=2):o==n.length-1&&t(-2,0,["AI","OI"])?s("","S"):"L"!=n[o+1]&&"A"!=n[o-1]&&"I"!=n[o-1]&&(c("S"),"Z"==n[o+1]&&o++);break;case"T":"ION"==n.substring(o+1,o+4)?(l("XN"),o+=3):t(1,3,["IA","CH"])?(l("X"),o+=2):"H"==n[o+1]||"TH"==n.substring(1,2)?(t(2,4,["OM","AM"])||-1<["VAN ","VON "].indexOf(n.substring(0,4))||"SCH"==n.substring(0,3)?l("T"):s("0","T"),o++):(c("T"),"D"==n[o+1]&&o++);break;case"V":c("V","F");break;case"W":0==o?"H"==n[1]?l("A"):m(n[1])&&s("A","F"):o==n.length-1&&m(n[o-1])||t(-1,4,["EWSKI","EWSKY","OWSKI","OWSKY"])||"SCH"==n.substring(0,3)?(s("","F"),o++):-1<["ICZ","ITZ"].indexOf(n.substring(o+1,o+4))&&(s("TS","FX"),o+=3);break;case"X":0==o?l("S"):o==n.length-1&&(-1<["IAU","EAU","IEU"].indexOf(n.substring(o-3,o))||-1<["AU","OU"].indexOf(n.substring(o-2,o)))||l("KS");break;case"Z":"H"==n[o+1]?(l("J"),o++):t(1,3,["ZO","ZI","ZA"])||h&&0<o&&"T"!=n[o-1]?(s("S","TS"),o++):c("Z","S")}if(i.length>=e&&a.length>=e)break;o++}return[b(i,e),b(a,e)]}(t.exports=r).compare=function(e,t){var i=o(e),n=o(t);return i[0]==n[0]||i[1]==n[1]},r.process=o,r.isVowel=m}),require.define("/lib/natural/stemmers/porter_stemmer.js",function(e,t,i,n,a,o){function r(e){return e.replace(/[^aeiou]+/g,"C").replace(/[aeiouy]+/g,"V")}function s(e){return e.replace(/[^aeiou]/g,"C").replace(/[aeiouy]/g,"V")}function l(e){return e?r(e).replace(/^C/,"").replace(/V$/,"").length/2:-1}function c(e){return e.match(/([^aeiou])\1$/)}function u(e,t,i,n){var a=null;return"string"==typeof t&&e.substr(0-t.length)==t?a=e.replace(new RegExp(t+"$"),i):t instanceof RegExp&&e.match(t)&&(a=e.replace(t,i)),a&&n?n(a):a}function p(e,t,i){for(var n=null,a=0;a<t.length&&((null==i||l(u(e,t[a][0],""))>i)&&(n=u(e,t[a][0],t[a][1])),!n);a++);return n}function d(e,t,i){var n=p(e,t,i);return e=null==n?e:n}function f(e){return e.match(/(ss|i)es$/)?e.replace(/(ss|i)es$/,"$1"):"s"==e.substr(-1)&&"s"!=e.substr(-2,1)?e.replace(/s?$/,""):e}function h(e){if("eed"==e.substr(-3)){if(0<l(e.substr(0,e.length-3)))return e.replace(/eed$/,"ee")}else{var t=u(e,/ed|ing$/,"",function(e){if(0<r(e).indexOf("V")){var t=p(e,[["at","ate"],["bl","ble"],["iz","ize"]]);return t||(c(e)&&e.match(/[^lsz]$/)?e.replace(/([^aeiou])\1$/,"$1"):1==l(e)&&"CVC"==s(e).substr(-3)&&e.match(/[^wxy]$/)?e+"e":e)}return null});if(t)return t}return e}function m(e){return"V"==r(e).substr(-2,1)&&"y"==e.substr(-1)?e.replace(/y$/,"i"):e}function b(e){return d(e,[["ational","ate"],["tional","tion"],["enci","ence"],["anci","ance"],["izer","ize"],["abli","able"],["alli","al"],["entli","ent"],["eli","e"],["ousli","ous"],["ization","ize"],["ation","ate"],["ator","ate"],["alism","al"],["iveness","ive"],["fulness","ful"],["ousness","ous"],["aliti","al"],["iviti","ive"],["biliti","ble"]],0)}function g(e){return d(e,[["icate","ic"],["ative",""],["alize","al"],["iciti","ic"],["ical","ic"],["ful",""],["ness",""]],0)}function v(e){return d(e,[["al",""],["ance",""],["ence",""],["er",""],["ic",""],["able",""],["ible",""],["ant",""],["ement",""],["ment",""],["ent",""],[/([st])ion/,"$1"],["ou",""],["ism",""],["ate",""],["iti",""],["ous",""],["ive",""],["ize",""]],1)}function _(e){var t=l(e);return 1<t&&"e"==e.substr(-1)||1==t&&("CVC"!=s(e).substr(-4,3)||!e.match(/[^wxy].$/))?e.replace(/e$/,""):e}function y(e){return 1<l(e)&&c(e)&&"ll"==e.substr(-2)?e.replace(/ll$/,"l"):e}var w=new(e("./stemmer"));(t.exports=w).stem=function(e){return y(_(v(g(b(m(h(f(e.toLowerCase())))))))).toString()},w.step1a=f,w.step1b=h,w.step1c=m,w.step2=b,w.step3=g,w.step4=v,w.step5a=_,w.step5b=y}),require.define("/lib/natural/stemmers/stemmer.js",function(e,t,i,n,a,o){var r=e("../util/stopwords"),s=e("../tokenizers/aggressive_tokenizer");t.exports=function(){var n=this;n.stem=function(e){return e},n.tokenizeAndStem=function(e,t){var i=[];return(new s).tokenize(e).forEach(function(e){!t&&-1!=r.words.indexOf(e)||i.push(n.stem(e))}),i},n.attach=function(){String.prototype.stem=function(){return n.stem(this)},String.prototype.tokenizeAndStem=function(e){return n.tokenizeAndStem(this,e)}}}}),require.define("/lib/natural/tokenizers/aggressive_tokenizer.js",function(e,t,i,n,a,o){var r=e("./tokenizer"),s=e("util");AggressiveTokenizer=function(){r.call(this)},s.inherits(AggressiveTokenizer,r),t.exports=AggressiveTokenizer,AggressiveTokenizer.prototype.tokenize=function(e){return this.trim(e.split(/\W+/))}}),require.define("/lib/natural/tokenizers/tokenizer.js",function(e,t,i,n,a,o){function r(){}r.prototype.trim=function(e){return""==e[e.length-1]&&e.pop(),""==e[0]&&e.shift(),e},r.prototype.attach=function(){var e=this;String.prototype.tokenize=function(){return e.tokenize(this)}},r.prototype.tokenize=function(){},t.exports=r}),require.define("util",function(e,t,m,i,n,a){e("events");function b(e){return e instanceof Array||Array.isArray(e)||e&&e!==Object.prototype&&b(e.__proto__)}function g(e){return e instanceof RegExp||"object"==typeof e&&"[object RegExp]"===Object.prototype.toString.call(e)}function v(e){if(e instanceof Date)return!0;if("object"!=typeof e)return!1;var t=Date.prototype&&y(Date.prototype),i=e.__proto__&&y(e.__proto__);return JSON.stringify(i)===JSON.stringify(t)}m.print=function(){},m.puts=function(){},m.debug=function(){},m.inspect=function(e,d,t,i){var f=[],h=function(e,t){var i={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n={special:"cyan",number:"blue",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"}[t];return n?"["+i[n][0]+"m"+e+"["+i[n][1]+"m":e};return i||(h=function(e,t){return e}),function n(a,o){if(a&&"function"==typeof a.inspect&&a!==m&&(!a.constructor||a.constructor.prototype!==a))return a.inspect(o);switch(typeof a){case"undefined":return h("undefined","undefined");case"string":var e="'"+JSON.stringify(a).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return h(e,"string");case"number":return h(""+a,"number");case"boolean":return h(""+a,"boolean")}if(null===a)return h("null","null");var t,r,i,s=_(a),l=d?y(a):s;if("function"==typeof a&&0===l.length){if(g(a))return h(""+a,"regexp");var c=a.name?": "+a.name:"";return h("[Function"+c+"]","special")}if(v(a)&&0===l.length)return h(a.toUTCString(),"date");if(i=b(a)?(r="Array",["[","]"]):(r="Object",["{","}"]),"function"==typeof a){var u=a.name?": "+a.name:"";t=g(a)?" "+a:" [Function"+u+"]"}else t="";if(v(a)&&(t=" "+a.toUTCString()),0===l.length)return i[0]+t+i[1];if(o<0)return g(a)?h(""+a,"regexp"):h("[Object]","special");f.push(a);var p=l.map(function(e){var t,i;if(a.__lookupGetter__&&(a.__lookupGetter__(e)?i=a.__lookupSetter__(e)?h("[Getter/Setter]","special"):h("[Getter]","special"):a.__lookupSetter__(e)&&(i=h("[Setter]","special"))),s.indexOf(e)<0&&(t="["+e+"]"),i||(f.indexOf(a[e])<0?-1<(i=null===o?n(a[e]):n(a[e],o-1)).indexOf("\n")&&(i=b(a)?i.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+i.split("\n").map(function(e){return"   "+e}).join("\n")):i=h("[Circular]","special")),void 0===t){if("Array"===r&&e.match(/^\d+$/))return i;t=(t=JSON.stringify(""+e)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(t=t.substr(1,t.length-2),h(t,"name")):(t=t.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),h(t,"string"))}return t+": "+i});f.pop();return p=50<p.reduce(function(e,t){return t.indexOf("\n"),e+t.length+1},0)?i[0]+(""===t?"":t+"\n ")+" "+p.join(",\n  ")+" "+i[1]:i[0]+t+" "+p.join(", ")+" "+i[1]}(e,void 0===t?2:t)};m.log=function(e){},m.pump=null;var _=Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},y=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.hasOwnProperty.call(e,i)&&t.push(i);return t},o=Object.create||function(e,t){var i;if(null===e)i={__proto__:null};else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");function n(){}n.prototype=e,(i=new n).__proto__=e}return void 0!==t&&Object.defineProperties&&Object.defineProperties(i,t),i};m.inherits=function(e,t){e.super_=t,e.prototype=o(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}}),require.define("events",function(e,t,i,n,a,o){o.EventEmitter||(o.EventEmitter=function(){});var r=i.EventEmitter=o.EventEmitter,s="function"==typeof Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};r.prototype.setMaxListeners=function(e){this._events||(this._events={}),this._events.maxListeners=e},r.prototype.emit=function(e){if("error"===e&&(!this._events||!this._events.error||s(this._events.error)&&!this._events.error.length))throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");if(!this._events)return!1;var t=this._events[e];if(!t)return!1;if("function"==typeof t){switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:var i=Array.prototype.slice.call(arguments,1);t.apply(this,i)}return!0}if(s(t)){i=Array.prototype.slice.call(arguments,1);for(var n=t.slice(),a=0,o=n.length;a<o;a++)n[a].apply(this,i);return!0}return!1},r.prototype.addListener=function(e,t){if("function"!=typeof t)throw new Error("addListener only takes instances of Function");if(this._events||(this._events={}),this.emit("newListener",e,t),this._events[e])if(s(this._events[e])){var i;if(!this._events[e].warned)(i=void 0!==this._events.maxListeners?this._events.maxListeners:10)&&0<i&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),console.trace());this._events[e].push(t)}else this._events[e]=[this._events[e],t];else this._events[e]=t;return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,i){var n=this;return n.on(t,function e(){n.removeListener(t,e),i.apply(this,arguments)}),this},r.prototype.removeListener=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");if(!this._events||!this._events[e])return this;var i=this._events[e];if(s(i)){var n=i.indexOf(t);if(n<0)return this;i.splice(n,1),0==i.length&&delete this._events[e]}else this._events[e]===t&&delete this._events[e];return this},r.prototype.removeAllListeners=function(e){return e&&this._events&&this._events[e]&&(this._events[e]=null),this},r.prototype.listeners=function(e){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),s(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]}}),require.define("/lib/natural/stemmers/porter_stemmer_ru.js",function(e,t,i,n,a,o){var r=new(e("./stemmer_ru"));function c(e,t){for(var i=null,n=0,a=!1;n<t.length&&!a;)t[n][0].test(e)&&(i=e.replace(t[n][0],t[n][1]),a=!0),n++;return i}function u(e){var t=function(e){return c(e,[[/(ее|ие|ые|ое|ими|ыми|ей|ий|ый|ой|ем|им|ым|ом|его|ого|ему|ому|их|ых|ую|юю|ая|яя|ою|ею)$/g,""]])}(e);if(null!=t){var i=function(e){return c(e,[[/([ая])(ем|нн|вш|ющ|щ)$/g,"$1"],[/(ивш|ывш|ующ)$/g,""]])}(t);t=i||t}return t}function p(e){return c(e,[[/(ост|ость)$/g,""]])}(t.exports=r).stem=function(e){e=e.toLowerCase().replace(/ё/g,"е");var t=/^(.*?[аеиоюяуыиэ])(.*)$/g,i=t.exec(e);if(!i||i.length<3)return e;var n=i[1];i=i[2],t.lastIndex=0;var a=t.exec(i),o=function(e){return c(e,[[/[ая]в(ши|шись)$/g,""],[/(ив|ивши|ившись|ывши|ывшись|ыв)$/g,""]])}(i);if(null===o){var r=function(e){return c(e,[[/(ся|сь)$/g,""]])}(i)||i;null===(o=u(r))&&null===(o=function(e){return c(e,[[/([ая])(ла|на|ете|йте|ли|й|л|ем|н|ло|но|ет|ют|ны|ть|ешь|нно)$/g,"$1"],[/(ила|ыла|ена|ейте|уйте|ите|или|ыли|ей|уй|ил|ыл|им|ым|ен|ило|ыло|ено|ят|ует|ит|ыт|ены|ить|ыть|ишь|ую|ю)$/g,""]])}(r))&&null===(o=function(e){return c(e,[[/(а|ев|ов|ие|ье|е|иями|ями|ами|еи|ии|и|ией|ей|ой|ий|й|иям|ям|ием|ем|ам|ом|о|у|ах|иях|ях|ы|ь|ию|ью|ю|ия|ья|я)$/g,""]])}(r))&&(o=r)}var s=o=o.replace(/и$/g,"");a&&a[2]&&(s=null!=(s=p(a[2]))?p(o):o);var l=function(e){return c(e,[[/(ейш|ейше)$/g,""]])}(s)||s;return n+(l=(l=l.replace(/(н)н/g,"$1")).replace(/ь$/g,""))}}),require.define("/lib/natural/stemmers/stemmer_ru.js",function(e,t,i,n,a,o){var r=e("../util/stopwords_ru"),s=e("../tokenizers/aggressive_tokenizer_ru");t.exports=function(){var a=this;a.stem=function(e){return e},a.tokenizeAndStem=function(e,i){var n=[];return(new s).tokenize(e).forEach(function(e){if(i||-1==r.words.indexOf(e)){var t=e.toLowerCase();t.match(new RegExp("[а-яё0-9]+","gi"))&&(t=a.stem(t)),n.push(t)}}),n},a.attach=function(){String.prototype.stem=function(){return a.stem(this)},String.prototype.tokenizeAndStem=function(e){return a.tokenizeAndStem(this,e)}}}}),require.define("/lib/natural/util/stopwords_ru.js",function(e,t,i,n,a,o){i.words=["о","после","все","также","и","другие","все","как","во","быть","потому","был","до","являюсь","между","все","но","от","иди","могу","подойди","мог","делал","делаю","каждый","для","откуда","иметь","имел","он","имеет","её","здесь","его","как","если","в","оно","за","делать","много","я","может быть","более","самый","должен","мой","никогда","сейчас","из","на","только","или","другой","другая","другое","наше","вне","конец","сказал","сказала","также","видел","c","немного","все еще","так","затем","тот","их","там","этот","они","те","через","тоже","под","над","очень","был","путь","мы","хорошо","что","где","который","пока","кто","с кем","хотел бы","ты","твои","а","б","в","г","д","е","ё","ж","з","и","й","к","л","м","н","o","п","р","с","т","у","ф","х","ц","ч","ш","щ","ъ","ы","ь","э","ю","я","$","1","2","3","4","5","6","7","8","9","0","_"]}),require.define("/lib/natural/tokenizers/aggressive_tokenizer_ru.js",function(e,t,i,n,a,o){var r=e("./tokenizer"),s=e("util");AggressiveTokenizer=function(){r.call(this)},s.inherits(AggressiveTokenizer,r),t.exports=AggressiveTokenizer,AggressiveTokenizer.prototype.clearEmptyString=function(e){return e.filter(function(e){return""!=e})},AggressiveTokenizer.prototype.clearText=function(e){return e.replace(new RegExp("«|»|!|\\?","g")," ")},AggressiveTokenizer.prototype.tokenize=function(e){return e=this.clearText(e),this.clearEmptyString(e.split(/-|[|$|\b|\(|\)|[ \s\xA0'\.,:"]+/gi))}}),require.define("/lib/natural/stemmers/lancaster_stemmer.js",function(e,t,i,n,a,o){var r=e("./stemmer"),l=e("./lancaster_rules").rules;var s=new r;(t.exports=s).stem=function(e){return function e(t,i){var n,a=t.substr(-1),o=l[a];if(o)for(var r=0;r<o.length;r++)if((i||!o[r].intact)&&t.substr(0-o[r].pattern.length)==o[r].pattern){var s=t.substr(0,t.length-o[r].size);if(o[r].appendage&&(s+=o[r].appendage),(n=s).match(/^[aeiou]/)?1<n.length:2<n.length&&n.match(/[aeiouy]/))return t=s,o[r].continuation?e(s,!1):s}return t}(e.toLowerCase(),!0)}}),require.define("/lib/natural/stemmers/lancaster_rules.js",function(e,t,i,n,a,o){i.rules={a:[{continuation:!1,intact:!0,pattern:"ia",size:"2"},{continuation:!1,intact:!0,pattern:"a",size:"1"}],b:[{continuation:!1,intact:!1,pattern:"bb",size:"1"}],c:[{appendage:"s",continuation:!1,intact:!1,pattern:"ytic",size:"3"},{continuation:!0,intact:!1,pattern:"ic",size:"2"},{appendage:"t",continuation:!0,intact:!1,pattern:"nc",size:"1"}],d:[{continuation:!1,intact:!1,pattern:"dd",size:"1"},{appendage:"y",continuation:!0,intact:!1,pattern:"ied",size:"3"},{appendage:"s",continuation:!1,intact:!1,pattern:"ceed",size:"2"},{continuation:!1,intact:!1,pattern:"eed",size:"1"},{continuation:!0,intact:!1,pattern:"ed",size:"2"},{continuation:!0,intact:!1,pattern:"hood",size:"4"}],e:[{continuation:!0,intact:!1,pattern:"e",size:"1"}],f:[{appendage:"v",continuation:!1,intact:!1,pattern:"lief",size:"1"},{continuation:!0,intact:!1,pattern:"if",size:"2"}],g:[{continuation:!0,intact:!1,pattern:"ing",size:"3"},{appendage:"y",continuation:!1,intact:!1,pattern:"iag",size:"3"},{continuation:!0,intact:!1,pattern:"ag",size:"2"},{continuation:!1,intact:!1,pattern:"gg",size:"1"}],h:[{continuation:!1,intact:!0,pattern:"th",size:"2"},{appendage:"c",continuation:!1,intact:!1,pattern:"guish",size:"5"},{continuation:!0,intact:!1,pattern:"ish",size:"3"}],i:[{continuation:!1,intact:!0,pattern:"i",size:"1"},{appendage:"y",continuation:!0,intact:!1,pattern:"i",size:"1"}],j:[{appendage:"d",continuation:!1,intact:!1,pattern:"ij",size:"1"},{appendage:"s",continuation:!1,intact:!1,pattern:"fuj",size:"1"},{appendage:"d",continuation:!1,intact:!1,pattern:"uj",size:"1"},{appendage:"d",continuation:!1,intact:!1,pattern:"oj",size:"1"},{appendage:"r",continuation:!1,intact:!1,pattern:"hej",size:"1"},{appendage:"t",continuation:!1,intact:!1,pattern:"verj",size:"1"},{appendage:"t",continuation:!1,intact:!1,pattern:"misj",size:"2"},{appendage:"d",continuation:!1,intact:!1,pattern:"nj",size:"1"},{appendage:"s",continuation:!1,intact:!1,pattern:"j",size:"1"}],l:[{continuation:!1,intact:!1,pattern:"ifiabl",size:"6"},{appendage:"y",continuation:!1,intact:!1,pattern:"iabl",size:"4"},{continuation:!0,intact:!1,pattern:"abl",size:"3"},{continuation:!1,intact:!1,pattern:"ibl",size:"3"},{appendage:"l",continuation:!0,intact:!1,pattern:"bil",size:"2"},{continuation:!1,intact:!1,pattern:"cl",size:"1"},{appendage:"y",continuation:!1,intact:!1,pattern:"iful",size:"4"},{continuation:!0,intact:!1,pattern:"ful",size:"3"},{continuation:!1,intact:!1,pattern:"ul",size:"2"},{continuation:!0,intact:!1,pattern:"ial",size:"3"},{continuation:!0,intact:!1,pattern:"ual",size:"3"},{continuation:!0,intact:!1,pattern:"al",size:"2"},{continuation:!1,intact:!1,pattern:"ll",size:"1"}],m:[{continuation:!1,intact:!1,pattern:"ium",size:"3"},{continuation:!1,intact:!0,pattern:"um",size:"2"},{continuation:!0,intact:!1,pattern:"ism",size:"3"},{continuation:!1,intact:!1,pattern:"mm",size:"1"}],n:[{appendage:"j",continuation:!0,intact:!1,pattern:"sion",size:"4"},{appendage:"c",continuation:!1,intact:!1,pattern:"xion",size:"4"},{continuation:!0,intact:!1,pattern:"ion",size:"3"},{continuation:!0,intact:!1,pattern:"ian",size:"3"},{continuation:!0,intact:!1,pattern:"an",size:"2"},{continuation:!1,intact:!1,pattern:"een",size:"0"},{continuation:!0,intact:!1,pattern:"en",size:"2"},{continuation:!1,intact:!1,pattern:"nn",size:"1"}],p:[{continuation:!0,intact:!1,pattern:"ship",size:"4"},{continuation:!1,intact:!1,pattern:"pp",size:"1"}],r:[{continuation:!0,intact:!1,pattern:"er",size:"2"},{continuation:!1,intact:!1,pattern:"ear",size:"0"},{continuation:!1,intact:!1,pattern:"ar",size:"2"},{continuation:!0,intact:!1,pattern:"or",size:"2"},{continuation:!0,intact:!1,pattern:"ur",size:"2"},{continuation:!1,intact:!1,pattern:"rr",size:"1"},{continuation:!0,intact:!1,pattern:"tr",size:"1"},{appendage:"y",continuation:!0,intact:!1,pattern:"ier",size:"3"}],s:[{appendage:"y",continuation:!0,intact:!1,pattern:"ies",size:"3"},{continuation:!1,intact:!1,pattern:"sis",size:"2"},{continuation:!0,intact:!1,pattern:"is",size:"2"},{continuation:!0,intact:!1,pattern:"ness",size:"4"},{continuation:!1,intact:!1,pattern:"ss",size:"0"},{continuation:!0,intact:!1,pattern:"ous",size:"3"},{continuation:!1,intact:!0,pattern:"us",size:"2"},{continuation:!0,intact:!0,pattern:"s",size:"1"},{continuation:!1,intact:!1,pattern:"s",size:"0"}],t:[{appendage:"y",continuation:!1,intact:!1,pattern:"plicat",size:"4"},{continuation:!0,intact:!1,pattern:"at",size:"2"},{continuation:!0,intact:!1,pattern:"ment",size:"4"},{continuation:!0,intact:!1,pattern:"ent",size:"3"},{continuation:!0,intact:!1,pattern:"ant",size:"3"},{appendage:"b",continuation:!1,intact:!1,pattern:"ript",size:"2"},{appendage:"b",continuation:!1,intact:!1,pattern:"orpt",size:"2"},{continuation:!1,intact:!1,pattern:"duct",size:"1"},{continuation:!1,intact:!1,pattern:"sumpt",size:"2"},{appendage:"i",continuation:!1,intact:!1,pattern:"cept",size:"2"},{appendage:"v",continuation:!1,intact:!1,pattern:"olut",size:"2"},{continuation:!1,intact:!1,pattern:"sist",size:"0"},{continuation:!0,intact:!1,pattern:"ist",size:"3"},{continuation:!1,intact:!1,pattern:"tt",size:"1"}],u:[{continuation:!1,intact:!1,pattern:"iqu",size:"3"},{continuation:!1,intact:!1,pattern:"ogu",size:"1"}],v:[{appendage:"j",continuation:!0,intact:!1,pattern:"siv",size:"3"},{continuation:!1,intact:!1,pattern:"eiv",size:"0"},{continuation:!0,intact:!1,pattern:"iv",size:"2"}],y:[{continuation:!0,intact:!1,pattern:"bly",size:"1"},{appendage:"y",continuation:!0,intact:!1,pattern:"ily",size:"3"},{continuation:!1,intact:!1,pattern:"ply",size:"0"},{continuation:!0,intact:!1,pattern:"ly",size:"2"},{continuation:!1,intact:!1,pattern:"ogy",size:"1"},{continuation:!1,intact:!1,pattern:"phy",size:"1"},{continuation:!1,intact:!1,pattern:"omy",size:"1"},{continuation:!1,intact:!1,pattern:"opy",size:"1"},{continuation:!0,intact:!1,pattern:"ity",size:"3"},{continuation:!0,intact:!1,pattern:"ety",size:"3"},{continuation:!1,intact:!1,pattern:"lty",size:"2"},{continuation:!1,intact:!1,pattern:"istry",size:"5"},{continuation:!0,intact:!1,pattern:"ary",size:"3"},{continuation:!0,intact:!1,pattern:"ory",size:"3"},{continuation:!1,intact:!1,pattern:"ify",size:"3"},{appendage:"t",continuation:!0,intact:!1,pattern:"ncy",size:"2"},{continuation:!0,intact:!1,pattern:"acy",size:"3"}],z:[{continuation:!0,intact:!1,pattern:"iz",size:"2"},{appendage:"s",continuation:!1,intact:!1,pattern:"yz",size:"1"}]}}),require.define("/lib/natural/tokenizers/regexp_tokenizer.js",function(e,t,i,n,a,o){var r=e("util"),s=e("underscore")._,l=e("./tokenizer");RegexpTokenizer=function(e){e=e||{};this._pattern=e.pattern||this._pattern,this.discardEmpty=e.discardEmpty||!0,this._gaps=e.gaps,void 0===this._gaps&&(this._gaps=!0)},r.inherits(RegexpTokenizer,l),RegexpTokenizer.prototype.tokenize=function(e){var t;return this._gaps?(t=e.split(this._pattern),this.discardEmpty?s.without(t,""," "):t):e.match(this._pattern)},i.RegexpTokenizer=RegexpTokenizer,WordTokenizer=function(e){this._pattern=/\W+/,RegexpTokenizer.call(this,e)},r.inherits(WordTokenizer,RegexpTokenizer),i.WordTokenizer=WordTokenizer,WordPunctTokenizer=function(e){this._pattern=new RegExp(/(\w+|\!|\'|\"")/i),RegexpTokenizer.call(this,e)},r.inherits(WordPunctTokenizer,RegexpTokenizer),i.WordPunctTokenizer=WordPunctTokenizer}),require.define("/node_modules/underscore/package.json",function(e,t,i,n,a,o){t.exports={main:"underscore.js"}}),require.define("/node_modules/underscore/underscore.js",function(e,D,M,t,i,n){(function(){var e=this,t=e._,r={},a=Array.prototype,i=Object.prototype,n=Function.prototype,s=a.slice,o=a.unshift,c=i.toString,l=i.hasOwnProperty,u=a.forEach,p=a.map,d=a.reduce,f=a.reduceRight,h=a.filter,m=a.every,b=a.some,g=a.indexOf,v=a.lastIndexOf,_=Array.isArray,y=Object.keys,w=n.bind,S=function(e){return new F(e)};void 0!==M?(void 0!==D&&D.exports&&(M=D.exports=S),M._=S):e._=S,S.VERSION="1.3.3";var x=S.each=S.forEach=function(e,t,i){if(null!=e)if(u&&e.forEach===u)e.forEach(t,i);else if(e.length===+e.length){for(var n=0,a=e.length;n<a;n++)if(n in e&&t.call(i,e[n],n,e)===r)return}else for(var o in e)if(S.has(e,o)&&t.call(i,e[o],o,e)===r)return};S.map=S.collect=function(e,n,a){var o=[];return null==e?o:p&&e.map===p?e.map(n,a):(x(e,function(e,t,i){o[o.length]=n.call(a,e,t,i)}),e.length===+e.length&&(o.length=e.length),o)},S.reduce=S.foldl=S.inject=function(e,n,a,o){var r=2<arguments.length;if(null==e&&(e=[]),d&&e.reduce===d)return o&&(n=S.bind(n,o)),r?e.reduce(n,a):e.reduce(n);if(x(e,function(e,t,i){r?a=n.call(o,a,e,t,i):(a=e,r=!0)}),!r)throw new TypeError("Reduce of empty array with no initial value");return a},S.reduceRight=S.foldr=function(e,t,i,n){var a=2<arguments.length;if(null==e&&(e=[]),f&&e.reduceRight===f)return n&&(t=S.bind(t,n)),a?e.reduceRight(t,i):e.reduceRight(t);var o=S.toArray(e).reverse();return n&&!a&&(t=S.bind(t,n)),a?S.reduce(o,t,i,n):S.reduce(o,t)},S.find=S.detect=function(e,n,a){var o;return k(e,function(e,t,i){if(n.call(a,e,t,i))return o=e,!0}),o},S.filter=S.select=function(e,n,a){var o=[];return null==e?o:h&&e.filter===h?e.filter(n,a):(x(e,function(e,t,i){n.call(a,e,t,i)&&(o[o.length]=e)}),o)},S.reject=function(e,n,a){var o=[];return null==e||x(e,function(e,t,i){n.call(a,e,t,i)||(o[o.length]=e)}),o},S.every=S.all=function(e,n,a){var o=!0;return null==e?o:m&&e.every===m?e.every(n,a):(x(e,function(e,t,i){if(!(o=o&&n.call(a,e,t,i)))return r}),!!o)};var k=S.some=S.any=function(e,n,a){n=n||S.identity;var o=!1;return null==e?o:b&&e.some===b?e.some(n,a):(x(e,function(e,t,i){if(o=o||n.call(a,e,t,i))return r}),!!o)};S.include=S.contains=function(e,t){var i=!1;return null==e?i:g&&e.indexOf===g?-1!=e.indexOf(t):i=k(e,function(e){return e===t})},S.invoke=function(e,t){var i=s.call(arguments,2);return S.map(e,function(e){return(S.isFunction(t)?t||e:e[t]).apply(e,i)})},S.pluck=function(e,t){return S.map(e,function(e){return e[t]})},S.max=function(e,a,o){if(!a&&S.isArray(e)&&e[0]===+e[0])return Math.max.apply(Math,e);if(!a&&S.isEmpty(e))return-1/0;var r={computed:-1/0};return x(e,function(e,t,i){var n=a?a.call(o,e,t,i):e;n>=r.computed&&(r={value:e,computed:n})}),r.value},S.min=function(e,a,o){if(!a&&S.isArray(e)&&e[0]===+e[0])return Math.min.apply(Math,e);if(!a&&S.isEmpty(e))return 1/0;var r={computed:1/0};return x(e,function(e,t,i){var n=a?a.call(o,e,t,i):e;n<r.computed&&(r={value:e,computed:n})}),r.value},S.shuffle=function(e){var n,a=[];return x(e,function(e,t,i){n=Math.floor(Math.random()*(t+1)),a[t]=a[n],a[n]=e}),a},S.sortBy=function(e,t,n){var a=S.isFunction(t)?t:function(e){return e[t]};return S.pluck(S.map(e,function(e,t,i){return{value:e,criteria:a.call(n,e,t,i)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;return void 0===i?1:void 0===n?-1:i<n?-1:n<i?1:0}),"value")},S.groupBy=function(e,t){var n={},a=S.isFunction(t)?t:function(e){return e[t]};return x(e,function(e,t){var i=a(e,t);(n[i]||(n[i]=[])).push(e)}),n},S.sortedIndex=function(e,t,i){i=i||S.identity;for(var n=0,a=e.length;n<a;){var o=n+a>>1;i(e[o])<i(t)?n=1+o:a=o}return n},S.toArray=function(e){return e?S.isArray(e)?s.call(e):S.isArguments(e)?s.call(e):e.toArray&&S.isFunction(e.toArray)?e.toArray():S.values(e):[]},S.size=function(e){return S.isArray(e)?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,i){return null==t||i?e[0]:s.call(e,0,t)},S.initial=function(e,t,i){return s.call(e,0,e.length-(null==t||i?1:t))},S.last=function(e,t,i){return null==t||i?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},S.rest=S.tail=function(e,t,i){return s.call(e,null==t||i?1:t)},S.compact=function(e){return S.filter(e,function(e){return!!e})},S.flatten=function(e,i){return S.reduce(e,function(e,t){return S.isArray(t)?e.concat(i?t:S.flatten(t)):(e[e.length]=t,e)},[])},S.without=function(e){return S.difference(e,s.call(arguments,1))},S.uniq=S.unique=function(n,a,e){var t=e?S.map(n,e):n,o=[];return n.length<3&&(a=!0),S.reduce(t,function(e,t,i){return(a?S.last(e)===t&&e.length:S.include(e,t))||(e.push(t),o.push(n[i])),e},[]),o},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=S.intersect=function(e){var i=s.call(arguments,1);return S.filter(S.uniq(e),function(t){return S.every(i,function(e){return 0<=S.indexOf(e,t)})})},S.difference=function(e){var t=S.flatten(s.call(arguments,1),!0);return S.filter(e,function(e){return!S.include(t,e)})},S.zip=function(){for(var e=s.call(arguments),t=S.max(S.pluck(e,"length")),i=new Array(t),n=0;n<t;n++)i[n]=S.pluck(e,""+n);return i},S.indexOf=function(e,t,i){if(null==e)return-1;var n,a;if(i)return e[n=S.sortedIndex(e,t)]===t?n:-1;if(g&&e.indexOf===g)return e.indexOf(t);for(n=0,a=e.length;n<a;n++)if(n in e&&e[n]===t)return n;return-1},S.lastIndexOf=function(e,t){if(null==e)return-1;if(v&&e.lastIndexOf===v)return e.lastIndexOf(t);for(var i=e.length;i--;)if(i in e&&e[i]===t)return i;return-1},S.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=i||1;for(var n=Math.max(Math.ceil((t-e)/i),0),a=0,o=new Array(n);a<n;)o[a++]=e,e+=i;return o};function $(){}S.bind=function(i,n){var a,o;if(i.bind===w&&w)return w.apply(i,s.call(arguments,1));if(!S.isFunction(i))throw new TypeError;return o=s.call(arguments,2),a=function(){if(!(this instanceof a))return i.apply(n,o.concat(s.call(arguments)));$.prototype=i.prototype;var e=new $,t=i.apply(e,o.concat(s.call(arguments)));return Object(t)===t?t:e}},S.bindAll=function(t){var e=s.call(arguments,1);return 0==e.length&&(e=S.functions(t)),x(e,function(e){t[e]=S.bind(t[e],t)}),t},S.memoize=function(t,i){var n={};return i=i||S.identity,function(){var e=i.apply(this,arguments);return S.has(n,e)?n[e]:n[e]=t.apply(this,arguments)}},S.delay=function(e,t){var i=s.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(s.call(arguments,1)))},S.throttle=function(e,t){var i,n,a,o,r,s,l=S.debounce(function(){r=o=!1},t);return function(){i=this,n=arguments;return a=a||setTimeout(function(){a=null,r&&e.apply(i,n),l()},t),o?r=!0:s=e.apply(i,n),l(),o=!0,s}},S.debounce=function(i,n,a){var o;return function(){var e=this,t=arguments;a&&!o&&i.apply(e,t),clearTimeout(o),o=setTimeout(function(){o=null,a||i.apply(e,t)},n)}},S.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments))}},S.wrap=function(t,i){return function(){var e=[t].concat(s.call(arguments,0));return i.apply(this,e)}},S.compose=function(){var i=arguments;return function(){for(var e=arguments,t=i.length-1;0<=t;t--)e=[i[t].apply(this,e)];return e[0]}},S.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},S.keys=y||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var i in e)S.has(e,i)&&(t[t.length]=i);return t},S.values=function(e){return S.map(e,S.identity)},S.functions=S.methods=function(e){var t=[];for(var i in e)S.isFunction(e[i])&&t.push(i);return t.sort()},S.extend=function(i){return x(s.call(arguments,1),function(e){for(var t in e)i[t]=e[t]}),i},S.pick=function(t){var i={};return x(S.flatten(s.call(arguments,1)),function(e){e in t&&(i[e]=t[e])}),i},S.defaults=function(i){return x(s.call(arguments,1),function(e){for(var t in e)null==i[t]&&(i[t]=e[t])}),i},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e},S.isEqual=function(e,t){return function e(t,i,n){if(t===i)return 0!==t||1/t==1/i;if(null==t||null==i)return t===i;if(t._chain&&(t=t._wrapped),i._chain&&(i=i._wrapped),t.isEqual&&S.isFunction(t.isEqual))return t.isEqual(i);if(i.isEqual&&S.isFunction(i.isEqual))return i.isEqual(t);var a=c.call(t);if(a!=c.call(i))return!1;switch(a){case"[object String]":return t==String(i);case"[object Number]":return t!=+t?i!=+i:0==t?1/t==1/i:t==+i;case"[object Date]":case"[object Boolean]":return+t==+i;case"[object RegExp]":return t.source==i.source&&t.global==i.global&&t.multiline==i.multiline&&t.ignoreCase==i.ignoreCase}if("object"!=typeof t||"object"!=typeof i)return!1;for(var o=n.length;o--;)if(n[o]==t)return!0;n.push(t);var r=0,s=!0;if("[object Array]"==a){if(s=(r=t.length)==i.length)for(;r--&&(s=r in t==r in i&&e(t[r],i[r],n)););}else{if("constructor"in t!="constructor"in i||t.constructor!=i.constructor)return!1;for(var l in t)if(S.has(t,l)&&(r++,!(s=S.has(i,l)&&e(t[l],i[l],n))))break;if(s){for(l in i)if(S.has(i,l)&&!r--)break;s=!r}}return n.pop(),s}(e,t,[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!=e.nodeType)},S.isArray=_||function(e){return"[object Array]"==c.call(e)},S.isObject=function(e){return e===Object(e)},S.isArguments=function(e){return"[object Arguments]"==c.call(e)},S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),S.isFunction=function(e){return"[object Function]"==c.call(e)},S.isString=function(e){return"[object String]"==c.call(e)},S.isNumber=function(e){return"[object Number]"==c.call(e)},S.isFinite=function(e){return S.isNumber(e)&&isFinite(e)},S.isNaN=function(e){return e!=e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==c.call(e)},S.isDate=function(e){return"[object Date]"==c.call(e)},S.isRegExp=function(e){return"[object RegExp]"==c.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return l.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.times=function(e,t,i){for(var n=0;n<e;n++)t.call(i,n)},S.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},S.result=function(e,t){if(null==e)return null;var i=e[t];return S.isFunction(i)?i.call(e):i},S.mixin=function(t){x(S.functions(t),function(e){E(e,S[e]=t[e])})};var C=0;S.uniqueId=function(e){var t=C++;return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/.^/,z={"\\":"\\","'":"'",r:"\r",n:"\n",t:"\t",u2028:"\u2028",u2029:"\u2029"};for(var P in z)z[z[P]]=P;function A(e){return e.replace(j,function(e,t){return z[t]})}var O=/\\|'|\r|\n|\t|\u2028|\u2029/g,j=/\\(\\|'|r|n|t|u2028|u2029)/g;S.template=function(e,t,i){i=S.defaults(i||{},S.templateSettings);var n="__p+='"+e.replace(O,function(e){return"\\"+z[e]}).replace(i.escape||T,function(e,t){return"'+\n_.escape("+A(t)+")+\n'"}).replace(i.interpolate||T,function(e,t){return"'+\n("+A(t)+")+\n'"}).replace(i.evaluate||T,function(e,t){return"';\n"+A(t)+"\n;__p+='"})+"';\n";i.variable||(n="with(obj||{}){\n"+n+"}\n"),n="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+n+"return __p;\n";var a=new Function(i.variable||"obj","_",n);if(t)return a(t,S);function o(e){return a.call(this,e,S)}return o.source="function("+(i.variable||"obj")+"){\n"+n+"}",o},S.chain=function(e){return S(e).chain()};var F=function(e){this._wrapped=e};S.prototype=F.prototype;function I(e,t){return t?S(e).chain():e}var E=function(e,t){F.prototype[e]=function(){var e=s.call(arguments);return o.call(e,this._wrapped),I(t.apply(S,e),this._chain)}};S.mixin(S),x(["pop","push","reverse","shift","sort","splice","unshift"],function(i){var n=a[i];F.prototype[i]=function(){var e=this._wrapped;n.apply(e,arguments);var t=e.length;return"shift"!=i&&"splice"!=i||0!==t||delete e[0],I(e,this._chain)}}),x(["concat","join","slice"],function(e){var t=a[e];F.prototype[e]=function(){return I(t.apply(this._wrapped,arguments),this._chain)}}),F.prototype.chain=function(){return this._chain=!0,this},F.prototype.value=function(){return this._wrapped}}).call(this)}),require.define("/lib/natural/tokenizers/treebank_word_tokenizer.js",function(e,t,i,n,a,o){var r=e("util"),s=e("./tokenizer"),l=e("underscore")._,c=[/(.)('ll|'re|'ve|n't|'s|'m|'d)\b/gi,/\b(can)(not)\b/gi,/\b(D)('ye)\b/gi,/\b(Gim)(me)\b/gi,/\b(Gon)(na)\b/gi,/\b(Got)(ta)\b/gi,/\b(Lem)(me)\b/gi,/\b(Mor)('n)\b/gi,/\b(T)(is)\b/gi,/\b(T)(was)\b/gi,/\b(Wan)(na)\b/gi],u=[/\b(Whad)(dd)(ya)\b/gi,/\b(Wha)(t)(cha)\b/gi];TreebankWordTokenizer=function(){},r.inherits(TreebankWordTokenizer,s),TreebankWordTokenizer.prototype.tokenize=function(t){return c.forEach(function(e){t=t.replace(e,"$1 $2")}),u.forEach(function(e){t=t.replace(e,"$1 $2 $3")}),t=(t=(t=(t=t.replace(/([^\w\.\'\-\/\+\<\>,&])/g," $1 ")).replace(/(,\s)/g," $1")).replace(/('\s)/g," $1")).replace(/\. *(\n|$)/g," . "),l.without(t.split(/\s+/),"")},t.exports=TreebankWordTokenizer}),require.define("/lib/natural/inflectors/noun_inflector.js",function(e,t,i,n,a,o){var r=e("./singular_plural_inflector"),s=e("util"),l=e("./form_set");function c(){var e=this;String.prototype.singularizeNoun=function(){return e.singularize(this)},String.prototype.pluralizeNoun=function(){return e.pluralize(this)}}function u(){this.ambiguous=["bison","bream","carp","chassis","cod","corps","debris","deer","diabetes","equipment","elk","fish","flounder","gallows","graffiti","headquarters","herpes","highjinks","homework","information","mackerel","mews","money","news","rice","rabies","salmon","series","sheep","shrimp","species","swine","trout","tuna","whiting","wildebeest"],this.customPluralForms=[],this.customSingularForms=[],this.singularForms=new l,this.pluralForms=new l,this.attach=c,this.addIrregular("child","children"),this.addIrregular("man","men"),this.addIrregular("person","people"),this.addIrregular("sex","sexes"),this.addIrregular("mouse","mice"),this.addIrregular("ox","oxen"),this.addIrregular("foot","feet"),this.addIrregular("tooth","teeth"),this.addIrregular("goose","geese"),this.pluralForms.regularForms.push([/y$/i,"ies"]),this.pluralForms.regularForms.push([/ife$/i,"ives"]),this.pluralForms.regularForms.push([/(antenn|formul|nebul|vertebr|vit)a$/i,"$1ae"]),this.pluralForms.regularForms.push([/(octop|vir|radi|nucle|fung|cact|stimul)us$/i,"$1i"]),this.pluralForms.regularForms.push([/(buffal|tomat)o$/i,"$1oes"]),this.pluralForms.regularForms.push([/(sis)$/i,"ses"]),this.pluralForms.regularForms.push([/(matr|vert|ind)(ix|ex)$/i,"$1ices"]),this.pluralForms.regularForms.push([/(x|ch|ss|sh|s|z)$/i,"$1es"]),this.pluralForms.regularForms.push([/^(?!talis|.*hu)(.*)man$/i,"$1men"]),this.pluralForms.regularForms.push([/(.*)/i,"$1s"]),this.singularForms.regularForms.push([/([^v])ies$/i,"$1y"]),this.singularForms.regularForms.push([/ives$/i,"ife"]),this.singularForms.regularForms.push([/(antenn|formul|nebul|vertebr|vit)ae$/i,"$1a"]),this.singularForms.regularForms.push([/(octop|vir|radi|nucle|fung|cact|stimul)(i)$/i,"$1us"]),this.singularForms.regularForms.push([/(buffal|tomat)(oes)$/i,"$1o"]),this.singularForms.regularForms.push([/(analy|naly|synop|parenthe|diagno|the)ses$/i,"$1sis"]),this.singularForms.regularForms.push([/(vert|ind)(ices)$/i,"$1ex"]),this.singularForms.regularForms.push([/(matr|append)(ices)$/i,"$1ix"]),this.singularForms.regularForms.push([/(x|ch|ss|sh|s|z)es$/i,"$1"]),this.singularForms.regularForms.push([/men$/i,"man"]),this.singularForms.regularForms.push([/s$/i,""]),this.pluralize=function(e){return this.ize(e,this.pluralForms,this.customPluralForms)},this.singularize=function(e){return this.ize(e,this.singularForms,this.customSingularForms)}}s.inherits(u,r),t.exports=u}),require.define("/lib/natural/inflectors/singular_plural_inflector.js",function(e,t,i,n,a,o){function r(){}r.prototype.addSingular=function(e,t){this.customSingularForms.push([e,t])},r.prototype.addPlural=function(e,t){this.customPluralForms.push([e,t])},r.prototype.ize=function(e,t,i){return this.restoreCase(e)(this.izeRegExps(e,i)||this.izeAbiguous(e)||this.izeRegulars(e,t)||this.izeRegExps(e,t.regularForms)||e)},r.prototype.izeAbiguous=function(e){return-1<this.ambiguous.indexOf(e.toLowerCase())&&e.toLowerCase()},r.prototype.pluralize=function(e){return this.ize(e,this.pluralForms,this.customPluralForms)},r.prototype.singularize=function(e){return this.ize(e,this.singularForms,this.customSingularForms)};function s(e){return e.toUpperCase()}function l(e){return e[0].toUpperCase()+e.slice(1)}function c(e){return e.toLowerCase()}r.prototype.restoreCase=function(e){return e[0]===e[0].toUpperCase()?e[1]&&e[1]===e[1].toLowerCase()?l:s:c},r.prototype.izeRegulars=function(e,t){return e=e.toLowerCase(),!!t.irregularForms[e]&&t.irregularForms[e]},r.prototype.addForm=function(e,t,i,n){i=i.toLowerCase(),n=n.toLowerCase(),e[t[i]=n]=i},r.prototype.addIrregular=function(e,t){this.addForm(this.singularForms.irregularForms,this.pluralForms.irregularForms,e,t)},r.prototype.izeRegExps=function(e,t){var i,n;for(i=0;i<t.length;i++)if(n=t[i],e.match(n[0]))return e.replace(n[0],n[1]);return!1},t.exports=r}),require.define("/lib/natural/inflectors/form_set.js",function(e,t,i,n,a,o){t.exports=function(){this.regularForms=[],this.irregularForms={}}}),require.define("/lib/natural/inflectors/present_verb_inflector.js",function(e,t,i,n,a,o){var r=e("util"),s=e("./singular_plural_inflector"),l=e("./form_set");function c(){var e=this;String.prototype.singularizePresentVerb=function(){return e.singularize(this)},String.prototype.pluralizePresentVerb=function(){return e.pluralize(this)}}function u(){this.ambiguous=["will"],this.attach=c,this.customPluralForms=[],this.customSingularForms=[],this.singularForms=new l,this.pluralForms=new l,this.addIrregular("am","are"),this.addIrregular("is","are"),this.addIrregular("was","were"),this.singularForms.regularForms.push([/ed$/i,"ed"]),this.singularForms.regularForms.push([/ss$/i,"sses"]),this.singularForms.regularForms.push([/x$/i,"xes"]),this.singularForms.regularForms.push([/(h|z|o)$/i,"$1es"]),this.singularForms.regularForms.push([/$zz/i,"zzes"]),this.singularForms.regularForms.push([/$/i,"s"]),this.pluralForms.regularForms.push([/sses$/i,"ss"]),this.pluralForms.regularForms.push([/xes$/i,"x"]),this.pluralForms.regularForms.push([/([cs])hes$/i,"$1h"]),this.pluralForms.regularForms.push([/zzes$/i,"zz"]),this.pluralForms.regularForms.push([/([^h|z|o])es$/i,"$1e"]),this.pluralForms.regularForms.push([/e?s$/i,""])}r.inherits(u,s),t.exports=u}),require.define("/lib/natural/inflectors/count_inflector.js",function(e,t,i,n,a,o){function r(){}r.nth=function(e){return e.toString()+function(e){if(teenth=e%100,10<teenth&&teenth<14)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}(e)},t.exports=r}),require.define("/lib/natural/tfidf/tfidf.js",function(e,t,i,n,a,o){var r=e("underscore")._,s=new(e("../tokenizers/regexp_tokenizer").WordTokenizer),l=e("../util/stopwords").words,c=e("fs");function u(e,t){var i;if("string"==typeof e)e=s.tokenize(e.toLowerCase()),i=!0;else if(!r.isArray(e))return e;return e.reduce(function(e,t){return(!i||l.indexOf(t)<0)&&(e[t]=e[t]?e[t]+1:1),e},{__key:t})}function p(e,t){return t[e]?t[e]:0}function d(e){this.documents=e?e.documents:[]}(t.exports=d).tf=p,d.prototype.idf=function(i){var e=this.documents.reduce(function(e,t){return e+(function(e,t){return t[e]&&0<t[e]}(i,t)?1:0)},1);return Math.log(this.documents.length+1/e)},d.prototype.addDocument=function(e,t){this.documents.push(u(e,t))},d.prototype.addFileSync=function(e,t,i){var n=c.readFileSync(e,"UTF-8");this.documents.push(u(n,i))},d.prototype.tfidf=function(e,i){var n=this;return r.isArray(e)||(e=s.tokenize(e.toString().toLowerCase())),e.reduce(function(e,t){return e+p(t,n.documents[i])*n.idf(t)},0)},d.prototype.listTerms=function(e){var t=[];for(term in this.documents[e])t.push({term:term,tfidf:this.tfidf(term,e)});return t.sort(function(e,t){return t.tfidf-e.tfidf})},d.prototype.tfidfs=function(e,t){for(var i=new Array(this.documents.length),n=0;n<this.documents.length;n++)i[n]=this.tfidf(e,n),t&&t(n,i[n],this.documents[n].__key);return i}}),require.define("fs",function(e,t,i,n,a,o){}),require.define("/lib/natural/analyzers/sentence_analyzer.js",function(e,t,i,n,a,o){function r(e,t){this.posObj=e,this.senType=null,t(this)}var s=e("underscore")._;r.prototype.part=function(e){var t=[],i=[],n=!1;this.prepositionPhrases();for(var a=0;a<this.posObj.tags.length;a++)"VB"==this.posObj.tags[a].pos&&(0===a?n=!0:"EX"!=this.posObj.tags[a-1].pos?n=!0:i.push(this.posObj.tags[a].token)),n?(1!=this.posObj.tags[a].pp&&(this.posObj.tags[a].spos="PP"),i.push(this.posObj.tags[a].token)):(1!=this.posObj.tags[a].pp&&(this.posObj.tags[a].spos="SP"),t.push(this.posObj.tags[a].token));0==t.length&&this.posObj.tags.push({token:"You",spos:"SP",pos:"PRP",added:!0}),e(this)},r.prototype.prepositionPhrases=function(){for(var e=!1,t=0;t<this.posObj.tags.length;t++)this.posObj.tags[t].pos.match("IN")&&(e=!0),e&&(this.posObj.tags[t].pp=!0),this.posObj.tags[t].pos.match("NN")&&(e=!1)},r.prototype.subjectToString=function(){return this.posObj.tags.map(function(e){if("SP"==e.spos||"S"==e.spos)return e.token}).join(" ")},r.prototype.predicateToString=function(){return this.posObj.tags.map(function(e){if("PP"==e.spos||"P"==e.spos)return e.token}).join(" ")},r.prototype.implicitYou=function(){for(var e=0;e<this.posObj.tags.length;e++)if(this.posObj.tags[e].added)return!0;return!1},r.prototype.toString=function(){return this.posObj.tags.map(function(e){return e.token}).join(" ")},r.prototype.type=function(e){e=e||!1;var t=this.posObj.punct();if("."!==(t=0!=t.length?t.pop():this.posObj.tags.pop()).pos)this.implicitYou()?this.senType="COMMAND":s(["WDT","WP","WP$","WRB"]).contains(this.posObj.tags[0].pos)?this.senType="INTERROGATIVE":s(["PRP"]).contains(t.pos)?this.senType="INTERROGATIVE":this.senType="UNKNOWN";else switch(t.token){case"?":this.senType="INTERROGATIVE";break;case"!":this.senType=this.implicitYou()?"COMMAND":"EXCLAMATORY";break;case".":this.senType=this.implicitYou()?"COMMAND":"DECLARATIVE"}if(!e||!s(e).isFunction())return this.senType;e(this)},t.exports=r}),require.define("/lib/natural/ngrams/ngrams.js",function(e,t,i,n,a,o){var r=e("underscore")._,s=new(e("../tokenizers/regexp_tokenizer").WordTokenizer);i.ngrams=function(e,t){return l(e,t)},i.bigrams=function(e){return l(e,2)},i.trigrams=function(e){return l(e,3)};var l=function(e,t){var i=[];r(e).isArray()||(e=s.tokenize(e));for(var n=r.max([0,e.length-t+1]),a=0;a<n;a++)i.push(e.slice(a,a+t));return i}}),require.define("/lib/natural/distance/jaro-winkler_distance.js",function(e,t,i,n,a,o){t.exports=function(e,t,i){var n;n=void 0===i?function(e,t){if("string"!=typeof e||"string"!=typeof t)return 0;if(0==e.length||0==t.length)return 0;e=e.toLowerCase(),t=t.toLowerCase();for(var i=Math.floor(Math.max(e.length,t.length)/2)-1,n=new Array(e.length),a=new Array(t.length),o=0,r=0,s=0;s<e.length;s++){var l=!1;if(e[s]==t[s])n[s]=a[s]=l=!0,o++;else for(c=s<=i?0:s-i;c<=s+i&&c<t.length&&!l;c++)e[s]==t[c]&&(n[s]||a[c]||o++,n[s]=a[c]=l=!0)}if(0==o)return 0;var c=0;for(s=0;s<e.length;s++)if(n[c]){for(;!a[c]&&c<a.length;)c++;e[s]!=t[c]&&c<a.length&&r++,c++}return r/=2,(o/e.length+o/t.length+(o-r)/o)/3}(e,t):i;for(var a=0;e[a]==t[a]&&a<4;)a++;return n+.1*a*(1-n)}}),require.define("/lib/natural/distance/levenshtein_distance.js",function(e,t,i,n,a,o){t.exports=function(e,t,i){(i=i||{}).insertion_cost=i.insertion_cost||1,i.deletion_cost=i.deletion_cost||1,i.substitution_cost=i.substitution_cost||2;for(var n=e.length,a=t.length,o=[[0]],r=1;r<=n;r++)o[r]=[],o[r][0]=o[r-1][0]+i.deletion_cost;for(var s=1;s<=a;s++)o[0][s]=o[0][s-1]+i.insertion_cost;for(r=1;r<=n;r++)for(s=1;s<=a;s++){var l=o[r][s-1]+i.insertion_cost,c=o[r-1][s]+i.deletion_cost,u=e[r-1],p=t[s-1],d=o[r-1][s-1];u!==p&&(d+=i.substitution_cost),o[r][s]=Math.min(l,c,d)}return o[n][a]}}),require.define("/lib/natural/distance/dice_coefficient.js",function(e,t,i,n,a,o){function r(e){for(var t=e.length-1,i=new Array(t),n=0;n<t;n++)i[n]=e.substring(n,n+2);return i}function c(e){for(var t,i=[],n=e.split(/\s+/),a=0;a<n.length;a++)t=r(n[a]),i.push.apply(i,t);return i}function u(e){return e.toLowerCase().replace(/^\s+|\s+$/g,"")}t.exports=function(e,t){var i,n,a,o=c(u(e)),r=c(u(t)),s=0,l=o.length+r.length;for(i=0;i<o.length;i++)for(a=o[i],n=0;n<r.length;n++)if(a==r[n]){s++,delete r[n];break}return 2*s/l}}),require.define("/lib/natural/entry.js",function(e,t,i,n,a,o){window.natural={},window.natural.SoundEx=e("./phonetics/soundex"),window.natural.Metaphone=e("./phonetics/metaphone"),window.natural.DoubleMetaphone=e("./phonetics/double_metaphone"),window.natural.PorterStemmer=e("./stemmers/porter_stemmer"),window.natural.PorterStemmerRu=e("./stemmers/porter_stemmer_ru"),window.natural.LancasterStemmer=e("./stemmers/lancaster_stemmer"),window.natural.AggressiveTokenizerRu=e("./tokenizers/aggressive_tokenizer_ru"),window.natural.AggressiveTokenizer=e("./tokenizers/aggressive_tokenizer"),window.natural.RegexpTokenizer=e("./tokenizers/regexp_tokenizer").RegexpTokenizer,window.natural.WordTokenizer=e("./tokenizers/regexp_tokenizer").WordTokenizer,window.natural.WordPunctTokenizer=e("./tokenizers/regexp_tokenizer").WordPunctTokenizer,window.natural.TreebankWordTokenizer=e("./tokenizers/treebank_word_tokenizer"),window.natural.NounInflector=e("./inflectors/noun_inflector"),window.natural.PresentVerbInflector=e("./inflectors/present_verb_inflector"),window.natural.CountInflector=e("./inflectors/count_inflector"),window.natural.TfIdf=e("./tfidf/tfidf"),window.natural.SentenceAnalyzer=e("./analyzers/sentence_analyzer"),window.natural.stopwords=e("./util/stopwords").words,window.natural.NGrams=e("./ngrams/ngrams"),window.natural.JaroWinklerDistance=e("./distance/jaro-winkler_distance"),window.natural.LevenshteinDistance=e("./distance/levenshtein_distance"),window.natural.DiceCoefficient=e("./distance/dice_coefficient")}),require("/lib/natural/entry.js")}();var sportlist=[],hasOwnProperty=Object.prototype.hasOwnProperty,exports={isEmpty:function(e){if(null==e)return!0;if(0<e.length)return!1;if(0===e.length)return!0;for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0},getSortedKeys:function(i){var e=[];for(var t in i)e.push(t);return e.sort(function(e,t){return i[t]-i[e]})},getSortedKeysInverse:function(i){var e=[];for(var t in i)e.push(t);return e.sort(function(e,t){return i[e]-i[t]})},removeAccents:function(e){for(var t="ÃÀÁÄÂÈÉËÊÌÍÏÎÒÓÖÔÙÚÜÛãàáäâèéëêìíïîòóöôùúüûÑñÇç?¿",i=0;i<e.length;i++)for(var n=0;n<t.length;n++)e=e.replace(t.charAt(n),"AAAAAEEEEIIIIOOOOUUUUaaaaaeeeeiiiioooouuuunncc".charAt(n));return e},jarowinklerDistanceWord:function(e,t,i){for(var n={},a={},o=0;o<t.length;o++){var r=natural.JaroWinklerDistance(t[o],e);r<1&&.88<r?a[t[o]]=r:1==r&&(n[t[o]]=r)}if(exports.isEmpty(n))if(exports.isEmpty(a))i(1,null);else{var s=exports.getSortedKeysInverse(a);i(0,[s[0],a[s[0]]])}else i(2,[e,n[e]])},levenshteinDistanceWord:function(e,t,i){for(var n={},a={},o=0;o<t.length;o++){var r=natural.LevenshteinDistance(t[o],e);0<r&&r<3?a[t[o]]=r:0==r&&(n[t[o]]=r)}if(exports.isEmpty(n))if(exports.isEmpty(a))i(1,null);else{var s=exports.getSortedKeysInverse(a);i(0,[s[0],a[s[0]]])}else i(2,[e,n[e]])},dicesDistanceWord:function(e,t,i){for(var n={},a={},o=0;o<t.length;o++){var r=natural.DiceCoefficient(t[o],e);r<1&&.7<r?a[t[o]]=r:1==r&&(n[t[o]]=r)}if(exports.isEmpty(n))if(exports.isEmpty(a))i(1,null);else{var s=exports.getSortedKeys(a);i(0,[s[0],a[s[0]]])}else i(2,[e,n[e]])},jarowinklerDistanceSentence:function(e,t,i){for(var n={},a={},o=0;o<t.length;o++){var r=natural.JaroWinklerDistance(t[o],e);r<1&&.88<r?a[t[o]]=r:1==r&&(n[t[o]]=r)}if(exports.isEmpty(n))if(exports.isEmpty(a))i(1,null);else{var s=exports.getSortedKeys(a);i(0,[s[0],a[s[0]]])}else i(2,[e,n[e]])},levenshteinDistanceSentence:function(e,t,i){for(var n={},a={},o=0;o<t.length;o++){var r=natural.LevenshteinDistance(t[o],e);0<r&&r<5?a[t[o]]=r:0==r&&(n[t[o]]=r)}if(exports.isEmpty(n))if(exports.isEmpty(a))i(1,null);else{var s=exports.getSortedKeysInverse(a);i(0,[s[0],a[s[0]]])}else i(2,[e,n[e]])},dicesDistanceSentence:function(e,t,i){for(var n={},a={},o=0;o<t.length;o++){var r=natural.DiceCoefficient(t[o],e);r<1&&.7<r?a[t[o]]=r:1==r&&(n[t[o]]=r)}if(exports.isEmpty(n))if(exports.isEmpty(a))i(1,null);else{var s=exports.getSortedKeys(a);i(0,[s[0],a[s[0]]])}else i(2,[e,n[e]])}};(function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):e.Tipped=t(jQuery)})(this,function($){function degrees(e){return 180*e/Math.PI}function radian(e){return e*Math.PI/180}function sec(e){return 1/Math.cos(e)}function sfcc(e){return String.fromCharCode.apply(String,e.replace(" ","").split(","))}function deepExtend(e,t){for(var i in t)t[i]&&t[i].constructor&&t[i].constructor===Object?(e[i]=$.extend({},e[i])||{},deepExtend(e[i],t[i])):e[i]=t[i];return e}function Spin(){return this.initialize.apply(this,_slice.call(arguments))}function Visible(){return this.initialize.apply(this,_slice.call(arguments))}function Skin(){this.initialize.apply(this,_slice.call(arguments))}function Stem(){this.initialize.apply(this,_slice.call(arguments))}function Tooltip(){this.initialize.apply(this,_slice.call(arguments))}function Collection(){this.initialize.apply(this,_slice.call(arguments))}var Tipped={};$.extend(Tipped,{version:"4.6.1"}),Tipped.Skins={base:{afterUpdate:!1,ajax:{},cache:!0,container:!1,containment:{selector:"viewport",padding:5},close:!1,detach:!0,fadeIn:200,fadeOut:200,showDelay:75,hideDelay:25,hideAfter:!1,hideOn:{element:"mouseleave"},hideOthers:!1,position:"top",inline:!1,offset:{x:0,y:0},onHide:!1,onShow:!1,padding:!0,radius:!0,shadow:!0,showOn:{element:"mousemove"},size:"medium",spinner:!0,stem:!0,target:"element",voila:!0},reset:{ajax:!1,hideOn:{element:"mouseleave",tooltip:"mouseleave"},showOn:{element:"mouseenter",tooltip:"mouseenter"}}},$.each("dark".split(" "),function(e,t){Tipped.Skins[t]={}});var Browser=(Ux=navigator.userAgent,{IE:!(!window.attachEvent||-1!==Ux.indexOf("Opera"))&&Vx("MSIE "),Opera:-1<Ux.indexOf("Opera")&&(!!window.opera&&opera.version&&parseFloat(opera.version())||7.55),WebKit:-1<Ux.indexOf("AppleWebKit/")&&Vx("AppleWebKit/"),Gecko:-1<Ux.indexOf("Gecko")&&-1===Ux.indexOf("KHTML")&&Vx("rv:"),MobileSafari:!!Ux.match(/Apple.*Mobile.*Safari/),Chrome:-1<Ux.indexOf("Chrome")&&Vx("Chrome/"),ChromeMobile:-1<Ux.indexOf("CrMo")&&Vx("CrMo/"),Android:-1<Ux.indexOf("Android")&&Vx("Android "),IEMobile:-1<Ux.indexOf("IEMobile")&&Vx("IEMobile/")}),Support=(_x=document.createElement("div"),ay="Webkit Moz O ms Khtml".split(" "),{css:{animation:$x("animation"),transform:$x("transform"),prefixed:function(e){return $x(e,"prefix")}},shadow:$x("boxShadow")&&$x("pointerEvents"),touch:function(){try{return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(e){return!1}}()}),_slice=Array.prototype.slice,_={wrap:function(e,t){var i=e;return function(){var e=[$.proxy(i,this)].concat(_slice.call(arguments));return t.apply(this,e)}},isElement:function(e){return e&&1==e.nodeType},isText:function(e){return e&&3==e.nodeType},isDocumentFragment:function(e){return e&&11==e.nodeType},delay:function(e,t){var i=_slice.call(arguments,2);return setTimeout(function(){return e.apply(e,i)},t)},defer:function(e){return _.delay.apply(this,[e,1].concat(_slice.call(arguments,1)))},pointer:function(e){return{x:e.pageX,y:e.pageY}},element:{isAttached:function(e){var t=function(e){for(var t=e;t&&t.parentNode;)t=t.parentNode;return t}(e);return!(!t||!t.body)}}},getUID=(By=0,function(e){for(e=e||"_tipped-uid-",By++;document.getElementById(e+By);)By++;return e+By}),Position={positions:["topleft","topmiddle","topright","righttop","rightmiddle","rightbottom","bottomright","bottommiddle","bottomleft","leftbottom","leftmiddle","lefttop"],regex:{toOrientation:/^(top|left|bottom|right)(top|left|bottom|right|middle|center)$/,horizontal:/^(top|bottom)/,isCenter:/(middle|center)/,side:/^(top|bottom|left|right)/},toDimension:(Ey={top:"height",left:"width",bottom:"height",right:"width"},function(e){return Ey[e]}),isCenter:function(e){return!!e.toLowerCase().match(this.regex.isCenter)},isCorner:function(e){return!this.isCenter(e)},getOrientation:function(e){return e.toLowerCase().match(this.regex.horizontal)?"horizontal":"vertical"},getSide:function(e){var t=null,i=e.toLowerCase().match(this.regex.side);return i&&i[1]&&(t=i[1]),t},split:function(e){return e.toLowerCase().match(this.regex.toOrientation)},_flip:{top:"bottom",bottom:"top",left:"right",right:"left"},flip:function(e,t){var i=this.split(e);return t?this.inverseCornerPlane(this.flip(this.inverseCornerPlane(e))):this._flip[i[1]]+i[2]},inverseCornerPlane:function(e){if(Position.isCorner(e)){var t=this.split(e);return t[2]+t[1]}return e},adjustOffsetBasedOnPosition:function(e,t,i){var n=$.extend({},e),a={horizontal:"x",vertical:"y"},o=Position.getOrientation(t);if(o==Position.getOrientation(i)){if(Position.getSide(t)!=Position.getSide(i))n[{x:"y",y:"x"}[a[o]]]*=-1}else{var r=n.x;n.x=n.y,n.y=r;var s={top:{right:"x"},bottom:{left:"x"},left:{bottom:"y"},right:{top:"y"}}[Position.getSide(t)][Position.getSide(i)];s&&(n[s]*=-1),n[a[Position.getOrientation(i)]]=0}return n},getBoxFromPoints:function(e,t,i,n){var a=Math.min(e,i),o=Math.max(e,i),r=Math.min(t,n),s=Math.max(t,n);return{left:a,top:r,width:Math.max(o-a,0),height:Math.max(s-r,0)}},isPointWithinBox:function(e,t,i,n,a,o){var r=this.getBoxFromPoints(i,n,a,o);return e>=r.left&&e<=r.left+r.width&&t>=r.top&&t<=r.top+r.height},isPointWithinBoxLayout:function(e,t,i){return this.isPointWithinBox(e,t,i.position.left,i.position.top,i.position.left+i.dimensions.width,i.position.top+i.dimensions.height)},getDistance:function(e,t,i,n){return Math.sqrt(Math.pow(Math.abs(i-e),2)+Math.pow(Math.abs(n-t),2))},intersectsLine:function(e,t,i,n,a,o,r,s,l){return l?(h=((p=r-a)*(t-o)-(d=s-o)*(e-a))/(-p*(u=n-t)+(c=i-e)*d),0<=(f=(-u*(e-a)+c*(t-o))/(-p*u+c*d))&&f<=1&&0<=h&&h<=1&&{x:e+h*c,y:t+h*u}):xz(e,t,a,o,r,s)!=xz(i,n,a,o,r,s)&&xz(e,t,i,n,a,o)!=xz(e,t,i,n,r,s);var c,u,p,d,f,h}},Bounds={viewport:function(){return Browser.MobileSafari||Browser.Android&&Browser.Gecko?{width:window.innerWidth,height:window.innerHeight}:{height:$(window).height(),width:$(window).width()}}},Mouse={_buffer:{pageX:0,pageY:0},_dimensions:{width:30,height:30},_shift:{x:2,y:10},getPosition:function(e){var t=this.getActualPosition(e);return{left:t.left-Math.round(.5*this._dimensions.width)+this._shift.x,top:t.top-Math.round(.5*this._dimensions.height)+this._shift.y}},getActualPosition:function(e){var t=e&&"number"==$.type(e.pageX)?e:this._buffer;return{left:t.pageX,top:t.pageY}},getDimensions:function(){return this._dimensions}},Color=(bA={_default:"#000000",aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},{toRGB:function(e){if(/^rgba?\(/.test(e))return function(e){return"#"+_z((e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/))[1])+_z(e[2])+_z(e[3])}(e);bA[e]&&(e=bA[e]);var t=e.replace("#","");return/^(?:[0-9a-fA-F]{3}){1,2}$/.test(t)?(3==t.length&&(t=t.charAt(0)+t.charAt(0)+t.charAt(1)+t.charAt(1)+t.charAt(2)+t.charAt(2)),"#"+t):bA._default}}),bA,Ey,By,_x,ay,Ux;function _z(e){return("0"+parseInt(e).toString(16)).slice(-2)}function xz(e,t,i,n,a,o){var r=(o-t)*(i-e)-(n-t)*(a-e);return 0<r||!(r<0)}function $x(e,t){var i=e.charAt(0).toUpperCase()+e.substr(1);return function(e,t){for(var i in e)if(void 0!==_x.style[e[i]])return"prefix"!=t||e[i];return!1}((e+" "+ay.join(i+" ")+i).split(" "),t)}function Vx(e){var t=new RegExp(e+"([\\d.]+)").exec(Ux);return!t||parseFloat(t[1])}Spin.supported=Support.css.transform&&Support.css.animation,$.extend(Spin.prototype,{initialize:function(){this.options=$.extend({},arguments[0]||{}),this.build(),this.start()},build:function(){var e=2*(this.options.length+this.options.radius),t={height:e,width:e};this.element=$("<div>").addClass("tpd-spin").css(t),this.element.append(this._rotate=$("<div>").addClass("tpd-spin-rotate")),this.element.css({"margin-left":-.5*t.width,"margin-top":-.5*t.height});for(var i=this.options.lines,n=0;n<i;n++){var a,o;this._rotate.append(a=$("<div>").addClass("tpd-spin-frame").append(o=$("<div>").addClass("tpd-spin-line"))),o.css({"background-color":this.options.color,width:this.options.width,height:this.options.length,"margin-left":-.5*this.options.width,"border-radius":Math.round(.5*this.options.width)}),a.css({opacity:(1/i*(n+1)).toFixed(2)});var r={};r[Support.css.prefixed("transform")]="rotate("+360/i*(n+1)+"deg)",a.css(r)}},start:function(){var e={};e[Support.css.prefixed("animation")]="tpd-spin 1s infinite steps("+this.options.lines+")",this._rotate.css(e)},stop:function(){var e={};e[Support.css.prefixed("animation")]="none",this._rotate.css(e),this.element.detach()}}),$.extend(Visible.prototype,{initialize:function(e){return e="array"==$.type(e)?e:[e],this.elements=e,this._restore=[],$.each(e,$.proxy(function(e,t){var i=$(t).is(":visible");i||$(t).show(),this._restore.push({element:t,visible:i})},this)),this},restore:function(){$.each(this._restore,function(e,t){t.visible||$(t.element).show()}),this._restore=null}});var AjaxCache=(vA=[],{get:function(e){for(var t=null,i=0;i<vA.length;i++)vA[i]&&vA[i].url==e.url&&(vA[i].type||"GET").toUpperCase()==(e.type||"GET").toUpperCase()&&$.param(vA[i].data||{})==$.param(e.data||{})&&(t=vA[i]);return t},set:function(e,t,i){var n=this.get(e);n||(n=$.extend({callbacks:{}},e),vA.push(n)),n.callbacks[t]=i},remove:function(e){for(var t=0;t<vA.length;t++)vA[t]&&vA[t].url==e&&delete vA[t]},clear:function(){vA=[]}}),Voila=function(r){function s(e,t,i){if(!(this instanceof s))return new s(e,t,i);var n=r.type(t),a="object"===n?t:{},o="function"===n?t:"function"===r.type(i)&&i;return this.options=r.extend({method:"onload"},a),this.deferred=new jQuery.Deferred,o&&this.always(o),this._processed=0,this.images=[],this._add(e),this}r.extend(s.prototype,{_add:function(e){var t="string"==r.type(e)?r(e):e instanceof jQuery||0<e.length?e:[e];r.each(t,r.proxy(function(e,t){var i=r(),n=r(t);(i=n.is("img")?i.add(n):i.add(n.find("img"))).each(r.proxy(function(e,t){this.images.push(new a(t,r.proxy(function(e){this._progress(e)},this),r.proxy(function(e){this._progress(e)},this),this.options))},this))},this)),this.images.length<1&&setTimeout(r.proxy(function(){this._resolve()},this))},abort:function(){this._progress=this._notify=this._reject=this._resolve=function(){},r.each(this.images,function(e,t){t.abort()}),this.images=[]},_progress:function(e){this._processed++,e.isLoaded||(this._broken=!0),this._notify(e),this._processed==this.images.length&&this[this._broken?"_reject":"_resolve"]()},_notify:function(e){this.deferred.notify(this,e)},_reject:function(){this.deferred.reject(this)},_resolve:function(){this.deferred.resolve(this)},always:function(e){return this.deferred.always(e),this},done:function(e){return this.deferred.done(e),this},fail:function(e){return this.deferred.fail(e),this},progress:function(e){return this.deferred.progress(e),this}});var a=function(o){function e(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}o.extend(e.prototype,{initialize:function(){this.options=o.extend({test:function(){},success:function(){},timeout:function(){},callAt:!1,intervals:[[0,0],[1e3,10],[2e3,50],[4e3,100],[2e4,500]]},arguments[0]||{}),this._test=this.options.test,this._success=this.options.success,this._timeout=this.options.timeout,this._ipos=0,this._time=0,this._delay=this.options.intervals[this._ipos][1],this._callTimeouts=[],this.poll(),this._createCallsAt()},poll:function(){this._polling=setTimeout(o.proxy(function(){if(this._test())this.success();else{if(this._time+=this._delay,this._time>=this.options.intervals[this._ipos][0]){if(!this.options.intervals[this._ipos+1])return void("function"==o.type(this._timeout)&&this._timeout());this._ipos++,this._delay=this.options.intervals[this._ipos][1]}this.poll()}},this),this._delay)},success:function(){this.abort(),this._success()},_createCallsAt:function(){this.options.callAt&&o.each(this.options.callAt,o.proxy(function(e,t){var i=t[0],n=t[1],a=setTimeout(o.proxy(function(){n()},this),i);this._callTimeouts.push(a)},this))},_stopCallTimeouts:function(){o.each(this._callTimeouts,function(e,t){clearTimeout(t)}),this._callTimeouts=[]},abort:function(){this._stopCallTimeouts(),this._polling&&(clearTimeout(this._polling),this._polling=null)}});function t(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}return o.extend(t.prototype,{supports:{naturalWidth:"naturalWidth"in new Image},initialize:function(e,t,i){return this.img=o(e)[0],this.successCallback=t,this.errorCallback=i,this.isLoaded=!1,this.options=o.extend({method:"onload",pollFallbackAfter:1e3},arguments[3]||{}),"onload"!=this.options.method&&this.supports.naturalWidth?void this.poll():void this.load()},poll:function(){this._poll=new e({test:o.proxy(function(){return 0<this.img.naturalWidth},this),success:o.proxy(function(){this.success()},this),timeout:o.proxy(function(){this.error()},this),callAt:[[this.options.pollFallbackAfter,o.proxy(function(){this.load()},this)]]})},load:function(){this._loading=setTimeout(o.proxy(function(){var e=new Image;(this._onloadImage=e).onload=o.proxy(function(){e.onload=function(){},this.supports.naturalWidth||(this.img.naturalWidth=e.width,this.img.naturalHeight=e.height,e.naturalWidth=e.width,e.naturalHeight=e.height),this.success()},this),e.onerror=o.proxy(this.error,this),e.src=this.img.src},this))},success:function(){this._calledSuccess||(this._calledSuccess=!0,this.abort(),this.waitForRender(o.proxy(function(){this.isLoaded=!0,this.successCallback(this)},this)))},error:function(){this._calledError||(this._calledError=!0,this.abort(),this._errorRenderTimeout=setTimeout(o.proxy(function(){this.errorCallback&&this.errorCallback(this)},this)))},abort:function(){this.stopLoading(),this.stopPolling(),this.stopWaitingForRender()},stopPolling:function(){this._poll&&(this._poll.abort(),this._poll=null)},stopLoading:function(){this._loading&&(clearTimeout(this._loading),this._loading=null),this._onloadImage&&(this._onloadImage.onload=function(){},this._onloadImage.onerror=function(){})},waitForRender:function(e){this._renderTimeout=setTimeout(e)},stopWaitingForRender:function(){this._renderTimeout&&(clearTimeout(this._renderTimeout),this._renderTimeout=null),this._errorRenderTimeout&&(clearTimeout(this._errorRenderTimeout),this._errorRenderTimeout=null)}}),t}(jQuery);return s}(jQuery),vA;Tipped.Behaviors={hide:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"}},mouse:{showOn:{element:"mouseenter",tooltip:!1},hideOn:{element:"mouseleave",tooltip:"mouseenter"},target:"mouse",showDelay:100,fadeIn:0,hideDelay:0,fadeOut:0},sticky:{showOn:{element:"mouseenter",tooltip:"mouseenter"},hideOn:{element:"mouseleave",tooltip:"mouseleave"},showDelay:150,target:"mouse",fixed:!0}};var Options={create:tB},xB,yB;function tB(e){return xB=Tipped.Skins.base,yB=deepExtend($.extend({},xB),Tipped.Skins.reset),(tB=wB)(e)}function uB(e){return e.match(/^(top|left|bottom|right)$/)&&(e+="middle"),e.replace("center","middle").replace(" ",""),e}function vB(e){var t;return e.behavior&&(t=Tipped.Behaviors[e.behavior])?deepExtend($.extend({},t),e):e}function wB(e){var t=e.skin?e.skin:Tooltips.options.defaultSkin,i=$.extend({},Tipped.Skins[t]||{});i.skin||(i.skin=Tooltips.options.defaultSkin||"dark");var n=deepExtend($.extend({},yB),vB(i)),a=deepExtend($.extend({},n),vB(e));a[sfcc("115,107,105,110")]=sfcc("100,97,114,107"),a.ajax&&(yB.ajax,xB.ajax,"boolean"==$.type(a.ajax)&&(a.ajax={}),a.ajax=!1);var o,r=r=a.position&&a.position.target||"string"==$.type(a.position)&&a.position||yB.position&&yB.position.target||"string"==$.type(yB.position)&&yB.position||xB.position&&xB.position.target||xB.position;r=uB(r);var s,l=a.position&&a.position.tooltip||yB.position&&yB.position.tooltip||xB.position&&xB.position.tooltip||Tooltips.Position.getInversedPosition(r);if(l=uB(l),a.position?"string"==$.type(a.position)?(a.position=uB(a.position),o={target:a.position,tooltip:Tooltips.Position.getTooltipPositionFromTarget(a.position)}):(o={tooltip:l,target:r},a.position.tooltip&&(o.tooltip=uB(a.position.tooltip)),a.position.target&&(o.target=uB(a.position.target))):o={tooltip:l,target:r},Position.isCorner(o.target)&&Position.getOrientation(o.target)!=Position.getOrientation(o.tooltip)&&(o.target=Position.inverseCornerPlane(o.target)),"mouse"==a.target){var c=Position.getOrientation(o.target);o.target="horizontal"==c?o.target.replace(/(left|right)/,"middle"):o.target.replace(/(top|bottom)/,"middle")}if(a.position=o,"mouse"==a.target?(s=$.extend({},xB.offset),$.extend(s,Tipped.Skins.reset.offset||{}),s=Position.adjustOffsetBasedOnPosition(xB.offset,xB.position,o.target,!0),e.offset&&(s=$.extend(s,e.offset||{}))):s={x:a.offset.x,y:a.offset.y},a.offset=s,a.hideOn&&"click-outside"==a.hideOn&&(a.hideOnClickOutside=!0,a.hideOn=!1,a.fadeOut=0),a.showOn){var u=a.showOn;"string"==$.type(u)&&(u={element:u}),a.showOn=u}if(a.hideOn){var p=a.hideOn;"string"==$.type(p)&&(p={element:p}),a.hideOn=p}return a.inline&&"string"!=$.type(a.inline)&&(a.inline=!1),Browser.IE&&Browser.IE<9&&$.extend(a,{fadeIn:0,fadeOut:0,hideDelay:0}),a.spinner&&(Spin.supported?"boolean"==$.type(a.spinner)&&(a.spinner=yB.spinner||xB.spinner||{}):a.spinner=!1),a.container||(a.container=document.body),a.containment&&"string"==$.type(a.containment)&&(a.containment={selector:a.containment,padding:yB.containment&&yB.containment.padding||xB.padding&&xB.containment.padding}),a.shadow&&(a.shadow=Support.shadow),a}$.extend(Skin.prototype,{initialize:function(e){this.tooltip=e,this.element=e._skin;var t=this.tooltip.options;this.tooltip._tooltip[(t.shadow?"remove":"add")+"Class"]("tpd-no-shadow")[(t.radius?"remove":"add")+"Class"]("tpd-no-radius")[(t.stem?"remove":"add")+"Class"]("tpd-no-stem");var i,n,a,o,r=Support.css.prefixed("borderTopLeftRadius");this.element.append(i=$("<div>").addClass("tpd-frames").append($("<div>").addClass("tpd-frame").append($("<div>").addClass("tpd-backgrounds").append(n=$("<div>").addClass("tpd-background").append(a=$("<div>").addClass("tpd-background-content")))))).append(o=$("<div>").addClass("tpd-spinner")),n.css({width:999,height:999,zoom:1}),this._css={border:parseFloat(n.css("border-top-width")),radius:parseFloat(r?n.css(r):0),padding:parseFloat(e._content.css("padding-top")),borderColor:n.css("border-top-color"),backgroundColor:a.css("background-color"),backgroundOpacity:a.css("opacity"),spinner:{dimensions:{width:o.innerWidth(),height:o.innerHeight()}}},o.remove(),i.remove(),this._side=Position.getSide(e.options.position.tooltip)||"top",this._vars={}},destroy:function(){this.frames&&($.each("top right bottom left".split(" "),$.proxy(function(e,t){this["stem_"+t]&&this["stem_"+t].destroy()},this)),this.frames.remove(),this.frames=null)},build:function(){this.frames||(this.element.append(this.frames=$("<div>").addClass("tpd-frames")),$.each("top right bottom left".split(" "),$.proxy(function(e,t){this.insertFrame(t)},this)),this._spinner||this.tooltip._tooltip.append(this._spinner=$("<div>").addClass("tpd-spinner").hide().append($("<div>").addClass("tpd-spinner-spin"))))},_frame:function(){var i,e=$("<div>").addClass("tpd-frame").append(i=$("<div>").addClass("tpd-backgrounds").append($("<div>").addClass("tpd-background-shadow"))).append($("<div>").addClass("tpd-shift-stem").append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-before")).append($("<div>").addClass("tpd-stem")).append($("<div>").addClass("tpd-shift-stem-side tpd-shift-stem-side-after")));return $.each("top right bottom left".split(" "),$.proxy(function(e,t){i.append($("<div>").addClass("tpd-background-box tpd-background-box-"+t).append($("<div>").addClass("tpd-background-box-shift").append($("<div>").addClass("tpd-background-box-shift-further").append($("<div>").addClass("tpd-background").append($("<div>").addClass("tpd-background-title")).append($("<div>").addClass("tpd-background-content"))).append($("<div>").addClass("tpd-background tpd-background-loading")).append($("<div>").addClass("tpd-background-border-hack").hide()))))},this)),e}(),_getFrame:function(e){var t=this._frame.clone();t.addClass("tpd-frame-"+e),t.find(".tpd-background-shadow").css({"border-radius":this._css.radius}),this.tooltip.options.stem&&t.find(".tpd-stem").attr("data-stem-position",e);var i=Math.max(this._css.radius-this._css.border,0);t.find(".tpd-background-title").css({"border-top-left-radius":i,"border-top-right-radius":i}),t.find(".tpd-background-content").css({"border-bottom-left-radius":i,"border-bottom-right-radius":i}),t.find(".tpd-background-loading").css({"border-radius":i});var n={backgroundColor:this._css.borderColor};n["horizontal"==Position.getOrientation(e)?"height":"width"]=this._css.border+"px";return n[{top:"bottom",bottom:"top",left:"right",right:"left"}[e]]=0,t.find(".tpd-shift-stem-side").css(n),t},insertFrame:function(e){var t=this["frame_"+e]=this._getFrame(e);if(this.frames.append(t),this.tooltip.options.stem){var i=t.find(".tpd-stem");this["stem_"+e]=new Stem(i,this,{})}},startLoading:function(){this.tooltip.supportsLoading&&(this.build(),this._spinner||this.tooltip.is("resize-to-content")||this.setDimensions(this._css.spinner.dimensions),this._spinner&&this._spinner.show())},stopLoading:function(){this.tooltip.supportsLoading&&this._spinner&&(this.build(),this._spinner.hide())},updateBackground:function(){var e=this._vars.frames[this._side],t=$.extend({},e.background.dimensions);if(this.tooltip.title&&!this.tooltip.is("loading")){this.element.find(".tpd-background-title, .tpd-background-content").show(),this.element.find(".tpd-background").css({"background-color":"transparent"});var i=$.extend({},t),n=Math.max(this._css.radius-this._css.border,0),a={"border-top-left-radius":n,"border-top-right-radius":n,"border-bottom-left-radius":n,"border-bottom-right-radius":n},o=new Visible(this.tooltip._tooltip),r=this.tooltip._titleWrapper.innerHeight();i.height-=r,this.element.find(".tpd-background-title").css({height:r,width:t.width}),a["border-top-left-radius"]=0,a["border-top-right-radius"]=0,o.restore(),this.element.find(".tpd-background-content").css(i).css(a),this.element.find(".tpd-background-loading").css({"background-color":this._css.backgroundColor})}else this.element.find(".tpd-background-title, .tpd-background-content").hide(),this.element.find(".tpd-background").css({"background-color":this._css.backgroundColor});this._css.border&&(this.element.find(".tpd-background").css({"border-color":"transparent"}),this.element.find(".tpd-background-border-hack").css({width:t.width,height:t.height,"border-radius":this._css.radius,"border-width":this._css.border,"border-color":this._css.borderColor}).show())},paint:function(){if(!this._paintedDimensions||this._paintedDimensions.width!=this._dimensions.width||this._paintedDimensions.height!=this._dimensions.height||this._paintedStemPosition!=this._stemPosition){this._paintedDimensions=this._dimensions,this._paintedStemPosition=this._stemPosition,this.element.removeClass("tpd-visible-frame-top tpd-visible-frame-bottom tpd-visible-frame-left tpd-visible-frame-right").addClass("tpd-visible-frame-"+this._side);var e=this._vars.frames[this._side],t=$.extend({},e.background.dimensions);this.element.find(".tpd-background").css(t),this.element.find(".tpd-background-shadow").css({width:t.width+2*this._css.border,height:t.height+2*this._css.border}),this.updateBackground(),this.element.find(".tpd-background-box-shift, .tpd-background-box-shift-further").removeAttr("style"),this.element.add(this.frames).add(this.tooltip._tooltip).css(e.dimensions);var i=this._side,n=this._vars.frames[i],a=this.element.find(".tpd-frame-"+this._side),o=this._vars.frames[i].dimensions;a.css(o),a.find(".tpd-backgrounds").css($.extend({},n.background.position,{width:o.width-n.background.position.left,height:o.height-n.background.position.top}));var r=Position.getOrientation(i);if(this.tooltip.options.stem)if(a.find(".tpd-shift-stem").css($.extend({},n.shift.dimensions,n.shift.position)),"vertical"==r){(l=a.find(".tpd-background-box-top, .tpd-background-box-bottom")).css({height:this._vars.cut,width:this._css.border}),a.find(".tpd-background-box-bottom").css({top:n.dimensions.height-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-top":-1*n.dimensions.height+this._vars.cut});var s="right"==i?n.dimensions.width-n.stemPx-this._css.border:0;l.css({left:s}).find(".tpd-background-box-shift").css({"margin-left":-1*s}),a.find(".tpd-background-box-"+("left"==i?"left":"right")).hide(),"right"==i?a.find(".tpd-background-box-left").css({width:n.dimensions.width-n.stemPx-this._css.border}):a.find(".tpd-background-box-right").css({"margin-left":this._css.border}).find(".tpd-background-box-shift").css({"margin-left":-1*this._css.border}),(c=a.find(".tpd-background-box-"+this._side)).css({height:n.dimensions.height-2*this._vars.cut,"margin-top":this._vars.cut}),c.find(".tpd-background-box-shift").css({"margin-top":-1*this._vars.cut})}else{var l;(l=a.find(".tpd-background-box-left, .tpd-background-box-right")).css({width:this._vars.cut,height:this._css.border}),a.find(".tpd-background-box-right").css({left:n.dimensions.width-this._vars.cut}).find(".tpd-background-box-shift").css({"margin-left":-1*n.dimensions.width+this._vars.cut});var c;s="bottom"==i?n.dimensions.height-n.stemPx-this._css.border:0;l.css({top:s}).find(".tpd-background-box-shift").css({"margin-top":-1*s}),a.find(".tpd-background-box-"+("top"==i?"top":"bottom")).hide(),"bottom"==i?a.find(".tpd-background-box-top").css({height:n.dimensions.height-n.stemPx-this._css.border}):a.find(".tpd-background-box-bottom").css({"margin-top":this._css.border}).find(".tpd-background-box-shift").css({"margin-top":-1*this._css.border}),(c=a.find(".tpd-background-box-"+this._side)).css({width:n.dimensions.width-2*this._vars.cut,"margin-left":this._vars.cut}),c.find(".tpd-background-box-shift").css({"margin-left":-1*this._vars.cut})}var u=e.background,p=u.position,d=u.dimensions;this._spinner.css({top:p.top+this._css.border+(.5*d.height-.5*this._css.spinner.dimensions.height),left:p.left+this._css.border+(.5*d.width-.5*this._css.spinner.dimensions.width)})}},getVars:function(){var r=(this._css.padding,this._css.radius,this._css.border),e=this._vars.maxStemHeight||0,s=$.extend({},this._dimensions||{}),l={frames:{},dimensions:s,maxStemHeight:e};l.cut=Math.max(this._css.border,this._css.radius)||0;var c={width:0,height:0},t=0,u=0;return this.tooltip.options.stem&&(c=this.stem_top.getMath().dimensions.outside,t=this.stem_top._css.offset,u=Math.max(c.height-this._css.border,0)),l.stemDimensions=c,l.stemOffset=t,Position.getOrientation(this._side),$.each("top right bottom left".split(" "),$.proxy(function(e,t){var i="vertical"==Position.getOrientation(t),n={width:s.width+2*r,height:s.height+2*r},a=n[i?"height":"width"]-2*l.cut,o={dimensions:n,stemPx:u,position:{top:0,left:0},background:{dimensions:$.extend({},s),position:{top:0,left:0}}};switch((l.frames[t]=o).dimensions[i?"width":"height"]+=u,"top"!=t&&"left"!=t||(o.background.position[t]+=u),$.extend(o,{shift:{position:{top:0,left:0},dimensions:{width:i?c.height:a,height:i?a:c.height}}}),t){case"top":case"bottom":o.shift.position.left+=l.cut,"bottom"==t&&(o.shift.position.top+=n.height-r-u);break;case"left":case"right":o.shift.position.top+=l.cut,"right"==t&&(o.shift.position.left+=n.width-r-u)}},this)),l.connections={},$.each(Position.positions,$.proxy(function(e,t){l.connections[t]=this.getConnectionLayout(t,l)},this)),l},setDimensions:function(e){this.build();var t=this._dimensions;t&&t.width==e.width&&t.height==e.height||(this._dimensions=e,this._vars=this.getVars())},setSide:function(e){this._side=e,this._vars=this.getVars()},getConnectionLayout:function(e,t){var i=Position.getSide(e),n=Position.getOrientation(e),a=(t.dimensions,t.cut),o=this["stem_"+i],r=t.stemOffset,s=this.tooltip.options.stem?o.getMath().dimensions.outside.width:0,l=a+r+.5*s,c={stem:{}},u={left:0,right:0,up:0,down:0},p={top:0,left:0},d={top:0,left:0},f=t.frames[i];l=0;if("horizontal"==n){var h=f.dimensions.width;this.tooltip.options.stem&&((h=f.shift.dimensions.width)-s<2*r&&(r=Math.floor(.5*(h-s))||0),l=a+r+.5*s);var m=h-2*r,b=r;switch((v=Position.split(e))[2]){case"left":u.right=m-s,p.left=l;break;case"middle":b+=Math.round(.5*m-.5*s),u.left=b-r,u.right=b-r,p.left=d.left=Math.round(.5*f.dimensions.width);break;case"right":b+=m-s,u.left=m-s,p.left=f.dimensions.width-l,d.left=f.dimensions.width}"bottom"==v[1]&&(p.top+=f.dimensions.height,d.top+=f.dimensions.height),$.extend(c.stem,{position:{left:b},before:{width:b},after:{left:b+s,width:h-b-s+1}})}else{var g=f.dimensions.height;this.tooltip.options.stem&&((g=f.shift.dimensions.height)-s<2*r&&(r=Math.floor(.5*(g-s))||0),l=a+r+.5*s);var v,_=g-2*r,y=r;switch((v=Position.split(e))[2]){case"top":u.down=_-s,p.top=l;break;case"middle":y+=Math.round(.5*_-.5*s),u.up=y-r,u.down=y-r,p.top=d.top=Math.round(.5*f.dimensions.height);break;case"bottom":y+=_-s,u.up=_-s,p.top=f.dimensions.height-l,d.top=f.dimensions.height}"right"==v[1]&&(p.left+=f.dimensions.width,d.left+=f.dimensions.width),$.extend(c.stem,{position:{top:y},before:{height:y},after:{top:y+s,height:g-y-s+1}})}return c.move=u,c.stem.connection=p,c.connection=d,c},setStemPosition:function(e,t){if(this._stemPosition!=e){this._stemPosition=e;var i=Position.getSide(e);this.setSide(i)}this.tooltip.options.stem&&this.setStemShift(e,t)},setStemShift:function(e,t){var i=this._shift,n=this._dimensions;if(!i||i.stemPosition!=e||i.shift.x!=t.x||i.shift.y!=t.y||!n||i.dimensions.width!=n.width||i.dimensions.height!=n.height){this._shift={stemPosition:e,shift:t,dimensions:n};var a=Position.getSide(e),o={horizontal:"x",vertical:"y"}[Position.getOrientation(e)],r={x:{left:"left",width:"width"},y:{left:"top",width:"height"}}[o],s=this["stem_"+a],l=deepExtend({},this._vars.connections[e].stem);t&&0!==t[o]&&(l.before[r.width]+=t[o],l.position[r.left]+=t[o],l.after[r.left]+=t[o],l.after[r.width]-=t[o]),s.element.css(l.position),s.element.siblings(".tpd-shift-stem-side-before").css(l.before),s.element.siblings(".tpd-shift-stem-side-after").css(l.after)}}}),$.extend(Stem.prototype,{initialize:function(e,t){this.element=$(e),this.element[0]&&(this.skin=t,this.element.removeClass("tpd-stem-reset"),this._css=$.extend({},t._css,{width:this.element.innerWidth(),height:this.element.innerHeight(),offset:parseFloat(this.element.css("margin-left")),spacing:parseFloat(this.element.css("margin-top"))}),this.element.addClass("tpd-stem-reset"),this.options=$.extend({},arguments[2]||{}),this._position=this.element.attr("data-stem-position")||"top",this._m=100,this.build())},destroy:function(){this.element.html("")},build:function(){this.destroy();var e=this._css.backgroundColor,t=-1<e.indexOf("rgba")&&parseFloat(e.replace(/^.*,(.+)\)/,"$1")),i=t&&t<1;this._useTransform=i&&Support.css.transform,this._css.border||(this._useTransform=!1),this[(this._useTransform?"build":"buildNo")+"Transform"]()},buildTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append(this.downscale=$("<div>").addClass("tpd-stem-downscale").append(this.transform=$("<div>").addClass("tpd-stem-transform").append(this.first=$("<div>").addClass("tpd-stem-side").append(this.border=$("<div>").addClass("tpd-stem-border")).append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-triangle")))))),this.transform.append(this.last=this.first.clone().addClass("tpd-stem-side-inversed")),this.sides=this.first.add(this.last);var e=this.getMath(),t=e.dimensions,i=this._m,n=Position.getSide(this._position);if(this.element.find(".tpd-stem-spacer").css({width:p?t.inside.height:t.inside.width,height:p?t.inside.width:t.inside.height}),"top"==n||"left"==n){var a={};"top"==n?(a.bottom=0,a.top="auto"):"left"==n&&(a.right=0,a.left="auto"),this.element.find(".tpd-stem-spacer").css(a)}this.transform.css({width:t.inside.width*i,height:t.inside.height*i});var o=Support.css.prefixed("transform"),r={"background-color":"transparent","border-bottom-color":this._css.backgroundColor,"border-left-width":.5*t.inside.width*i,"border-bottom-width":t.inside.height*i};r[o]="translate("+e.border*i+"px, 0)",this.element.find(".tpd-stem-triangle").css(r);var s=this._css.borderColor;alpha=-1<s.indexOf("rgba")&&parseFloat(s.replace(/^.*,(.+)\)/,"$1")),alpha&&alpha<1?s=(s.substring(0,s.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;var l={"background-color":"transparent","border-right-width":e.border*i,width:e.border*i,"margin-left":-2*e.border*i,"border-color":s,opacity:alpha};l[o]="skew("+e.skew+"deg) translate("+e.border*i+"px, "+-1*this._css.border*i+"px)",this.element.find(".tpd-stem-border").css(l);s=this._css.borderColor;alpha=-1<s.indexOf("rgba")&&parseFloat(s.replace(/^.*,(.+)\)/,"$1")),alpha&&alpha<1?s=(s.substring(0,s.lastIndexOf(","))+")").replace("rgba","rgb"):alpha=1;var c={width:e.border*i,"border-right-width":e.border*i,"border-right-color":s,background:s,opacity:alpha,"margin-left":-2*e.border*i};if(c[o]="skew("+e.skew+"deg) translate("+e.border*i+"px, "+(t.inside.height-this._css.border)*i+"px)",this.element.find(".tpd-stem-border-corner").css(c),this.setPosition(this._position),1<i){var u={};u[o]="scale("+1/i+","+1/i+")",this.downscale.css(u)}var p=/^(left|right)$/.test(this._position);this._css.border||this.element.find(".tpd-stem-border, .tpd-stem-border-corner").hide(),this.element.css({width:p?t.outside.height:t.outside.width,height:p?t.outside.width:t.outside.height})},buildNoTransform:function(){this.element.append(this.spacer=$("<div>").addClass("tpd-stem-spacer").append($("<div>").addClass("tpd-stem-notransform").append($("<div>").addClass("tpd-stem-border").append($("<div>").addClass("tpd-stem-border-corner")).append($("<div>").addClass("tpd-stem-border-center-offset").append($("<div>").addClass("tpd-stem-border-center-offset-inverse").append($("<div>").addClass("tpd-stem-border-center"))))).append($("<div>").addClass("tpd-stem-triangle"))));var e=this.getMath(),t=e.dimensions,i=/^(left|right)$/.test(this._position),n=/^(bottom)$/.test(this._position),a=/^(right)$/.test(this._position),o=Position.getSide(this._position);if(this.element.css({width:i?t.outside.height:t.outside.width,height:i?t.outside.width:t.outside.height}),this.element.find(".tpd-stem-notransform").add(this.element.find(".tpd-stem-spacer")).css({width:i?t.inside.height:t.inside.width,height:i?t.inside.width:t.inside.height}),"top"==o||"left"==o){var r={};"top"==o?(r.bottom=0,r.top="auto"):"left"==o&&(r.right=0,r.left="auto"),this.element.find(".tpd-stem-spacer").css(r)}this.element.find(".tpd-stem-border").css({width:"100%",background:"transparent"});var s={opacity:1};s[i?"height":"width"]="100%",s[i?"width":"height"]=this._css.border,s[n?"top":"bottom"]=0,$.extend(s,a?{left:0}:{right:0}),this.element.find(".tpd-stem-border-corner").css(s);var l={width:0,"background-color":"transparent",opacity:1},c=.5*t.inside.width+"px solid transparent",u={"background-color":"transparent"};if(t.inside.width,e.border,i){var p={left:"auto",top:"50%","margin-top":-.5*t.inside.width,"border-top":c,"border-bottom":c};$.extend(l,p),l[a?"right":"left"]=0,l[a?"border-left":"border-right"]=t.inside.height+"px solid "+this._css.borderColor,$.extend(u,p),u[a?"border-left":"border-right"]=t.inside.height+"px solid "+this._css.backgroundColor,u[a?"right":"left"]=e.top,u[a?"left":"right"]="auto",this.element.find(".tpd-stem-border-center-offset").css({"margin-left":-1*this._css.border*(a?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-left":this._css.border*(a?-1:1)})}else{p={"margin-left":-.5*t.inside.width,"border-left":c,"border-right":c};$.extend(l,p),l[n?"border-top":"border-bottom"]=t.inside.height+"px solid "+this._css.borderColor,$.extend(u,p),u[n?"border-top":"border-bottom"]=t.inside.height+"px solid "+this._css.backgroundColor,u[n?"bottom":"top"]=e.top,u[n?"top":"bottom"]="auto",this.element.find(".tpd-stem-border-center-offset").css({"margin-top":-1*this._css.border*(n?-1:1)}).find(".tpd-stem-border-center-offset-inverse").css({"margin-top":this._css.border*(n?-1:1)})}this.element.find(".tpd-stem-border-center").css(l),this.element.find(".tpd-stem-border-corner").css({"background-color":this._css.borderColor}),this.element.find(".tpd-stem-triangle").css(u),this._css.border||this.element.find(".tpd-stem-border").hide()},setPosition:function(e){this._position=e,this.transform.attr("class","tpd-stem-transform tpd-stem-transform-"+e)},getMath:function(){var e=this._css.height,t=this._css.width,i=this._css.border;this._useTransform&&Math.floor(t)%2&&(t=Math.max(Math.floor(t)-1,0));var n=degrees(Math.atan(.5*t/e)),a=90-n,o={width:t+2*(i/Math.cos((90-a)*Math.PI/180)),height:e+(d=i/Math.cos((90-n)*Math.PI/180))};Math.max(i,this._css.radius),e=o.height,t=.5*o.width;var r=90-degrees(Math.atan(e/t)),s=i/Math.cos(r*Math.PI/180),l=180*Math.atan(e/t)/Math.PI,c=-1*(90-l),u=90-l,p=i*Math.tan(u*Math.PI/180),d=i/Math.cos((90-u)*Math.PI/180),f=$.extend({},o),h=$.extend({},o);h.height+=this._css.spacing,h.height=Math.ceil(h.height);var m=!0;return o.width<=2*i&&(m=!1),{enabled:m,outside:h,dimensions:{inside:f,outside:h},top:d,border:s,skew:c,corner:p}}});var Tooltips={tooltips:{},options:{defaultSkin:"dark",startingZIndex:999999},_emptyClickHandler:function(){},init:function(){this.reset(),this._resizeHandler=$.proxy(this.onWindowResize,this),$(window).bind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").bind("click",this._emptyClickHandler)},reset:function(){Tooltips.removeAll(),this._resizeHandler&&$(window).unbind("resize orientationchange",this._resizeHandler),Browser.MobileSafari&&$("body").unbind("click",this._emptyClickHandler)},onWindowResize:function(){this._resizeTimer&&(window.clearTimeout(this._resizeTimer),this._resizeTimer=null),this._resizeTimer=_.delay($.proxy(function(){var e=this.getVisible();$.each(e,function(e,t){t.clearUpdatedTo(),t.position()})},this),15)},_getTooltips:function(e,t){var i,n=[],a=[];if(_.isElement(e)?(i=$(e).data("tipped-uids"))&&(n=n.concat(i)):$(e).each(function(e,t){(i=$(t).data("tipped-uids"))&&(n=n.concat(i))}),!n[0]&&!t){var o=this.getTooltipByTooltipElement($(e).closest(".tpd-tooltip")[0]);o&&o.element&&((i=$(o.element).data("tipped-uids")||[])&&(n=n.concat(i)))}return 0<n.length&&$.each(n,$.proxy(function(e,t){var i;(i=this.tooltips[t])&&a.push(i)},this)),a},findElement:function(e){var t=[];return _.isElement(e)&&(t=this._getTooltips(e)),t[0]&&t[0].element},get:function(i){var e=$.extend({api:!1},arguments[1]||{}),n=[];return _.isElement(i)?n=this._getTooltips(i):i instanceof $?i.each($.proxy(function(e,t){var i=this._getTooltips(t,!0);0<i.length&&(n=n.concat(i))},this)):"string"==$.type(i)&&$.each(this.tooltips,function(e,t){t.element&&$(t.element).is(i)&&n.push(t)}),e.api&&$.each(n,function(e,t){t.is("api",!0)}),n},getTooltipByTooltipElement:function(i){if(!i)return null;var n=null;return $.each(this.tooltips,function(e,t){t.is("build")&&t._tooltip[0]===i&&(n=t)}),n},getBySelector:function(i){var n=[];return $.each(this.tooltips,function(e,t){t.element&&$(t.element).is(i)&&n.push(t)}),n},getNests:function(){var i=[];return $.each(this.tooltips,function(e,t){t.is("nest")&&i.push(t)}),i},show:function(e){$(this.get(e)).each(function(e,t){t.show(!1,!0)})},hide:function(e){$(this.get(e)).each(function(e,t){t.hide()})},toggle:function(e){$(this.get(e)).each(function(e,t){t.toggle()})},hideAll:function(i){$.each(this.getVisible(),function(e,t){i&&i==t||t.hide()})},refresh:function(e){var t;t=e?$.grep(this.get(e),function(e){return e.is("visible")}):this.getVisible(),$.each(t,function(e,t){t.refresh()})},getVisible:function(){var i=[];return $.each(this.tooltips,function(e,t){t.visible()&&i.push(t)}),i},isVisibleByElement:function(i){var n=!1;return _.isElement(i)&&$.each(this.getVisible()||[],function(e,t){return t.element==i?!(n=!0):void 0}),n},getHighestTooltip:function(){var i,n=0;return $.each(this.tooltips,function(e,t){t.zIndex>n&&(n=t.zIndex,i=t)}),i},resetZ:function(){this.getVisible().length<=1&&$.each(this.tooltips,function(e,t){t.is("build")&&!t.options.zIndex&&t._tooltip.css({zIndex:t.zIndex=+Tooltips.options.startingZIndex})})},clearAjaxCache:function(){$.each(this.tooltips,$.proxy(function(e,t){t.options.ajax&&(t._cache&&t._cache.xhr&&(t._cache.xhr.abort(),t._cache.xhr=null),t.is("updated",!1),t.is("updating",!1),t.is("sanitized",!1))},this)),AjaxCache.clear()},add:function(e){this.tooltips[e.uid]=e},remove:function(e){var t=this._getTooltips(e);this.removeTooltips(t)},removeTooltips:function(e){e&&$.each(e,$.proxy(function(e,t){var i=t.uid;delete this.tooltips[i],t.remove()},this))},removeDetached:function(){var e=this.getNests(),i=[];0<e.length&&$.each(e,function(e,t){t.is("detached")&&(i.push(t),t.attach())}),$.each(this.tooltips,$.proxy(function(e,t){t.element&&!_.element.isAttached(t.element)&&this.remove(t.element)},this)),$.each(i,function(e,t){t.detach()})},removeAll:function(){$.each(this.tooltips,$.proxy(function(e,t){t.element&&this.remove(t.element)},this)),this.tooltips={}},setDefaultSkin:function(e){this.options.defaultSkin=e||"dark"},setStartingZIndex:function(e){this.options.startingZIndex=e||0}};return Tooltips.Position={inversedPosition:{left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},getInversedPosition:function(e){var t=Position.split(e),i=t[1],n=t[2],a=Position.getOrientation(e),o=$.extend({horizontal:!0,vertical:!0},arguments[1]||{});return"horizontal"==a?(o.vertical&&(i=this.inversedPosition[i]),o.horizontal&&(n=this.inversedPosition[n])):(o.vertical&&(n=this.inversedPosition[n]),o.horizontal&&(i=this.inversedPosition[i])),i+n},getTooltipPositionFromTarget:function(e){var t=Position.split(e);return this.getInversedPosition(t[1]+this.inversedPosition[t[2]])}},$.extend(Tooltip.prototype,{supportsLoading:Support.css.transform&&Support.css.animation,initialize:function(element,content){if(this.element=element,this.element){var options;"object"!=$.type(content)||_.isElement(content)||_.isText(content)||_.isDocumentFragment(content)||content instanceof $?options=arguments[2]||{}:(options=content,content=null);var dataOptions=$(element).data("tipped-options");dataOptions&&(options=deepExtend($.extend({},options),eval("({"+dataOptions+"})"))),this.options=Options.create(options),this._cache={dimensions:{width:0,height:0},events:[],timers:{},layouts:{},is:{},fnCallFn:"",updatedTo:{}},this.queues={showhide:$({})};var title=$(element).attr("title")||$(element).data("tipped-restore-title");if(!content){var dt=$(element).attr("data-tipped");if(dt?content=dt:title&&(content=title),content){var SCRIPT_REGEX=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;content=content.replace(SCRIPT_REGEX,"")}}if((!content||content instanceof $&&!content[0])&&!(this.options.ajax&&this.options.ajax.url||this.options.inline))return void(this._aborted=!0);title&&($(element).data("tipped-restore-title",title),$(element)[0].setAttribute("title","")),this.content=content,this.title=$(this.element).data("tipped-title"),"undefined"!=$.type(this.options.title)&&(this.title=this.options.title),this.zIndex=this.options.zIndex||+Tooltips.options.startingZIndex;var uids=$(element).data("tipped-uids");uids=uids||[];var uid=getUID();this.uid=uid,uids.push(uid),$(element).data("tipped-uids",uids);var parentTooltipElement=$(this.element).closest(".tpd-tooltip")[0],parentTooltip;parentTooltipElement&&(parentTooltip=Tooltips.getTooltipByTooltipElement(parentTooltipElement))&&parentTooltip.is("nest",!0);var target=this.options.target;this.target="mouse"==target?this.element:"element"!=target&&target?_.isElement(target)?target:target instanceof $&&target[0]?target[0]:this.element:this.element,this.options.inline&&(this.content=$("#"+this.options.inline)[0]),this.options.ajax&&(this.__content=this.content),"function"==$.type(this.content)&&(this._fn=this.content),this.preBuild(),Tooltips.add(this)}},remove:function(){this.unbind(),this.clearTimers(),this.restoreElementToMarker(),this.stopLoading(),this.abort(),this.is("build")&&this._tooltip&&(this._tooltip.remove(),this._tooltip=null);var e=$(this.element).data("tipped-uids")||[],t=$.inArray(this.uid,e);if(-1<t&&(e.splice(t,1),$(this.element).data("tipped-uids",e)),e.length<1){var i,n="tipped-restore-title";(i=$(this.element).data(n))&&(""!=!$(this.element)[0].getAttribute("title")&&$(this.element).attr("title",i),$(this.element).removeData(n)),$(this.element).removeData("tipped-uids")}var a=($(this.element).attr("class")||"").replace(/(tpd-delegation-uid-)\d+/g,"").replace(/^\s\s*/,"").replace(/\s\s*$/,"");$(this.element).attr("class",a)},detach:function(){this.options.detach&&!this.is("detached")&&(this._tooltip&&this._tooltip.detach(),this.is("detached",!0))},attach:function(){if(this.is("detached")){var e;if("string"==$.type(this.options.container)){var t=this.target;"mouse"==t&&(t=this.element),e=$($(t).closest(this.options.container).first())}else e=$(this.options.container);e[0]||(e=$(document.body)),e.append(this._tooltip),this.is("detached",!1)}},preBuild:function(){this.is("detached",!0);var e={left:"-10000px",top:"-10000px",opacity:0,zIndex:this.zIndex};this._tooltip=$("<div>").addClass("tpd-tooltip").addClass("tpd-skin-"+Tooltips.options.defaultSkin).addClass("tpd-size-"+this.options.size).css(e).hide(),this.createPreBuildObservers()},build:function(){this.is("build")||(this.attach(),this._tooltip.append(this._skin=$("<div>").addClass("tpd-skin")).append(this._contentWrapper=$("<div>").addClass("tpd-content-wrapper").append(this._contentSpacer=$("<div>").addClass("tpd-content-spacer").append(this._titleWrapper=$("<div>").addClass("tpd-title-wrapper").append(this._titleSpacer=$("<div>").addClass("tpd-title-spacer").append(this._titleRelative=$("<div>").addClass("tpd-title-relative").append(this._titleRelativePadder=$("<div>").addClass("tpd-title-relative-padder").append(this._title=$("<div>").addClass("tpd-title"))))).append(this._close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))).append(this._contentRelative=$("<div>").addClass("tpd-content-relative").append(this._contentRelativePadder=$("<div>").addClass("tpd-content-relative-padder").append(this._content=$("<div>").addClass("tpd-content"))).append(this._inner_close=$("<div>").addClass("tpd-close").append($("<div>").addClass("tpd-close-icon").html("&times;")))))),this.skin=new Skin(this),this._contentSpacer.css({"border-radius":Math.max(this.skin._css.radius-this.skin._css.border,0)}),this.createPostBuildObservers(),this.is("build",!0))},createPostBuildObservers:function(){this._tooltip.delegate(".tpd-close, .close-tooltip","click",$.proxy(function(e){e.stopPropagation(),e.preventDefault(),this.is("api",!1),this.hide(!0)},this))},createPreBuildObservers:function(){this.bind(this.element,"mouseenter",this.setActive),this.bind(this._tooltip,Support.touch&&Browser.MobileSafari?"touchstart":"mouseenter",this.setActive),this.bind(this.element,"mouseleave",function(e){this.setIdle(e)}),this.bind(this._tooltip,"mouseleave",function(e){this.setIdle(e)}),this.options.showOn&&($.each(this.options.showOn,$.proxy(function(e,t){var i,n=!1;switch(e){case"element":i=this.element,this.options.hideOn&&this.options.showOn&&"click"==this.options.hideOn.element&&"click"==this.options.showOn.element&&(n=!0,this.is("toggleable",n));break;case"tooltip":i=this._tooltip;break;case"target":i=this.target}if(i&&t){var a=t;this.bind(i,a,"click"==t&&n?function(){this.is("api",!1),this.toggle()}:function(){this.is("api",!1),this.showDelayed()})}},this)),Support.touch&&Browser.MobileSafari&&this.bind(this._tooltip,"touchend",function(){this._tooltipTouchEndTime=(new Date).getTime()})),this.options.hideOn&&$.each(this.options.hideOn,$.proxy(function(e,t){var i;switch(e){case"element":if(this.is("toggleable")&&"click"==t)return;i=this.element;break;case"tooltip":i=this._tooltip;break;case"target":i=this.target}if(i&&t){var n=t;Support.touch&&Browser.MobileSafari&&/^(target|element)/.test(e)&&/mouse(leave|out)/.test(n)?this.bind(i,n,function(e){if(this._tooltipTouchEndTime&&/^mouse(leave|out)$/.test(e.type)&&(new Date).getTime()-this._tooltipTouchEndTime<450)return;this.is("api",!1),this.hideDelayed()}):this.bind(i,n,function(){this.is("api",!1),this.hideDelayed()})}},this)),this.options.hideOnClickOutside&&($(this.element).addClass("tpd-hideOnClickOutside"),this.bind(document.documentElement,"click touchend",$.proxy(function(e){if(this.visible()){var t=$(e.target).closest(".tpd-tooltip, .tpd-hideOnClickOutside")[0];(!t||t&&t!=this._tooltip[0]&&t!=this.element)&&this.hide()}},this))),"mouse"==this.options.target&&this.bind(this.element,"mouseenter mousemove",$.proxy(function(e){this._cache.event=e},this));var e=!1;this.options.showOn&&"mouse"==this.options.target&&!this.options.fixed&&(e=!0),e&&this.bind(this.element,"mousemove",function(){this.is("build")&&(this.is("api",!1),this.position())})}}),$.extend(Tooltip.prototype,{stop:function(){this._tooltip&&(this.queues.showhide.queue([]),this._tooltip.stop(1,0))},showDelayed:function(){this.is("disabled")||(this.clearTimer("hide"),this.is("visible")||this.getTimer("show")||this.setTimer("show",$.proxy(function(){this.clearTimer("show"),this.show()},this),this.options.showDelay||1))},show:function(){if(this.clearTimer("hide"),!this.visible()&&!this.is("disabled")&&$(this.target).is(":visible")){this.is("visible",!0),this.attach(),this.stop();var e=this.queues.showhide;this.is("updated")||this.is("updating")||e.queue($.proxy(function(t){this._onResizeDimensions={width:0,height:0},this.update($.proxy(function(e){return e?(this.is("visible",!1),void this.detach()):void t()},this))},this)),e.queue($.proxy(function(e){this.is("sanitized")?(this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),e()):(this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize($.proxy(function(){this.stopLoading(),this._contentWrapper.css({visibility:"visible"}),this.is("resize-to-content",!0),e()},this)))},this)),e.queue($.proxy(function(e){this.position(),this.raise(),e()},this)),e.queue($.proxy(function(e){if(this.is("updated")&&"function"==$.type(this.options.onShow)){var t=new Visible(this._tooltip);this.options.onShow(this._content[0],this.element),t.restore(),e()}else e()},this)),e.queue($.proxy(function(e){this._show(this.options.fadeIn,function(){e()})},this))}},_show:function(e,t){e=("number"==$.type(e)?e:this.options.fadeIn)||0,t=t||"function"==$.type(e)&&e,this.options.hideOthers&&Tooltips.hideAll(this),this._tooltip.fadeTo(e,1,$.proxy(function(){t&&t()},this))},hideDelayed:function(){this.clearTimer("show"),this.getTimer("hide")||!this.visible()||this.is("disabled")||this.setTimer("hide",$.proxy(function(){this.clearTimer("hide"),this.hide()},this),this.options.hideDelay||1)},hide:function(t,i){if(this.clearTimer("show"),this.visible()&&!this.is("disabled")){this.is("visible",!1),this.stop();var e=this.queues.showhide;e.queue($.proxy(function(e){this.abort(),e()},this)),e.queue($.proxy(function(e){this._hide(t,e)},this)),e.queue(function(e){Tooltips.resetZ(),e()}),e.queue($.proxy(function(e){this.clearUpdatedTo(),e()},this)),"function"==$.type(this.options.afterHide)&&this.is("updated")&&e.queue($.proxy(function(e){this.options.afterHide(this._content[0],this.element),e()},this)),this.options.cache||!this.options.ajax&&!this._fn||e.queue($.proxy(function(e){this.is("updated",!1),this.is("updating",!1),this.is("sanitized",!1),e()},this)),"function"==$.type(i)&&e.queue(function(e){i(),e()}),e.queue($.proxy(function(e){this.detach(),e()},this))}},_hide:function(e,t){t=t||"function"==$.type(e)&&e,this.attach(),this._tooltip.fadeTo(e?0:this.options.fadeOut,0,$.proxy(function(){this.stopLoading(),this.is("resize-to-content",!1),this._tooltip.hide(),t&&t()},this))},toggle:function(){this.is("disabled")||this[this.visible()?"hide":"show"]()},raise:function(){if(this.is("build")&&!this.options.zIndex){var e=Tooltips.getHighestTooltip();e&&e!=this&&this.zIndex<=e.zIndex&&(this.zIndex=e.zIndex+1,this._tooltip.css({"z-index":this.zIndex}),this._tooltipShadow&&(this._tooltipShadow.css({"z-index":this.zIndex}),this.zIndex=e.zIndex+2,this._tooltip.css({"z-index":this.zIndex})))}}}),$.extend(Tooltip.prototype,{createElementMarker:function(){!this.elementMarker&&this.content&&_.element.isAttached(this.content)&&($(this.content).data("tpd-restore-inline-display",$(this.content).css("display")),this.elementMarker=$("<div>").hide(),$(this.content).before($(this.elementMarker).hide()))},restoreElementToMarker:function(){var e;this.content,this.elementMarker&&this.content&&((e=$(this.content).data("tpd-restore-inline-display"))&&$(this.content).css({display:e}),$(this.elementMarker).before(this.content).remove())},startLoading:function(){this.is("loading")||(this.build(),this.is("loading",!0),this.options.spinner&&(this._tooltip.addClass("tpd-is-loading"),this.skin.startLoading(),this.is("resize-to-content")||(this.position(),this.raise(),this._show())))},stopLoading:function(){this.build(),this.is("loading",!1),this.options.spinner&&(this._tooltip.removeClass("tpd-is-loading"),this.skin.stopLoading())},abort:function(){this.abortAjax(),this.abortSanitize(),this.is("refreshed-before-sanitized",!1)},abortSanitize:function(){this._cache.voila&&(this._cache.voila.abort(),this._cache.voila=null)},abortAjax:function(){this._cache.xhr&&(this._cache.xhr.abort(),this._cache.xhr=null,this.is("updated",!1),this.is("updating",!1))},update:function(e){if(!this.is("updating")){this.is("updating",!0),this.build();var t=this.options.inline?"inline":this.options.ajax?"ajax":_.isElement(this.content)||_.isText(this.content)||_.isDocumentFragment(this.content)?"element":this._fn?"function":"html";switch(this._contentWrapper.css({visibility:"hidden"}),t){case"html":case"element":case"inline":if(this.is("updated"))return void(e&&e());this._update(this.content,e);break;case"function":if(this.is("updated"))return void(e&&e());var i=this._fn(this.element);if(!i)return this.is("updating",!1),void(e&&e(!0));this._update(i,e)}}},_update:function(e,t){var i={title:this.options.title,close:this.options.close};"string"==$.type(e)||_.isElement(e)||_.isText(e)||_.isDocumentFragment(e)||e instanceof $?i.content=e:$.extend(i,e);e=i.content;var n=i.title,a=i.close;this.content=e,this.title=n,this.close=a,this.createElementMarker(),(_.isElement(e)||e instanceof $)&&$(e).show(),this._content.html(this.content),this._title.html(n&&"string"==$.type(n)?n:""),this._titleWrapper[n?"show":"hide"](),this._close[(this.title||this.options.title)&&a?"show":"hide"]();var o=a&&!(this.options.title||this.title),r=a&&!(this.options.title||this.title)&&"overlap"!=a,s=a&&(this.options.title||this.title)&&"overlap"!=a;this._inner_close[o?"show":"hide"](),this._tooltip[(r?"add":"remove")+"Class"]("tpd-has-inner-close"),this._tooltip[(s?"add":"remove")+"Class"]("tpd-has-title-close"),this._content[(this.options.padding?"remove":"add")+"Class"]("tpd-content-no-padding"),this.finishUpdate(t)},sanitize:function(t){return!this.options.voila||this._content.find("img").length<1?(this.is("sanitized",!0),void(t&&t())):void(this._cache.voila=Voila(this._content,{method:"onload"},$.proxy(function(e){this._markImagesAsSanitized(e.images),this.is("refreshed-before-sanitized")?(this.is("refreshed-before-sanitized",!1),this.sanitize(t)):(this.is("sanitized",!0),t&&t())},this)))},_markImagesAsSanitized:function(e){$.each(e,function(e,t){var i=t.img;$(i).data("completed-src",t.img.src)})},_hasAllImagesSanitized:function(){var n=!0;return this._content.find("img").each(function(e,t){var i=$(t).data("completed-src");return i&&t.src==i?void 0:n=!1}),n},refresh:function(){if(this.visible()){if(!this.is("sanitized"))return void this.is("refreshed-before-sanitized",!0);this.is("refreshing",!0),this.clearTimer("refresh-spinner"),!this.options.voila||this._content.find("img").length<1||this._hasAllImagesSanitized()?(this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)):(this.is("sanitized",!1),this._contentWrapper.css({visibility:"hidden"}),this.startLoading(),this.sanitize($.proxy(function(){this._contentWrapper.css({visibility:"visible"}),this.stopLoading(),this.is("should-update-dimensions",!0),this.position(),this.is("refreshing",!1)},this)))}},finishUpdate:function(e){if(this.is("updated",!0),this.is("updating",!1),"function"==$.type(this.options.afterUpdate)){var t=this._contentWrapper.css("visibility");t&&this._contentWrapper.css({visibility:"visible"}),this.options.afterUpdate(this._content[0],this.element),t&&this._contentWrapper.css({visibility:"hidden"})}e&&e()}}),$.extend(Tooltip.prototype,{clearUpdatedTo:function(){this._cache.updatedTo={}},updateDimensionsToContent:function(e,t){this.skin.build();var i=this.is("loading"),n=this._cache.updatedTo;if((this._maxWidthPass||this.is("api")||this.is("should-update-dimensions")||n.stemPosition!=t||n.loading!=i)&&(!i||!this.is("resize-to-content"))){this._cache.updatedTo={type:this.is("resize-to-content")?"content":"spinner",loading:this.is("loading"),stemPosition:t},this.is("should-update-dimensions")&&this.is("should-update-dimensions",!1);e=e||this.options.position.target,t=t||this.options.position.tooltip;var a=Position.getSide(t),o=Position.getOrientation(t),r=this.skin._css.border;this._tooltip.addClass("tpd-tooltip-measuring");var s=this._tooltip.attr("style");this._tooltip.removeAttr("style");var l={top:r,right:r,bottom:r,left:r},c=0;if("vertical"==Position.getOrientation(t)){this.options.stem&&(l[a]=this.skin["stem_"+a].getMath().dimensions.outside.height);var u=this.getMouseRoom();u[Position._flip[a]]&&(l[a]+=u[Position._flip[a]]);var p=this.getContainmentLayout(t),d=this.getPaddingLine(e),f=!1;Position.isPointWithinBoxLayout(d.x1,d.y1,p)||Position.isPointWithinBoxLayout(d.x2,d.y2,p)?f=!0:$.each("top right bottom left".split(" "),$.proxy(function(e,t){var i=this.getSideLine(p,t);return Position.intersectsLine(d.x1,d.y1,d.x2,d.y2,i.x1,i.y1,i.x2,i.y2)?!(f=!0):void 0},this)),f&&(c="left"==a?d.x1-p.position.left:p.position.left+p.dimensions.width-d.x1,l[a]+=c)}if(this.options.offset&&"vertical"==o){var h=Position.adjustOffsetBasedOnPosition(this.options.offset,this.options.position.target,e);0!==h.x&&(l.right+=Math.abs(h.x))}this.options.containment&&(c=this.options.containment.padding)&&($.each(l,function(e){l[e]+=c}),"vertical"==o?l["left"==a?"left":"right"]-=c:l["top"==a?"top":"bottom"]-=c);var m=Bounds.viewport(),b={width:0,height:0};this.close&&"overlap"!=this.close&&!this.title&&(b=this._innerCloseDimensions||{width:this._inner_close.outerWidth(!0),height:this._inner_close.outerHeight(!0)},this._innerCloseDimensions=b),this._contentRelativePadder.css({"padding-right":b.width}),this._contentSpacer.css({width:m.width-l.left-l.right});var g={width:this._content.innerWidth()+b.width,height:Math.max(this._content.innerHeight(),b.height||0)},v={width:0,height:0};if(this.title){var _={width:0,height:0};this._titleWrapper.add(this._titleSpacer).css({width:"auto",height:"auto"}),this.close&&"overlap"!=this.close&&(_={width:this._close.outerWidth(!0),height:this._close.outerHeight(!0)},this._close.hide()),this._maxWidthPass&&g.width>this.options.maxWidth&&this._titleRelative.css({width:g.width}),this._titleRelativePadder.css({"padding-right":_.width});var y=parseFloat(this._titleWrapper.css("border-bottom-width"));(v={width:this.title?this._titleWrapper.innerWidth():0,height:Math.max(this.title?this._titleWrapper.innerHeight()+y:0,_.height+y)}).width>m.width-l.left-l.right&&(v.width=m.width-l.left-l.right,this._titleSpacer.css({width:v.width}),v.height=Math.max(this.title?this._titleWrapper.innerHeight()+y:0,_.height+y)),g.width=Math.max(v.width,g.width),g.height+=v.height,this._titleWrapper.css({height:Math.max(this.title?this._titleWrapper.innerHeight():0,_.height)}),this.close&&this._close.show()}if(this.options.stem){var w="vertical"==o?"height":"width",S=this.skin["stem_"+a].getMath().outside.width+2*this.skin._css.radius;g[w]<S&&(g[w]=S)}if(this._contentSpacer.css({width:g.width}),g.height!=Math.max(this._content.innerHeight(),b.height)+(this.title?this._titleRelative.outerHeight():0)&&g.width++,this.is("resize-to-content")||(g=this.skin._css.spinner.dimensions),this.setDimensions(g),l={top:r,right:r,bottom:r,left:r},this.options.stem){var x=Position.getSide(t);l[x]=this.skin.stem_top.getMath().dimensions.outside.height}this._contentSpacer.css({"margin-top":l.top,"margin-left":+l.left,width:g.width}),(this.title||this.close)&&this._titleWrapper.css({height:this._titleWrapper.innerHeight(),width:g.width}),this._tooltip.removeClass("tpd-tooltip-measuring"),this._tooltip.attr("style",s);var k=this._contentRelative.add(this._titleRelative);this.options.maxWidth&&g.width>this.options.maxWidth&&!this._maxWidthPass&&this.is("resize-to-content")&&(k.css({width:this.options.maxWidth}),this._maxWidthPass=!0,this.updateDimensionsToContent(e,t),this._maxWidthPass=!1,k.css({width:"auto"}))}},setDimensions:function(e){this.skin.setDimensions(e)},getContainmentSpace:function(e,t){var i=this.getContainmentLayout(e,t),n=this.getTargetLayout(),a=n.position,o=n.dimensions,r=i.position,s=i.dimensions,l={top:Math.max(a.top-r.top,0),bottom:Math.max(r.top+s.height-(a.top+o.height),0),left:Math.max(a.left-r.left,0),right:Math.max(r.left+s.width-(a.left+o.width),0)};return a.top>r.top+s.height&&(l.top-=a.top-(r.top+s.height)),a.top+o.height<r.top&&(l.bottom-=r.top-(a.top+o.height)),a.left>r.left+s.width&&r.left+s.width>=a.left&&(l.left-=a.left-(r.left+s.width)),a.left+o.width<r.left&&(l.right-=r.left-(a.left+o.width)),this._cache.layouts.containmentSpace=l},position:function(){if(this.visible()){this.is("positioning",!0),this._cache.layouts={},this._cache.dimensions;var e=this.options.position.target,t=this.options.position.tooltip,i=t,n=e;this.updateDimensionsToContent(n,i);var a=deepExtend(this.getPositionBasedOnTarget(n,i)),o=[];if(this.options.containment){var r=!1,s={};if($.each("top right bottom left".split(" "),$.proxy(function(e,t){(s[t]=this.isSideWithinContainment(t,i,!0))&&(r=!0)},this)),r||(a.contained=!0),a.contained)this.setPosition(a);else if(o.unshift({position:a,targetPosition:n,stemPosition:i}),n=Position.flip(e),i=Position.flip(t),s[Position.getSide(n)]?(this.updateDimensionsToContent(n,i),a=this.getPositionBasedOnTarget(n,i)):a.contained=!1,a.contained)this.setPosition(a,i);else{o.unshift({position:a,targetPosition:n,stemPosition:i});var l=e,c=this.getContainmentSpace(i,!0),u="horizontal"==Position.getOrientation(l)?["left","right"]:["top","bottom"],p=(c[u[0]]===c[u[1]]?"horizontal"==Position.getOrientation(l)?"left":"top":u[c[u[0]]>c[u[1]]?0:1])+Position.split(l)[1],d=Position.flip(p);if(n=p,i=d,s[Position.getSide(n)]?(this.updateDimensionsToContent(n,i),a=this.getPositionBasedOnTarget(n,i)):a.contained=!1,a.contained)this.setPosition(a,i);else{o.unshift({position:a,targetPosition:n,stemPosition:i});var f,h=[];if($.each(o,function(e,t){if(0<=t.position.top&&0<=t.position.left)f=t;else{var i=0<=t.position.top?1:Math.abs(t.position.top),n=0<=t.position.left?1:Math.abs(t.position.left);h.push({result:t,negativity:i*n})}}),!f){var m=h[h.length-1];$.each(h,function(e,t){t.negativity<m.negativity&&(m=t)}),f=m.result}this.updateDimensionsToContent(f.targetPosition,f.stemPosition,!0),this.setPosition(f.position,f.stemPosition)}}}else this.setPosition(a);this._cache.dimensions=this.skin._vars.dimensions,this.skin.paint(),this.is("positioning",!1)}},getPositionBasedOnTarget:function(e,t){t=t||this.options.position.tooltip;var i=this.getTargetDimensions(),n={left:0,top:0},a={left:0,top:0};Position.getSide(e);var o=this.skin._vars,r=o.frames[Position.getSide(t)],s=Position.getOrientation(e),l=Position.split(e);if("horizontal"==s){var c=Math.floor(.5*i.width);switch(l[2]){case"left":a.left=c;break;case"middle":n.left=i.width-c,a.left=n.left;break;case"right":n.left=i.width,a.left=i.width-c}"bottom"==l[1]&&(n.top=i.height,a.top=i.height)}else{c=Math.floor(.5*i.height);switch(l[2]){case"top":a.top=c;break;case"middle":n.top=i.height-c,a.top=n.top;break;case"bottom":a.top=i.height-c,n.top=i.height}"right"==l[1]&&(n.left=i.width,a.left=i.width)}var u=this.getTargetPosition(),p=$.extend({},i,{top:u.top,left:u.left,connection:n,max:a}),d={width:r.dimensions.width,height:r.dimensions.height,top:0,left:0,connection:o.connections[t].connection,stem:o.connections[t].stem};if(d.top=p.top+p.connection.top,d.left=p.left+p.connection.left,d.top-=d.connection.top,d.left-=d.connection.left,this.options.stem){var f=o.stemDimensions.width,h={stem:{top:d.top+d.stem.connection.top,left:d.left+d.stem.connection.left},connection:{top:p.top+p.connection.top,left:p.left+p.connection.left},max:{top:p.top+p.max.top,left:p.left+p.max.left}};if(!Position.isPointWithinBox(h.stem.left,h.stem.top,h.connection.left,h.connection.top,h.max.left,h.max.top)){h={stem:{top:d.top+d.stem.connection.top,left:d.left+d.stem.connection.left},connection:{top:p.top+p.connection.top,left:p.left+p.connection.left},max:{top:p.top+p.max.top,left:p.left+p.max.left}};var m={connection:Position.getDistance(h.stem.left,h.stem.top,h.connection.left,h.connection.top),max:Position.getDistance(h.stem.left,h.stem.top,h.max.left,h.max.top)},b=Math.min(m.connection,m.max),g=h[m.connection<=m.max?"connection":"max"],v="horizontal"==Position.getOrientation(t)?"left":"top";if(f<=Position.getDistance(h.connection.left,h.connection.top,h.max.left,h.max.top)){var _={top:0,left:0},y=g[v]<h.stem[v]?-1:1;_[v]=b*y,_[v]+=Math.floor(.5*f)*y,d.left+=_.left,d.top+=_.top}else{$.extend(h,{center:{top:Math.round(p.top+.5*i.height),left:Math.round(p.left+.5*i.left)}});b=m[Position.getDistance(h.center.left,h.center.top,h.connection.left,h.connection.top)<=Position.getDistance(h.center.left,h.center.top,h.max.left,h.max.top)?"connection":"max"];var w={top:0,left:0};y=g[v]<h.stem[v]?-1:1;w[v]=b*y,d.left+=w.left,d.top+=w.top}}}if(this.options.offset){var S=$.extend({},this.options.offset);S=Position.adjustOffsetBasedOnPosition(S,this.options.position.target,e),d.top+=S.y,d.left+=S.x}var x=this.getContainment({top:d.top,left:d.left},t),k=x.horizontal&&x.vertical,C={x:0,y:0},T=Position.getOrientation(t);if(!x[T]){var z="horizontal"==T,P=z?["left","right"]:["up","down"],A=z?"x":"y",O=z?"left":"top",j=x.correction[A],F=this.getContainmentLayout(t),I=F.position[z?"left":"top"];if(0!==j){var E=o.connections[t].move,D=E[P[-1*j<0?0:1]],M=j<0?-1:1;if(j*M<=D&&d[O]+j>=I)d[O]+=j,C[A]=-1*j,k=!0;else if(Position.getOrientation(e)==Position.getOrientation(t)){if(d[O]+=D*M,C[A]=-1*D*M,d[O]<I){var R=I-d[O],B=E[P[0]]+E[P[1]];R=Math.min(R,B);d[O]+=R;var L=C[A]-R;L>=o.connections[t].move[P[0]]&&L<=o.connections[t].move[P[1]]&&(C[A]-=R)}var N=(x=this.getContainment({top:d.top,left:d.left},t)).correction[A],X=deepExtend({},d);this.options.offset&&(X.left-=this.options.offset.x,X.top-=this.options.offset.y),(h={stem:{top:X.top+d.stem.connection.top,left:X.left+d.stem.connection.left}}).stem[O]+=C[A];var Y=this.getTargetLayout(),U=(f=o.stemDimensions.width,Math.floor(.5*f)),H=I+F.dimensions[z?"width":"height"];if("x"==A){var V=Y.position.left+U;0<N&&(V+=Y.dimensions.width-2*U),(N<0&&h.stem.left+N>=V&&X.left+N>=I||0<N&&h.stem.left+N<=V&&X.left+N<=H)&&(X.left+=N)}else{var W=Y.position.top+U;0<N&&(W+=Y.dimensions.height-2*U),(N<0&&h.stem.top+N>=W&&X.top+N>=I||0<N&&h.stem.top+N<=W&&X.top+N<=H)&&(X.top+=N)}d=X,this.options.offset&&(d.left+=this.options.offset.x,d.top+=this.options.offset.y)}}k=(x=this.getContainment({top:d.top,left:d.left},t)).horizontal&&x.vertical}return{top:d.top,left:d.left,contained:k,shift:C}},setPosition:function(e,t){var i=this._position;if(!i||i.top!=e.top||i.left!=e.left){var n;if(this.options.container!=document.body){if("string"==$.type(this.options.container)){var a=this.target;"mouse"==a&&(a=this.element),n=$($(a).closest(this.options.container).first())}else n=$(n);if(n[0]){var o=$(n).offset(),r=Math.round(o.top),s=Math.round(o.left),l=Math.round($(n).scrollTop()),c=Math.round($(n).scrollLeft());e.top-=r,e.top+=l,e.left-=s,e.left+=c}}this._position=e,this._tooltip.css({top:e.top,left:e.left})}this.skin.setStemPosition(t||this.options.position.tooltip,e.shift||{x:0,y:0})},getSideLine:function(e,t){var i=e.position.left,n=e.position.top,a=e.position.left,o=e.position.top;switch(t){case"top":a+=e.dimensions.width;break;case"bottom":n+=e.dimensions.height,a+=e.dimensions.width,o+=e.dimensions.height;break;case"left":o+=e.dimensions.height;break;case"right":i+=e.dimensions.width,a+=e.dimensions.width,o+=e.dimensions.height}return{x1:i,y1:n,x2:a,y2:o}},isSideWithinContainment:function(e,t,i){var n=this.getContainmentLayout(t,i),a=this.getTargetLayout(),o=this.getSideLine(a,e);if(Position.isPointWithinBoxLayout(o.x1,o.y1,n)||Position.isPointWithinBoxLayout(o.x2,o.y2,n))return!0;var r=!1;return $.each("top right bottom left".split(" "),$.proxy(function(e,t){var i=this.getSideLine(n,t);return Position.intersectsLine(o.x1,o.y1,o.x2,o.y2,i.x1,i.y1,i.x2,i.y2)?!(r=!0):void 0},this)),r},getContainment:function(e,t){var i={horizontal:!0,vertical:!0,correction:{y:0,x:0}};if(this.options.containment){var n=this.getContainmentLayout(t),a=this.skin._vars.frames[Position.getSide(t)].dimensions;this.options.containment&&((e.left<n.position.left||e.left+a.width>n.position.left+n.dimensions.width)&&(i.horizontal=!1,i.correction.x=e.left<n.position.left?n.position.left-e.left:n.position.left+n.dimensions.width-(e.left+a.width)),(e.top<n.position.top||e.top+a.height>n.position.top+n.dimensions.height)&&(i.vertical=!1,i.correction.y=e.top<n.position.top?n.position.top-e.top:n.position.top+n.dimensions.height-(e.top+a.height)))}return i},getContainmentLayout:function(e,t){var i={top:$(window).scrollTop(),left:$(window).scrollLeft()},n=this.target;"mouse"==n&&(n=this.element);var a,o=$(n).closest(this.options.containment.selector).first()[0];a=o&&"viewport"!=this.options.containment.selector?{dimensions:{width:$(o).innerWidth(),height:$(o).innerHeight()},position:$(o).offset()}:{dimensions:Bounds.viewport(),position:i};var r=this.options.containment.padding;if(r&&!t){var s=Math.max(a.dimensions.height,a.dimensions.width);if(s<2*r&&(r=Math.max(Math.floor(.5*s),0)),r)a.dimensions.width-=2*r,a.dimensions.height-=2*r,a.position.top+=r,a.position.left+=r,"vertical"==Position.getOrientation(e)?(a.dimensions.width+=r,"left"==Position.getSide(e)&&(a.position.left-=r)):(a.dimensions.height+=r,"top"==Position.getSide(e)&&(a.position.top-=r))}return this._cache.layouts.containmentLayout=a},getMouseRoom:function(){var e={top:0,left:0,right:0,bottom:0};if("mouse"==this.options.target&&!this.is("api")){var t=Mouse.getActualPosition(this._cache.event),i=$(this.element).offset(),n=$(this.element).innerWidth(),a=$(this.element).innerHeight();e={top:Math.max(0,t.top-i.top),bottom:Math.max(0,i.top+a-t.top),left:Math.max(0,t.left-i.left),right:Math.max(0,i.left+n-t.left)}}return e},getTargetPosition:function(){var e;if("mouse"==this.options.target)if(this.is("api")){var t=$(this.element).offset();e={top:Math.round(t.top),left:Math.round(t.left)}}else e=Mouse.getPosition(this._cache.event);else{t=$(this.target).offset();e={top:Math.round(t.top),left:Math.round(t.left)}}return this._cache.layouts.targetPosition=e},getTargetDimensions:function(){return this._cache.layouts.targetDimensions?this._cache.layouts.targetDimensions:(e="mouse"==this.options.target?Mouse.getDimensions():{width:$(this.target).innerWidth(),height:$(this.target).innerHeight()},this._cache.layouts.targetDimensions=e);var e},getTargetLayout:function(){if(this._cache.layouts.targetLayout)return this._cache.layouts.targetLayout;var e={position:this.getTargetPosition(),dimensions:this.getTargetDimensions()};return this._cache.layouts.targetLayout=e},getPaddingLine:function(e){var t=this.getTargetLayout(),i="left";if("vertical"==Position.getOrientation(e))return this.getSideLine(t,Position.getSide(e));if(Position.isCorner(e)){var n=Position.inverseCornerPlane(e);return i=Position.getSide(n),this.getSideLine(t,i)}var a=this.getSideLine(t,i),o=Math.round(.5*t.dimensions.width);return a.x1+=o,a.x2+=o,a}}),$.extend(Tooltip.prototype,{setActive:function(){this.is("active",!0),this.visible()&&this.raise(),this.options.hideAfter&&this.clearTimer("idle")},setIdle:function(){this.is("active",!1),this.options.hideAfter&&this.setTimer("idle",$.proxy(function(){this.clearTimer("idle"),this.is("active")||this.hide()},this),this.options.hideAfter)}}),$.extend(Tooltip.prototype,{bind:function(e,t,i,n){t=t;var a=$.proxy(i,n||this);this._cache.events.push({element:e,eventName:t,handler:a}),$(e).bind(t,a)},unbind:function(){$.each(this._cache.events,function(e,t){$(t.element).unbind(t.eventName,t.handler)}),this._cache.events=[]}}),$.extend(Tooltip.prototype,{disable:function(){this.is("disabled")||this.is("disabled",!0)},enable:function(){this.is("disabled")&&this.is("disabled",!1)}}),$.extend(Tooltip.prototype,{is:function(e,t){return"boolean"==$.type(t)&&(this._cache.is[e]=t),this._cache.is[e]},visible:function(){return this.is("visible")}}),$.extend(Tooltip.prototype,{setTimer:function(e,t,i){this._cache.timers[e]=_.delay(t,i)},getTimer:function(e){return this._cache.timers[e]},clearTimer:function(e){this._cache.timers[e]&&(clearTimeout(this._cache.timers[e]),delete this._cache.timers[e])},clearTimers:function(){$.each(this._cache.timers,function(e,t){clearTimeout(t)}),this._cache.timers={}}}),$.extend(Tipped,{init:function(){Tooltips.init()},create:function(e,i){var n=$.extend({},arguments[2]||{}),a=[];return _.isElement(e)?a.push(new Tooltip(e,i,n)):$(e).each(function(e,t){a.push(new Tooltip(t,i,n))}),new Collection(a)},get:function(e){return new Collection(Tooltips.get(e))},findElement:function(e){return Tooltips.findElement(e)},refresh:function(e,t,i){return Tooltips.refresh(e,t,i),this},setStartingZIndex:function(e){return Tooltips.setStartingZIndex(e),this},remove:function(e){return Tooltips.remove(e),this}}),$.extend(Collection.prototype,{initialize:function(e){return this.tooltips=e,this},items:function(){return $.each(this.tooltips,function(e,t){t.is("api",!0)}),this.tooltips},refresh:function(){return $.each(this._tooltips,function(e,t){t.is("visible")&&t.refresh()}),this},remove:function(){return Tooltips.removeTooltips(this.tooltips),this.tooltips=[],this}}),Tipped.init(),Tipped}),function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),i(t),t}:i(jQuery)}(function(p){var e=function(){if(p&&p.fn&&p.fn.select2&&p.fn.select2.amd)var e=p.fn.select2.amd;var t,i,n,f,o,r,h,m,b,g,v,_,a,s,y,l;function w(e,t){return a.call(e,t)}function c(e,t){var i,n,a,o,r,s,l,c,u,p,d,f=t&&t.split("/"),h=v.map,m=h&&h["*"]||{};if(e){for(r=(e=e.split("/")).length-1,v.nodeIdCompat&&y.test(e[r])&&(e[r]=e[r].replace(y,"")),"."===e[0].charAt(0)&&f&&(e=f.slice(0,f.length-1).concat(e)),u=0;u<e.length;u++)if("."===(d=e[u]))e.splice(u,1),u-=1;else if(".."===d){if(0===u||1===u&&".."===e[2]||".."===e[u-1])continue;0<u&&(e.splice(u-1,2),u-=2)}e=e.join("/")}if((f||m)&&h){for(u=(i=e.split("/")).length;0<u;u-=1){if(n=i.slice(0,u).join("/"),f)for(p=f.length;0<p;p-=1)if(a=(a=h[f.slice(0,p).join("/")])&&a[n]){o=a,s=u;break}if(o)break;!l&&m&&m[n]&&(l=m[n],c=u)}!o&&l&&(o=l,s=c),o&&(i.splice(0,s,o),e=i.join("/"))}return e}function S(t,i){return function(){var e=s.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),r.apply(f,e.concat([t,i]))}}function x(t){return function(e){b[t]=e}}function k(e){if(w(g,e)){var t=g[e];delete g[e],_[e]=!0,o.apply(f,t)}if(!w(b,e)&&!w(_,e))throw new Error("No "+e);return b[e]}function u(e){var t,i=e?e.indexOf("!"):-1;return-1<i&&(t=e.substring(0,i),e=e.substring(i+1,e.length)),[t,e]}function C(e){return e?u(e):[]}return e&&e.requirejs||(e?i=e:e={},b={},g={},v={},_={},a=Object.prototype.hasOwnProperty,s=[].slice,y=/\.js$/,h=function(e,t){var i,n=u(e),a=n[0],o=t[1];return e=n[1],a&&(i=k(a=c(a,o))),a?e=i&&i.normalize?i.normalize(e,function(t){return function(e){return c(e,t)}}(o)):c(e,o):(a=(n=u(e=c(e,o)))[0],e=n[1],a&&(i=k(a))),{f:a?a+"!"+e:e,n:e,pr:a,p:i}},m={require:function(e){return S(e)},exports:function(e){var t=b[e];return void 0!==t?t:b[e]={}},module:function(e){return{id:e,uri:"",exports:b[e],config:function(e){return function(){return v&&v.config&&v.config[e]||{}}}(e)}}},o=function(e,t,i,n){var a,o,r,s,l,c,u,p=[],d=typeof i;if(c=C(n=n||e),"undefined"==d||"function"==d){for(t=!t.length&&i.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(o=(s=h(t[l],c)).f))p[l]=m.require(e);else if("exports"===o)p[l]=m.exports(e),u=!0;else if("module"===o)a=p[l]=m.module(e);else if(w(b,o)||w(g,o)||w(_,o))p[l]=k(o);else{if(!s.p)throw new Error(e+" missing "+o);s.p.load(s.n,S(n,!0),x(o),{}),p[l]=b[o]}r=i?i.apply(b[e],p):void 0,e&&(a&&a.exports!==f&&a.exports!==b[e]?b[e]=a.exports:r===f&&u||(b[e]=r))}else e&&(b[e]=i)},t=i=r=function(e,t,i,n,a){if("string"==typeof e)return m[e]?m[e](t):k(h(e,C(t)).f);if(!e.splice){if((v=e).deps&&r(v.deps,v.callback),!t)return;t.splice?(e=t,t=i,i=null):e=f}return t=t||function(){},"function"==typeof i&&(i=n,n=a),n?o(f,e,t,i):setTimeout(function(){o(f,e,t,i)},4),r},r.config=function(e){return r(e)},t._defined=b,(n=function(e,t,i){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(i=t,t=[]),w(b,e)||w(g,e)||(g[e]=[e,t,i])}).amd={jQuery:!0},e.requirejs=t,e.require=i,e.define=n),e.define("almond",function(){}),e.define("jquery",[],function(){var e=p||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(o){var e={};function u(e){var t=e.prototype,i=[];for(var n in t){"function"==typeof t[n]&&"constructor"!==n&&i.push(n)}return i}e.Extend=function(e,t){var i={}.hasOwnProperty;function n(){this.constructor=e}for(var a in t)i.call(t,a)&&(e[a]=t[a]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},e.Decorate=function(n,a){var e=u(a),t=u(n);function o(){var e=Array.prototype.unshift,t=a.prototype.constructor.length,i=n.prototype.constructor;0<t&&(e.call(arguments,n.prototype.constructor),i=a.prototype.constructor),i.apply(this,arguments)}a.displayName=n.displayName,o.prototype=new function(){this.constructor=o};for(var i=0;i<t.length;i++){var r=t[i];o.prototype[r]=n.prototype[r]}function s(e){var t=function(){};e in o.prototype&&(t=o.prototype[e]);var i=a.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),i.apply(this,arguments)}}for(var l=0;l<e.length;l++){var c=e[l];o.prototype[c]=s(c)}return o};function t(){this.listeners={}}return t.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},t.prototype.trigger=function(e){var t=Array.prototype.slice,i=t.call(arguments,1);this.listeners=this.listeners||{},null==i&&(i=[]),0===i.length&&i.push({}),(i[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},t.prototype.invoke=function(e,t){for(var i=0,n=e.length;i<n;i++)e[i].apply(this,t)},e.Observable=t,e.generateChars=function(e){for(var t="",i=0;i<e;i++){t+=Math.floor(36*Math.random()).toString(36)}return t},e.bind=function(e,t){return function(){e.apply(t,arguments)}},e._convertData=function(e){for(var t in e){var i=t.split("-"),n=e;if(1!==i.length){for(var a=0;a<i.length;a++){var o=i[a];(o=o.substring(0,1).toLowerCase()+o.substring(1))in n||(n[o]={}),a==i.length-1&&(n[o]=e[t]),n=n[o]}delete e[t]}}return e},e.hasScroll=function(e,t){var i=o(t),n=t.style.overflowX,a=t.style.overflowY;return(n!==a||"hidden"!==a&&"visible"!==a)&&("scroll"===n||"scroll"===a||(i.innerHeight()<t.scrollHeight||i.innerWidth()<t.scrollWidth))},e.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},e.appendMany=function(e,t){if("1.7"===o.fn.jquery.substr(0,3)){var i=o();o.map(t,function(e){i=i.add(e)}),t=i}e.append(t)},e}),e.define("select2/results",["jquery","./utils"],function(d,e){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=d('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=d('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),n=this.options.get("translations").get(e.message);i.append(t(n(e.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var i=0;i<e.results.length;i++){var n=e.results[i],a=this.option(n);t.push(a)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(e){var n=d.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=d(this),t=d.data(this,"data"),i=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<d.inArray(i,n)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},i=this.option(t);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};for(var n in e.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==e.id&&delete i["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(i.role="group",i["aria-label"]=e.text,delete i["aria-selected"]),i){var a=i[n];t.setAttribute(n,a)}if(e.children){var o=d(t),r=document.createElement("strong");r.className="select2-results__group";d(r);this.template(e,r);for(var s=[],l=0;l<e.children.length;l++){var c=e.children[l],u=this.option(c);s.push(u)}var p=d("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});p.append(s),o.append(r),o.append(p)}else this.template(e,t);return d.data(t,"data",e),t},n.prototype.bind=function(t,e){var l=this,i=t.id+"-results";this.$results.attr("id",i),t.on("results:all",function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("results:append",function(e){l.append(e.data),t.isOpen()&&l.setClasses()}),t.on("query",function(e){l.hideMessages(),l.showLoading(e)}),t.on("select",function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),t.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=l.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),i=t.index(e);if(0!==i){var n=i-1;0===e.length&&(n=0);var a=t.eq(n);a.trigger("mouseenter");var o=l.$results.offset().top,r=a.offset().top,s=l.$results.scrollTop()+(r-o);0===n?l.$results.scrollTop(0):r-o<0&&l.$results.scrollTop(s)}}),t.on("results:next",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),i=t.index(e)+1;if(!(i>=t.length)){var n=t.eq(i);n.trigger("mouseenter");var a=l.$results.offset().top+l.$results.outerHeight(!1),o=n.offset().top+n.outerHeight(!1),r=l.$results.scrollTop()+o-a;0===i?l.$results.scrollTop(0):a<o&&l.$results.scrollTop(r)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){l.displayMessage(e)}),d.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop(),i=l.$results.get(0).scrollHeight-t+e.deltaY,n=0<e.deltaY&&t-e.deltaY<=0,a=e.deltaY<0&&i<=l.$results.height();n?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):a&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=d(this),i=t.data("data");"true"!==t.attr("aria-selected")?l.trigger("select",{originalEvent:e,data:i}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:i}):l.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=d(this).data("data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:d(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),i=this.$results.offset().top,n=e.offset().top,a=this.$results.scrollTop()+(n-i),o=n-i;a-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(o>this.$results.outerHeight()||o<0)&&this.$results.scrollTop(a)}},n.prototype.template=function(e,t){var i=this.options.get("templateResult"),n=this.options.get("escapeMarkup"),a=i(e,t);null==a?t.style.display="none":"string"==typeof a?t.innerHTML=n(a):d(t).append(a)},n}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(i,e,a){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=i('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},n.prototype.bind=function(e,t){var i=this,n=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){i.trigger("focus",e)}),this.$selection.on("blur",function(e){i._handleBlur(e)}),this.$selection.on("keydown",function(e){i.trigger("keypress",e),e.which===a.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){i.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){i.update(e.data)}),e.on("open",function(){i.$selection.attr("aria-expanded","true"),i.$selection.attr("aria-owns",n),i._attachCloseHandler(e)}),e.on("close",function(){i.$selection.attr("aria-expanded","false"),i.$selection.removeAttr("aria-activedescendant"),i.$selection.removeAttr("aria-owns"),i.$selection.focus(),i._detachCloseHandler(e)}),e.on("enable",function(){i.$selection.attr("tabindex",i._tabindex)}),e.on("disable",function(){i.$selection.attr("tabindex","-1")})},n.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||i.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},n.prototype._attachCloseHandler=function(e){i(document.body).on("mousedown.select2."+e.id,function(e){var t=i(e.target).closest(".select2");i(".select2.select2-container--open").each(function(){var e=i(this);this!=t[0]&&e.data("element").select2("close")})})},n.prototype._detachCloseHandler=function(e){i(document.body).off("mousedown.select2."+e.id)},n.prototype.position=function(e,t){t.find(".selection").append(e)},n.prototype.destroy=function(){this._detachCloseHandler(this.container)},n.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},n}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,i,n){function a(){a.__super__.constructor.apply(this,arguments)}return i.Extend(a,t),a.prototype.render=function(){var e=a.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},a.prototype.bind=function(t,e){var i=this;a.__super__.bind.apply(this,arguments);var n=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(e){1===e.which&&i.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||i.$selection.focus()}),t.on("selection:update",function(e){i.update(e.data)})},a.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},a.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},a.prototype.selectionContainer=function(){return e("<span></span>")},a.prototype.update=function(e){if(0!==e.length){var t=e[0],i=this.$selection.find(".select2-selection__rendered"),n=this.display(t,i);i.empty().append(n),i.prop("title",t.title||t.text)}else this.clear()},a}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(n,e,s){function a(e,t){a.__super__.constructor.apply(this,arguments)}return s.Extend(a,e),a.prototype.render=function(){var e=a.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},a.prototype.bind=function(e,t){var i=this;a.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){i.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!i.options.get("disabled")){var t=n(this).parent().data("data");i.trigger("unselect",{originalEvent:e,data:t})}})},a.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},a.prototype.display=function(e,t){var i=this.options.get("templateSelection");return this.options.get("escapeMarkup")(i(e,t))},a.prototype.selectionContainer=function(){return n('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},a.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var n=e[i],a=this.selectionContainer(),o=this.display(n,a);a.append(o),a.prop("title",n.title||n.text),a.data("data",n),t.push(a)}var r=this.$selection.find(".select2-selection__rendered");s.appendMany(r,t)}},a}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,i){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var i=this.selectionContainer();return i.html(this.display(t)),i.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),i},t.prototype.update=function(e,t){var i=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||i)return e.call(this,t);this.clear();var n=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(n)},t}),e.define("select2/selection/allowClear",["jquery","../keys"],function(n,a){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){n._handleClear(e)}),t.on("keypress",function(e){n._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var i=this.$selection.find(".select2-selection__clear");if(0!==i.length){t.stopPropagation();for(var n=i.data("data"),a=0;a<n.length;a++){var o={data:n[a]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},e.prototype._handleKeyboardClear=function(e,t,i){i.isOpen()||t.which!=a.DELETE&&t.which!=a.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var i=n('<span class="select2-selection__clear">&times;</span>');i.data("data",t),this.$selection.find(".select2-selection__rendered").prepend(i)}},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(n,e,r){function t(e,t,i){e.call(this,t,i)}return t.prototype.render=function(e){var t=n('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var i=e.call(this);return this._transferTabIndex(),i},t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("open",function(){n.$search.trigger("focus")}),t.on("close",function(){n.$search.val(""),n.$search.removeAttr("aria-activedescendant"),n.$search.trigger("focus")}),t.on("enable",function(){n.$search.prop("disabled",!1),n._transferTabIndex()}),t.on("disable",function(){n.$search.prop("disabled",!0)}),t.on("focus",function(e){n.$search.trigger("focus")}),t.on("results:focus",function(e){n.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){n.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){n._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),n.trigger("keypress",e),n._keyUpPrevented=e.isDefaultPrevented(),e.which===r.BACKSPACE&&""===n.$search.val()){var t=n.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var i=t.data("data");n.searchRemoveChoice(i),e.preventDefault()}}});var a=document.documentMode,o=a&&a<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){o?n.$selection.off("input.search input.searchcheck"):n.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(o&&"input"===e.type)n.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=r.SHIFT&&t!=r.CTRL&&t!=r.ALT&&t!=r.TAB&&n.handleSearch(e)}})},t.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},t.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},t.prototype.update=function(e,t){var i=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),i&&this.$search.focus()},t.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},t.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},t.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").innerWidth():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},t}),e.define("select2/selection/eventRelay",["jquery"],function(r){function e(){}return e.prototype.bind=function(e,t,i){var n=this,a=["open","opening","close","closing","select","selecting","unselect","unselecting"],o=["opening","closing","selecting","unselecting"];e.call(this,t,i),t.on("*",function(e,t){if(-1!==r.inArray(e,a)){t=t||{};var i=r.Event("select2:"+e,{params:t});n.$element.trigger(i),-1!==r.inArray(e,o)&&(t.prevented=i.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,i){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var t=i(e);n._cache[e]=t}return new n(n._cache[e])},n}),e.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),e.define("select2/data/base",["../utils"],function(n){function i(e,t){i.__super__.constructor.call(this)}return n.Extend(i,n.Observable),i.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},i.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},i.prototype.bind=function(e,t){},i.prototype.destroy=function(){},i.prototype.generateResultId=function(e,t){var i=e.id+"-result-";return i+=n.generateChars(4),null!=t.id?i+="-"+t.id.toString():i+="-"+n.generateChars(4),i},i}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,t,s){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var i=[],n=this;this.$element.find(":selected").each(function(){var e=s(this),t=n.item(e);i.push(t)}),e(i)},i.prototype.select=function(a){var o=this;if(a.selected=!0,s(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(e){var t=[];(a=[a]).push.apply(a,e);for(var i=0;i<a.length;i++){var n=a[i].id;-1===s.inArray(n,t)&&t.push(n)}o.$element.val(t),o.$element.trigger("change")});else{var e=a.id;this.$element.val(e),this.$element.trigger("change")}},i.prototype.unselect=function(a){var o=this;if(this.$element.prop("multiple")){if(a.selected=!1,s(a.element).is("option"))return a.element.selected=!1,void this.$element.trigger("change");this.current(function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i].id;n!==a.id&&-1===s.inArray(n,t)&&t.push(n)}o.$element.val(t),o.$element.trigger("change")})}},i.prototype.bind=function(e,t){var i=this;(this.container=e).on("select",function(e){i.select(e.data)}),e.on("unselect",function(e){i.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){s.removeData(this,"data")})},i.prototype.query=function(n,e){var a=[],o=this;this.$element.children().each(function(){var e=s(this);if(e.is("option")||e.is("optgroup")){var t=o.item(e),i=o.matches(n,t);null!==i&&a.push(i)}}),e({results:a})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=s(t),n=this._normalizeItem(e);return n.element=t,s.data(t,"data",n),i},i.prototype.item=function(e){var t={};if(null!=(t=s.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),n=[],a=0;a<i.length;a++){var o=s(i[a]),r=this.item(o);n.push(r)}t.children=n}return(t=this._normalizeItem(t)).element=e[0],s.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){s.isPlainObject(e)||(e={id:e,text:e});return null!=(e=s.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),s.extend({},{selected:!1,disabled:!1},e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,h,m){function n(e,t){var i=t.get("data")||[];n.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(i))}return h.Extend(n,e),n.prototype.select=function(i){var e=this.$element.find("option").filter(function(e,t){return t.value==i.id.toString()});0===e.length&&(e=this.option(i),this.addOptions(e)),n.__super__.select.call(this,i)},n.prototype.convertToOptions=function(e){var t=this,i=this.$element.find("option"),n=i.map(function(){return t.item(m(this)).id}).get(),a=[];function o(e){return function(){return m(this).val()==e.id}}for(var r=0;r<e.length;r++){var s=this._normalizeItem(e[r]);if(0<=m.inArray(s.id,n)){var l=i.filter(o(s)),c=this.item(l),u=m.extend(!0,{},s,c),p=this.option(u);l.replaceWith(p)}else{var d=this.option(s);if(s.children){var f=this.convertToOptions(s.children);h.appendMany(d,f)}a.push(d)}}return a},n}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,o){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return o.extend({},e,{q:e.term})},transport:function(e,t,i){var n=o.ajax(e);return n.then(t),n.fail(i),n}};return o.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(i,n){var a=this;null!=this._request&&(o.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=o.extend({type:"GET"},this.ajaxOptions);function e(){var e=t.transport(t,function(e){var t=a.processResults(e,i);a.options.get("debug")&&window.console&&console.error&&(t&&t.results&&o.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),n(t)},function(){e.status&&"0"===e.status||a.trigger("results:message",{message:"errorLoading"})});a._request=e}"function"==typeof t.url&&(t.url=t.url.call(this.$element,i)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,i)),this.ajaxOptions.delay&&null!=i.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},i}),e.define("select2/data/tags",["jquery"],function(u){function e(e,t,i){var n=i.get("tags"),a=i.get("createTag");void 0!==a&&(this.createTag=a);var o=i.get("insertTag");if(void 0!==o&&(this.insertTag=o),e.call(this,t,i),u.isArray(n))for(var r=0;r<n.length;r++){var s=n[r],l=this._normalizeItem(s),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,c,u){var p=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,i){for(var n=t.results,a=0;a<n.length;a++){var o=n[a],r=null!=o.children&&!e({results:o.children},!0);if((o.text||"").toUpperCase()===(c.term||"").toUpperCase()||r)return!i&&(t.data=n,void u(t))}if(i)return!0;var s=p.createTag(c);if(null!=s){var l=p.option(s);l.attr("data-select2-tag",!0),p.addOptions([l]),p.insertTag(n,s)}t.results=n,u(t)}):e.call(this,c,u)},e.prototype.createTag=function(e,t){var i=u.trim(t.term);return""===i?null:{id:i,text:i}},e.prototype.insertTag=function(e,t,i){t.unshift(i)},e.prototype._removeOldTags=function(e){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||u(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(p){function e(e,t,i){var n=i.get("tokenizer");void 0!==n&&(this.tokenizer=n),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){e.call(this,t,i),this.$search=t.dropdown.$search||t.selection.$search||i.find(".select2-search__field")},e.prototype.query=function(e,t,i){var n=this;t.term=t.term||"";var a=this.tokenizer(t,this.options,function(e){var t=n._normalizeItem(e);if(!n.$element.find("option").filter(function(){return p(this).val()===t.id}).length){var i=n.option(t);i.attr("data-select2-tag",!0),n._removeOldTags(),n.addOptions([i])}!function(e){n.trigger("select",{data:e})}(t)});a.term!==t.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.focus()),t.term=a.term),e.call(this,t,i)},e.prototype.tokenizer=function(e,t,i,n){for(var a=i.get("tokenSeparators")||[],o=t.term,r=0,s=this.createTag||function(e){return{id:e.term,text:e.term}};r<o.length;){var l=o[r];if(-1!==p.inArray(l,a)){var c=o.substr(0,r),u=s(p.extend({},t,{term:c}));null!=u?(n(u),o=o.substr(r+1)||"",r=0):r++}else r++}return{term:o}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,i){this.minimumInputLength=i.get("minimumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,i)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,i){this.maximumInputLength=i.get("maximumInputLength"),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,i)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,i){this.maximumSelectionLength=i.get("maximumSelectionLength"),e.call(this,t,i)}return e.prototype.query=function(i,n,a){var o=this;this.current(function(e){var t=null!=e?e.length:0;0<o.maximumSelectionLength&&t>=o.maximumSelectionLength?o.trigger("results:message",{message:"maximumSelected",args:{maximum:o.maximumSelectionLength}}):i.call(o,n,a)})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return e.Extend(i,e.Observable),i.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},i.prototype.bind=function(){},i.prototype.position=function(e,t){},i.prototype.destroy=function(){this.$dropdown.remove()},i}),e.define("select2/dropdown/search",["jquery","../utils"],function(a,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),i=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),t.prepend(i),t},t.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),this.$search.on("keydown",function(e){n.trigger("keypress",e),n._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){a(this).off("keyup")}),this.$search.on("keyup input",function(e){n.handleSearch(e)}),t.on("open",function(){n.$search.attr("tabindex",0),n.$search.focus(),window.setTimeout(function(){n.$search.focus()},0)}),t.on("close",function(){n.$search.attr("tabindex",-1),n.$search.val("")}),t.on("focus",function(){t.isOpen()||n.$search.focus()}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(n.showSearch(e)?n.$searchContainer.removeClass("select2-search--hide"):n.$searchContainer.addClass("select2-search--hide"))})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,i,n){this.placeholder=this.normalizePlaceholder(i.get("placeholder")),e.call(this,t,i,n)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var i=t.slice(0),n=t.length-1;0<=n;n--){var a=t[n];this.placeholder.id===a.id&&i.splice(n,1)}return i},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function e(e,t,i,n){this.lastParams={},e.call(this,t,i,n),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("query",function(e){n.lastParams=e,n.loading=!0}),t.on("query:append",function(e){n.lastParams=e,n.loading=!0}),this.$results.on("scroll",function(){var e=a.contains(document.documentElement,n.$loadingMore[0]);if(!n.loading&&e){var t=n.$results.offset().top+n.$results.outerHeight(!1);n.$loadingMore.offset().top+n.$loadingMore.outerHeight(!1)<=t+50&&n.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=a.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(h,s){function e(e,t,i){this.$dropdownParent=i.get("dropdownParent")||h(document.body),e.call(this,t,i)}return e.prototype.bind=function(e,t,i){var n=this,a=!1;e.call(this,t,i),t.on("open",function(){n._showDropdown(),n._attachPositioningHandler(t),a||(a=!0,t.on("results:all",function(){n._positionDropdown(),n._resizeDropdown()}),t.on("results:append",function(){n._positionDropdown(),n._resizeDropdown()}))}),t.on("close",function(){n._hideDropdown(),n._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,i){t.attr("class",i.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=i},e.prototype.render=function(e){var t=h("<span></span>"),i=e.call(this);return t.append(i),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var i=this,n="scroll.select2."+t.id,a="resize.select2."+t.id,o="orientationchange.select2."+t.id,r=this.$container.parents().filter(s.hasScroll);r.each(function(){h(this).data("select2-scroll-position",{x:h(this).scrollLeft(),y:h(this).scrollTop()})}),r.on(n,function(e){var t=h(this).data("select2-scroll-position");h(this).scrollTop(t.y)}),h(window).on(n+" "+a+" "+o,function(e){i._positionDropdown(),i._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var i="scroll.select2."+t.id,n="resize.select2."+t.id,a="orientationchange.select2."+t.id;this.$container.parents().filter(s.hasScroll).off(i),h(window).off(i+" "+n+" "+a)},e.prototype._positionDropdown=function(){var e=h(window),t=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),n=null,a=this.$container.offset();a.bottom=a.top+this.$container.outerHeight(!1);var o={height:this.$container.outerHeight(!1)};o.top=a.top,o.bottom=a.top+o.height;var r=this.$dropdown.outerHeight(!1),s=e.scrollTop(),l=e.scrollTop()+e.height(),c=s<a.top-r,u=l>a.bottom+r,p={left:a.left,top:o.bottom},d=this.$dropdownParent;"static"===d.css("position")&&(d=d.offsetParent());var f=d.offset();p.top-=f.top,p.left-=f.left,t||i||(n="below"),u||!c||t?!c&&u&&t&&(n="below"):n="above",("above"==n||t&&"below"!==n)&&(p.top=o.top-f.top-r),null!=n&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+n),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+n)),this.$dropdownContainer.css(p)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,i,n){this.minimumResultsForSearch=i.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,i,n)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var i=0,n=0;n<t.length;n++){var a=t[n];a.children?i+=e(a.children):i++}return i}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("close",function(e){n._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var i=t.originalSelect2Event;if("select"===i._type||"unselect"===i._type)return}var n=this.getHighlightedResults();if(!(n.length<1)){var a=n.data("data");null!=a.element&&a.element.selected||null==a.element&&a.selected||this.trigger("select",{data:a})}},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,i){var n=this;e.call(this,t,i),t.on("select",function(e){n._selectTriggered(e)}),t.on("unselect",function(e){n._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var i=t.originalEvent;i&&i.ctrlKey||this.trigger("close",{originalEvent:i,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,i="Please delete "+t+" character";return 1!=t&&(i+="s"),i},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(h,m,b,g,v,_,y,w,S,x,k,t,$,C,T,z,P,A,O,j,F,I,E,D,M,R,B,L,e){function i(){this.reset()}return i.prototype.apply=function(t){if(null==(t=h.extend(!0,{},this.defaults,t)).dataAdapter){if(null!=t.ajax?t.dataAdapter=T:null!=t.data?t.dataAdapter=C:t.dataAdapter=$,0<t.minimumInputLength&&(t.dataAdapter=x.Decorate(t.dataAdapter,A)),0<t.maximumInputLength&&(t.dataAdapter=x.Decorate(t.dataAdapter,O)),0<t.maximumSelectionLength&&(t.dataAdapter=x.Decorate(t.dataAdapter,j)),t.tags&&(t.dataAdapter=x.Decorate(t.dataAdapter,z)),null==t.tokenSeparators&&null==t.tokenizer||(t.dataAdapter=x.Decorate(t.dataAdapter,P)),null!=t.query){var e=m(t.amdBase+"compat/query");t.dataAdapter=x.Decorate(t.dataAdapter,e)}if(null!=t.initSelection){var i=m(t.amdBase+"compat/initSelection");t.dataAdapter=x.Decorate(t.dataAdapter,i)}}if(null==t.resultsAdapter&&(t.resultsAdapter=b,null!=t.ajax&&(t.resultsAdapter=x.Decorate(t.resultsAdapter,D)),null!=t.placeholder&&(t.resultsAdapter=x.Decorate(t.resultsAdapter,E)),t.selectOnClose&&(t.resultsAdapter=x.Decorate(t.resultsAdapter,B))),null==t.dropdownAdapter){if(t.multiple)t.dropdownAdapter=F;else{var n=x.Decorate(F,I);t.dropdownAdapter=n}if(0!==t.minimumResultsForSearch&&(t.dropdownAdapter=x.Decorate(t.dropdownAdapter,R)),t.closeOnSelect&&(t.dropdownAdapter=x.Decorate(t.dropdownAdapter,L)),null!=t.dropdownCssClass||null!=t.dropdownCss||null!=t.adaptDropdownCssClass){var a=m(t.amdBase+"compat/dropdownCss");t.dropdownAdapter=x.Decorate(t.dropdownAdapter,a)}t.dropdownAdapter=x.Decorate(t.dropdownAdapter,M)}if(null==t.selectionAdapter){if(t.multiple?t.selectionAdapter=v:t.selectionAdapter=g,null!=t.placeholder&&(t.selectionAdapter=x.Decorate(t.selectionAdapter,_)),t.allowClear&&(t.selectionAdapter=x.Decorate(t.selectionAdapter,y)),t.multiple&&(t.selectionAdapter=x.Decorate(t.selectionAdapter,w)),null!=t.containerCssClass||null!=t.containerCss||null!=t.adaptContainerCssClass){var o=m(t.amdBase+"compat/containerCss");t.selectionAdapter=x.Decorate(t.selectionAdapter,o)}t.selectionAdapter=x.Decorate(t.selectionAdapter,S)}if("string"==typeof t.language)if(0<t.language.indexOf("-")){var r=t.language.split("-")[0];t.language=[t.language,r]}else t.language=[t.language];if(h.isArray(t.language)){var s=new k;t.language.push("en");for(var l=t.language,c=0;c<l.length;c++){var u=l[c],p={};try{p=k.loadPath(u)}catch(e){try{u=this.defaults.amdLanguageBase+u,p=k.loadPath(u)}catch(e){t.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+u+'" could not be automatically loaded. A fallback will be used instead.');continue}}s.extend(p)}t.translations=s}else{var d=k.loadPath(this.defaults.amdLanguageBase+"en"),f=new k(t.language);f.extend(d),t.translations=f}return t},i.prototype.reset=function(){function s(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:x.escapeMarkup,language:e,matcher:function e(t,i){if(""===h.trim(t.term))return i;if(i.children&&0<i.children.length){for(var n=h.extend(!0,{},i),a=i.children.length-1;0<=a;a--)null==e(t,i.children[a])&&n.children.splice(a,1);return 0<n.children.length?n:e(t,n)}var o=s(i.text).toUpperCase(),r=s(t.term).toUpperCase();return-1<o.indexOf(r)?i:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},i.prototype.set=function(e,t){var i={};i[h.camelCase(e)]=t;var n=x._convertData(i);h.extend(this.defaults,n)},new i}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(n,o,a,r){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),this.options=a.apply(this.options),t&&t.is("input")){var i=n(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=r.Decorate(this.options.dataAdapter,i)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var i={};i=o.fn.jquery&&"1."==o.fn.jquery.substr(0,2)&&e[0].dataset?o.extend(!0,{},e[0].dataset,e.data()):e.data();var n=o.extend(!0,{},i);for(var a in n=r._convertData(n))-1<o.inArray(a,t)||(o.isPlainObject(this.options[a])?o.extend(this.options[a],n[a]):this.options[a]=n[a]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(a,c,i,n){var u=function(e,t){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),u.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var n=this.options.get("dataAdapter");this.dataAdapter=new n(e,this.options);var a=this.render();this._placeContainer(a);var o=this.options.get("selectionAdapter");this.selection=new o(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,a);var r=this.options.get("dropdownAdapter");this.dropdown=new r(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,a);var s=this.options.get("resultsAdapter");this.results=new s(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return i.Extend(u,i.Observable),u.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+i.generateChars(2):i.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},u.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},u.prototype._resolveWidth=function(e,t){var i=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var n=this._resolveWidth(e,"style");return null!=n?n:this._resolveWidth(e,"element")}if("element"==t){var a=e.outerWidth(!1);return a<=0?"auto":a+"px"}if("style"!=t)return t;var o=e.attr("style");if("string"!=typeof o)return null;for(var r=o.split(";"),s=0,l=r.length;s<l;s+=1){var c=r[s].replace(/\s/g,"").match(i);if(null!==c&&1<=c.length)return c[1]}return null},u.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},u.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=i.bind(this._syncAttributes,this),this._syncS=i.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){a.each(e,t._syncA),a.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},u.prototype._registerDataEvents=function(){var i=this;this.dataAdapter.on("*",function(e,t){i.trigger(e,t)})},u.prototype._registerSelectionEvents=function(){var i=this,n=["toggle","focus"];this.selection.on("toggle",function(){i.toggleDropdown()}),this.selection.on("focus",function(e){i.focus(e)}),this.selection.on("*",function(e,t){-1===a.inArray(e,n)&&i.trigger(e,t)})},u.prototype._registerDropdownEvents=function(){var i=this;this.dropdown.on("*",function(e,t){i.trigger(e,t)})},u.prototype._registerResultsEvents=function(){var i=this;this.results.on("*",function(e,t){i.trigger(e,t)})},u.prototype._registerEvents=function(){var i=this;this.on("open",function(){i.$container.addClass("select2-container--open")}),this.on("close",function(){i.$container.removeClass("select2-container--open")}),this.on("enable",function(){i.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){i.$container.addClass("select2-container--disabled")}),this.on("blur",function(){i.$container.removeClass("select2-container--focus")}),this.on("query",function(t){i.isOpen()||i.trigger("open",{}),this.dataAdapter.query(t,function(e){i.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){i.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;i.isOpen()?t===n.ESC||t===n.TAB||t===n.UP&&e.altKey?(i.close(),e.preventDefault()):t===n.ENTER?(i.trigger("results:select",{}),e.preventDefault()):t===n.SPACE&&e.ctrlKey?(i.trigger("results:toggle",{}),e.preventDefault()):t===n.UP?(i.trigger("results:previous",{}),e.preventDefault()):t===n.DOWN&&(i.trigger("results:next",{}),e.preventDefault()):(t===n.ENTER||t===n.SPACE||t===n.DOWN&&e.altKey)&&(i.open(),e.preventDefault())})},u.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},u.prototype._syncSubtree=function(e,t){var i=!1,n=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var a=0;a<t.addedNodes.length;a++){t.addedNodes[a].selected&&(i=!0)}else t.removedNodes&&0<t.removedNodes.length&&(i=!0);else i=!0;i&&this.dataAdapter.current(function(e){n.trigger("selection:update",{data:e})})}},u.prototype.trigger=function(e,t){var i=u.__super__.trigger,n={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===t&&(t={}),e in n){var a=n[e],o={prevented:!1,name:e,args:t};if(i.call(this,a,o),o.prevented)return void(t.prevented=!0)}i.call(this,e,t)},u.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},u.prototype.open=function(){this.isOpen()||this.trigger("query",{})},u.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},u.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},u.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},u.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},u.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},u.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},u.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];a.isArray(t)&&(t=a.map(t,function(e){return e.toString()})),this.$element.val(t).trigger("change")},u.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},u.prototype.render=function(){var e=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),e.data("element",this.$element),e},u}),e.define("select2/compat/utils",["jquery"],function(r){return{syncCssClasses:function(e,t,i){var n,a,o=[];(n=r.trim(e.attr("class")))&&r((n=""+n).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&o.push(this)}),(n=r.trim(t.attr("class")))&&r((n=""+n).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(a=i(this))&&o.push(a)}),e.attr("class",o.join(" "))}}}),e.define("select2/compat/containerCss",["jquery","./utils"],function(r,s){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),i=this.options.get("containerCssClass")||"";r.isFunction(i)&&(i=i(this.$element));var n=this.options.get("adaptContainerCssClass");if(n=n||l,-1!==i.indexOf(":all:")){i=i.replace(":all:","");var a=n;n=function(e){var t=a(e);return null!=t?t+" "+e:e}}var o=this.options.get("containerCss")||{};return r.isFunction(o)&&(o=o(this.$element)),s.syncCssClasses(t,this.$element,n),t.css(o),t.addClass(i),t},e}),e.define("select2/compat/dropdownCss",["jquery","./utils"],function(r,s){function l(e){return null}function e(){}return e.prototype.render=function(e){var t=e.call(this),i=this.options.get("dropdownCssClass")||"";r.isFunction(i)&&(i=i(this.$element));var n=this.options.get("adaptDropdownCssClass");if(n=n||l,-1!==i.indexOf(":all:")){i=i.replace(":all:","");var a=n;n=function(e){var t=a(e);return null!=t?t+" "+e:e}}var o=this.options.get("dropdownCss")||{};return r.isFunction(o)&&(o=o(this.$element)),s.syncCssClasses(t,this.$element,n),t.css(o),t.addClass(i),t},e}),e.define("select2/compat/initSelection",["jquery"],function(n){function e(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=i.get("initSelection"),this._isInitialized=!1,e.call(this,t,i)}return e.prototype.current=function(e,t){var i=this;this._isInitialized?e.call(this,t):this.initSelection.call(null,this.$element,function(e){i._isInitialized=!0,n.isArray(e)||(e=[e]),t(e)})},e}),e.define("select2/compat/inputData",["jquery"],function(r){function e(e,t,i){this._currentData=[],this._valueSeparator=i.get("valueSeparator")||",","hidden"===t.prop("type")&&i.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),e.call(this,t,i)}return e.prototype.current=function(e,t){function n(e,t){var i=[];return e.selected||-1!==r.inArray(e.id,t)?(e.selected=!0,i.push(e)):e.selected=!1,e.children&&i.push.apply(i,n(e.children,t)),i}for(var i=[],a=0;a<this._currentData.length;a++){var o=this._currentData[a];i.push.apply(i,n(o,this.$element.val().split(this._valueSeparator)))}t(i)},e.prototype.select=function(e,t){if(this.options.get("multiple")){var i=this.$element.val();i+=this._valueSeparator+t.id,this.$element.val(i),this.$element.trigger("change")}else this.current(function(e){r.map(e,function(e){e.selected=!1})}),this.$element.val(t.id),this.$element.trigger("change")},e.prototype.unselect=function(e,a){var o=this;a.selected=!1,this.current(function(e){for(var t=[],i=0;i<e.length;i++){var n=e[i];a.id!=n.id&&t.push(n.id)}o.$element.val(t.join(o._valueSeparator)),o.$element.trigger("change")})},e.prototype.query=function(e,t,i){for(var n=[],a=0;a<this._currentData.length;a++){var o=this._currentData[a],r=this.matches(t,o);null!==r&&n.push(r)}i({results:n})},e.prototype.addOptions=function(e,t){var i=r.map(t,function(e){return r.data(e[0],"data")});this._currentData.push.apply(this._currentData,i)},e}),e.define("select2/compat/matcher",["jquery"],function(r){return function(o){return function(e,t){var i=r.extend(!0,{},t);if(null==e.term||""===r.trim(e.term))return i;if(t.children){for(var n=t.children.length-1;0<=n;n--){var a=t.children[n];o(e.term,a.text,a)||i.children.splice(n,1)}if(0<i.children.length)return i}return o(e.term,t.text,t)?i:null}}}),e.define("select2/compat/query",[],function(){function e(e,t,i){i.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),e.call(this,t,i)}return e.prototype.query=function(e,t,i){t.callback=i,this.options.get("query").call(null,t)},e}),e.define("select2/dropdown/attachContainer",[],function(){function e(e,t,i){e.call(this,t,i)}return e.prototype.position=function(e,t,i){i.find(".dropdown-wrapper").append(t),t.addClass("select2-dropdown--below"),i.addClass("select2-container--below")},e}),e.define("select2/dropdown/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),e.define("select2/selection/stopPropagation",[],function(){function e(){}return e.prototype.bind=function(e,t,i){e.call(this,t,i);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(e){e.stopPropagation()})},e}),l=function(d){var f,h,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],m=Array.prototype.slice;if(d.event.fixHooks)for(var i=e.length;i;)d.event.fixHooks[e[--i]]=d.event.mouseHooks;var b=d.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],n,!1);else this.onmousewheel=n;d.data(this,"mousewheel-line-height",b.getLineHeight(this)),d.data(this,"mousewheel-page-height",b.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],n,!1);else this.onmousewheel=null;d.removeData(this,"mousewheel-line-height"),d.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var t=d(e),i=t["offsetParent"in d.fn?"offsetParent":"parent"]();return i.length||(i=d("body")),parseInt(i.css("fontSize"),10)||parseInt(t.css("fontSize"),10)||16},getPageHeight:function(e){return d(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};function n(e){var t,i=e||window.event,n=m.call(arguments,1),a=0,o=0,r=0,s=0,l=0;if((e=d.event.fix(i)).type="mousewheel","detail"in i&&(r=-1*i.detail),"wheelDelta"in i&&(r=i.wheelDelta),"wheelDeltaY"in i&&(r=i.wheelDeltaY),"wheelDeltaX"in i&&(o=-1*i.wheelDeltaX),"axis"in i&&i.axis===i.HORIZONTAL_AXIS&&(o=-1*r,r=0),a=0===r?o:r,"deltaY"in i&&(a=r=-1*i.deltaY),"deltaX"in i&&(o=i.deltaX,0===r&&(a=-1*o)),0!==r||0!==o){if(1===i.deltaMode){var c=d.data(this,"mousewheel-line-height");a*=c,r*=c,o*=c}else if(2===i.deltaMode){var u=d.data(this,"mousewheel-page-height");a*=u,r*=u,o*=u}if(t=Math.max(Math.abs(r),Math.abs(o)),(!h||t<h)&&v(i,h=t)&&(h/=40),v(i,t)&&(a/=40,o/=40,r/=40),a=Math[1<=a?"floor":"ceil"](a/h),o=Math[1<=o?"floor":"ceil"](o/h),r=Math[1<=r?"floor":"ceil"](r/h),b.settings.normalizeOffset&&this.getBoundingClientRect){var p=this.getBoundingClientRect();s=e.clientX-p.left,l=e.clientY-p.top}return e.deltaX=o,e.deltaY=r,e.deltaFactor=h,e.offsetX=s,e.offsetY=l,e.deltaMode=0,n.unshift(e,a,o,r),f&&clearTimeout(f),f=setTimeout(g,200),(d.event.dispatch||d.event.handle).apply(this,n)}}function g(){h=null}function v(e,t){return b.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}d.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})},"function"==typeof e.define&&e.define.amd?e.define("jquery-mousewheel",["jquery"],l):"object"==typeof exports?module.exports=l:l(p),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(a,e,o,t){if(null==a.fn.select2){var r=["open","close","destroy"];a.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=a.extend(!0,{},t);new o(a(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var i,n=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=a(this).data("select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=e[t].apply(e,n)}),-1<a.inArray(t,r)?this:i}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=t),o}),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return p.fn.select2.amd=e,t}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).PIXI=e()}}(function(){return function o(r,s,l){function c(i,e){if(!s[i]){if(!r[i]){var t="function"==typeof require&&require;if(!e&&t)return t(i,!0);if(u)return u(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var a=s[i]={exports:{}};r[i][0].call(a.exports,function(e){var t=r[i][1][e];return c(t||e)},a,a.exports,o,r,s,l)}return s[i].exports}for(var u="function"==typeof require&&require,e=0;e<l.length;e++)c(l[e]);return c}({1:[function(i,n,e){(function(e){i("./polyfill");var t=n.exports=i("./core");t.extras=i("./extras"),t.filters=i("./filters"),t.interaction=i("./interaction"),t.loaders=i("./loaders"),t.mesh=i("./mesh"),t.loader=new t.loaders.Loader,Object.assign(t,i("./deprecation")),e.PIXI=t}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":29,"./deprecation":78,"./extras":85,"./filters":102,"./interaction":117,"./loaders":120,"./mesh":126,"./polyfill":130}],2:[function(e,S,t){(function(w){!function(){var i,e,d={};function r(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(i,arguments)}}null!=(i=this)&&(e=i.async),d.noConflict=function(){return i.async=e,d};function f(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i+=1)t(e[i],i,e)}function l(e,n){if(e.map)return e.map(n);var a=[];return f(e,function(e,t,i){a.push(n(e,t,i))}),a}function h(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}var t=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===t.call(e)};void 0!==w&&w.nextTick?(d.nextTick=w.nextTick,"undefined"!=typeof setImmediate?d.setImmediate=function(e){setImmediate(e)}:d.setImmediate=d.nextTick):("function"==typeof setImmediate?d.nextTick=function(e){setImmediate(e)}:d.nextTick=function(e){setTimeout(e,0)},d.setImmediate=d.nextTick),d.each=function(t,i,n){if(n=n||function(){},!t.length)return n();var a=0;function o(e){e?(n(e),n=function(){}):(a+=1)>=t.length&&n()}f(t,function(e){i(e,r(o))})},d.forEach=d.each,d.eachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var n=0,a=function(){e(t[n],function(e){e?(i(e),i=function(){}):(n+=1)>=t.length?i():a()})};a()},d.forEachSeries=d.eachSeries,d.eachLimit=function(e,t,i,n){s(t).apply(null,[e,i,n])},d.forEachLimit=d.eachLimit;function n(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[d.each].concat(e))}}function a(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[d.eachSeries].concat(e))}}function o(e,t,a,i){if(t=l(t,function(e,t){return{index:t,value:e}}),i){var o=[];e(t,function(i,n){a(i.value,function(e,t){o[i.index]=t,n(e)})},function(e){i(e,o)})}else e(t,function(e,t){a(e.value,function(e){t(e)})})}var s=function(s){return function(i,e,n){if(n=n||function(){},!i.length||s<=0)return n();var a=0,o=0,r=0;!function t(){if(a>=i.length)return n();for(;r<s&&o<i.length;)r+=1,e(i[(o+=1)-1],function(e){e?(n(e),n=function(){}):(r-=1,(a+=1)>=i.length?n():t())})}()}};d.map=n(o),d.mapSeries=a(o),d.mapLimit=function(e,t,i,n){return c(t)(e,i,n)};var c=function(e){return function(t,i){return function(){var e=Array.prototype.slice.call(arguments);return i.apply(null,[s(t)].concat(e))}}(e,o)};d.reduce=function(e,n,t,i){d.eachSeries(e,function(e,i){t(n,e,function(e,t){n=t,i(e)})},function(e){i(e,n)})},d.inject=d.reduce,d.foldl=d.reduce,d.reduceRight=function(e,t,i,n){var a=l(e,function(e){return e}).reverse();d.reduce(a,t,i,n)},d.foldr=d.reduceRight;function u(e,t,n,i){var a=[];e(t=l(t,function(e,t){return{index:t,value:e}}),function(t,i){n(t.value,function(e){e&&a.push(t),i()})},function(e){i(l(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}d.filter=n(u),d.filterSeries=a(u),d.select=d.filter,d.selectSeries=d.filterSeries;function p(e,t,n,i){var a=[];e(t=l(t,function(e,t){return{index:t,value:e}}),function(t,i){n(t.value,function(e){e||a.push(t),i()})},function(e){i(l(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}d.reject=n(p),d.rejectSeries=a(p);function b(e,t,n,a){e(t,function(t,i){n(t,function(e){e?(a(t),a=function(){}):i()})},function(e){a()})}d.detect=n(b),d.detectSeries=a(b),d.some=function(e,i,n){d.each(e,function(e,t){i(e,function(e){e&&(n(!0),n=function(){}),t()})},function(e){n(!1)})},d.any=d.some,d.every=function(e,i,n){d.each(e,function(e,t){i(e,function(e){e||(n(!1),n=function(){}),t()})},function(e){n(!0)})},d.all=d.every,d.sortBy=function(e,t,i){d.map(e,function(i,n){t(i,function(e,t){e?n(e):n(null,{value:i,criteria:t})})},function(e,t){if(e)return i(e);i(null,l(t.sort(function(e,t){var i=e.criteria,n=t.criteria;return i<n?-1:n<i?1:0}),function(e){return e.value}))})},d.auto=function(r,s){s=s||function(){};var e=h(r),t=e.length;if(!t)return s();function l(e){p.unshift(e)}function c(){t--,f(p.slice(0),function(e){e()})}var u={},p=[];l(function(){if(!t){var e=s;s=function(){},e(null,u)}}),f(e,function(n){function e(e){var t=Array.prototype.slice.call(arguments,1);if(t.length<=1&&(t=t[0]),e){var i={};f(h(u),function(e){i[e]=u[e]}),i[n]=t,s(e,i),s=function(){}}else u[n]=t,d.setImmediate(c)}function t(){return function(e,n,a){return e.reduce?e.reduce(n,a):(f(e,function(e,t,i){a=n(a,e,t,i)}),a)}(a,function(e,t){return e&&u.hasOwnProperty(t)},!0)&&!u.hasOwnProperty(n)}var i=m(r[n])?r[n]:[r[n]],a=i.slice(0,Math.abs(i.length-1))||[];if(t())i[i.length-1](e,u);else{var o=function(){t()&&(function(e){for(var t=0;t<p.length;t+=1)if(p[t]===e)return p.splice(t,1)}(o),i[i.length-1](e,u))};l(o)}})},d.retry=function(n,a,o){var r=[];"function"==typeof n&&(o=a,a=n,n=5),n=parseInt(n,10)||5;function e(i,t){function e(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}for(;n;)r.push(e(a,!(n-=1)));d.series(r,function(e,t){t=t[t.length-1],(i||o)(t.err,t.result)})}return o?e():e},d.waterfall=function(e,a){if(a=a||function(){},!m(e)){var t=new Error("First argument to waterfall must be an array of functions");return a(t)}if(!e.length)return a();var o=function(n){return function(e){if(e)a.apply(null,arguments),a=function(){};else{var t=Array.prototype.slice.call(arguments,1),i=n.next();i?t.push(o(i)):t.push(a),d.setImmediate(function(){n.apply(null,t)})}}};o(d.iterator(e))()};function g(e,t,i){if(i=i||function(){},m(t))e.map(t,function(e,i){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),i.call(null,e,t)})},i);else{var a={};e.each(h(t),function(i,n){t[i](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),a[i]=t,n(e)})},function(e){i(e,a)})}}d.parallel=function(e,t){g({map:d.map,each:d.each},e,t)},d.parallelLimit=function(e,t,i){g({map:c(t),each:s(t)},e,i)},d.series=function(e,t){if(t=t||function(){},m(e))d.mapSeries(e,function(e,i){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),i.call(null,e,t)})},t);else{var a={};d.eachSeries(h(e),function(i,n){e[i](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),a[i]=t,n(e)})},function(e){t(e,a)})}},d.iterator=function(i){var n=function(e){var t=function(){return i.length&&i[e].apply(null,arguments),t.next()};return t.next=function(){return e<i.length-1?n(e+1):null},t};return n(0)},d.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};function v(e,t,n,i){var a=[];e(t,function(e,i){n(e,function(e,t){a=a.concat(t||[]),i(e)})},function(e){i(e,a)})}d.concat=n(v),d.concatSeries=a(v),d.whilst=function(t,i,n){t()?i(function(e){if(e)return n(e);d.whilst(t,i,n)}):n()},d.doWhilst=function(i,n,a){i(function(e){if(e)return a(e);var t=Array.prototype.slice.call(arguments,1);n.apply(null,t)?d.doWhilst(i,n,a):a()})},d.until=function(t,i,n){t()?n():i(function(e){if(e)return n(e);d.until(t,i,n)})},d.doUntil=function(i,n,a){i(function(e){if(e)return a(e);var t=Array.prototype.slice.call(arguments,1);n.apply(null,t)?a():d.doUntil(i,n,a)})},d.queue=function(i,e){function n(i,e,n,a){if(i.started||(i.started=!0),m(e)||(e=[e]),0==e.length)return d.setImmediate(function(){i.drain&&i.drain()});f(e,function(e){var t={data:e,callback:"function"==typeof a?a:null};n?i.tasks.unshift(t):i.tasks.push(t),i.saturated&&i.tasks.length===i.concurrency&&i.saturated(),d.setImmediate(i.process)})}void 0===e&&(e=1);var a=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(o,e,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(e,t){n(o,e,!0,t)},process:function(){if(!o.paused&&a<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),a+=1;var t=r(function(){a-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+a===0&&o.drain(),o.process()});i(e.data,t)}},length:function(){return o.tasks.length},running:function(){return a},idle:function(){return o.tasks.length+a===0},pause:function(){!0!==o.paused&&(o.paused=!0,o.process())},resume:function(){!1!==o.paused&&(o.paused=!1,o.process())}};return o},d.priorityQueue=function(e,t){function o(e,t){return e.priority-t.priority}var n=d.queue(e,t);return n.push=function(e,t,i){!function(i,e,n,a){if(i.started||(i.started=!0),m(e)||(e=[e]),0==e.length)return d.setImmediate(function(){i.drain&&i.drain()});f(e,function(e){var t={data:e,priority:n,callback:"function"==typeof a?a:null};i.tasks.splice(function(e,t,i){for(var n=-1,a=e.length-1;n<a;){var o=n+(a-n+1>>>1);0<=i(t,e[o])?n=o:a=o-1}return n}(i.tasks,t,o)+1,0,t),i.saturated&&i.tasks.length===i.concurrency&&i.saturated(),d.setImmediate(i.process)})}(n,e,t,i)},delete n.unshift,n},d.cargo=function(n,a){var o=!1,r=[],s={tasks:r,payload:a,saturated:null,empty:null,drain:null,drained:!0,push:function(e,t){m(e)||(e=[e]),f(e,function(e){r.push({data:e,callback:"function"==typeof t?t:null}),s.drained=!1,s.saturated&&r.length===a&&s.saturated()}),d.setImmediate(s.process)},process:function e(){if(!o){if(0===r.length)return s.drain&&!s.drained&&s.drain(),void(s.drained=!0);var i="number"==typeof a?r.splice(0,a):r.splice(0,r.length),t=l(i,function(e){return e.data});s.empty&&s.empty(),o=!0,n(t,function(){o=!1;var t=arguments;f(i,function(e){e.callback&&e.callback.apply(null,t)}),e()})}},length:function(){return r.length},running:function(){return o}};return s};function _(i){return function(e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t.concat([function(e){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[i]&&f(t,function(e){console[i](e)}))}]))}}d.log=_("log"),d.dir=_("dir"),d.memoize=function(i,a){var o={},r={};a=a||function(e){return e};function e(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=a.apply(null,e);n in o?d.nextTick(function(){t.apply(null,o[n])}):n in r?r[n].push(t):(r[n]=[t],i.apply(null,e.concat([function(){o[n]=arguments;var e=r[n];delete r[n];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))}return e.memo=o,e.unmemoized=i,e},d.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},d.times=function(e,t,i){for(var n=[],a=0;a<e;a++)n.push(a);return d.map(n,t,i)},d.timesSeries=function(e,t,i){for(var n=[],a=0;a<e;a++)n.push(a);return d.mapSeries(n,t,i)},d.seq=function(){var t=arguments;return function(){var n=this,e=Array.prototype.slice.call(arguments),i=e.pop();d.reduce(t,e,function(e,t,i){t.apply(n,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);i(e,t)}]))},function(e,t){i.apply(n,[e].concat(t))})}},d.compose=function(){return d.seq.apply(null,Array.prototype.reverse.call(arguments))};function y(t,a){function e(){var i=this,n=Array.prototype.slice.call(arguments),e=n.pop();return t(a,function(e,t){e.apply(i,n.concat([t]))},e)}if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return e.apply(this,i)}return e}d.applyEach=n(y),d.applyEachSeries=a(y),d.forever=function(i,n){!function e(t){if(t){if(n)return n(t);throw t}i(e)}()},void 0!==S&&S.exports?S.exports=d:i.async=d}()}).call(this,e("_process"))},{_process:4}],3:[function(e,t,c){(function(a){function o(e,t){for(var i=0,n=e.length-1;0<=n;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),i++):i&&(e.splice(n,1),i--)}if(t)for(;i--;)e.unshift("..");return e}function r(e){return t.exec(e).slice(1)}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function s(e,t){if(e.filter)return e.filter(t);for(var i=[],n=0;n<e.length;n++)t(e[n],n,e)&&i.push(e[n]);return i}c.resolve=function(){for(var e="",t=!1,i=arguments.length-1;-1<=i&&!t;i--){var n=0<=i?arguments[i]:a.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},c.normalize=function(e){var t=c.isAbsolute(e),i="/"===n(e,-1);return(e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&i&&(e+="/"),(t?"/":"")+e},c.isAbsolute=function(e){return"/"===e.charAt(0)},c.join=function(){var e=Array.prototype.slice.call(arguments,0);return c.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},c.relative=function(e,t){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;0<=i&&""===e[i];i--);return i<t?[]:e.slice(t,i-t+1)}e=c.resolve(e).substr(1),t=c.resolve(t).substr(1);for(var n=i(e.split("/")),a=i(t.split("/")),o=Math.min(n.length,a.length),r=o,s=0;s<o;s++)if(n[s]!==a[s]){r=s;break}var l=[];for(s=r;s<n.length;s++)l.push("..");return(l=l.concat(a.slice(r))).join("/")},c.sep="/",c.delimiter=":",c.dirname=function(e){var t=r(e),i=t[0],n=t[1];return i||n?i+(n=n&&n.substr(0,n.length-1)):"."},c.basename=function(e,t){var i=r(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},c.extname=function(e){return r(e)[3]};var n="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(this,e("_process"))},{_process:4}],4:[function(e,t,i){var n=t.exports={},a=[],o=!1;function r(){if(!o){var e;o=!0;for(var t=a.length;t;){e=a,a=[];for(var i=-1;++i<t;)e[i]();t=a.length}o=!1}}function s(){}n.nextTick=function(e){a.push(e),o||setTimeout(r,0)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=s,n.addListener=s,n.once=s,n.off=s,n.removeListener=s,n.removeAllListeners=s,n.emit=s,n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],5:[function(e,j,F){(function(O){!function(e){var t="object"==typeof F&&F,i="object"==typeof j&&j&&j.exports==t&&j,n="object"==typeof O&&O;n.global!==n&&n.window!==n||(e=n);var a,o,g=2147483647,v=36,_=1,y=26,r=38,s=700,w=72,S=128,x="-",l=/^xn--/,c=/[^ -~]/,u=/\x2E|\u3002|\uFF0E|\uFF61/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=v-_,k=Math.floor,$=String.fromCharCode;function C(e){throw RangeError(p[e])}function f(e,t){for(var i=e.length;i--;)e[i]=t(e[i]);return e}function h(e,t){return f(e.split(u),t).join(".")}function T(e){for(var t,i,n=[],a=0,o=e.length;a<o;)55296<=(t=e.charCodeAt(a++))&&t<=56319&&a<o?56320==(64512&(i=e.charCodeAt(a++)))?n.push(((1023&t)<<10)+(1023&i)+65536):(n.push(t),a--):n.push(t);return n}function z(e){return f(e,function(e){var t="";return 65535<e&&(t+=$((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=$(e)}).join("")}function P(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function A(e,t,i){var n=0;for(e=i?k(e/s):e>>1,e+=k(e/t);d*y>>1<e;n+=v)e=k(e/d);return k(n+(d+1)*e/(e+r))}function m(e){var t,i,n,a,o,r,s,l,c,u,p,d=[],f=e.length,h=0,m=S,b=w;for((i=e.lastIndexOf(x))<0&&(i=0),n=0;n<i;++n)128<=e.charCodeAt(n)&&C("not-basic"),d.push(e.charCodeAt(n));for(a=0<i?i+1:0;a<f;){for(o=h,r=1,s=v;f<=a&&C("invalid-input"),p=e.charCodeAt(a++),(v<=(l=p-48<10?p-22:p-65<26?p-65:p-97<26?p-97:v)||l>k((g-h)/r))&&C("overflow"),h+=l*r,!(l<(c=s<=b?_:b+y<=s?y:s-b));s+=v)r>k(g/(u=v-c))&&C("overflow"),r*=u;b=A(h-o,t=d.length+1,0==o),k(h/t)>g-m&&C("overflow"),m+=k(h/t),h%=t,d.splice(h++,0,m)}return z(d)}function b(e){var t,i,n,a,o,r,s,l,c,u,p,d,f,h,m,b=[];for(d=(e=T(e)).length,t=S,o=w,r=i=0;r<d;++r)(p=e[r])<128&&b.push($(p));for(n=a=b.length,a&&b.push(x);n<d;){for(s=g,r=0;r<d;++r)t<=(p=e[r])&&p<s&&(s=p);for(s-t>k((g-i)/(f=n+1))&&C("overflow"),i+=(s-t)*f,t=s,r=0;r<d;++r)if((p=e[r])<t&&++i>g&&C("overflow"),p==t){for(l=i,c=v;!(l<(u=c<=o?_:o+y<=c?y:c-o));c+=v)m=l-u,h=v-u,b.push($(P(u+m%h,0))),l=k(m/h);b.push($(P(l,0))),o=A(i,f,n==a),i=0,++n}++i,++t}return b.join("")}if(a={version:"1.2.4",ucs2:{decode:T,encode:z},decode:m,encode:b,toASCII:function(e){return h(e,function(e){return c.test(e)?"xn--"+b(e):e})},toUnicode:function(e){return h(e,function(e){return l.test(e)?m(e.slice(4).toLowerCase()):e})}},t&&!t.nodeType)if(i)i.exports=a;else for(o in a)a.hasOwnProperty(o)&&(t[o]=a[o]);else e.punycode=a}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,t,i){"use strict";t.exports=function(e,t,i,n){t=t||"&",i=i||"=";var a={};if("string"!=typeof e||0===e.length)return a;var o=/\+/g;e=e.split(t);var r=1e3;n&&"number"==typeof n.maxKeys&&(r=n.maxKeys);var s,l,c=e.length;0<r&&r<c&&(c=r);for(var u=0;u<c;++u){var p,d,f,h,m=e[u].replace(o,"%20"),b=m.indexOf(i);d=0<=b?(p=m.substr(0,b),m.substr(b+1)):(p=m,""),f=decodeURIComponent(p),h=decodeURIComponent(d),s=a,l=f,Object.prototype.hasOwnProperty.call(s,l)?g(a[f])?a[f].push(h):a[f]=[a[f],h]:a[f]=h}return a};var g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],7:[function(e,t,i){"use strict";function o(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}}t.exports=function(i,n,a,e){return n=n||"&",a=a||"=",null===i&&(i=void 0),"object"==typeof i?s(l(i),function(e){var t=encodeURIComponent(o(e))+a;return r(i[e])?s(i[e],function(e){return t+encodeURIComponent(o(e))}).join(n):t+encodeURIComponent(o(i[e]))}).join(n):e?encodeURIComponent(o(e))+a+encodeURIComponent(o(i)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n));return i}var l=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},{}],8:[function(e,t,i){"use strict";i.decode=i.parse=e("./decode"),i.encode=i.stringify=e("./encode")},{"./decode":6,"./encode":7}],9:[function(e,t,i){var O=e("punycode");function v(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=o,i.resolve=function(e,t){return o(e,!1,!0).resolve(t)},i.resolveObject=function(e,t){return e?o(e,!1,!0).resolveObject(t):t},i.format=function(e){X(e)&&(e=o(e));return e instanceof v?e.format():v.prototype.format.call(e)},i.Url=v;var j=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,a=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),F=["'"].concat(a),I=["%","/","?",";","#"].concat(F),E=["/","?","#"],D=/^[a-z0-9A-Z_-]{0,63}$/,M=/^([a-z0-9A-Z_-]{0,63})(.*)$/,R={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},L={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},N=e("querystring");function o(e,t,i){if(e&&s(e)&&e instanceof v)return e;var n=new v;return n.parse(e,t,i),n}function X(e){return"string"==typeof e}function s(e){return"object"==typeof e&&null!==e}function _(e){return null===e}v.prototype.parse=function(e,t,i){if(!X(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e;n=n.trim();var a=j.exec(n);if(a){var o=(a=a[0]).toLowerCase();this.protocol=o,n=n.substr(a.length)}if(i||a||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var r="//"===n.substr(0,2);!r||a&&B[a]||(n=n.substr(2),this.slashes=!0)}if(!B[a]&&(r||a&&!L[a])){for(var s,l,c=-1,u=0;u<E.length;u++){-1!==(p=n.indexOf(E[u]))&&(-1===c||p<c)&&(c=p)}-1!==(l=-1===c?n.lastIndexOf("@"):n.lastIndexOf("@",c))&&(s=n.slice(0,l),n=n.slice(l+1),this.auth=decodeURIComponent(s)),c=-1;for(u=0;u<I.length;u++){var p;-1!==(p=n.indexOf(I[u]))&&(-1===c||p<c)&&(c=p)}-1===c&&(c=n.length),this.host=n.slice(0,c),n=n.slice(c),this.parseHost(),this.hostname=this.hostname||"";var d="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!d)for(var f=this.hostname.split(/\./),h=(u=0,f.length);u<h;u++){var m=f[u];if(m&&!m.match(D)){for(var b="",g=0,v=m.length;g<v;g++)127<m.charCodeAt(g)?b+="x":b+=m[g];if(!b.match(D)){var _=f.slice(0,u),y=f.slice(u+1),w=m.match(M);w&&(_.push(w[1]),y.unshift(w[2])),y.length&&(n="/"+y.join(".")+n),this.hostname=_.join(".");break}}}if(255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),!d){var S=this.hostname.split("."),x=[];for(u=0;u<S.length;++u){var k=S[u];x.push(k.match(/[^A-Za-z0-9_-]/)?"xn--"+O.encode(k):k)}this.hostname=x.join(".")}var $=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+$,this.href+=this.host,d&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!R[o])for(u=0,h=F.length;u<h;u++){var T=F[u],z=encodeURIComponent(T);z===T&&(z=escape(T)),n=n.split(T).join(z)}var P=n.indexOf("#");-1!==P&&(this.hash=n.substr(P),n=n.slice(0,P));var A=n.indexOf("?");if(-1!==A?(this.search=n.substr(A),this.query=n.substr(A+1),t&&(this.query=N.parse(this.query)),n=n.slice(0,A)):t&&(this.search="",this.query={}),n&&(this.pathname=n),L[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){$=this.pathname||"",k=this.search||"";this.path=$+k}return this.href=this.format(),this},v.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&s(this.query)&&Object.keys(this.query).length&&(o=N.stringify(this.query));var r=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||L[t])&&!1!==a?(a="//"+(a||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):a=a||"",n&&"#"!==n.charAt(0)&&(n="#"+n),r&&"?"!==r.charAt(0)&&(r="?"+r),t+a+(i=i.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(r=r.replace("#","%23"))+n},v.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},v.prototype.resolveObject=function(t){if(X(t)){var e=new v;e.parse(t,!1,!0),t=e}var i=new v;if(Object.keys(this).forEach(function(e){i[e]=this[e]},this),i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(i[e]=t[e])}),L[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i;if(t.protocol&&t.protocol!==i.protocol){if(!L[t.protocol])return Object.keys(t).forEach(function(e){i[e]=t[e]}),i.href=i.format(),i;if(i.protocol=t.protocol,t.host||B[t.protocol])i.pathname=t.pathname;else{for(var n=(t.pathname||"").split("/");n.length&&!(t.host=n.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==n[0]&&n.unshift(""),n.length<2&&n.unshift(""),i.pathname=n.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var a=i.pathname||"",o=i.search||"";i.path=a+o}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var r=i.pathname&&"/"===i.pathname.charAt(0),s=t.host||t.pathname&&"/"===t.pathname.charAt(0),l=s||r||i.host&&t.pathname,c=l,u=i.pathname&&i.pathname.split("/")||[],p=(n=t.pathname&&t.pathname.split("/")||[],i.protocol&&!L[i.protocol]);if(p&&(i.hostname="",i.port=null,i.host&&(""===u[0]?u[0]=i.host:u.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===n[0]?n[0]=t.host:n.unshift(t.host)),t.host=null),l=l&&(""===n[0]||""===u[0])),s)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,u=n;else if(n.length)(u=u||[]).pop(),u=u.concat(n),i.search=t.search,i.query=t.query;else if(!function(e){return null==e}(t.search)){if(p)i.hostname=i.host=u.shift(),(b=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=b.shift(),i.host=i.hostname=b.shift());return i.search=t.search,i.query=t.query,_(i.pathname)&&_(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!u.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var d=u.slice(-1)[0],f=(i.host||t.host)&&("."===d||".."===d)||""===d,h=0,m=u.length;0<=m;m--)"."==(d=u[m])?u.splice(m,1):".."===d?(u.splice(m,1),h++):h&&(u.splice(m,1),h--);if(!l&&!c)for(;h--;)u.unshift("..");!l||""===u[0]||u[0]&&"/"===u[0].charAt(0)||u.unshift(""),f&&"/"!==u.join("/").substr(-1)&&u.push("");var b,g=""===u[0]||u[0]&&"/"===u[0].charAt(0);p&&(i.hostname=i.host=g?"":u.length?u.shift():"",(b=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=b.shift(),i.host=i.hostname=b.shift()));return(l=l||i.host&&u.length)&&!g&&u.unshift(""),u.length?i.pathname=u.join("/"):(i.pathname=null,i.path=null),_(i.pathname)&&_(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},v.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:5,querystring:8}],10:[function(e,t,i){"use strict";function m(e,t,i,n,a){var o,r,s,l=0;for(o=t,r=i-n;o<i;o+=n)l+=(e[r]-e[o])*(e[o+1]+e[r+1]),r=o;if(a===0<l)for(o=t;o<i;o+=n)s=c(o,s);else for(o=i-n;t<=o;o-=n)s=c(o,s);return s}function b(e,t,i){i=i||t;var n,a,o,r,s=t;do{if(n=!1,a=e,o=s.i,r=s.next.i,a[o]===a[r]&&a[o+1]===a[r+1]||0===l(e,s.prev.i,s.i,s.next.i)){if(s.prev.next=s.next,s.next.prev=s.prev,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ),(s=i=s.prev)===s.next)return null;n=!0}else s=s.next}while(n||s!==i);return i}function g(e,t,i,n,a,o,r,s){if(t){s||void 0===a||function(e,t,i,n,a){var o=t;for(;null===o.z&&(o.z=j(e[o.i],e[o.i+1],i,n,a)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next,o!==t;);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,i,n,a,o,r,s,l,c=1;do{for(i=e,o=e=null,r=0;i;){for(r++,n=i,t=s=0;t<c&&(s++,n=n.nextZ);t++);for(l=c;0<s||0<l&&n;)0===s?(n=(a=n).nextZ,l--):0!==l&&n?i.z<=n.z?(i=(a=i).nextZ,s--):(n=(a=n).nextZ,l--):(i=(a=i).nextZ,s--),o?o.nextZ=a:e=a,a.prevZ=o,o=a;i=n}o.nextZ=null,c*=2}while(1<r)}(o)}(e,t,a,o,r);for(var l,c,u=t;t.prev!==t.next;)if(l=t.prev,c=t.next,p(e,t,a,o,r))i.push(l.i/n),i.push(t.i/n),i.push(c.i/n),(c.prev=l).next=c,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ),t=c.next,u=c.next;else if((t=c)===u){s?1===s?g(e,t=d(e,t,i,n),i,n,a,o,r,2):2===s&&f(e,t,i,n,a,o,r):g(e,b(e,t),i,n,a,o,r,1);break}}}function p(e,t,i,n,a){var o=t.prev.i,r=t.i,s=t.next.i,l=e[o],c=e[o+1],u=e[r],p=e[r+1],d=e[s],f=e[s+1],h=l*p-c*u,m=l*f-c*d,b=h-m-(d*p-f*u);if(b<=0)return!1;var g,v,_,y,w,S,x,k=f-c,$=l-d,C=c-p,T=u-l;if(void 0!==i){var z=u<l?d<l?l:d:d<u?u:d,P=p<c?f<c?c:f:f<p?p:f,A=j(l<u?l<d?l:d:u<d?u:d,c<p?c<f?c:f:p<f?p:f,i,n,a),O=j(z,P,i,n,a);for(x=t.nextZ;x&&x.z<=O;)if(g=x.i,x=x.nextZ,g!==o&&g!==s&&0<=(y=k*(v=e[g])+$*(_=e[g+1])-m)&&0<=(w=C*v+T*_+h)&&0<=(S=b-y-w)&&(y&&w||y&&S||w&&S))return!1;for(x=t.prevZ;x&&x.z>=A;)if(g=x.i,x=x.prevZ,g!==o&&g!==s&&0<=(y=k*(v=e[g])+$*(_=e[g+1])-m)&&0<=(w=C*v+T*_+h)&&0<=(S=b-y-w)&&(y&&w||y&&S||w&&S))return!1}else for(x=t.next.next;x!==t.prev;)if(g=x.i,x=x.next,0<=(y=k*(v=e[g])+$*(_=e[g+1])-m)&&0<=(w=C*v+T*_+h)&&0<=(S=b-y-w)&&(y&&w||y&&S||w&&S))return!1;return!0}function d(e,t,i,n){var a=t;do{var o=a.prev,r=a.next.next;if(o.i!==r.i&&h(e,o.i,a.i,a.next.i,r.i)&&A(e,o,r)&&A(e,r,o)){i.push(o.i/n),i.push(a.i/n),i.push(r.i/n),(o.next=r).prev=o;var s=a.prevZ,l=a.nextZ&&a.nextZ.nextZ;s&&(s.nextZ=l),l&&(l.prevZ=s),a=t=r}a=a.next}while(a!==t);return a}function f(e,t,i,n,a,o,r){var s,l,c,u=t;do{for(var p=u.next.next;p!==u.prev;){if(u.i!==p.i&&(c=p,!function(e,t,i,n){var a=t;do{var o=a.i,r=a.next.i;if(o!==i&&r!==i&&o!==n&&r!==n&&h(e,o,r,i,n))return!0;a=a.next}while(a!==t);return!1}(s=e,l=u,l.i,c.i)&&A(s,l,c)&&A(s,c,l)&&function(e,t,i,n){var a=t,o=!1,r=(e[i]+e[n])/2,s=(e[i+1]+e[n+1])/2;do{var l=a.i,c=a.next.i;e[l+1]>s!=e[c+1]>s&&r<(e[c]-e[l])*(s-e[l+1])/(e[c+1]-e[l+1])+e[l]&&(o=!o),a=a.next}while(a!==t);return o}(s,l,l.i,c.i))){var d=y(u,p);return u=b(e,u,u.next),d=b(e,d,d.next),g(e,u,i,n,a,o,r),void g(e,d,i,n,a,o,r)}p=p.next}u=u.next}while(u!==t)}function v(e,t,i){if(i=function(e,t,i){var n,a,o,r=i,s=t.i,l=e[s],c=e[s+1],u=-1/0;do{if(a=r.i,o=r.next.i,c<=e[a+1]&&c>=e[o+1]){var p=e[a]+(c-e[a+1])*(e[o]-e[a])/(e[o+1]-e[a+1]);p<=l&&u<p&&(u=p,n=e[a]<e[o]?r:r.next)}r=r.next}while(r!==i);if(!n)return null;var d,f,h,m,b,g,v=e[n.i],_=e[n.i+1],y=l*_-c*v,w=l*c-c*u,S=c-c,x=l-u,k=c-_,$=v-l,C=y-w-(u*_-c*v),T=C<=0?-1:1,z=n,P=1/0;r=n.next;for(;r!==z;)d=e[r.i],f=e[r.i+1],0<=(h=l-d)&&v<=d&&0<=(m=(S*d+x*f-w)*T)&&0<=(b=(k*d+$*f+y)*T)&&0<=C*T-m-b&&(g=Math.abs(c-f)/h)<P&&A(e,r,t)&&(n=r,P=g),r=r.next;return n}(e,t,i)){var n=y(i,t);b(e,n,n.next)}}function j(e,t,i,n,a){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=1e3*(e-i)/a)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=1e3*(t-n)/a)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function _(e,t){for(var i=t,n=t;e[i.i]<e[n.i]&&(n=i),(i=i.next)!==t;);return n}function l(e,t,i,n){var a=(e[i+1]-e[t+1])*(e[n]-e[i])-(e[i]-e[t])*(e[n+1]-e[i+1]);return 0<a?1:a<0?-1:0}function h(e,t,i,n,a){return l(e,t,i,n)!==l(e,t,i,a)&&l(e,n,a,t)!==l(e,n,a,i)}function A(e,t,i){return-1===l(e,t.prev.i,t.i,t.next.i)?-1!==l(e,t.i,i.i,t.next.i)&&-1!==l(e,t.i,t.prev.i,i.i):-1===l(e,t.i,i.i,t.prev.i)||-1===l(e,t.i,t.next.i,i.i)}function y(e,t){var i=new r(e.i),n=new r(t.i),a=e.next,o=t.prev;return(e.next=t).prev=e,(i.next=a).prev=i,(n.next=i).prev=n,(o.next=n).prev=o,n}function c(e,t){var i=new r(e);return t?(i.next=t.next,(i.prev=t).next.prev=i,t.next=i):(i.prev=i).next=i,i}function r(e){this.i=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null}t.exports=function(e,t,i){i=i||2;var n,a,o,r,s,l,c,u=t&&t.length,p=u?t[0]*i:e.length,d=b(e,m(e,0,p,i,!0)),f=[];if(!d)return f;u&&(d=function(i,e,t,n){var a,o,r,s,l,c=[];for(a=0,o=e.length;a<o;a++)r=e[a]*n,s=a<o-1?e[a+1]*n:i.length,(l=b(i,m(i,r,s,n,!1)))&&c.push(_(i,l));for(c.sort(function(e,t){return i[e.i]-i[t.i]}),a=0;a<c.length;a++)v(i,c[a],t),t=b(i,t,t.next);return t}(e,t,d,i));if(e.length>80*i){n=o=e[0],a=r=e[1];for(var h=i;h<p;h+=i)s=e[h],l=e[h+1],s<n&&(n=s),l<a&&(a=l),o<s&&(o=s),r<l&&(r=l);c=Math.max(o-n,r-a)}return g(e,d,f,i,n,a,c),f}},{}],11:[function(e,t,i){"use strict";var f="function"!=typeof Object.create&&"~";function o(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(){}n.prototype._events=void 0,n.prototype.listeners=function(e,t){var i=f?f+e:e,n=this._events&&this._events[i];if(t)return!!n;if(!n)return[];if(this._events[i].fn)return[this._events[i].fn];for(var a=0,o=this._events[i].length,r=new Array(o);a<o;a++)r[a]=this._events[i][a].fn;return r},n.prototype.emit=function(e,t,i,n,a,o){var r=f?f+e:e;if(!this._events||!this._events[r])return!1;var s,l,c=this._events[r],u=arguments.length;if("function"==typeof c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),u){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,a),!0;case 6:return c.fn.call(c.context,t,i,n,a,o),!0}for(l=1,s=new Array(u-1);l<u;l++)s[l-1]=arguments[l];c.fn.apply(c.context,s)}else{var p,d=c.length;for(l=0;l<d;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),u){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,i);break;default:if(!s)for(p=1,s=new Array(u-1);p<u;p++)s[p-1]=arguments[p];c[l].fn.apply(c[l].context,s)}}return!0},n.prototype.on=function(e,t,i){var n=new o(t,i||this),a=f?f+e:e;return this._events||(this._events=f?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],n]:this._events[a].push(n):this._events[a]=n,this},n.prototype.once=function(e,t,i){var n=new o(t,i||this,!0),a=f?f+e:e;return this._events||(this._events=f?{}:Object.create(null)),this._events[a]?this._events[a].fn?this._events[a]=[this._events[a],n]:this._events[a].push(n):this._events[a]=n,this},n.prototype.removeListener=function(e,t,i,n){var a=f?f+e:e;if(!this._events||!this._events[a])return this;var o=this._events[a],r=[];if(t)if(o.fn)(o.fn!==t||n&&!o.once||i&&o.context!==i)&&r.push(o);else for(var s=0,l=o.length;s<l;s++)(o[s].fn!==t||n&&!o[s].once||i&&o[s].context!==i)&&r.push(o[s]);return r.length?this._events[a]=1===r.length?r[0]:r:delete this._events[a],this},n.prototype.removeAllListeners=function(e){return this._events&&(e?delete this._events[f?f+e:e]:this._events=f?{}:Object.create(null)),this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.prefixed=f,t.exports=n},{}],12:[function(e,t,i){"use strict";t.exports=Object.assign||function(e,t){for(var i,n,a=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){i=arguments[o],n=Object.keys(Object(i));for(var r=0;r<n.length;r++)a[n[r]]=i[n[r]]}return a}},{}],13:[function(e,S,t){(function(w){!function(){var i,e,d={};function r(e){var t=!1;return function(){if(t)throw new Error("Callback was already called.");t=!0,e.apply(i,arguments)}}null!=(i=this)&&(e=i.async),d.noConflict=function(){return i.async=e,d};function f(e,t){if(e.forEach)return e.forEach(t);for(var i=0;i<e.length;i+=1)t(e[i],i,e)}function l(e,n){if(e.map)return e.map(n);var a=[];return f(e,function(e,t,i){a.push(n(e,t,i))}),a}function h(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}var t=Object.prototype.toString,m=Array.isArray||function(e){return"[object Array]"===t.call(e)};void 0!==w&&w.nextTick?(d.nextTick=w.nextTick,"undefined"!=typeof setImmediate?d.setImmediate=function(e){setImmediate(e)}:d.setImmediate=d.nextTick):("function"==typeof setImmediate?d.nextTick=function(e){setImmediate(e)}:d.nextTick=function(e){setTimeout(e,0)},d.setImmediate=d.nextTick),d.each=function(t,i,n){if(n=n||function(){},!t.length)return n();var a=0;function o(e){e?(n(e),n=function(){}):(a+=1)>=t.length&&n()}f(t,function(e){i(e,r(o))})},d.forEach=d.each,d.eachSeries=function(t,e,i){if(i=i||function(){},!t.length)return i();var n=0,a=function(){e(t[n],function(e){e?(i(e),i=function(){}):(n+=1)>=t.length?i():a()})};a()},d.forEachSeries=d.eachSeries,d.eachLimit=function(e,t,i,n){s(t).apply(null,[e,i,n])},d.forEachLimit=d.eachLimit;function n(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[d.each].concat(e))}}function a(t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[d.eachSeries].concat(e))}}function o(e,t,a,i){if(t=l(t,function(e,t){return{index:t,value:e}}),i){var o=[];e(t,function(i,n){a(i.value,function(e,t){o[i.index]=t,n(e)})},function(e){i(e,o)})}else e(t,function(e,t){a(e.value,function(e){t(e)})})}var s=function(s){return function(i,e,n){if(n=n||function(){},!i.length||s<=0)return n();var a=0,o=0,r=0;!function t(){if(a>=i.length)return n();for(;r<s&&o<i.length;)r+=1,e(i[(o+=1)-1],function(e){e?(n(e),n=function(){}):(r-=1,(a+=1)>=i.length?n():t())})}()}};d.map=n(o),d.mapSeries=a(o),d.mapLimit=function(e,t,i,n){return c(t)(e,i,n)};var c=function(e){return function(t,i){return function(){var e=Array.prototype.slice.call(arguments);return i.apply(null,[s(t)].concat(e))}}(e,o)};d.reduce=function(e,n,t,i){d.eachSeries(e,function(e,i){t(n,e,function(e,t){n=t,i(e)})},function(e){i(e,n)})},d.inject=d.reduce,d.foldl=d.reduce,d.reduceRight=function(e,t,i,n){var a=l(e,function(e){return e}).reverse();d.reduce(a,t,i,n)},d.foldr=d.reduceRight;function u(e,t,n,i){var a=[];e(t=l(t,function(e,t){return{index:t,value:e}}),function(t,i){n(t.value,function(e){e&&a.push(t),i()})},function(e){i(l(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}d.filter=n(u),d.filterSeries=a(u),d.select=d.filter,d.selectSeries=d.filterSeries;function p(e,t,n,i){var a=[];e(t=l(t,function(e,t){return{index:t,value:e}}),function(t,i){n(t.value,function(e){e||a.push(t),i()})},function(e){i(l(a.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})}d.reject=n(p),d.rejectSeries=a(p);function b(e,t,n,a){e(t,function(t,i){n(t,function(e){e?(a(t),a=function(){}):i()})},function(e){a()})}d.detect=n(b),d.detectSeries=a(b),d.some=function(e,i,n){d.each(e,function(e,t){i(e,function(e){e&&(n(!0),n=function(){}),t()})},function(e){n(!1)})},d.any=d.some,d.every=function(e,i,n){d.each(e,function(e,t){i(e,function(e){e||(n(!1),n=function(){}),t()})},function(e){n(!0)})},d.all=d.every,d.sortBy=function(e,t,i){d.map(e,function(i,n){t(i,function(e,t){e?n(e):n(null,{value:i,criteria:t})})},function(e,t){if(e)return i(e);i(null,l(t.sort(function(e,t){var i=e.criteria,n=t.criteria;return i<n?-1:n<i?1:0}),function(e){return e.value}))})},d.auto=function(r,s){s=s||function(){};var e=h(r),t=e.length;if(!t)return s();function l(e){p.unshift(e)}function c(){t--,f(p.slice(0),function(e){e()})}var u={},p=[];l(function(){if(!t){var e=s;s=function(){},e(null,u)}}),f(e,function(n){function e(e){var t=Array.prototype.slice.call(arguments,1);if(t.length<=1&&(t=t[0]),e){var i={};f(h(u),function(e){i[e]=u[e]}),i[n]=t,s(e,i),s=function(){}}else u[n]=t,d.setImmediate(c)}function t(){return function(e,n,a){return e.reduce?e.reduce(n,a):(f(e,function(e,t,i){a=n(a,e,t,i)}),a)}(a,function(e,t){return e&&u.hasOwnProperty(t)},!0)&&!u.hasOwnProperty(n)}var i=m(r[n])?r[n]:[r[n]],a=i.slice(0,Math.abs(i.length-1))||[];if(t())i[i.length-1](e,u);else{var o=function(){t()&&(function(e){for(var t=0;t<p.length;t+=1)if(p[t]===e)return p.splice(t,1)}(o),i[i.length-1](e,u))};l(o)}})},d.retry=function(n,a,o){var r=[];"function"==typeof n&&(o=a,a=n,n=5),n=parseInt(n,10)||5;function e(i,t){function e(e,n){return function(i){e(function(e,t){i(!e||n,{err:e,result:t})},t)}}for(;n;)r.push(e(a,!(n-=1)));d.series(r,function(e,t){t=t[t.length-1],(i||o)(t.err,t.result)})}return o?e():e},d.waterfall=function(e,a){if(a=a||function(){},!m(e)){var t=new Error("First argument to waterfall must be an array of functions");return a(t)}if(!e.length)return a();var o=function(n){return function(e){if(e)a.apply(null,arguments),a=function(){};else{var t=Array.prototype.slice.call(arguments,1),i=n.next();i?t.push(o(i)):t.push(a),d.setImmediate(function(){n.apply(null,t)})}}};o(d.iterator(e))()};function g(e,t,i){if(i=i||function(){},m(t))e.map(t,function(e,i){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),i.call(null,e,t)})},i);else{var a={};e.each(h(t),function(i,n){t[i](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),a[i]=t,n(e)})},function(e){i(e,a)})}}d.parallel=function(e,t){g({map:d.map,each:d.each},e,t)},d.parallelLimit=function(e,t,i){g({map:c(t),each:s(t)},e,i)},d.series=function(e,t){if(t=t||function(){},m(e))d.mapSeries(e,function(e,i){e&&e(function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),i.call(null,e,t)})},t);else{var a={};d.eachSeries(h(e),function(i,n){e[i](function(e){var t=Array.prototype.slice.call(arguments,1);t.length<=1&&(t=t[0]),a[i]=t,n(e)})},function(e){t(e,a)})}},d.iterator=function(i){var n=function(e){var t=function(){return i.length&&i[e].apply(null,arguments),t.next()};return t.next=function(){return e<i.length-1?n(e+1):null},t};return n(0)},d.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};function v(e,t,n,i){var a=[];e(t,function(e,i){n(e,function(e,t){a=a.concat(t||[]),i(e)})},function(e){i(e,a)})}d.concat=n(v),d.concatSeries=a(v),d.whilst=function(t,i,n){t()?i(function(e){if(e)return n(e);d.whilst(t,i,n)}):n()},d.doWhilst=function(i,n,a){i(function(e){if(e)return a(e);var t=Array.prototype.slice.call(arguments,1);n.apply(null,t)?d.doWhilst(i,n,a):a()})},d.until=function(t,i,n){t()?n():i(function(e){if(e)return n(e);d.until(t,i,n)})},d.doUntil=function(i,n,a){i(function(e){if(e)return a(e);var t=Array.prototype.slice.call(arguments,1);n.apply(null,t)?a():d.doUntil(i,n,a)})},d.queue=function(i,e){function n(i,e,n,a){if(i.started||(i.started=!0),m(e)||(e=[e]),0==e.length)return d.setImmediate(function(){i.drain&&i.drain()});f(e,function(e){var t={data:e,callback:"function"==typeof a?a:null};n?i.tasks.unshift(t):i.tasks.push(t),i.saturated&&i.tasks.length===i.concurrency&&i.saturated(),d.setImmediate(i.process)})}void 0===e&&(e=1);var a=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(e,t){n(o,e,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(e,t){n(o,e,!0,t)},process:function(){if(!o.paused&&a<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),a+=1;var t=r(function(){a-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+a===0&&o.drain(),o.process()});i(e.data,t)}},length:function(){return o.tasks.length},running:function(){return a},idle:function(){return o.tasks.length+a===0},pause:function(){!0!==o.paused&&(o.paused=!0,o.process())},resume:function(){!1!==o.paused&&(o.paused=!1,o.process())}};return o},d.priorityQueue=function(e,t){function o(e,t){return e.priority-t.priority}var n=d.queue(e,t);return n.push=function(e,t,i){!function(i,e,n,a){if(i.started||(i.started=!0),m(e)||(e=[e]),0==e.length)return d.setImmediate(function(){i.drain&&i.drain()});f(e,function(e){var t={data:e,priority:n,callback:"function"==typeof a?a:null};i.tasks.splice(function(e,t,i){for(var n=-1,a=e.length-1;n<a;){var o=n+(a-n+1>>>1);0<=i(t,e[o])?n=o:a=o-1}return n}(i.tasks,t,o)+1,0,t),i.saturated&&i.tasks.length===i.concurrency&&i.saturated(),d.setImmediate(i.process)})}(n,e,t,i)},delete n.unshift,n},d.cargo=function(n,a){var o=!1,r=[],s={tasks:r,payload:a,saturated:null,empty:null,drain:null,drained:!0,push:function(e,t){m(e)||(e=[e]),f(e,function(e){r.push({data:e,callback:"function"==typeof t?t:null}),s.drained=!1,s.saturated&&r.length===a&&s.saturated()}),d.setImmediate(s.process)},process:function e(){if(!o){if(0===r.length)return s.drain&&!s.drained&&s.drain(),void(s.drained=!0);var i="number"==typeof a?r.splice(0,a):r.splice(0,r.length),t=l(i,function(e){return e.data});s.empty&&s.empty(),o=!0,n(t,function(){o=!1;var t=arguments;f(i,function(e){e.callback&&e.callback.apply(null,t)}),e()})}},length:function(){return r.length},running:function(){return o}};return s};function _(i){return function(e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t.concat([function(e){var t=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(e?console.error&&console.error(e):console[i]&&f(t,function(e){console[i](e)}))}]))}}d.log=_("log"),d.dir=_("dir"),d.memoize=function(i,a){var o={},r={};a=a||function(e){return e};function e(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=a.apply(null,e);n in o?d.nextTick(function(){t.apply(null,o[n])}):n in r?r[n].push(t):(r[n]=[t],i.apply(null,e.concat([function(){o[n]=arguments;var e=r[n];delete r[n];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))}return e.memo=o,e.unmemoized=i,e},d.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},d.times=function(e,t,i){for(var n=[],a=0;a<e;a++)n.push(a);return d.map(n,t,i)},d.timesSeries=function(e,t,i){for(var n=[],a=0;a<e;a++)n.push(a);return d.mapSeries(n,t,i)},d.seq=function(){var t=arguments;return function(){var n=this,e=Array.prototype.slice.call(arguments),i=e.pop();d.reduce(t,e,function(e,t,i){t.apply(n,e.concat([function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);i(e,t)}]))},function(e,t){i.apply(n,[e].concat(t))})}},d.compose=function(){return d.seq.apply(null,Array.prototype.reverse.call(arguments))};function y(t,a){function e(){var i=this,n=Array.prototype.slice.call(arguments),e=n.pop();return t(a,function(e,t){e.apply(i,n.concat([t]))},e)}if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return e.apply(this,i)}return e}d.applyEach=n(y),d.applyEachSeries=a(y),d.forever=function(i,n){!function e(t){if(t){if(n)return n(t);throw t}i(e)}()},void 0!==S&&S.exports?S.exports=d:i.async=d}()}).call(this,e("_process"))},{_process:4}],14:[function(e,t,i){arguments[4][11][0].apply(i,arguments)},{dup:11}],15:[function(e,t,i){var a=e("async"),n=e("url"),o=e("./Resource"),r=e("eventemitter3");function s(e,t){r.call(this),t=t||10,this.baseUrl=e||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._boundOnLoad=this._onLoad.bind(this),this._buffer=[],this._numToLoad=0,this._queue=a.queue(this._boundLoadResource,t),this.resources={}}(s.prototype=Object.create(r.prototype)).constructor=s,(t.exports=s).prototype.add=s.prototype.enqueue=function(e,t,i,n){if(Array.isArray(e)){for(var a=0;a<e.length;++a)this.add(e[a]);return this}if("object"==typeof e&&(n=t||e.callback||e.onComplete,t=(i=e).url,e=e.name||e.key||e.url),"string"!=typeof t&&(n=i,i=t,t=e),"string"!=typeof t)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.resources[e])throw new Error('Resource with name "'+e+'" already exists.');return t=this._handleBaseUrl(t),this.resources[e]=new o(e,t,i),"function"==typeof n&&this.resources[e].once("afterMiddleware",n),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[e]),this._progressChunk=(100-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[e]),this._progressChunk=100/this._buffer.length),this},s.prototype._handleBaseUrl=function(e){var t=n.parse(e);return t.protocol||0===t.pathname.indexOf("//")?e:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&e.lastIndexOf("/")!==e.length-1?this.baseUrl+"/"+e:this.baseUrl+e},s.prototype.before=s.prototype.pre=function(e){return this._beforeMiddleware.push(e),this},s.prototype.after=s.prototype.use=function(e){return this._afterMiddleware.push(e),this},s.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1,this.resources={}},s.prototype.load=function(e){if("function"==typeof e&&this.once("complete",e),this._queue.started)return this;this.emit("start",this);for(var t=0;t<this._buffer.length;++t)this._queue.push(this._buffer[t]);return this._buffer.length=0,this},s.prototype._loadResource=function(e,t){var i=this;e._dequeue=t,this._runMiddleware(e,this._beforeMiddleware,function(){e.load(i._boundOnLoad)})},s.prototype._onComplete=function(){this.emit("complete",this,this.resources)},s.prototype._onLoad=function(e){this.progress+=this._progressChunk,this.emit("progress",this,e),e.error?this.emit("error",e.error,this,e):this.emit("load",this,e),this._runMiddleware(e,this._afterMiddleware,function(){e.emit("afterMiddleware",e),this._numToLoad--,0===this._numToLoad&&this._onComplete()}),e._dequeue()},s.prototype._runMiddleware=function(i,e,t){var n=this;a.eachSeries(e,function(e,t){e.call(n,i,t)},t.bind(this,i))},s.LOAD_TYPE=o.LOAD_TYPE,s.XHR_READY_STATE=o.XHR_READY_STATE,s.XHR_RESPONSE_TYPE=o.XHR_RESPONSE_TYPE},{"./Resource":16,async:13,eventemitter3:14,url:9}],16:[function(e,t,i){var n=e("eventemitter3"),a=e("url"),o=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),r=null;function s(e,t,i){if(n.call(this),i=i||{},"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");this.name=e,this.url=t,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=!0===i.crossOrigin?"anonymous":null,this.loadType=i.loadType||this._determineLoadType(),this.xhrType=i.xhrType,this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function l(e){return e.toString().replace("object ","")}function c(e,t,i){t&&0===t.indexOf(".")&&(t=t.substring(1)),t&&(e[t]=i)}(s.prototype=Object.create(n.prototype)).constructor=s,(t.exports=s).prototype.complete=function(){this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError),this.data.removeEventListener("load",this._boundComplete),this.data.removeEventListener("progress",this._boundOnProgress),this.data.removeEventListener("canplaythrough",this._boundComplete)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError),this.xhr.removeEventListener("abort",this._boundXhrOnAbort),this.xhr.removeEventListener("progress",this._boundOnProgress),this.xhr.removeEventListener("load",this._boundXhrOnLoad)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.emit("complete",this)},s.prototype.load=function(e){switch(this.emit("start",this),e&&this.once("complete",e),"string"!=typeof this.crossOrigin&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case s.LOAD_TYPE.IMAGE:this._loadImage();break;case s.LOAD_TYPE.AUDIO:this._loadElement("audio");break;case s.LOAD_TYPE.VIDEO:this._loadElement("video");break;case s.LOAD_TYPE.XHR:default:o&&this.crossOrigin?this._loadXdr():this._loadXhr()}},s.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},s.prototype._loadElement=function(e){if(this.data=document.createElement(e),Array.isArray(this.url))for(var t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(e,this.url[t]));else this.data.appendChild(this._createSource(e,this.url));this["is"+e[0].toUpperCase()+e.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},s.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),this.xhrType===s.XHR_RESPONSE_TYPE.JSON||this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=s.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},s.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XDomainRequest;e.timeout=5e3,e.onerror=this._boundXhrOnError,e.ontimeout=this._boundXdrOnTimeout,e.onprogress=this._boundOnProgress,e.onload=this._boundXhrOnLoad,e.open("GET",this.url,!0),setTimeout(function(){e.send()},0)},s.prototype._createSource=function(e,t,i){i=i||e+"/"+t.substr(t.lastIndexOf(".")+1);var n=document.createElement("source");return n.src=t,n.type=i,n},s.prototype._onError=function(e){this.error=new Error("Failed to load element using "+e.target.nodeName),this.complete()},s.prototype._onProgress=function(e){e&&e.lengthComputable&&this.emit("progress",this,e.loaded/e.total)},s.prototype._xhrOnError=function(){this.error=new Error(l(this.xhr)+" Request failed. Status: "+this.xhr.status+', text: "'+this.xhr.statusText+'"'),this.complete()},s.prototype._xhrOnAbort=function(){this.error=new Error(l(this.xhr)+" Request was aborted by the user."),this.complete()},s.prototype._xdrOnTimeout=function(){this.error=new Error(l(this.xhr)+" Request timed out."),this.complete()},s.prototype._xhrOnLoad=function(){var e=this.xhr,t=void 0!==e.status?e.status:200;if(200===t||204===t||0===t&&0<e.responseText.length)if(this.xhrType===s.XHR_RESPONSE_TYPE.TEXT)this.data=e.responseText;else if(this.xhrType===s.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e.responseText),this.isJson=!0}catch(e){this.error=new Error("Error trying to parse loaded json:",e)}else if(this.xhrType===s.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(e.responseText,"text/xml")}else{var n=document.createElement("div");n.innerHTML=e.responseText,this.data=n}this.isXml=!0}catch(e){this.error=new Error("Error trying to parse loaded xml:",e)}else this.data=e.response||e.responseText;else this.error=new Error("["+e.status+"]"+e.statusText+":"+e.responseURL);this.complete()},s.prototype._determineCrossOrigin=function(e,t){if(0===e.indexOf("data:"))return"";t=t||window.location,(r=r||document.createElement("a")).href=e;var i=!(e=a.parse(r.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&i&&e.protocol===t.protocol?"":"anonymous"},s.prototype._determineXhrType=function(){return s._xhrTypeMap[this._getExtension()]||s.XHR_RESPONSE_TYPE.TEXT},s.prototype._determineLoadType=function(){return s._loadTypeMap[this._getExtension()]||s.LOAD_TYPE.XHR},s.prototype._getExtension=function(){var e,t=this.url;if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var n=t.indexOf("?");-1!==n&&(t=t.substring(0,n)),e=t.substring(t.lastIndexOf(".")+1)}return e},s.prototype._getMimeFromXhrType=function(e){switch(e){case s.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case s.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case s.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case s.XHR_RESPONSE_TYPE.JSON:return"application/json";case s.XHR_RESPONSE_TYPE.DEFAULT:case s.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},s.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},s.XHR_READY_STATE={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},s.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},s._loadTypeMap={gif:s.LOAD_TYPE.IMAGE,png:s.LOAD_TYPE.IMAGE,bmp:s.LOAD_TYPE.IMAGE,jpg:s.LOAD_TYPE.IMAGE,jpeg:s.LOAD_TYPE.IMAGE,tif:s.LOAD_TYPE.IMAGE,tiff:s.LOAD_TYPE.IMAGE,webp:s.LOAD_TYPE.IMAGE,tga:s.LOAD_TYPE.IMAGE},s._xhrTypeMap={xhtml:s.XHR_RESPONSE_TYPE.DOCUMENT,html:s.XHR_RESPONSE_TYPE.DOCUMENT,htm:s.XHR_RESPONSE_TYPE.DOCUMENT,xml:s.XHR_RESPONSE_TYPE.DOCUMENT,tmx:s.XHR_RESPONSE_TYPE.DOCUMENT,tsx:s.XHR_RESPONSE_TYPE.DOCUMENT,svg:s.XHR_RESPONSE_TYPE.DOCUMENT,gif:s.XHR_RESPONSE_TYPE.BLOB,png:s.XHR_RESPONSE_TYPE.BLOB,bmp:s.XHR_RESPONSE_TYPE.BLOB,jpg:s.XHR_RESPONSE_TYPE.BLOB,jpeg:s.XHR_RESPONSE_TYPE.BLOB,tif:s.XHR_RESPONSE_TYPE.BLOB,tiff:s.XHR_RESPONSE_TYPE.BLOB,webp:s.XHR_RESPONSE_TYPE.BLOB,tga:s.XHR_RESPONSE_TYPE.BLOB,json:s.XHR_RESPONSE_TYPE.JSON,text:s.XHR_RESPONSE_TYPE.TEXT,txt:s.XHR_RESPONSE_TYPE.TEXT},s.setExtensionLoadType=function(e,t){c(s._loadTypeMap,e,t)},s.setExtensionXhrType=function(e,t){c(s._xhrTypeMap,e,t)}},{eventemitter3:14,url:9}],17:[function(e,t,i){t.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(e){for(var t,i="",n=new Array(4),a=0,o=0;a<e.length;){for(t=new Array(3),o=0;o<t.length;o++)a<e.length?t[o]=255&e.charCodeAt(a++):t[o]=0;switch(n[0]=t[0]>>2,n[1]=(3&t[0])<<4|t[1]>>4,n[2]=(15&t[1])<<2|t[2]>>6,n[3]=63&t[2],a-(e.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(o=0;o<n.length;o++)i+=this._keyStr.charAt(n[o])}return i}}},{}],18:[function(e,t,i){t.exports=e("./Loader"),t.exports.Resource=e("./Resource"),t.exports.middleware={caching:{memory:e("./middlewares/caching/memory")},parsing:{blob:e("./middlewares/parsing/blob")}}},{"./Loader":15,"./Resource":16,"./middlewares/caching/memory":19,"./middlewares/parsing/blob":20}],19:[function(e,t,i){var n={};t.exports=function(){return function(e,t){n[e.url]?(e.data=n[e.url],e.complete()):(e.once("complete",function(){n[this.url]=this.data}),t())}}},{}],20:[function(e,t,i){var a=e("../../Resource"),o=e("../../b64");window.URL=window.URL||window.webkitURL,t.exports=function(){return function(e,t){if(!e.data)return t();if(e.xhr&&e.xhrType===a.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof e.data){if(0===e.data.type.indexOf("image")){var i=URL.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=i,e.isImage=!0,e.data.onload=function(){URL.revokeObjectURL(i),e.data.onload=null,t()}}}else{var n=e.xhr.getResponseHeader("content-type");n&&0===n.indexOf("image")&&(e.data=new Image,e.data.src="data:"+n+";base64,"+o.encodeBinary(e.xhr.responseText),e.isImage=!0,e.data.onload=function(){e.data.onload=null,t()})}else t()}}},{"../../Resource":16,"../../b64":17}],21:[function(e,t,i){t.exports={name:"pixi.js",version:"3.0.7",description:"Pixi.js is a fast lightweight 2D library that works across all devices.",author:"Mat Groves",contributors:["Chad Engler <chad@pantherdev.com>","Richard Davey <rdavey@gmail.com>"],main:"./src/index.js",homepage:"http://goodboydigital.com/",bugs:"https://github.com/GoodBoyDigital/pixi.js/issues",license:"MIT",repository:{type:"git",url:"https://github.com/GoodBoyDigital/pixi.js.git"},scripts:{start:"gulp && gulp watch",test:"gulp && testem ci",build:"gulp",docs:"jsdoc -c ./gulp/util/jsdoc.conf.json -R README.md"},files:["bin/","src/"],dependencies:{async:"^0.9.0",brfs:"^1.4.0",earcut:"^2.0.1",eventemitter3:"^1.1.0","object-assign":"^2.0.0","resource-loader":"^1.6.1"},devDependencies:{browserify:"^10.2.3",chai:"^3.0.0",del:"^1.2.0",gulp:"^3.9.0","gulp-cached":"^1.1.0","gulp-concat":"^2.5.2","gulp-debug":"^2.0.1","gulp-jshint":"^1.11.0","gulp-mirror":"^0.4.0","gulp-plumber":"^1.0.1","gulp-rename":"^1.2.2","gulp-sourcemaps":"^1.5.2","gulp-uglify":"^1.2.0","gulp-util":"^3.0.5","jaguarjs-jsdoc":"git+https://github.com/davidshimjs/jaguarjs-jsdoc.git",jsdoc:"^3.3.0","jshint-summary":"^0.4.0",minimist:"^1.1.1",mocha:"^2.2.5","require-dir":"^0.3.0","run-sequence":"^1.1.0",testem:"^0.8.3","vinyl-buffer":"^1.0.0","vinyl-source-stream":"^1.1.0",watchify:"^3.2.1"},browserify:{transform:["brfs"]}}},{}],22:[function(e,t,i){var n={VERSION:e("../../package.json").version,PI_2:2*Math.PI,RAD_TO_DEG:180/Math.PI,DEG_TO_RAD:Math.PI/180,TARGET_FPMS:.06,RENDERER_TYPE:{UNKNOWN:0,WEBGL:1,CANVAS:2},BLEND_MODES:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},DRAW_MODES:{POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},SCALE_MODES:{DEFAULT:0,LINEAR:0,NEAREST:1},RETINA_PREFIX:/@(.+)x/,RESOLUTION:1,FILTER_RESOLUTION:1,DEFAULT_RENDER_OPTIONS:{view:null,resolution:1,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1},SHAPES:{POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},SPRITE_BATCH_SIZE:2e3};t.exports=n},{"../../package.json":21}],23:[function(e,t,i){var p=e("../math"),n=e("./DisplayObject"),o=e("../textures/RenderTexture"),r=new p.Matrix;function a(){n.call(this),this.children=[]}(a.prototype=Object.create(n.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{width:{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},height:{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}}),a.prototype.addChild=function(e){return this.addChildAt(e,this.children.length)},a.prototype.addChildAt=function(e,t){if(e===this)return e;if(0<=t&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),(e.parent=this).children.splice(t,0,e),e.emit("added",this),e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},a.prototype.swapChildren=function(e,t){if(e!==t){var i=this.getChildIndex(e),n=this.getChildIndex(t);if(i<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be children of the caller.");this.children[i]=t,this.children[n]=e}},a.prototype.getChildIndex=function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t},a.prototype.setChildIndex=function(e,t){if(t<0||t>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(e);this.children.splice(i,1),this.children.splice(t,0,e)},a.prototype.getChildAt=function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Supplied index "+e+" does not exist in the child list, or the supplied DisplayObject is not a child of the caller");return this.children[e]},a.prototype.removeChild=function(e){var t=this.children.indexOf(e);if(-1!==t)return this.removeChildAt(t)},a.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,this.children.splice(e,1),t.emit("removed",this),t},a.prototype.removeChildren=function(e,t){var i=e||0,n="number"==typeof t?t:this.children.length,a=n-i;if(0<a&&a<=n){for(var o=this.children.splice(i,a),r=0;r<o.length;++r)o[r].parent=null;return o}if(0==a&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},a.prototype.generateTexture=function(e,t,i){var n=this.getLocalBounds(),a=new o(e,0|n.width,0|n.height,i,t);return r.tx=-n.x,r.ty=-n.y,a.render(this,r),a},a.prototype.containerUpdateTransform=a.prototype.updateTransform=function(){if(this.visible){this.displayObjectUpdateTransform();for(var e=0,t=this.children.length;e<t;++e)this.children[e].updateTransform()}},a.prototype.containerGetBounds=a.prototype.getBounds=function(){if(!this._currentBounds){if(0===this.children.length)return p.Rectangle.EMPTY;for(var e,t,i,n=1/0,a=1/0,o=-1/0,r=-1/0,s=!1,l=0,c=this.children.length;l<c;++l){this.children[l].visible&&(s=!0,n=n<(e=this.children[l].getBounds()).x?n:e.x,a=a<e.y?a:e.y,o=(t=e.width+e.x)<o?o:t,r=(i=e.height+e.y)<r?r:i)}if(!s)return p.Rectangle.EMPTY;var u=this._bounds;u.x=n,u.y=a,u.width=o-n,u.height=r-a,this._currentBounds=u}return this._currentBounds},a.prototype.getLocalBounds=function(){var e=this.worldTransform;this.worldTransform=p.Matrix.IDENTITY;for(var t=0,i=this.children.length;t<i;++t)this.children[t].updateTransform();return this.worldTransform=e,this._currentBounds=null,this.getBounds(p.Matrix.IDENTITY)},a.prototype.renderWebGL=function(e){var t,i;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters){for(e.currentRenderer.flush(),this._filters&&e.filterManager.pushFilter(this,this._filters),this._mask&&e.maskManager.pushMask(this,this._mask),e.currentRenderer.start(),this._renderWebGL(e),t=0,i=this.children.length;t<i;t++)this.children[t].renderWebGL(e);e.currentRenderer.flush(),this._mask&&e.maskManager.popMask(this,this._mask),this._filters&&e.filterManager.popFilter(),e.currentRenderer.start()}else for(this._renderWebGL(e),t=0,i=this.children.length;t<i;++t)this.children[t].renderWebGL(e)},a.prototype._renderWebGL=function(e){},a.prototype._renderCanvas=function(e){},a.prototype.renderCanvas=function(e){if(this.visible&&!(this.alpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask,e),this._renderCanvas(e);for(var t=0,i=this.children.length;t<i;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}},a.prototype.destroy=function(e){if(n.prototype.destroy.call(this),e)for(var t=0,i=this.children.length;t<i;++t)this.children[t].destroy(e);this.removeChildren(),this.children=null}},{"../math":32,"../textures/RenderTexture":70,"./DisplayObject":24}],24:[function(e,t,i){var n=e("../math"),o=e("../textures/RenderTexture"),a=e("eventemitter3"),l=e("../const"),r=new n.Matrix;function s(){a.call(this),this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!0,this.parent=null,this.worldAlpha=1,this.worldTransform=new n.Matrix,this.filterArea=null,this._sr=0,this._cr=1,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cachedObject=null}(s.prototype=Object.create(a.prototype)).constructor=s,t.exports=s,Object.defineProperties(s.prototype,{x:{get:function(){return this.position.x},set:function(e){this.position.x=e}},y:{get:function(){return this.position.y},set:function(e){this.position.y=e}},worldVisible:{get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},mask:{get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0),this._mask=e,this._mask&&(this._mask.renderable=!1)}},filters:{get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}}),s.prototype.displayObjectUpdateTransform=s.prototype.updateTransform=function(){var e,t,i,n,a,o,r=this.parent.worldTransform,s=this.worldTransform;this.rotation%l.PI_2?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,t=this._sr*this.scale.x,i=-this._sr*this.scale.y,n=this._cr*this.scale.y,a=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(a-=this.pivot.x*e+this.pivot.y*i,o-=this.pivot.x*t+this.pivot.y*n),s.a=e*r.a+t*r.c,s.b=e*r.b+t*r.d,s.c=i*r.a+n*r.c,s.d=i*r.b+n*r.d):(e=this.scale.x,n=this.scale.y,a=this.position.x-this.pivot.x*e,o=this.position.y-this.pivot.y*n,s.a=e*r.a,s.b=e*r.b,s.c=n*r.c,s.d=n*r.d),s.tx=a*r.a+o*r.c+r.tx,s.ty=a*r.b+o*r.d+r.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null},s.prototype.getBounds=function(e){return n.Rectangle.EMPTY},s.prototype.getLocalBounds=function(){return this.getBounds(n.Matrix.IDENTITY)},s.prototype.toGlobal=function(e){return this.displayObjectUpdateTransform(),this.worldTransform.apply(e)},s.prototype.toLocal=function(e,t){return t&&(e=t.toGlobal(e)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(e)},s.prototype.renderWebGL=function(e){},s.prototype.renderCanvas=function(e){},s.prototype.generateTexture=function(e,t,i){var n=this.getLocalBounds(),a=new o(e,0|n.width,0|n.height,t,i);return r.tx=-n.x,r.ty=-n.y,a.render(this,r),a},s.prototype.destroy=function(){this.position=null,this.scale=null,this.pivot=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.worldTransform=null,this.filterArea=null}},{"../const":22,"../math":32,"../textures/RenderTexture":70,eventemitter3:11}],25:[function(e,t,i){var n=e("../display/Container"),r=e("../textures/Texture"),s=e("../renderers/canvas/utils/CanvasBuffer"),l=e("../renderers/canvas/utils/CanvasGraphics"),a=e("./GraphicsData"),$=e("../math"),b=e("../const"),o=new $.Point;function c(){n.call(this),this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this._prevTint=16777215,this.blendMode=b.BLEND_MODES.NORMAL,this.currentPath=null,this._webGL={},this.isMask=!1,this.boundsPadding=0,this._localBounds=new $.Rectangle(0,0,1,1),this.dirty=!0,this.glDirty=!1,this.boundsDirty=!0,this.cachedSpriteDirty=!1}(c.prototype=Object.create(n.prototype)).constructor=c,t.exports=c,Object.defineProperties(c.prototype,{}),c.prototype.clone=function(){var e=new c;e.renderable=this.renderable,e.fillAlpha=this.fillAlpha,e.lineWidth=this.lineWidth,e.lineColor=this.lineColor,e.tint=this.tint,e.blendMode=this.blendMode,e.isMask=this.isMask,e.boundsPadding=this.boundsPadding,e.dirty=this.dirty,e.glDirty=this.glDirty,e.cachedSpriteDirty=this.cachedSpriteDirty;for(var t=0;t<this.graphicsData.length;++t)e.graphicsData.push(this.graphicsData[t].clone());return e.currentPath=e.graphicsData[e.graphicsData.length-1],e.updateLocalBounds(),e},c.prototype.lineStyle=function(e,t,i){return this.lineWidth=e||0,this.lineColor=t||0,this.lineAlpha=void 0===i?1:i,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new $.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},c.prototype.moveTo=function(e,t){return this.drawShape(new $.Polygon([e,t])),this},c.prototype.lineTo=function(e,t){return this.currentPath.shape.points.push(e,t),this.dirty=!0,this},c.prototype.quadraticCurveTo=function(e,t,i,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a,o,r=this.currentPath.shape.points;0===r.length&&this.moveTo(0,0);for(var s=r[r.length-2],l=r[r.length-1],c=0,u=1;u<=20;++u)a=s+(e-s)*(c=u/20),o=l+(t-l)*c,r.push(a+(e+(i-e)*c-a)*c,o+(t+(n-t)*c-o)*c);return this.dirty=this.boundsDirty=!0,this},c.prototype.bezierCurveTo=function(e,t,i,n,a,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var r,s,l,c,u,p=this.currentPath.shape.points,d=p[p.length-2],f=p[p.length-1],h=0,m=1;m<=20;++m)l=(s=(r=1-(h=m/20))*r)*r,u=(c=h*h)*h,p.push(l*d+3*s*h*e+3*r*c*i+u*a,l*f+3*s*h*t+3*r*c*n+u*o);return this.dirty=this.boundsDirty=!0,this},c.prototype.arcTo=function(e,t,i,n,a){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(e,t):this.moveTo(e,t);var o=this.currentPath.shape.points,r=o[o.length-2],s=o[o.length-1]-t,l=r-e,c=n-t,u=i-e,p=Math.abs(s*u-l*c);if(p<1e-8||0===a)o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t);else{var d=s*s+l*l,f=c*c+u*u,h=s*c+l*u,m=a*Math.sqrt(d)/p,b=a*Math.sqrt(f)/p,g=m*h/d,v=b*h/f,_=m*u+b*l,y=m*c+b*s,w=l*(b+g),S=s*(b+g),x=u*(m+v),k=c*(m+v),$=Math.atan2(S-y,w-_),C=Math.atan2(k-y,x-_);this.arc(_+e,y+t,a,$,C,u*s<l*c)}return this.dirty=this.boundsDirty=!0,this},c.prototype.arc=function(e,t,i,n,a,o){if(n===a)return this;!(o=o||!1)&&a<=n?a+=2*Math.PI:o&&n<=a&&(n+=2*Math.PI);var r=o?-1*(n-a):a-n,s=40*Math.ceil(Math.abs(r)/(2*Math.PI));if(0==r)return this;var l=e+Math.cos(n)*i,c=t+Math.sin(n)*i;this.currentPath?o&&this.filling?this.currentPath.shape.points.push(e,t):this.currentPath.shape.points.push(l,c):o&&this.filling?this.moveTo(e,t):this.moveTo(l,c);for(var u=this.currentPath.shape.points,p=r/(2*s),d=2*p,f=Math.cos(p),h=Math.sin(p),m=s-1,b=m%1/m,g=0;g<=m;g++){var v=p+n+d*(g+b*g),_=Math.cos(v),y=-Math.sin(v);u.push((f*_+h*y)*i+e,(f*-y+h*_)*i+t)}return this.dirty=this.boundsDirty=!0,this},c.prototype.beginFill=function(e,t){return this.filling=!0,this.fillColor=e||0,this.fillAlpha=void 0===t?1:t,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},c.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},c.prototype.drawRect=function(e,t,i,n){return this.drawShape(new $.Rectangle(e,t,i,n)),this},c.prototype.drawRoundedRect=function(e,t,i,n,a){return this.drawShape(new $.RoundedRectangle(e,t,i,n,a)),this},c.prototype.drawCircle=function(e,t,i){return this.drawShape(new $.Circle(e,t,i)),this},c.prototype.drawEllipse=function(e,t,i,n){return this.drawShape(new $.Ellipse(e,t,i,n)),this},c.prototype.drawPolygon=function(e){var t=e;if(!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;++i)t[i]=arguments[i]}return this.drawShape(new $.Polygon(t)),this},c.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this},c.prototype.generateTexture=function(e,t,i){t=t||1;var n=this.getLocalBounds(),a=new s(n.width*t,n.height*t),o=r.fromCanvas(a.canvas,i);return o.baseTexture.resolution=t,a.context.scale(t,t),a.context.translate(-n.x,-n.y),l.renderGraphics(this,a.context),o},c.prototype._renderWebGL=function(e){this.glDirty&&(this.dirty=!0,this.glDirty=!1),e.setObjectRenderer(e.plugins.graphics),e.plugins.graphics.render(this)},c.prototype._renderCanvas=function(e){if(!0!==this.isMask){this._prevTint!==this.tint&&(this.dirty=!0,this._prevTint=this.tint);var t=e.context,i=this.worldTransform;this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,t.globalCompositeOperation=e.blendModes[e.currentBlendMode]);var n=e.resolution;t.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),l.renderGraphics(this,t)}},c.prototype.getBounds=function(e){if(!this._currentBounds){if(!this.renderable)return $.Rectangle.EMPTY;this.boundsDirty&&(this.updateLocalBounds(),this.glDirty=!0,this.cachedSpriteDirty=!0,this.boundsDirty=!1);var t=this._localBounds,i=t.x,n=t.width+t.x,a=t.y,o=t.height+t.y,r=e||this.worldTransform,s=r.a,l=r.b,c=r.c,u=r.d,p=r.tx,d=r.ty,f=s*n+c*o+p,h=u*o+l*n+d,m=s*i+c*o+p,b=u*o+l*i+d,g=s*i+c*a+p,v=u*a+l*i+d,_=s*n+c*a+p,y=u*a+l*n+d,w=f,S=h,x=f,k=h;x=_<(x=g<(x=m<x?m:x)?g:x)?_:x,k=y<(k=v<(k=b<k?b:k)?v:k)?y:k,w=(w=(w=w<m?m:w)<g?g:w)<_?_:w,S=(S=(S=S<b?b:S)<v?v:S)<y?y:S,this._bounds.x=x,this._bounds.width=w-x,this._bounds.y=k,this._bounds.height=S-k,this._currentBounds=this._bounds}return this._currentBounds},c.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,o);for(var t=this.graphicsData,i=0;i<t.length;i++){var n=t[i];if(n.fill&&(n.shape&&n.shape.contains(o.x,o.y)))return!0}return!1},c.prototype.updateLocalBounds=function(){var e=1/0,t=-1/0,i=1/0,n=-1/0;if(this.graphicsData.length)for(var a,o,r,s,l,c,u=0;u<this.graphicsData.length;u++){var p=this.graphicsData[u],d=p.type,f=p.lineWidth;if(a=p.shape,d===b.SHAPES.RECT||d===b.SHAPES.RREC)r=a.x-f/2,s=a.y-f/2,e=r<e?r:e,t=t<r+(l=a.width+f)?r+l:t,i=s<i?s:i,n=n<s+(c=a.height+f)?s+c:n;else if(d===b.SHAPES.CIRC)r=a.x,s=a.y,e=r-(l=a.radius+f/2)<e?r-l:e,t=t<r+l?r+l:t,i=s-(c=a.radius+f/2)<i?s-c:i,n=n<s+c?s+c:n;else if(d===b.SHAPES.ELIP)r=a.x,s=a.y,e=r-(l=a.width+f/2)<e?r-l:e,t=t<r+l?r+l:t,i=s-(c=a.height+f/2)<i?s-c:i,n=n<s+c?s+c:n;else{o=a.points;for(var h=0;h<o.length;h+=2)e=(r=o[h])-f<e?r-f:e,t=t<r+f?r+f:t,i=(s=o[h+1])-f<i?s-f:i,n=n<s+f?s+f:n}}else n=i=t=e=0;var m=this.boundsPadding;this._localBounds.x=e-m,this._localBounds.width=t-e+2*m,this._localBounds.y=i-m,this._localBounds.height=n-i+2*m},c.prototype.drawShape=function(e){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var t=new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,e);return this.graphicsData.push(t),t.type===b.SHAPES.POLY&&(t.shape.closed=t.shape.closed||this.filling,this.currentPath=t),this.dirty=this.boundsDirty=!0,t},c.prototype.destroy=function(){n.prototype.destroy.apply(this,arguments);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var t in this._webgl)for(var i=0;i<this._webgl[t].data.length;++i)this._webgl[t].data[i].destroy();this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/canvas/utils/CanvasGraphics":45,"../textures/Texture":71,"./GraphicsData":26}],26:[function(e,t,i){function n(e,t,i,n,a,o,r){this.lineWidth=e,this.lineColor=t,this.lineAlpha=i,this._lineTint=t,this.fillColor=n,this.fillAlpha=a,this._fillTint=n,this.fill=o,this.shape=r,this.type=r.type}n.prototype.constructor=n,(t.exports=n).prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},n.prototype.destroy=function(){this.shape=null}},{}],27:[function(e,t,i){var N=e("../../utils"),X=e("../../math"),v=e("../../const"),n=e("../../renderers/webgl/utils/ObjectRenderer"),a=e("../../renderers/webgl/WebGLRenderer"),o=e("./WebGLGraphicsData"),y=e("earcut");function r(e){n.call(this,e),this.graphicsDataPool=[],this.primitiveShader=null,this.complexPrimitiveShader=null,this.maximumSimplePolySize=200}(r.prototype=Object.create(n.prototype)).constructor=r,t.exports=r,a.registerPlugin("graphics",r),r.prototype.onContextChange=function(){},r.prototype.destroy=function(){n.prototype.destroy.call(this);for(var e=0;e<this.graphicsDataPool.length;++e)this.graphicsDataPool[e].destroy();this.graphicsDataPool=null},r.prototype.render=function(e){var t,i=this.renderer,n=i.gl,a=i.shaderManager.plugins.primitiveShader;e.dirty&&this.updateGraphics(e,n);var o=e._webGL[n.id];i.blendModeManager.setBlendMode(e.blendMode);for(var r=0;r<o.data.length;r++)1===o.data[r].mode?(t=o.data[r],i.stencilManager.pushStencil(e,t,i),n.uniform1f(i.shaderManager.complexPrimitiveShader.uniforms.alpha._location,e.worldAlpha*t.alpha),n.drawElements(n.TRIANGLE_FAN,4,n.UNSIGNED_SHORT,2*(t.indices.length-4)),i.stencilManager.popStencil(e,t,i)):(t=o.data[r],a=i.shaderManager.primitiveShader,i.shaderManager.setShader(a),n.uniformMatrix3fv(a.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),n.uniformMatrix3fv(a.uniforms.projectionMatrix._location,!1,i.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(a.uniforms.tint._location,N.hex2rgb(e.tint)),n.uniform1f(a.uniforms.alpha._location,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,t.buffer),n.vertexAttribPointer(a.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(a.attributes.aColor,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,t.indices.length,n.UNSIGNED_SHORT,0))},r.prototype.updateGraphics=function(e){var t,i,n=this.renderer.gl,a=e._webGL[n.id];if(a=a||(e._webGL[n.id]={lastIndex:0,data:[],gl:n}),e.dirty=!1,e.clearDirty){for(e.clearDirty=!1,t=0;t<a.data.length;t++){var o=a.data[t];o.reset(),this.graphicsDataPool.push(o)}a.data=[],a.lastIndex=0}for(t=a.lastIndex;t<e.graphicsData.length;t++){var r=e.graphicsData[t];if(r.type===v.SHAPES.POLY){if(r.points=r.shape.points.slice(),r.shape.closed&&(r.points[0]===r.points[r.points.length-2]&&r.points[1]===r.points[r.points.length-1]||r.points.push(r.points[0],r.points[1])),r.fill)if(6<=r.points.length)if(r.points.length<2*this.maximumSimplePolySize)i=this.switchMode(a,0),this.buildPoly(r,i)||(i=this.switchMode(a,1),this.buildComplexPoly(r,i));else i=this.switchMode(a,1),this.buildComplexPoly(r,i);0<r.lineWidth&&(i=this.switchMode(a,0),this.buildLine(r,i))}else i=this.switchMode(a,0),r.type===v.SHAPES.RECT?this.buildRectangle(r,i):r.type===v.SHAPES.CIRC||r.type===v.SHAPES.ELIP?this.buildCircle(r,i):r.type===v.SHAPES.RREC&&this.buildRoundedRectangle(r,i);a.lastIndex++}for(t=0;t<a.data.length;t++)(i=a.data[t]).dirty&&i.upload()},r.prototype.switchMode=function(e,t){var i;return e.data.length?(32e4<(i=e.data[e.data.length-1]).points.length||i.mode!==t||1===t)&&((i=this.graphicsDataPool.pop()||new o(e.gl)).mode=t,e.data.push(i)):((i=this.graphicsDataPool.pop()||new o(e.gl)).mode=t,e.data.push(i)),i.dirty=!0,i},r.prototype.buildRectangle=function(e,t){var i=e.shape,n=i.x,a=i.y,o=i.width,r=i.height;if(e.fill){var s=N.hex2rgb(e.fillColor),l=e.fillAlpha,c=s[0]*l,u=s[1]*l,p=s[2]*l,d=t.points,f=t.indices,h=d.length/6;d.push(n,a),d.push(c,u,p,l),d.push(n+o,a),d.push(c,u,p,l),d.push(n,a+r),d.push(c,u,p,l),d.push(n+o,a+r),d.push(c,u,p,l),f.push(h,h,1+h,2+h,3+h,3+h)}if(e.lineWidth){var m=e.points;e.points=[n,a,n+o,a,n+o,a+r,n,a+r,n,a],this.buildLine(e,t),e.points=m}},r.prototype.buildRoundedRectangle=function(e,t){var i=e.shape,n=i.x,a=i.y,o=i.width,r=i.height,s=i.radius,l=[];if(l.push(n,a+s),this.quadraticBezierCurve(n,a+r-s,n,a+r,n+s,a+r,l),this.quadraticBezierCurve(n+o-s,a+r,n+o,a+r,n+o,a+r-s,l),this.quadraticBezierCurve(n+o,a+s,n+o,a,n+o-s,a,l),this.quadraticBezierCurve(n+s,a,n,a,n,a+s+1e-10,l),e.fill){var c=N.hex2rgb(e.fillColor),u=e.fillAlpha,p=c[0]*u,d=c[1]*u,f=c[2]*u,h=t.points,m=t.indices,b=h.length/6,g=y(l,null,2),v=0;for(v=0;v<g.length;v+=3)m.push(g[v]+b),m.push(g[v]+b),m.push(g[v+1]+b),m.push(g[v+2]+b),m.push(g[v+2]+b);for(v=0;v<l.length;v++)h.push(l[v],l[++v],p,d,f,u)}if(e.lineWidth){var _=e.points;e.points=l,this.buildLine(e,t),e.points=_}},r.prototype.quadraticBezierCurve=function(e,t,i,n,a,o,r){var s,l,c,u,p,d,f=r||[];function h(e,t,i){return e+(t-e)*i}for(var m=0,b=0;b<=20;b++)s=h(e,i,m=b/20),l=h(t,n,m),c=h(i,a,m),u=h(n,o,m),p=h(s,c,m),d=h(l,u,m),f.push(p,d);return f},r.prototype.buildCircle=function(e,t){var i,n,a=e.shape,o=a.x,r=a.y;n=e.type===v.SHAPES.CIRC?(i=a.radius,a.radius):(i=a.width,a.height);var s=2*Math.PI/40,l=0;if(e.fill){var c=N.hex2rgb(e.fillColor),u=e.fillAlpha,p=c[0]*u,d=c[1]*u,f=c[2]*u,h=t.points,m=t.indices,b=h.length/6;for(m.push(b),l=0;l<41;l++)h.push(o,r,p,d,f,u),h.push(o+Math.sin(s*l)*i,r+Math.cos(s*l)*n,p,d,f,u),m.push(b++,b++);m.push(b-1)}if(e.lineWidth){var g=e.points;for(e.points=[],l=0;l<41;l++)e.points.push(o+Math.sin(s*l)*i,r+Math.cos(s*l)*n);this.buildLine(e,t),e.points=g}},r.prototype.buildLine=function(e,t){var i=0,n=e.points;if(0!==n.length){if(e.lineWidth%2)for(i=0;i<n.length;i++)n[i]+=.5;var a=new X.Point(n[0],n[1]),o=new X.Point(n[n.length-2],n[n.length-1]);if(a.x===o.x&&a.y===o.y){(n=n.slice()).pop(),n.pop();var r=(o=new X.Point(n[n.length-2],n[n.length-1])).x+.5*(a.x-o.x),s=o.y+.5*(a.y-o.y);n.unshift(r,s),n.push(r,s)}var l,c,u,p,d,f,h,m,b,g,v,_,y,w,S,x,k,$,C,T,z,P,A=t.points,O=t.indices,j=n.length/2,F=n.length,I=A.length/6,E=e.lineWidth/2,D=N.hex2rgb(e.lineColor),M=e.lineAlpha,R=D[0]*M,B=D[1]*M,L=D[2]*M;for(u=n[0],p=n[1],d=n[2],b=-(p-(f=n[3])),g=u-d,b/=P=Math.sqrt(b*b+g*g),g/=P,b*=E,g*=E,A.push(u-b,p-g,R,B,L,M),A.push(u+b,p+g,R,B,L,M),i=1;i<j-1;i++)u=n[2*(i-1)],p=n[2*(i-1)+1],d=n[2*i],f=n[2*i+1],h=n[2*(i+1)],m=n[2*(i+1)+1],b=-(p-f),g=u-d,b/=P=Math.sqrt(b*b+g*g),g/=P,b*=E,g*=E,v=-(f-m),_=d-h,v/=P=Math.sqrt(v*v+_*_),_/=P,k=(-b+u)*(-g+f)-(-b+d)*(-g+p),T=(-(v*=E)+h)*(-(_*=E)+f)-(-v+d)*(-_+m),z=(S=-g+p-(-g+f))*(C=-v+d-(-v+h))-($=-_+m-(-_+f))*(x=-b+d-(-b+u)),Math.abs(z)<.1?(z+=10.1,A.push(d-b,f-g,R,B,L,M),A.push(d+b,f+g,R,B,L,M)):19600<((l=(x*T-C*k)/z)-d)*(l-d)+((c=($*k-S*T)/z)-f)+(c-f)?(y=b-v,w=g-_,y/=P=Math.sqrt(y*y+w*w),w/=P,y*=E,w*=E,A.push(d-y,f-w),A.push(R,B,L,M),A.push(d+y,f+w),A.push(R,B,L,M),A.push(d-y,f-w),A.push(R,B,L,M),F++):(A.push(l,c),A.push(R,B,L,M),A.push(d-(l-d),f-(c-f)),A.push(R,B,L,M));for(u=n[2*(j-2)],p=n[2*(j-2)+1],d=n[2*(j-1)],b=-(p-(f=n[2*(j-1)+1])),g=u-d,b/=P=Math.sqrt(b*b+g*g),g/=P,b*=E,g*=E,A.push(d-b,f-g),A.push(R,B,L,M),A.push(d+b,f+g),A.push(R,B,L,M),O.push(I),i=0;i<F;i++)O.push(I++);O.push(I-1)}},r.prototype.buildComplexPoly=function(e,t){var i=e.points.slice();if(!(i.length<6)){var n=t.indices;t.points=i,t.alpha=e.fillAlpha,t.color=N.hex2rgb(e.fillColor);for(var a,o,r=1/0,s=-1/0,l=1/0,c=-1/0,u=0;u<i.length;u+=2)r=(a=i[u])<r?a:r,s=s<a?a:s,l=(o=i[u+1])<l?o:l,c=c<o?o:c;i.push(r,l,s,l,s,c,r,c);var p=i.length/2;for(u=0;u<p;u++)n.push(u)}},r.prototype.buildPoly=function(e,t){var i=e.points;if(!(i.length<6)){var n=t.points,a=t.indices,o=i.length/2,r=N.hex2rgb(e.fillColor),s=e.fillAlpha,l=r[0]*s,c=r[1]*s,u=r[2]*s,p=y(i,null,2);if(!p)return!1;var d=n.length/6,f=0;for(f=0;f<p.length;f+=3)a.push(p[f]+d),a.push(p[f]+d),a.push(p[f+1]+d),a.push(p[f+2]+d),a.push(p[f+2]+d);for(f=0;f<o;f++)n.push(i[2*f],i[2*f+1],l,c,u,s);return!0}}},{"../../const":22,"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"../../utils":76,"./WebGLGraphicsData":28,earcut:10}],28:[function(e,t,i){function n(e){this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),this.mode=1,this.alpha=1,this.dirty=!0,this.glPoints=null,this.glIndices=null}n.prototype.constructor=n,(t.exports=n).prototype.reset=function(){this.points.length=0,this.indices.length=0},n.prototype.upload=function(){var e=this.gl;this.glPoints=new Float32Array(this.points),e.bindBuffer(e.ARRAY_BUFFER,this.buffer),e.bufferData(e.ARRAY_BUFFER,this.glPoints,e.STATIC_DRAW),this.glIndices=new Uint16Array(this.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.glIndices,e.STATIC_DRAW),this.dirty=!1},n.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.gl.deleteBuffer(this.buffer),this.gl.deleteBuffer(this.indexBuffer),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null}},{}],29:[function(e,t,i){var a=t.exports=Object.assign(e("./const"),e("./math"),{utils:e("./utils"),ticker:e("./ticker"),DisplayObject:e("./display/DisplayObject"),Container:e("./display/Container"),Sprite:e("./sprites/Sprite"),ParticleContainer:e("./particles/ParticleContainer"),SpriteRenderer:e("./sprites/webgl/SpriteRenderer"),ParticleRenderer:e("./particles/webgl/ParticleRenderer"),Text:e("./text/Text"),Graphics:e("./graphics/Graphics"),GraphicsData:e("./graphics/GraphicsData"),GraphicsRenderer:e("./graphics/webgl/GraphicsRenderer"),Texture:e("./textures/Texture"),BaseTexture:e("./textures/BaseTexture"),RenderTexture:e("./textures/RenderTexture"),VideoBaseTexture:e("./textures/VideoBaseTexture"),TextureUvs:e("./textures/TextureUvs"),CanvasRenderer:e("./renderers/canvas/CanvasRenderer"),CanvasGraphics:e("./renderers/canvas/utils/CanvasGraphics"),CanvasBuffer:e("./renderers/canvas/utils/CanvasBuffer"),WebGLRenderer:e("./renderers/webgl/WebGLRenderer"),ShaderManager:e("./renderers/webgl/managers/ShaderManager"),Shader:e("./renderers/webgl/shaders/Shader"),ObjectRenderer:e("./renderers/webgl/utils/ObjectRenderer"),RenderTarget:e("./renderers/webgl/utils/RenderTarget"),AbstractFilter:e("./renderers/webgl/filters/AbstractFilter"),FXAAFilter:e("./renderers/webgl/filters/FXAAFilter"),SpriteMaskFilter:e("./renderers/webgl/filters/SpriteMaskFilter"),autoDetectRenderer:function(e,t,i,n){return e=e||800,t=t||600,!n&&a.utils.isWebGLSupported()?new a.WebGLRenderer(e,t,i):new a.CanvasRenderer(e,t,i)}})},{"./const":22,"./display/Container":23,"./display/DisplayObject":24,"./graphics/Graphics":25,"./graphics/GraphicsData":26,"./graphics/webgl/GraphicsRenderer":27,"./math":32,"./particles/ParticleContainer":38,"./particles/webgl/ParticleRenderer":40,"./renderers/canvas/CanvasRenderer":43,"./renderers/canvas/utils/CanvasBuffer":44,"./renderers/canvas/utils/CanvasGraphics":45,"./renderers/webgl/WebGLRenderer":48,"./renderers/webgl/filters/AbstractFilter":49,"./renderers/webgl/filters/FXAAFilter":50,"./renderers/webgl/filters/SpriteMaskFilter":51,"./renderers/webgl/managers/ShaderManager":55,"./renderers/webgl/shaders/Shader":60,"./renderers/webgl/utils/ObjectRenderer":62,"./renderers/webgl/utils/RenderTarget":64,"./sprites/Sprite":66,"./sprites/webgl/SpriteRenderer":67,"./text/Text":68,"./textures/BaseTexture":69,"./textures/RenderTexture":70,"./textures/Texture":71,"./textures/TextureUvs":72,"./textures/VideoBaseTexture":73,"./ticker":75,"./utils":76}],30:[function(e,t,i){var o=e("./Point");function n(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0}n.prototype.constructor=n,(t.exports=n).prototype.fromArray=function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]},n.prototype.toArray=function(e,t){this.array||(this.array=new Float32Array(9));var i=t||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0),i[8]=1,i},n.prototype.apply=function(e,t){t=t||new o;var i=e.x,n=e.y;return t.x=this.a*i+this.c*n+this.tx,t.y=this.b*i+this.d*n+this.ty,t},n.prototype.applyInverse=function(e,t){t=t||new o;var i=1/(this.a*this.d+this.c*-this.b),n=e.x,a=e.y;return t.x=this.d*i*n+-this.c*i*a+(this.ty*this.c-this.tx*this.d)*i,t.y=this.a*i*a+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,t},n.prototype.translate=function(e,t){return this.tx+=e,this.ty+=t,this},n.prototype.scale=function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this},n.prototype.rotate=function(e){var t=Math.cos(e),i=Math.sin(e),n=this.a,a=this.c,o=this.tx;return this.a=n*t-this.b*i,this.b=n*i+this.b*t,this.c=a*t-this.d*i,this.d=a*i+this.d*t,this.tx=o*t-this.ty*i,this.ty=o*i+this.ty*t,this},n.prototype.append=function(e){var t=this.a,i=this.b,n=this.c,a=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*i+e.b*a,this.c=e.c*t+e.d*n,this.d=e.c*i+e.d*a,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*i+e.ty*a+this.ty,this},n.prototype.prepend=function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var i=this.a,n=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this},n.prototype.invert=function(){var e=this.a,t=this.b,i=this.c,n=this.d,a=this.tx,o=e*n-t*i;return this.a=n/o,this.b=-t/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-n*a)/o,this.ty=-(e*this.ty-t*a)/o,this},n.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},n.prototype.clone=function(){var e=new n;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.prototype.copy=function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},n.IDENTITY=new n,n.TEMP_MATRIX=new n},{"./Point":31}],31:[function(e,t,i){function n(e,t){this.x=e||0,this.y=t||0}n.prototype.constructor=n,(t.exports=n).prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(e){this.set(e.x,e.y)},n.prototype.equals=function(e){return e.x===this.x&&e.y===this.y},n.prototype.set=function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)}},{}],32:[function(e,t,i){t.exports={Point:e("./Point"),Matrix:e("./Matrix"),Circle:e("./shapes/Circle"),Ellipse:e("./shapes/Ellipse"),Polygon:e("./shapes/Polygon"),Rectangle:e("./shapes/Rectangle"),RoundedRectangle:e("./shapes/RoundedRectangle")}},{"./Matrix":30,"./Point":31,"./shapes/Circle":33,"./shapes/Ellipse":34,"./shapes/Polygon":35,"./shapes/Rectangle":36,"./shapes/RoundedRectangle":37}],33:[function(e,t,i){var n=e("./Rectangle"),a=e("../../const");function o(e,t,i){this.x=e||0,this.y=t||0,this.radius=i||0,this.type=a.SHAPES.CIRC}o.prototype.constructor=o,(t.exports=o).prototype.clone=function(){return new o(this.x,this.y,this.radius)},o.prototype.contains=function(e,t){if(this.radius<=0)return!1;var i=this.x-e,n=this.y-t;return(i*=i)+(n*=n)<=this.radius*this.radius},o.prototype.getBounds=function(){return new n(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{"../../const":22,"./Rectangle":36}],34:[function(e,t,i){var n=e("./Rectangle"),a=e("../../const");function o(e,t,i,n){this.x=e||0,this.y=t||0,this.width=i||0,this.height=n||0,this.type=a.SHAPES.ELIP}o.prototype.constructor=o,(t.exports=o).prototype.clone=function(){return new o(this.x,this.y,this.width,this.height)},o.prototype.contains=function(e,t){if(this.width<=0||this.height<=0)return!1;var i=(e-this.x)/this.width,n=(t-this.y)/this.height;return(i*=i)+(n*=n)<=1},o.prototype.getBounds=function(){return new n(this.x-this.width,this.y-this.height,this.width,this.height)}},{"../../const":22,"./Rectangle":36}],35:[function(e,t,i){var r=e("../Point"),s=e("../../const");function n(e){var t=e;if(!Array.isArray(t)){t=new Array(arguments.length);for(var i=0;i<t.length;++i)t[i]=arguments[i]}if(t[0]instanceof r){for(var n=[],a=0,o=t.length;a<o;a++)n.push(t[a].x,t[a].y);t=n}this.closed=!0,this.points=t,this.type=s.SHAPES.POLY}n.prototype.constructor=n,(t.exports=n).prototype.clone=function(){return new n(this.points.slice())},n.prototype.contains=function(e,t){for(var i=!1,n=this.points.length/2,a=0,o=n-1;a<n;o=a++){var r=this.points[2*a],s=this.points[2*a+1],l=this.points[2*o],c=this.points[2*o+1];t<s!=t<c&&e<(l-r)*(t-s)/(c-s)+r&&(i=!i)}return i}},{"../../const":22,"../Point":31}],36:[function(e,t,i){var a=e("../../const");function n(e,t,i,n){this.x=e||0,this.y=t||0,this.width=i||0,this.height=n||0,this.type=a.SHAPES.RECT}n.prototype.constructor=n,(t.exports=n).EMPTY=new n(0,0,0,0),n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}},{"../../const":22}],37:[function(e,t,i){var o=e("../../const");function n(e,t,i,n,a){this.x=e||0,this.y=t||0,this.width=i||0,this.height=n||0,this.radius=a||20,this.type=o.SHAPES.RREC}n.prototype.constructor=n,(t.exports=n).prototype.clone=function(){return new n(this.x,this.y,this.width,this.height,this.radius)},n.prototype.contains=function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height)}},{"../../const":22}],38:[function(e,t,i){var n=e("../display/Container"),a=e("../const");function o(e,t){n.call(this),this._properties=[!1,!0,!1,!1,!1],this._size=e||15e3,this._buffers=null,this._updateStatic=!1,this.interactiveChildren=!1,this.blendMode=a.BLEND_MODES.NORMAL,this.roundPixels=!0,this.setProperties(t)}(o.prototype=Object.create(n.prototype)).constructor=o,(t.exports=o).prototype.setProperties=function(e){e&&(this._properties[0]="scale"in e?!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="alpha"in e?!!e.alpha:this._properties[4])},o.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},o.prototype.renderWebGL=function(e){this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(e.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))},o.prototype.addChildAt=function(e,t){if(e===this)return e;if(0<=t&&t<=this.children.length)return e.parent&&e.parent.removeChild(e),(e.parent=this).children.splice(t,0,e),this._updateStatic=!0,e;throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length)},o.prototype.removeChildAt=function(e){var t=this.getChildAt(e);return t.parent=null,this.children.splice(e,1),this._updateStatic=!0,t},o.prototype.renderCanvas=function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var t=e.context,i=this.worldTransform,n=!0,a=0,o=0,r=0,s=0;t.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var c=this.children[l];if(c.visible){var u=c.texture.frame;if(t.globalAlpha=this.worldAlpha*c.alpha,c.rotation%(2*Math.PI)==0)n&&(t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),n=!1),a=c.anchor.x*(-u.width*c.scale.x)+c.position.x+.5,o=c.anchor.y*(-u.height*c.scale.y)+c.position.y+.5,r=u.width*c.scale.x,s=u.height*c.scale.y;else{n=n||!0,c.displayObjectUpdateTransform();var p=c.worldTransform;e.roundPixels?t.setTransform(p.a,p.b,p.c,p.d,0|p.tx,0|p.ty):t.setTransform(p.a,p.b,p.c,p.d,p.tx,p.ty),a=c.anchor.x*-u.width+.5,o=c.anchor.y*-u.height+.5,r=u.width,s=u.height}t.drawImage(c.texture.baseTexture.source,u.x,u.y,u.width,u.height,a,o,r,s)}}}},o.prototype.destroy=function(){if(n.prototype.destroy.apply(this,arguments),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null}},{"../const":22,"../display/Container":23}],39:[function(e,t,i){function n(e,t,i){this.gl=e,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<t.length;n++){var a=t[n];a.dynamic?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}n.prototype.constructor=n,(t.exports=n).prototype.initBuffers=function(){var e,t,i=this.gl,n=0;for(e=this.dynamicStride=0;e<this.dynamicProperties.length;e++)(t=this.dynamicProperties[e]).offset=n,n+=t.size,this.dynamicStride+=t.size;this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),i.bufferData(i.ARRAY_BUFFER,this.dynamicData,i.DYNAMIC_DRAW);var a=0;for(e=this.staticStride=0;e<this.staticProperties.length;e++)(t=this.staticProperties[e]).offset=a,a+=t.size,this.staticStride+=t.size;this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),i.bufferData(i.ARRAY_BUFFER,this.staticData,i.DYNAMIC_DRAW)},n.prototype.uploadDynamic=function(e,t,i){for(var n=this.gl,a=0;a<this.dynamicProperties.length;a++){var o=this.dynamicProperties[a];o.uploadFunction(e,t,i,this.dynamicData,this.dynamicStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.dynamicBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.dynamicData)},n.prototype.uploadStatic=function(e,t,i){for(var n=this.gl,a=0;a<this.staticProperties.length;a++){var o=this.staticProperties[a];o.uploadFunction(e,t,i,this.staticData,this.staticStride,o.offset)}n.bindBuffer(n.ARRAY_BUFFER,this.staticBuffer),n.bufferSubData(n.ARRAY_BUFFER,0,this.staticData)},n.prototype.bind=function(){var e,t,i=this.gl;for(i.bindBuffer(i.ARRAY_BUFFER,this.dynamicBuffer),e=0;e<this.dynamicProperties.length;e++)t=this.dynamicProperties[e],i.vertexAttribPointer(t.attribute,t.size,i.FLOAT,!1,4*this.dynamicStride,4*t.offset);for(i.bindBuffer(i.ARRAY_BUFFER,this.staticBuffer),e=0;e<this.staticProperties.length;e++)t=this.staticProperties[e],i.vertexAttribPointer(t.attribute,t.size,i.FLOAT,!1,4*this.staticStride,4*t.offset)},n.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.gl.deleteBuffer(this.dynamicBuffer),this.staticProperties=null,this.staticData=null,this.gl.deleteBuffer(this.staticBuffer)}},{}],40:[function(e,t,i){var a=e("../../renderers/webgl/utils/ObjectRenderer"),n=e("../../renderers/webgl/WebGLRenderer"),o=e("./ParticleShader"),r=e("./ParticleBuffer"),s=e("../../math");function l(e){a.call(this,e),this.size=15e3;var t=6*this.size;this.indices=new Uint16Array(t);for(var i=0,n=0;i<t;i+=6,n+=4)this.indices[i+0]=n+0,this.indices[i+1]=n+1,this.indices[i+2]=n+2,this.indices[i+3]=n+0,this.indices[i+4]=n+2,this.indices[i+5]=n+3;this.shader=null,this.indexBuffer=null,this.properties=null,this.tempMatrix=new s.Matrix}(l.prototype=Object.create(a.prototype)).constructor=l,t.exports=l,n.registerPlugin("particle",l),l.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=new o(this.renderer.shaderManager),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),this.properties=[{attribute:this.shader.attributes.aVertexPosition,dynamic:!1,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,dynamic:!0,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,dynamic:!1,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,dynamic:!1,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,dynamic:!1,size:1,uploadFunction:this.uploadAlpha,offset:0}]},l.prototype.start=function(){var e=this.renderer.gl;e.activeTexture(e.TEXTURE0),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.shader;this.renderer.shaderManager.setShader(t)},l.prototype.render=function(e){var t=e.children,i=t.length,n=e._size;if(0!==i){n<i&&(i=n),e._buffers||(e._buffers=this.generateBuffers(e)),this.renderer.blendModeManager.setBlendMode(e.blendMode);var a=this.renderer.gl,o=e.worldTransform.copy(this.tempMatrix);o.prepend(this.renderer.currentRenderTarget.projectionMatrix),a.uniformMatrix3fv(this.shader.uniforms.projectionMatrix._location,!1,o.toArray(!0)),a.uniform1f(this.shader.uniforms.uAlpha._location,e.worldAlpha);var r=e._updateStatic,s=t[0]._texture.baseTexture;if(s._glTextures[a.id])a.bindTexture(a.TEXTURE_2D,s._glTextures[a.id]);else{if(!this.renderer.updateTexture(s))return;this.properties[0].dynamic&&this.properties[3].dynamic||(r=!0)}for(var l=0,c=0;c<i;c+=this.size){var u=i-c;u>this.size&&(u=this.size);var p=e._buffers[l++];p.uploadDynamic(t,c,u),r&&p.uploadStatic(t,c,u),p.bind(this.shader),a.drawElements(a.TRIANGLES,6*u,a.UNSIGNED_SHORT,0),this.renderer.drawCount++}e._updateStatic=!1}},l.prototype.generateBuffers=function(e){var t,i=this.renderer.gl,n=[],a=e._size;for(t=0;t<e._properties.length;t++)this.properties[t].dynamic=e._properties[t];for(t=0;t<a;t+=this.size)n.push(new r(i,this.properties,this.size,this.shader));return n},l.prototype.uploadVertices=function(e,t,i,n,a,o){for(var r,s,l,c,u,p,d,f,h,m=0;m<i;m++)s=(r=e[t+m])._texture,c=r.scale.x,u=r.scale.y,s.trim?(p=(d=(l=s.trim).x-r.anchor.x*l.width)+s.crop.width,f=(h=l.y-r.anchor.y*l.height)+s.crop.height):(p=s._frame.width*(1-r.anchor.x),d=s._frame.width*-r.anchor.x,f=s._frame.height*(1-r.anchor.y),h=s._frame.height*-r.anchor.y),n[o]=d*c,n[o+1]=h*u,n[o+a]=p*c,n[o+a+1]=h*u,n[o+2*a]=p*c,n[o+2*a+1]=f*u,n[o+3*a]=d*c,n[o+3*a+1]=f*u,o+=4*a},l.prototype.uploadPosition=function(e,t,i,n,a,o){for(var r=0;r<i;r++){var s=e[t+r].position;n[o]=s.x,n[o+1]=s.y,n[o+a]=s.x,n[o+a+1]=s.y,n[o+2*a]=s.x,n[o+2*a+1]=s.y,n[o+3*a]=s.x,n[o+3*a+1]=s.y,o+=4*a}},l.prototype.uploadRotation=function(e,t,i,n,a,o){for(var r=0;r<i;r++){var s=e[t+r].rotation;n[o]=s,n[o+a]=s,n[o+2*a]=s,n[o+3*a]=s,o+=4*a}},l.prototype.uploadUvs=function(e,t,i,n,a,o){for(var r=0;r<i;r++){var s=e[t+r]._texture._uvs;s?(n[o]=s.x0,n[o+1]=s.y0,n[o+a]=s.x1,n[o+a+1]=s.y1,n[o+2*a]=s.x2,n[o+2*a+1]=s.y2,n[o+3*a]=s.x3,n[o+3*a+1]=s.y3):(n[o]=0,n[o+1]=0,n[o+a]=0,n[o+a+1]=0,n[o+2*a]=0,n[o+2*a+1]=0,n[o+3*a]=0,n[o+3*a+1]=0),o+=4*a}},l.prototype.uploadAlpha=function(e,t,i,n,a,o){for(var r=0;r<i;r++){var s=e[t+r].alpha;n[o]=s,n[o+a]=s,n[o+2*a]=s,n[o+3*a]=s,o+=4*a}},l.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.apply(this,arguments),this.shader.destroy(),this.indices=null,this.tempMatrix=null}},{"../../math":32,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62,"./ParticleBuffer":39,"./ParticleShader":41}],41:[function(e,t,i){var n=e("../../renderers/webgl/shaders/TextureShader");function a(e){n.call(this,e,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n"),{uAlpha:{type:"1f",value:1}},{aPositionCoord:0,aRotation:0})}(a.prototype=Object.create(n.prototype)).constructor=a,t.exports=a},{"../../renderers/webgl/shaders/TextureShader":61}],42:[function(e,t,i){var o=e("../utils"),r=e("../math"),s=e("../const"),l=e("eventemitter3");function n(e,t,i,n){if(l.call(this),o.sayHello(e),n)for(var a in s.DEFAULT_RENDER_OPTIONS)void 0===n[a]&&(n[a]=s.DEFAULT_RENDER_OPTIONS[a]);else n=s.DEFAULT_RENDER_OPTIONS;this.type=s.RENDERER_TYPE.UNKNOWN,this.width=t||800,this.height=i||600,this.view=n.view||document.createElement("canvas"),this.resolution=n.resolution,this.transparent=n.transparent,this.autoResize=n.autoResize||!1,this.blendModes=null,this.preserveDrawingBuffer=n.preserveDrawingBuffer,this.clearBeforeRender=n.clearBeforeRender,this._backgroundColor=0,this._backgroundColorRgb=[0,0,0],this._backgroundColorString="#000000",this.backgroundColor=n.backgroundColor||this._backgroundColor,this._tempDisplayObjectParent={worldTransform:new r.Matrix,worldAlpha:1,children:[]},this._lastObjectRendered=this._tempDisplayObjectParent}(n.prototype=Object.create(l.prototype)).constructor=n,t.exports=n,Object.defineProperties(n.prototype,{backgroundColor:{get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=o.hex2string(e),o.hex2rgb(e,this._backgroundColorRgb)}}}),n.prototype.resize=function(e,t){this.width=e*this.resolution,this.height=t*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},n.prototype.destroy=function(e){e&&this.view.parent&&this.view.parent.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this._backgroundColor=0,this._backgroundColorRgb=null,this._backgroundColorString=null}},{"../const":22,"../math":32,"../utils":76,eventemitter3:11}],43:[function(e,t,i){var n=e("../SystemRenderer"),a=e("./utils/CanvasMaskManager"),o=e("../../utils"),r=e("../../math"),s=e("../../const");function l(e,t,i){n.call(this,"Canvas",e,t,i),this.type=s.RENDERER_TYPE.CANVAS,this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.maskManager=new a,this.roundPixels=!1,this.currentScaleMode=s.SCALE_MODES.DEFAULT,this.currentBlendMode=s.BLEND_MODES.NORMAL,this.smoothProperty="imageSmoothingEnabled",this.context.imageSmoothingEnabled||(this.context.webkitImageSmoothingEnabled?this.smoothProperty="webkitImageSmoothingEnabled":this.context.mozImageSmoothingEnabled?this.smoothProperty="mozImageSmoothingEnabled":this.context.oImageSmoothingEnabled?this.smoothProperty="oImageSmoothingEnabled":this.context.msImageSmoothingEnabled&&(this.smoothProperty="msImageSmoothingEnabled")),this.initPlugins(),this._mapBlendModes(),this._tempDisplayObjectParent={worldTransform:new r.Matrix,worldAlpha:1},this.resize(e,t)}(l.prototype=Object.create(n.prototype)).constructor=l,t.exports=l,o.pluginTarget.mixin(l),l.prototype.render=function(e){var t=e.parent;(this._lastObjectRendered=e).parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=t,this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.currentBlendMode=s.BLEND_MODES.NORMAL,this.context.globalCompositeOperation=this.blendModes[s.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=this._backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(e,this.context)},l.prototype.destroy=function(e){this.destroyPlugins(),n.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.roundPixels=!1,this.currentScaleMode=0,this.currentBlendMode=0,this.smoothProperty=null},l.prototype.renderDisplayObject=function(e,t){var i=this.context;this.context=t,e.renderCanvas(this),this.context=i},l.prototype.resize=function(e,t){n.prototype.resize.call(this,e,t),this.currentScaleMode=s.SCALE_MODES.DEFAULT,this.smoothProperty&&(this.context[this.smoothProperty]=this.currentScaleMode===s.SCALE_MODES.LINEAR)},l.prototype._mapBlendModes=function(){this.blendModes||(this.blendModes={},o.canUseNewCanvasBlendModes()?(this.blendModes[s.BLEND_MODES.NORMAL]="source-over",this.blendModes[s.BLEND_MODES.ADD]="lighter",this.blendModes[s.BLEND_MODES.MULTIPLY]="multiply",this.blendModes[s.BLEND_MODES.SCREEN]="screen",this.blendModes[s.BLEND_MODES.OVERLAY]="overlay",this.blendModes[s.BLEND_MODES.DARKEN]="darken",this.blendModes[s.BLEND_MODES.LIGHTEN]="lighten",this.blendModes[s.BLEND_MODES.COLOR_DODGE]="color-dodge",this.blendModes[s.BLEND_MODES.COLOR_BURN]="color-burn",this.blendModes[s.BLEND_MODES.HARD_LIGHT]="hard-light",this.blendModes[s.BLEND_MODES.SOFT_LIGHT]="soft-light",this.blendModes[s.BLEND_MODES.DIFFERENCE]="difference",this.blendModes[s.BLEND_MODES.EXCLUSION]="exclusion",this.blendModes[s.BLEND_MODES.HUE]="hue",this.blendModes[s.BLEND_MODES.SATURATION]="saturate",this.blendModes[s.BLEND_MODES.COLOR]="color",this.blendModes[s.BLEND_MODES.LUMINOSITY]="luminosity"):(this.blendModes[s.BLEND_MODES.NORMAL]="source-over",this.blendModes[s.BLEND_MODES.ADD]="lighter",this.blendModes[s.BLEND_MODES.MULTIPLY]="source-over",this.blendModes[s.BLEND_MODES.SCREEN]="source-over",this.blendModes[s.BLEND_MODES.OVERLAY]="source-over",this.blendModes[s.BLEND_MODES.DARKEN]="source-over",this.blendModes[s.BLEND_MODES.LIGHTEN]="source-over",this.blendModes[s.BLEND_MODES.COLOR_DODGE]="source-over",this.blendModes[s.BLEND_MODES.COLOR_BURN]="source-over",this.blendModes[s.BLEND_MODES.HARD_LIGHT]="source-over",this.blendModes[s.BLEND_MODES.SOFT_LIGHT]="source-over",this.blendModes[s.BLEND_MODES.DIFFERENCE]="source-over",this.blendModes[s.BLEND_MODES.EXCLUSION]="source-over",this.blendModes[s.BLEND_MODES.HUE]="source-over",this.blendModes[s.BLEND_MODES.SATURATION]="source-over",this.blendModes[s.BLEND_MODES.COLOR]="source-over",this.blendModes[s.BLEND_MODES.LUMINOSITY]="source-over"))}},{"../../const":22,"../../math":32,"../../utils":76,"../SystemRenderer":42,"./utils/CanvasMaskManager":46}],44:[function(e,t,i){function n(e,t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=e,this.canvas.height=t}n.prototype.constructor=n,t.exports=n,Object.defineProperties(n.prototype,{width:{get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},height:{get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}}),n.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},n.prototype.resize=function(e,t){this.canvas.width=e,this.canvas.height=t},n.prototype.destroy=function(){this.context=null,this.canvas=null}},{}],45:[function(e,t,i){var C=e("../../../const"),n={};(t.exports=n).renderGraphics=function(e,t){var i=e.worldAlpha;e.dirty&&(this.updateGraphicsTint(e),e.dirty=!1);for(var n=0;n<e.graphicsData.length;n++){var a=e.graphicsData[n],o=a.shape,r=a._fillTint,s=a._lineTint;if(t.lineWidth=a.lineWidth,a.type===C.SHAPES.POLY){t.beginPath();var l=o.points;t.moveTo(l[0],l[1]);for(var c=1;c<l.length/2;c++)t.lineTo(l[2*c],l[2*c+1]);o.closed&&t.lineTo(l[0],l[1]),l[0]===l[l.length-2]&&l[1]===l[l.length-1]&&t.closePath(),a.fill&&(t.globalAlpha=a.fillAlpha*i,t.fillStyle="#"+("00000"+(0|r).toString(16)).substr(-6),t.fill()),a.lineWidth&&(t.globalAlpha=a.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(a.type===C.SHAPES.RECT)!a.fillColor&&0!==a.fillColor||(t.globalAlpha=a.fillAlpha*i,t.fillStyle="#"+("00000"+(0|r).toString(16)).substr(-6),t.fillRect(o.x,o.y,o.width,o.height)),a.lineWidth&&(t.globalAlpha=a.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.strokeRect(o.x,o.y,o.width,o.height));else if(a.type===C.SHAPES.CIRC)t.beginPath(),t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath(),a.fill&&(t.globalAlpha=a.fillAlpha*i,t.fillStyle="#"+("00000"+(0|r).toString(16)).substr(-6),t.fill()),a.lineWidth&&(t.globalAlpha=a.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke());else if(a.type===C.SHAPES.ELIP){var u=2*o.width,p=2*o.height,d=o.x-u/2,f=o.y-p/2;t.beginPath();var h=u/2*.5522848,m=p/2*.5522848,b=d+u,g=f+p,v=d+u/2,_=f+p/2;t.moveTo(d,_),t.bezierCurveTo(d,_-m,v-h,f,v,f),t.bezierCurveTo(v+h,f,b,_-m,b,_),t.bezierCurveTo(b,_+m,v+h,g,v,g),t.bezierCurveTo(v-h,g,d,_+m,d,_),t.closePath(),a.fill&&(t.globalAlpha=a.fillAlpha*i,t.fillStyle="#"+("00000"+(0|r).toString(16)).substr(-6),t.fill()),a.lineWidth&&(t.globalAlpha=a.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}else if(a.type===C.SHAPES.RREC){var y=o.x,w=o.y,S=o.width,x=o.height,k=o.radius,$=Math.min(S,x)/2|0;k=$<k?$:k,t.beginPath(),t.moveTo(y,w+k),t.lineTo(y,w+x-k),t.quadraticCurveTo(y,w+x,y+k,w+x),t.lineTo(y+S-k,w+x),t.quadraticCurveTo(y+S,w+x,y+S,w+x-k),t.lineTo(y+S,w+k),t.quadraticCurveTo(y+S,w,y+S-k,w),t.lineTo(y+k,w),t.quadraticCurveTo(y,w,y,w+k),t.closePath(),!a.fillColor&&0!==a.fillColor||(t.globalAlpha=a.fillAlpha*i,t.fillStyle="#"+("00000"+(0|r).toString(16)).substr(-6),t.fill()),a.lineWidth&&(t.globalAlpha=a.lineAlpha*i,t.strokeStyle="#"+("00000"+(0|s).toString(16)).substr(-6),t.stroke())}}},n.renderGraphicsMask=function(e,t){var i=e.graphicsData.length;if(0!==i){t.beginPath();for(var n=0;n<i;n++){var a=e.graphicsData[n],o=a.shape;if(a.type===C.SHAPES.POLY){var r=o.points;t.moveTo(r[0],r[1]);for(var s=1;s<r.length/2;s++)t.lineTo(r[2*s],r[2*s+1]);r[0]===r[r.length-2]&&r[1]===r[r.length-1]&&t.closePath()}else if(a.type===C.SHAPES.RECT)t.rect(o.x,o.y,o.width,o.height),t.closePath();else if(a.type===C.SHAPES.CIRC)t.arc(o.x,o.y,o.radius,0,2*Math.PI),t.closePath();else if(a.type===C.SHAPES.ELIP){var l=2*o.width,c=2*o.height,u=o.x-l/2,p=o.y-c/2,d=l/2*.5522848,f=c/2*.5522848,h=u+l,m=p+c,b=u+l/2,g=p+c/2;t.moveTo(u,g),t.bezierCurveTo(u,g-f,b-d,p,b,p),t.bezierCurveTo(b+d,p,h,g-f,h,g),t.bezierCurveTo(h,g+f,b+d,m,b,m),t.bezierCurveTo(b-d,m,u,g+f,u,g),t.closePath()}else if(a.type===C.SHAPES.RREC){var v=o.x,_=o.y,y=o.width,w=o.height,S=o.radius,x=Math.min(y,w)/2|0;S=x<S?x:S,t.moveTo(v,_+S),t.lineTo(v,_+w-S),t.quadraticCurveTo(v,_+w,v+S,_+w),t.lineTo(v+y-S,_+w),t.quadraticCurveTo(v+y,_+w,v+y,_+w-S),t.lineTo(v+y,_+S),t.quadraticCurveTo(v+y,_,v+y-S,_),t.lineTo(v+S,_),t.quadraticCurveTo(v,_,v,_+S),t.closePath()}}}},n.updateGraphicsTint=function(e){if(16777215!==e.tint)for(var t=(e.tint>>16&255)/255,i=(e.tint>>8&255)/255,n=(255&e.tint)/255,a=0;a<e.graphicsData.length;a++){var o=e.graphicsData[a],r=0|o.fillColor,s=0|o.lineColor;o._fillTint=((r>>16&255)/255*t*255<<16)+((r>>8&255)/255*i*255<<8)+(255&r)/255*n*255,o._lineTint=((s>>16&255)/255*t*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*n*255}}},{"../../../const":22}],46:[function(e,t,i){var o=e("./CanvasGraphics");function n(){}n.prototype.constructor=n,(t.exports=n).prototype.pushMask=function(e,t){t.context.save();var i=e.alpha,n=e.worldTransform,a=t.resolution;t.context.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a),e.texture||(o.renderGraphicsMask(e,t.context),t.context.clip()),e.worldAlpha=i},n.prototype.popMask=function(e){e.context.restore()},n.prototype.destroy=function(){}},{"./CanvasGraphics":45}],47:[function(e,t,i){var d=e("../../../utils"),r={};(t.exports=r).getTintedTexture=function(e,t){var i=e.texture,n="#"+("00000"+(0|(t=r.roundColor(t))).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[n])return i.tintCache[n];var a=r.canvas||document.createElement("canvas");if(r.tintMethod(i,t,a),r.convertTintToImage){var o=new Image;o.src=a.toDataURL(),i.tintCache[n]=o}else i.tintCache[n]=a,r.canvas=null;return a},r.tintWithMultiply=function(e,t,i){var n=i.getContext("2d"),a=e.crop;i.width=a.width,i.height=a.height,n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,a.width,a.height),n.globalCompositeOperation="multiply",n.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height)},r.tintWithOverlay=function(e,t,i){var n=i.getContext("2d"),a=e.crop;i.width=a.width,i.height=a.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|t).toString(16)).substr(-6),n.fillRect(0,0,a.width,a.height),n.globalCompositeOperation="destination-atop",n.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height)},r.tintWithPerPixel=function(e,t,i){var n=i.getContext("2d"),a=e.crop;i.width=a.width,i.height=a.height,n.globalCompositeOperation="copy",n.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,a.width,a.height);for(var o=d.hex2rgb(t),r=o[0],s=o[1],l=o[2],c=n.getImageData(0,0,a.width,a.height),u=c.data,p=0;p<u.length;p+=4)u[p+0]*=r,u[p+1]*=s,u[p+2]*=l;n.putImageData(c,0,0)},r.roundColor=function(e){var t=r.cacheStepsPerColorChannel,i=d.hex2rgb(e);return i[0]=Math.min(255,i[0]/t*t),i[1]=Math.min(255,i[1]/t*t),i[2]=Math.min(255,i[2]/t*t),d.rgb2hex(i)},r.cacheStepsPerColorChannel=8,r.convertTintToImage=!1,r.canUseMultiply=d.canUseNewCanvasBlendModes(),r.tintMethod=r.canUseMultiply?r.tintWithMultiply:r.tintWithPerPixel},{"../../../utils":76}],48:[function(e,t,i){var n=e("../SystemRenderer"),a=e("./managers/ShaderManager"),o=e("./managers/MaskManager"),r=e("./managers/StencilManager"),s=e("./managers/FilterManager"),l=e("./managers/BlendModeManager"),c=e("./utils/RenderTarget"),u=e("./utils/ObjectRenderer"),p=e("./filters/FXAAFilter"),d=e("../../utils"),f=e("../../const");function h(e,t,i){i=i||{},n.call(this,"WebGL",e,t,i),this.type=f.RENDERER_TYPE.WEBGL,this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.handleContextLost,!1),this.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1),this._useFXAA=!!i.forceFXAA&&i.antialias,this._FXAAFilter=null,this._contextOptions={alpha:this.transparent,antialias:i.antialias,premultipliedAlpha:this.transparent&&"notMultiplied"!==this.transparent,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer},this.drawCount=0,this.shaderManager=new a(this),this.maskManager=new o(this),this.stencilManager=new r(this),this.filterManager=new s(this),this.blendModeManager=new l(this),this.currentRenderTarget=null,this.currentRenderer=new u(this),this.initPlugins(),this._createContext(),this._initContext(),this._mapGlModes(),this._renderTargetStack=[]}(h.prototype=Object.create(n.prototype)).constructor=h,t.exports=h,d.pluginTarget.mixin(h),h.glContextId=0,h.prototype._createContext=function(){var e=this.view.getContext("webgl",this._contextOptions)||this.view.getContext("experimental-webgl",this._contextOptions);if(!(this.gl=e))throw new Error("This browser does not support webGL. Try using the canvas renderer");this.glContextId=h.glContextId++,e.id=this.glContextId,e.renderer=this},h.prototype._initContext=function(){var e=this.gl;e.disable(e.DEPTH_TEST),e.disable(e.CULL_FACE),e.enable(e.BLEND),this.renderTarget=new c(e,this.width,this.height,null,this.resolution,!0),this.setRenderTarget(this.renderTarget),this.emit("context",e),this.resize(this.width,this.height),this._useFXAA||(this._useFXAA=this._contextOptions.antialias&&!e.getContextAttributes().antialias),this._useFXAA&&(window.console.warn("FXAA antialiasing being used instead of native antialiasing"),this._FXAAFilter=[new p])},h.prototype.render=function(e){if(!this.gl.isContextLost()){this.drawCount=0,this._lastObjectRendered=e,this._useFXAA&&(this._FXAAFilter[0].uniforms.resolution.value.x=this.width,this._FXAAFilter[0].uniforms.resolution.value.y=this.height,e.filterArea=this.renderTarget.size,e.filters=this._FXAAFilter);var t=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=t;var i=this.gl;this.setRenderTarget(this.renderTarget),this.clearBeforeRender&&(this.transparent?i.clearColor(0,0,0,0):i.clearColor(this._backgroundColorRgb[0],this._backgroundColorRgb[1],this._backgroundColorRgb[2],1),i.clear(i.COLOR_BUFFER_BIT)),this.renderDisplayObject(e,this.renderTarget)}},h.prototype.renderDisplayObject=function(e,t,i){this.setRenderTarget(t),i&&t.clear(),this.filterManager.setFilterStack(t.filterStack),e.renderWebGL(this),this.currentRenderer.flush()},h.prototype.setObjectRenderer=function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())},h.prototype.setRenderTarget=function(e){this.currentRenderTarget!==e&&(this.currentRenderTarget=e,this.currentRenderTarget.activate(),this.stencilManager.setMaskStack(e.stencilMaskStack))},h.prototype.resize=function(e,t){n.prototype.resize.call(this,e,t),this.filterManager.resize(e,t),this.renderTarget.resize(e,t),this.currentRenderTarget===this.renderTarget&&(this.renderTarget.activate(),this.gl.viewport(0,0,this.width,this.height))},h.prototype.updateTexture=function(e){if((e=e.baseTexture||e).hasLoaded){var t=this.gl;return e._glTextures[t.id]||(e._glTextures[t.id]=t.createTexture(),e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this)),t.bindTexture(t.TEXTURE_2D,e._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e.scaleMode===f.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),e.mipmap&&e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===f.SCALE_MODES.LINEAR?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e.scaleMode===f.SCALE_MODES.LINEAR?t.LINEAR:t.NEAREST),e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),e._glTextures[t.id]}},h.prototype.destroyTexture=function(e){(e=e.baseTexture||e).hasLoaded&&e._glTextures[this.gl.id]&&this.gl.deleteTexture(e._glTextures[this.gl.id])},h.prototype.handleContextLost=function(e){e.preventDefault()},h.prototype.handleContextRestored=function(){for(var e in this._initContext(),d.BaseTextureCache)d.BaseTextureCache[e]._glTextures.length=0},h.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),n.prototype.destroy.call(this,e),this.uid=0,this.shaderManager.destroy(),this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.maskManager=null,this.filterManager=null,this.blendModeManager=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.drawCount=0,this.gl=null},h.prototype._mapGlModes=function(){var e=this.gl;this.blendModes||(this.blendModes={},this.blendModes[f.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.ADD]=[e.SRC_ALPHA,e.DST_ALPHA],this.blendModes[f.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SCREEN]=[e.SRC_ALPHA,e.ONE],this.blendModes[f.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],this.blendModes[f.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA]),this.drawModes||(this.drawModes={},this.drawModes[f.DRAW_MODES.POINTS]=e.POINTS,this.drawModes[f.DRAW_MODES.LINES]=e.LINES,this.drawModes[f.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,this.drawModes[f.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLES]=e.TRIANGLES,this.drawModes[f.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,this.drawModes[f.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN)}},{"../../const":22,"../../utils":76,"../SystemRenderer":42,"./filters/FXAAFilter":50,"./managers/BlendModeManager":52,"./managers/FilterManager":53,"./managers/MaskManager":54,"./managers/ShaderManager":55,"./managers/StencilManager":56,"./utils/ObjectRenderer":62,"./utils/RenderTarget":64}],49:[function(e,t,i){var n=e("../shaders/TextureShader");function a(e,t,i){this.shaders=[],this.padding=0,this.uniforms=i||{},this.vertexSrc=e||n.defaultVertexSrc,this.fragmentSrc=t||n.defaultFragmentSrc}a.prototype.constructor=a,(t.exports=a).prototype.getShader=function(e){var t=e.gl,i=this.shaders[t.id];return i||(i=new n(e.shaderManager,this.vertexSrc,this.fragmentSrc,this.uniforms,this.attributes),this.shaders[t.id]=i),i},a.prototype.applyFilter=function(e,t,i,n){var a=this.getShader(e);e.filterManager.applyFilter(a,t,i,n)},a.prototype.syncUniform=function(e){for(var t=0,i=this.shaders.length;t<i;++t)this.shaders[t].syncUniform(e)}},{"../shaders/TextureShader":61}],50:[function(e,t,i){var n=e("./AbstractFilter");function a(){n.call(this,"\nprecision mediump float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform vec2 resolution;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n            out vec2 v_rgbNW, out vec2 v_rgbNE,\n            out vec2 v_rgbSW, out vec2 v_rgbSE,\n            out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n   vResolution = resolution;\n\n   //compute the texture coords and send them to varyings\n   texcoords(aTextureCoord * resolution, resolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'precision lowp float;\n\n\n/**\nBasic FXAA implementation based on the code on geeks3d.com with the\nmodification that the texture2DLod stuff was removed since it\'s\nunsupported by WebGL.\n\n--\n\nFrom:\nhttps://github.com/mitsuhiko/webgl-meincraft\n\nCopyright (c) 2011 by Armin Ronacher.\n\nSome rights reserved.\n\nRedistribution and use in source and binary forms, with or without\nmodification, are permitted provided that the following conditions are\nmet:\n\n    * Redistributions of source code must retain the above copyright\n      notice, this list of conditions and the following disclaimer.\n\n    * Redistributions in binary form must reproduce the above\n      copyright notice, this list of conditions and the following\n      disclaimer in the documentation and/or other materials provided\n      with the distribution.\n\n    * The names of the contributors may not be used to endorse or\n      promote products derived from this software without specific\n      prior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\nLIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\nA PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\nOWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\nSPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\nLIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\nDATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\nTHEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\nOF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n*/\n\n#ifndef FXAA_REDUCE_MIN\n    #define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n    #define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n    #define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n            vec2 v_rgbNW, vec2 v_rgbNE,\n            vec2 v_rgbSW, vec2 v_rgbSE,\n            vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vResolution;\n\n//texcoords computed in vertex step\n//to avoid dependent texture reads\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform sampler2D uSampler;\n\n\nvoid main(void){\n\n    gl_FragColor = fxaa(uSampler, vTextureCoord * vResolution, vResolution, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n}\n',{resolution:{type:"v2",value:{x:1,y:1}}})}(a.prototype=Object.create(n.prototype)).constructor=a,(t.exports=a).prototype.applyFilter=function(e,t,i){var n=e.filterManager,a=this.getShader(e);n.applyFilter(a,t,i)}},{"./AbstractFilter":49}],51:[function(e,t,i){var n=e("./AbstractFilter"),a=e("../../../math");function o(e){var t=new a.Matrix;n.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    original *= (masky.r * masky.a * alpha * clip);\n    gl_FragColor = original;\n}\n",{mask:{type:"sampler2D",value:e._texture},alpha:{type:"f",value:1},otherMatrix:{type:"mat3",value:t.toArray(!0)}}),this.maskSprite=e,this.maskMatrix=t}(o.prototype=Object.create(n.prototype)).constructor=o,(t.exports=o).prototype.applyFilter=function(e,t,i){var n=e.filterManager;this.uniforms.mask.value=this.maskSprite._texture,n.calculateMappedMatrix(t.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.alpha.value=this.maskSprite.worldAlpha;var a=this.getShader(e);n.applyFilter(a,t,i)},Object.defineProperties(o.prototype,{map:{get:function(){return this.uniforms.mask.value},set:function(e){this.uniforms.mask.value=e}},offset:{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}})},{"../../../math":32,"./AbstractFilter":49}],52:[function(e,t,i){var n=e("./WebGLManager");function a(e){n.call(this,e),this.currentBlendMode=99999}(a.prototype=Object.create(n.prototype)).constructor=a,(t.exports=a).prototype.setBlendMode=function(e){if(this.currentBlendMode===e)return!1;this.currentBlendMode=e;var t=this.renderer.blendModes[this.currentBlendMode];return this.renderer.gl.blendFunc(t[0],t[1]),!0}},{"./WebGLManager":57}],53:[function(e,t,i){var n=e("./WebGLManager"),a=e("../utils/RenderTarget"),p=e("../../../const"),o=e("../utils/Quad"),c=e("../../../math");function r(e){n.call(this,e),this.filterStack=[],this.filterStack.push({renderTarget:e.currentRenderTarget,filter:[],bounds:null}),this.texturePool=[],this.textureSize=new c.Rectangle(0,0,e.width,e.height),this.currentFrame=null}(r.prototype=Object.create(n.prototype)).constructor=r,(t.exports=r).prototype.onContextChange=function(){this.texturePool.length=0;var e=this.renderer.gl;this.quad=new o(e)},r.prototype.setFilterStack=function(e){this.filterStack=e},r.prototype.pushFilter=function(e,t){var i=e.filterArea?e.filterArea.clone():e.getBounds();i.x=0|i.x,i.y=0|i.y,i.width=0|i.width,i.height=0|i.height;var n=0|t[0].padding;if(i.x-=n,i.y-=n,i.width+=2*n,i.height+=2*n,this.renderer.currentRenderTarget.transform){var a=this.renderer.currentRenderTarget.transform;i.x+=a.tx,i.y+=a.ty,this.capFilterArea(i),i.x-=a.tx,i.y-=a.ty}else this.capFilterArea(i);if(0<i.width&&0<i.height){this.currentFrame=i;var o=this.getRenderTarget();this.renderer.setRenderTarget(o),o.clear(),this.filterStack.push({renderTarget:o,filter:t})}else this.filterStack.push({renderTarget:null,filter:t})},r.prototype.popFilter=function(){var e=this.filterStack.pop(),t=this.filterStack[this.filterStack.length-1],i=e.renderTarget;if(e.renderTarget){var n=t.renderTarget,a=this.renderer.gl;this.currentFrame=i.frame,this.quad.map(this.textureSize,i.frame),a.bindBuffer(a.ARRAY_BUFFER,this.quad.vertexBuffer),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.quad.indexBuffer);var o=e.filter;if(a.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aVertexPosition,2,a.FLOAT,!1,0,0),a.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aTextureCoord,2,a.FLOAT,!1,0,32),a.vertexAttribPointer(this.renderer.shaderManager.defaultShader.attributes.aColor,4,a.FLOAT,!1,0,64),this.renderer.blendModeManager.setBlendMode(p.BLEND_MODES.NORMAL),1===o.length)o[0].uniforms.dimensions&&(o[0].uniforms.dimensions.value[0]=this.renderer.width,o[0].uniforms.dimensions.value[1]=this.renderer.height,o[0].uniforms.dimensions.value[2]=this.quad.vertices[0],o[0].uniforms.dimensions.value[3]=this.quad.vertices[5]),o[0].applyFilter(this.renderer,i,n),this.returnRenderTarget(i);else{for(var r=i,s=this.getRenderTarget(!0),l=0;l<o.length-1;l++){var c=o[l];c.uniforms.dimensions&&(c.uniforms.dimensions.value[0]=this.renderer.width,c.uniforms.dimensions.value[1]=this.renderer.height,c.uniforms.dimensions.value[2]=this.quad.vertices[0],c.uniforms.dimensions.value[3]=this.quad.vertices[5]),c.applyFilter(this.renderer,r,s);var u=r;r=s,s=u}o[o.length-1].applyFilter(this.renderer,r,n),this.returnRenderTarget(r),this.returnRenderTarget(s)}return e.filter}},r.prototype.getRenderTarget=function(e){var t=this.texturePool.pop()||new a(this.renderer.gl,this.textureSize.width,this.textureSize.height,p.SCALE_MODES.LINEAR,this.renderer.resolution*p.FILTER_RESOLUTION);return t.frame=this.currentFrame,e&&t.clear(!0),t},r.prototype.returnRenderTarget=function(e){this.texturePool.push(e)},r.prototype.applyFilter=function(e,t,i,n){var a=this.renderer.gl;this.renderer.setRenderTarget(i),n&&i.clear(),this.renderer.shaderManager.setShader(e),e.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),e.syncUniforms(),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture),a.drawElements(a.TRIANGLES,6,a.UNSIGNED_SHORT,0)},r.prototype.calculateMappedMatrix=function(e,t,i){var n=t.worldTransform.copy(c.Matrix.TEMP_MATRIX),a=t._texture.baseTexture,o=i.identity(),r=this.textureSize.height/this.textureSize.width;o.translate(e.x/this.textureSize.width,e.y/this.textureSize.height),o.scale(1,r);var s=this.textureSize.width/a.width,l=this.textureSize.height/a.height;return n.tx/=a.width*s,n.ty/=a.width*s,n.invert(),o.prepend(n),o.scale(1,1/r),o.scale(s,l),o.translate(t.anchor.x,t.anchor.y),o},r.prototype.capFilterArea=function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0),e.x+e.width>this.textureSize.width&&(e.width=this.textureSize.width-e.x),e.y+e.height>this.textureSize.height&&(e.height=this.textureSize.height-e.y)},r.prototype.resize=function(e,t){this.textureSize.width=e,this.textureSize.height=t;for(var i=0;i<this.texturePool.length;i++)this.texturePool[i].resize(e,t)},r.prototype.destroy=function(){this.filterStack=null;for(var e=this.offsetY=0;e<this.texturePool.length;e++)this.texturePool[e].destroy();this.texturePool=null}},{"../../../const":22,"../../../math":32,"../utils/Quad":63,"../utils/RenderTarget":64,"./WebGLManager":57}],54:[function(e,t,i){var n=e("./WebGLManager"),a=e("../filters/SpriteMaskFilter");function o(e){n.call(this,e),this.stencilStack=[],this.reverse=!0,this.count=0,this.alphaMaskPool=[]}(o.prototype=Object.create(n.prototype)).constructor=o,(t.exports=o).prototype.pushMask=function(e,t){t.texture?this.pushSpriteMask(e,t):this.pushStencilMask(e,t)},o.prototype.popMask=function(e,t){t.texture?this.popSpriteMask(e,t):this.popStencilMask(e,t)},o.prototype.pushSpriteMask=function(e,t){var i=this.alphaMaskPool.pop();(i=i||[new a(t)])[0].maskSprite=t,this.renderer.filterManager.pushFilter(e,i)},o.prototype.popSpriteMask=function(){var e=this.renderer.filterManager.popFilter();this.alphaMaskPool.push(e)},o.prototype.pushStencilMask=function(e,t){this.renderer.stencilManager.pushMask(t)},o.prototype.popStencilMask=function(e,t){this.renderer.stencilManager.popMask(t)}},{"../filters/SpriteMaskFilter":51,"./WebGLManager":57}],55:[function(e,t,i){var n=e("./WebGLManager"),a=e("../shaders/TextureShader"),o=e("../shaders/ComplexPrimitiveShader"),r=e("../shaders/PrimitiveShader"),s=e("../../../utils");function l(e){n.call(this,e),this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.stack=[],this._currentId=-1,this.currentShader=null}(l.prototype=Object.create(n.prototype)).constructor=l,s.pluginTarget.mixin(l),(t.exports=l).prototype.onContextChange=function(){this.initPlugins();var e=this.renderer.gl;this.maxAttibs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState=[];for(var t=0;t<this.maxAttibs;t++)this.attribState[t]=!1;this.defaultShader=new a(this),this.primitiveShader=new r(this),this.complexPrimitiveShader=new o(this)},l.prototype.setAttribs=function(e){var t;for(t=0;t<this.tempAttribState.length;t++)this.tempAttribState[t]=!1;for(var i in e)this.tempAttribState[e[i]]=!0;var n=this.renderer.gl;for(t=0;t<this.attribState.length;t++)this.attribState[t]!==this.tempAttribState[t]&&(this.attribState[t]=this.tempAttribState[t],this.attribState[t]?n.enableVertexAttribArray(t):n.disableVertexAttribArray(t))},l.prototype.setShader=function(e){return this._currentId!==e.uid&&(this._currentId=e.uid,this.currentShader=e,this.renderer.gl.useProgram(e.program),this.setAttribs(e.attributes),!0)},l.prototype.destroy=function(){n.prototype.destroy.call(this),this.destroyPlugins(),this.attribState=null,this.tempAttribState=null}},{"../../../utils":76,"../shaders/ComplexPrimitiveShader":58,"../shaders/PrimitiveShader":59,"../shaders/TextureShader":61,"./WebGLManager":57}],56:[function(e,t,i){var n=e("./WebGLManager"),a=e("../../../utils");function o(e){n.call(this,e),this.stencilMaskStack=null}(o.prototype=Object.create(n.prototype)).constructor=o,(t.exports=o).prototype.setMaskStack=function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.stencilStack.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)},o.prototype.pushStencil=function(e,t){this.renderer.currentRenderTarget.attachStencilBuffer();var i=this.renderer.gl,n=this.stencilMaskStack;this.bindGraphics(e,t,this.renderer),0===n.stencilStack.length&&(i.enable(i.STENCIL_TEST),i.clear(i.STENCIL_BUFFER_BIT),n.reverse=!0,n.count=0),n.stencilStack.push(t);var a=n.count;i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),1===t.mode?(i.drawElements(i.TRIANGLE_FAN,t.indices.length-4,i.UNSIGNED_SHORT,0),n.reverse?(i.stencilFunc(i.EQUAL,255-a,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,a,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(t.indices.length-4)),n.reverse?i.stencilFunc(i.EQUAL,255-(a+1),255):i.stencilFunc(i.EQUAL,a+1,255),n.reverse=!n.reverse):(n.reverse?(i.stencilFunc(i.EQUAL,a,255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,255-a,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0),n.reverse?i.stencilFunc(i.EQUAL,a+1,255):i.stencilFunc(i.EQUAL,255-(a+1),255)),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),n.count++},o.prototype.bindGraphics=function(e,t){this._currentGraphics=e;var i,n=this.renderer.gl;1===t.mode?(i=this.renderer.shaderManager.complexPrimitiveShader,this.renderer.shaderManager.setShader(i),n.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),n.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(i.uniforms.tint._location,a.hex2rgb(e.tint)),n.uniform3fv(i.uniforms.color._location,t.color),n.uniform1f(i.uniforms.alpha._location,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,t.buffer),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,8,0)):(i=this.renderer.shaderManager.primitiveShader,this.renderer.shaderManager.setShader(i),n.uniformMatrix3fv(i.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),n.uniformMatrix3fv(i.uniforms.projectionMatrix._location,!1,this.renderer.currentRenderTarget.projectionMatrix.toArray(!0)),n.uniform3fv(i.uniforms.tint._location,a.hex2rgb(e.tint)),n.uniform1f(i.uniforms.alpha._location,e.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,t.buffer),n.vertexAttribPointer(i.attributes.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(i.attributes.aColor,4,n.FLOAT,!1,24,8)),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.indexBuffer)},o.prototype.popStencil=function(e,t){var i=this.renderer.gl,n=this.stencilMaskStack;if(n.stencilStack.pop(),n.count--,0===n.stencilStack.length)i.disable(i.STENCIL_TEST);else{var a=n.count;this.bindGraphics(e,t,this.renderer),i.colorMask(!1,!1,!1,!1),1===t.mode?(n.reverse=!n.reverse,n.reverse?(i.stencilFunc(i.EQUAL,255-(a+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)):(i.stencilFunc(i.EQUAL,a+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)),i.drawElements(i.TRIANGLE_FAN,4,i.UNSIGNED_SHORT,2*(t.indices.length-4)),i.stencilFunc(i.ALWAYS,0,255),i.stencilOp(i.KEEP,i.KEEP,i.INVERT),i.drawElements(i.TRIANGLE_FAN,t.indices.length-4,i.UNSIGNED_SHORT,0)):(n.reverse?(i.stencilFunc(i.EQUAL,a+1,255),i.stencilOp(i.KEEP,i.KEEP,i.DECR)):(i.stencilFunc(i.EQUAL,255-(a+1),255),i.stencilOp(i.KEEP,i.KEEP,i.INCR)),i.drawElements(i.TRIANGLE_STRIP,t.indices.length,i.UNSIGNED_SHORT,0)),n.reverse?i.stencilFunc(i.EQUAL,a,255):i.stencilFunc(i.EQUAL,255-a,255),i.colorMask(!0,!0,!0,!0),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)}},o.prototype.destroy=function(){n.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},o.prototype.pushMask=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),e.dirty&&this.renderer.plugins.graphics.updateGraphics(e,this.renderer.gl),e._webGL[this.renderer.gl.id].data.length&&this.pushStencil(e,e._webGL[this.renderer.gl.id].data[0],this.renderer)},o.prototype.popMask=function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.popStencil(e,e._webGL[this.renderer.gl.id].data[0],this.renderer)}},{"../../../utils":76,"./WebGLManager":57}],57:[function(e,t,i){function n(e){this.renderer=e,this.renderer.on("context",this.onContextChange,this)}n.prototype.constructor=n,(t.exports=n).prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}},{}],58:[function(e,t,i){var n=e("./Shader");function a(e){n.call(this,e,["attribute vec2 aVertexPosition;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform vec3 tint;","uniform float alpha;","uniform vec3 color;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = vec4(color * alpha * tint, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},color:{type:"3f",value:[0,0,0]},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0})}(a.prototype=Object.create(n.prototype)).constructor=a,t.exports=a},{"./Shader":60}],59:[function(e,t,i){var n=e("./Shader");function a(e){n.call(this,e,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform float flipY;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["precision mediump float;","varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n"),{tint:{type:"3f",value:[0,0,0]},alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aColor:0})}(a.prototype=Object.create(n.prototype)).constructor=a,t.exports=a},{"./Shader":60}],60:[function(e,t,i){var s=e("../../../utils");function n(e,t,i,n,a){if(!t||!i)throw new Error("Pixi.js Error. Shader requires vertexSrc and fragmentSrc");this.uid=s.uid(),this.gl=e.renderer.gl,this.shaderManager=e,this.program=null,this.uniforms=n||{},this.attributes=a||{},this.textureCount=1,this.vertexSrc=t,this.fragmentSrc=i,this.init()}n.prototype.constructor=n,(t.exports=n).prototype.init=function(){this.compile(),this.gl.useProgram(this.program),this.cacheUniformLocations(Object.keys(this.uniforms)),this.cacheAttributeLocations(Object.keys(this.attributes))},n.prototype.cacheUniformLocations=function(e){for(var t=0;t<e.length;++t)this.uniforms[e[t]]._location=this.gl.getUniformLocation(this.program,e[t])},n.prototype.cacheAttributeLocations=function(e){for(var t=0;t<e.length;++t)this.attributes[e[t]]=this.gl.getAttribLocation(this.program,e[t])},n.prototype.compile=function(){var e=this.gl,t=this._glCompile(e.VERTEX_SHADER,this.vertexSrc),i=this._glCompile(e.FRAGMENT_SHADER,this.fragmentSrc),n=e.createProgram();return e.attachShader(n,t),e.attachShader(n,i),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(n,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(n)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(n)),e.deleteProgram(n),n=null),e.deleteShader(t),e.deleteShader(i),this.program=n},n.prototype.syncUniform=function(e){var t,i,n=e._location,a=e.value,o=this.gl;switch(e.type){case"b":case"bool":case"boolean":o.uniform1i(n,a?1:0);break;case"i":case"1i":o.uniform1i(n,a);break;case"f":case"1f":o.uniform1f(n,a);break;case"2f":o.uniform2f(n,a[0],a[1]);break;case"3f":o.uniform3f(n,a[0],a[1],a[2]);break;case"4f":o.uniform4f(n,a[0],a[1],a[2],a[3]);break;case"v2":o.uniform2f(n,a.x,a.y);break;case"v3":o.uniform3f(n,a.x,a.y,a.z);break;case"v4":o.uniform4f(n,a.x,a.y,a.z,a.w);break;case"1iv":o.uniform1iv(n,a);break;case"2iv":o.uniform2iv(n,a);break;case"3iv":o.uniform3iv(n,a);break;case"4iv":o.uniform4iv(n,a);break;case"1fv":o.uniform1fv(n,a);break;case"2fv":o.uniform2fv(n,a);break;case"3fv":o.uniform3fv(n,a);break;case"4fv":o.uniform4fv(n,a);break;case"m2":case"mat2":case"Matrix2fv":o.uniformMatrix2fv(n,e.transpose,a);break;case"m3":case"mat3":case"Matrix3fv":o.uniformMatrix3fv(n,e.transpose,a);break;case"m4":case"mat4":case"Matrix4fv":o.uniformMatrix4fv(n,e.transpose,a);break;case"c":"number"==typeof a&&(a=s.hex2rgb(a)),o.uniform3f(n,a[0],a[1],a[2]);break;case"iv1":o.uniform1iv(n,a);break;case"iv":o.uniform3iv(n,a);break;case"fv1":o.uniform1fv(n,a);break;case"fv":o.uniform3fv(n,a);break;case"v2v":for(e._array||(e._array=new Float32Array(2*a.length)),t=0,i=a.length;t<i;++t)e._array[2*t]=a[t].x,e._array[2*t+1]=a[t].y;o.uniform2fv(n,e._array);break;case"v3v":for(e._array||(e._array=new Float32Array(3*a.length)),t=0,i=a.length;t<i;++t)e._array[3*t]=a[t].x,e._array[3*t+1]=a[t].y,e._array[3*t+2]=a[t].z;o.uniform3fv(n,e._array);break;case"v4v":for(e._array||(e._array=new Float32Array(4*a.length)),t=0,i=a.length;t<i;++t)e._array[4*t]=a[t].x,e._array[4*t+1]=a[t].y,e._array[4*t+2]=a[t].z,e._array[4*t+3]=a[t].w;o.uniform4fv(n,e._array);break;case"t":case"sampler2D":if(!e.value||!e.value.baseTexture.hasLoaded)break;o.activeTexture(o["TEXTURE"+this.textureCount]);var r=e.value.baseTexture._glTextures[o.id];r||(this.initSampler2D(e),r=e.value.baseTexture._glTextures[o.id]),o.bindTexture(o.TEXTURE_2D,r),o.uniform1i(e._location,this.textureCount),this.textureCount++;break;default:console.warn("Pixi.js Shader Warning: Unknown uniform type: "+e.type)}},n.prototype.syncUniforms=function(){for(var e in this.textureCount=1,this.uniforms)this.syncUniform(this.uniforms[e])},n.prototype.initSampler2D=function(e){var t=this.gl,i=e.value.baseTexture;if(i.hasLoaded)if(e.textureData){var n=e.textureData;i._glTextures[t.id]=t.createTexture(),t.bindTexture(t.TEXTURE_2D,i._glTextures[t.id]),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultipliedAlpha),t.texImage2D(t.TEXTURE_2D,0,n.luminance?t.LUMINANCE:t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i.source),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n.magFilter?n.magFilter:t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n.wrapS?n.wrapS:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,n.wrapS?n.wrapS:t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,n.wrapT?n.wrapT:t.CLAMP_TO_EDGE)}else this.shaderManager.renderer.updateTexture(i)},n.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.gl=null,this.uniforms=null,this.attributes=null,this.vertexSrc=null,this.fragmentSrc=null},n.prototype._glCompile=function(e,t){var i=this.gl.createShader(e);return this.gl.shaderSource(i,t),this.gl.compileShader(i),this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(console.log(this.gl.getShaderInfoLog(i)),null)}},{"../../../utils":76}],61:[function(e,t,i){var c=e("./Shader");function u(e,t,i,n,a){var o={uSampler:{type:"sampler2D",value:0},projectionMatrix:{type:"mat3",value:new Float32Array([1,0,0,0,1,0,0,0,1])}};if(n)for(var r in n)o[r]=n[r];var s={aVertexPosition:0,aTextureCoord:0,aColor:0};if(a)for(var l in a)s[l]=a[l];t=t||u.defaultVertexSrc,i=i||u.defaultFragmentSrc,c.call(this,e,t,i,o,s)}(u.prototype=Object.create(c.prototype)).constructor=u,(t.exports=u).defaultVertexSrc=["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),u.defaultFragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"].join("\n")},{"./Shader":60}],62:[function(e,t,i){var n=e("../managers/WebGLManager");function a(e){n.call(this,e)}(a.prototype=Object.create(n.prototype)).constructor=a,(t.exports=a).prototype.start=function(){},a.prototype.stop=function(){this.flush()},a.prototype.flush=function(){},a.prototype.render=function(e){}},{"../managers/WebGLManager":57}],63:[function(e,t,i){function n(e){this.gl=e,this.vertices=new Float32Array([0,0,200,0,200,200,0,200]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.colors=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]),this.indices=new Uint16Array([0,1,2,0,3,2]),this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,128,e.DYNAMIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),this.upload()}(n.prototype.constructor=n).prototype.map=function(e,t){var i=0,n=0;this.uvs[0]=i,this.uvs[1]=n,this.uvs[2]=i+t.width/e.width,this.uvs[3]=n,this.uvs[4]=i+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=i,this.uvs[7]=n+t.height/e.height,i=t.x,n=t.y,this.vertices[0]=i,this.vertices[1]=n,this.vertices[2]=i+t.width,this.vertices[3]=n,this.vertices[4]=i+t.width,this.vertices[5]=n+t.height,this.vertices[6]=i,this.vertices[7]=n+t.height,this.upload()},n.prototype.upload=function(){var e=this.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferSubData(e.ARRAY_BUFFER,0,this.vertices),e.bufferSubData(e.ARRAY_BUFFER,32,this.uvs),e.bufferSubData(e.ARRAY_BUFFER,64,this.colors)},t.exports=n},{}],64:[function(e,t,i){function n(e,t,i,n,a,o){this.gl=e,this.frameBuffer=null,this.texture=null,this.size=new r.Rectangle(0,0,1,1),this.resolution=a||l.RESOLUTION,this.projectionMatrix=new r.Matrix,this.transform=null,this.frame=null,this.stencilBuffer=null,this.stencilMaskStack=new c,this.filterStack=[{renderTarget:this,filter:[],bounds:this.size}],this.scaleMode=n||l.SCALE_MODES.DEFAULT,this.root=o,this.root||(this.frameBuffer=e.createFramebuffer(),this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n===l.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n===l.SCALE_MODES.LINEAR?e.LINEAR:e.NEAREST),s.isPowerOfTwo(t,i)?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0)),this.resize(t,i)}var r=e("../../../math"),s=e("../../../utils"),l=e("../../../const"),c=e("./StencilMaskStack");n.prototype.constructor=n,(t.exports=n).prototype.clear=function(e){var t=this.gl;e&&t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},n.prototype.attachStencilBuffer=function(){if(!this.stencilBuffer&&!this.root){var e=this.gl;this.stencilBuffer=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencilBuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencilBuffer),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.size.width*this.resolution,this.size.height*this.resolution)}},n.prototype.activate=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer);var t=this.frame||this.size;this.calculateProjection(t),this.transform&&this.projectionMatrix.append(this.transform),e.viewport(0,0,t.width*this.resolution,t.height*this.resolution)},n.prototype.calculateProjection=function(e){var t=this.projectionMatrix;t.identity(),this.root?(t.a=1/e.width*2,t.d=-1/e.height*2,t.tx=-1-e.x*t.a,t.ty=1-e.y*t.d):(t.a=1/e.width*2,t.d=1/e.height*2,t.tx=-1-e.x*t.a,t.ty=-1-e.y*t.d)},n.prototype.resize=function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){if(this.size.width=e,this.size.height=t,!this.root){var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,e*this.resolution,t*this.resolution,0,i.RGBA,i.UNSIGNED_BYTE,null),this.stencilBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencilBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e*this.resolution,t*this.resolution))}var n=this.frame||this.size;this.calculateProjection(n)}},n.prototype.destroy=function(){var e=this.gl;e.deleteFramebuffer(this.frameBuffer),e.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null}},{"../../../const":22,"../../../math":32,"../../../utils":76,"./StencilMaskStack":65}],65:[function(e,t,i){function n(){this.stencilStack=[],this.reverse=!0,this.count=0}n.prototype.constructor=n,t.exports=n},{}],66:[function(e,t,i){var n=e("../math"),a=e("../textures/Texture"),o=e("../display/Container"),u=e("../renderers/canvas/utils/CanvasTinter"),r=e("../utils"),p=e("../const"),s=new n.Point;function l(e){o.call(this),this.anchor=new n.Point,this._texture=null,this._width=0,this._height=0,this.tint=16777215,this.blendMode=p.BLEND_MODES.NORMAL,this.shader=null,this.cachedTint=16777215,this.texture=e||a.EMPTY}(l.prototype=Object.create(o.prototype)).constructor=l,t.exports=l,Object.defineProperties(l.prototype,{width:{get:function(){return this.scale.x*this.texture._frame.width},set:function(e){this.scale.x=e/this.texture._frame.width,this._width=e}},height:{get:function(){return this.scale.y*this.texture._frame.height},set:function(e){this.scale.y=e/this.texture._frame.height,this._height=e}},texture:{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e,this.cachedTint=16777215,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}}),l.prototype._onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},l.prototype._renderWebGL=function(e){e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this)},l.prototype.getBounds=function(e){if(!this._currentBounds){var t,i,n,a,o=this._texture._frame.width,r=this._texture._frame.height,s=o*(1-this.anchor.x),l=o*-this.anchor.x,c=r*(1-this.anchor.y),u=r*-this.anchor.y,p=e||this.worldTransform,d=p.a,f=p.b,h=p.c,m=p.d,b=p.tx,g=p.ty;if(0===f&&0===h)d<0&&(d*=-1),m<0&&(m*=-1),t=d*l+b,i=d*s+b,n=m*u+g,a=m*c+g;else{var v=d*l+h*u+b,_=m*u+f*l+g,y=d*s+h*u+b,w=m*u+f*s+g,S=d*s+h*c+b,x=m*c+f*s+g,k=d*l+h*c+b,$=m*c+f*l+g;t=k<(t=S<(t=y<(t=v)?y:t)?S:t)?k:t,n=$<(n=x<(n=w<(n=_)?w:n)?x:n)?$:n,i=(i=(i=(i=v)<y?y:i)<S?S:i)<k?k:i,a=(a=(a=(a=_)<w?w:a)<x?x:a)<$?$:a}if(this.children.length){var C=this.containerGetBounds();s=C.x,l=C.x+C.width,t=t<s?t:s,n=n<(c=C.y)?n:c,i=l<i?i:l,a=(u=C.y+C.height)<a?a:u}var T=this._bounds;T.x=t,T.width=i-t,T.y=n,T.height=a-n,this._currentBounds=T}return this._currentBounds},l.prototype.getLocalBounds=function(){return this._bounds.x=-this._texture._frame.width*this.anchor.x,this._bounds.y=-this._texture._frame.height*this.anchor.y,this._bounds.width=this._texture._frame.width,this._bounds.height=this._texture._frame.height,this._bounds},l.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,s);var t,i=this._texture._frame.width,n=this._texture._frame.height,a=-i*this.anchor.x;return s.x>a&&s.x<a+i&&(t=-n*this.anchor.y,s.y>t&&s.y<t+n)},l.prototype._renderCanvas=function(e){if(!(this.texture.crop.width<=0||this.texture.crop.height<=0)&&(this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,e.context.globalCompositeOperation=e.blendModes[e.currentBlendMode]),this.texture.valid)){var t,i,n,a,o=this._texture,r=this.worldTransform;if(e.context.globalAlpha=this.worldAlpha,e.smoothProperty&&e.currentScaleMode!==o.baseTexture.scaleMode&&(e.currentScaleMode=o.baseTexture.scaleMode,e.context[e.smoothProperty]=e.currentScaleMode===p.SCALE_MODES.LINEAR),o.rotate){var s=r.a,l=r.b;r.a=-r.c,r.b=-r.d,r.c=s,r.d=l,n=o.crop.height,a=o.crop.width,t=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height,i=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width}else n=o.crop.width,a=o.crop.height,t=o.trim?o.trim.x-this.anchor.x*o.trim.width:this.anchor.x*-o._frame.width,i=o.trim?o.trim.y-this.anchor.y*o.trim.height:this.anchor.y*-o._frame.height;e.roundPixels?(e.context.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution|0,r.ty*e.resolution|0),t|=0,i|=0):e.context.setTransform(r.a,r.b,r.c,r.d,r.tx*e.resolution,r.ty*e.resolution);var c=o.baseTexture.resolution;16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=u.getTintedTexture(this,this.tint)),e.context.drawImage(this.tintedTexture,0,0,n*c,a*c,t*e.resolution,i*e.resolution,n*e.resolution,a*e.resolution)):e.context.drawImage(o.baseTexture.source,o.crop.x*c,o.crop.y*c,n*c,a*c,t*e.resolution,i*e.resolution,n*e.resolution,a*e.resolution)}},l.prototype.destroy=function(e,t){o.prototype.destroy.call(this),this.anchor=null,e&&this._texture.destroy(t),this._texture=null,this.shader=null},l.fromFrame=function(e){var t=r.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new l(t)},l.fromImage=function(e,t,i){return new l(a.fromImage(e,t,i))}},{"../const":22,"../display/Container":23,"../math":32,"../renderers/canvas/utils/CanvasTinter":47,"../textures/Texture":71,"../utils":76}],67:[function(e,t,i){var o=e("../../renderers/webgl/utils/ObjectRenderer"),n=e("../../renderers/webgl/WebGLRenderer"),r=e("../../const");function a(e){o.call(this,e),this.vertSize=5,this.vertByteSize=4*this.vertSize,this.size=r.SPRITE_BATCH_SIZE;var t=4*this.size*this.vertByteSize,i=6*this.size;this.vertices=new ArrayBuffer(t),this.positions=new Float32Array(this.vertices),this.colors=new Uint32Array(this.vertices),this.indices=new Uint16Array(i);for(var n=0,a=0;n<i;n+=6,a+=4)this.indices[n+0]=a+0,this.indices[n+1]=a+1,this.indices[n+2]=a+2,this.indices[n+3]=a+0,this.indices[n+4]=a+2,this.indices[n+5]=a+3;this.currentBatchSize=0,this.sprites=[],this.shader=null}(a.prototype=Object.create(o.prototype)).constructor=a,t.exports=a,n.registerPlugin("sprite",a),a.prototype.onContextChange=function(){var e=this.renderer.gl;this.shader=this.renderer.shaderManager.defaultShader,this.vertexBuffer=e.createBuffer(),this.indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,this.indices,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bufferData(e.ARRAY_BUFFER,this.vertices,e.DYNAMIC_DRAW),this.currentBlendMode=99999},a.prototype.render=function(e){var t=e._texture;this.currentBatchSize>=this.size&&this.flush();var i=t._uvs;if(i){var n,a,o,r,s=e.anchor.x,l=e.anchor.y;if(t.trim){var c=t.trim;n=(a=c.x-s*c.width)+t.crop.width,o=(r=c.y-l*c.height)+t.crop.height}else n=t._frame.width*(1-s),a=t._frame.width*-s,o=t._frame.height*(1-l),r=t._frame.height*-l;var u=this.currentBatchSize*this.vertByteSize,p=e.worldTransform,d=p.a,f=p.b,h=p.c,m=p.d,b=p.tx,g=p.ty,v=this.colors,_=this.positions;this.renderer.roundPixels?(_[u]=d*a+h*r+b|0,_[1+u]=m*r+f*a+g|0,_[5+u]=d*n+h*r+b|0,_[6+u]=m*r+f*n+g|0,_[10+u]=d*n+h*o+b|0,_[11+u]=m*o+f*n+g|0,_[15+u]=d*a+h*o+b|0,_[16+u]=m*o+f*a+g|0):(_[u]=d*a+h*r+b,_[1+u]=m*r+f*a+g,_[5+u]=d*n+h*r+b,_[6+u]=m*r+f*n+g,_[10+u]=d*n+h*o+b,_[11+u]=m*o+f*n+g,_[15+u]=d*a+h*o+b,_[16+u]=m*o+f*a+g),_[2+u]=i.x0,_[3+u]=i.y0,_[7+u]=i.x1,_[8+u]=i.y1,_[12+u]=i.x2,_[13+u]=i.y2,_[17+u]=i.x3,_[18+u]=i.y3;var y=e.tint;v[4+u]=v[9+u]=v[14+u]=v[19+u]=(y>>16)+(65280&y)+((255&y)<<16)+(255*e.worldAlpha<<24),this.sprites[this.currentBatchSize++]=e}},a.prototype.flush=function(){if(0!==this.currentBatchSize){var e,t,i,n,a=this.renderer.gl;if(this.currentBatchSize>.5*this.size)a.bufferSubData(a.ARRAY_BUFFER,0,this.vertices);else{var o=this.positions.subarray(0,this.currentBatchSize*this.vertByteSize);a.bufferSubData(a.ARRAY_BUFFER,0,o)}for(var r,s=0,l=0,c=null,u=this.renderer.blendModeManager.currentBlendMode,p=null,d=!1,f=!1,h=0,m=this.currentBatchSize;h<m;h++)t=(r=this.sprites[h])._texture.baseTexture,d=u!==(i=r.blendMode),f=p!==(n=r.shader||this.shader),(c!==t||d||f)&&(this.renderBatch(c,s,l),l=h,s=0,c=t,d&&(u=i,this.renderer.blendModeManager.setBlendMode(u)),f&&(e=(e=(p=n).shaders?p.shaders[a.id]:p)||p.getShader(this.renderer),this.renderer.shaderManager.setShader(e),e.uniforms.projectionMatrix.value=this.renderer.currentRenderTarget.projectionMatrix.toArray(!0),e.syncUniforms(),a.activeTexture(a.TEXTURE0))),s++;this.renderBatch(c,s,l),this.currentBatchSize=0}},a.prototype.renderBatch=function(e,t,i){if(0!==t){var n=this.renderer.gl;e._glTextures[n.id]?n.bindTexture(n.TEXTURE_2D,e._glTextures[n.id]):this.renderer.updateTexture(e),n.drawElements(n.TRIANGLES,6*t,n.UNSIGNED_SHORT,6*i*2),this.renderer.drawCount++}},a.prototype.start=function(){var e=this.renderer.gl;e.bindBuffer(e.ARRAY_BUFFER,this.vertexBuffer),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var t=this.vertByteSize;e.vertexAttribPointer(this.shader.attributes.aVertexPosition,2,e.FLOAT,!1,t,0),e.vertexAttribPointer(this.shader.attributes.aTextureCoord,2,e.FLOAT,!1,t,8),e.vertexAttribPointer(this.shader.attributes.aColor,4,e.UNSIGNED_BYTE,!0,t,16)},a.prototype.destroy=function(){this.renderer.gl.deleteBuffer(this.vertexBuffer),this.renderer.gl.deleteBuffer(this.indexBuffer),this.shader.destroy(),this.renderer=null,this.vertices=null,this.positions=null,this.colors=null,this.indices=null,this.vertexBuffer=null,this.indexBuffer=null,this.sprites=null,this.shader=null}},{"../../const":22,"../../renderers/webgl/WebGLRenderer":48,"../../renderers/webgl/utils/ObjectRenderer":62}],68:[function(e,t,i){var a=e("../sprites/Sprite"),o=e("../textures/Texture"),r=e("../math"),n=e("../utils"),s=e("../const");function h(e,t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||s.RESOLUTION,this._text=null,this._style=null;var n=o.fromCanvas(this.canvas);n.trim=new r.Rectangle,a.call(this,n),this.text=e,this.style=t}(h.prototype=Object.create(a.prototype)).constructor=h,(t.exports=h).fontPropertiesCache={},h.fontPropertiesCanvas=document.createElement("canvas"),h.fontPropertiesContext=h.fontPropertiesCanvas.getContext("2d"),Object.defineProperties(h.prototype,{width:{get:function(){return this.dirty&&this.updateText(),this.scale.x*this._texture._frame.width},set:function(e){this.scale.x=e/this._texture._frame.width,this._width=e}},height:{get:function(){return this.dirty&&this.updateText(),this.scale.y*this._texture._frame.height},set:function(e){this.scale.y=e/this._texture._frame.height,this._height=e}},style:{get:function(){return this._style},set:function(e){"number"==typeof(e=e||{}).fill&&(e.fill=n.hex2string(e.fill)),"number"==typeof e.stroke&&(e.stroke=n.hex2string(e.stroke)),"number"==typeof e.dropShadowColor&&(e.dropShadowColor=n.hex2string(e.dropShadowColor)),e.font=e.font||"bold 20pt Arial",e.fill=e.fill||"black",e.align=e.align||"left",e.stroke=e.stroke||"black",e.strokeThickness=e.strokeThickness||0,e.wordWrap=e.wordWrap||!1,e.wordWrapWidth=e.wordWrapWidth||100,e.dropShadow=e.dropShadow||!1,e.dropShadowColor=e.dropShadowColor||"#000000",e.dropShadowAngle=e.dropShadowAngle||Math.PI/6,e.dropShadowDistance=e.dropShadowDistance||5,e.padding=e.padding||0,e.textBaseline=e.textBaseline||"alphabetic",e.lineJoin=e.lineJoin||"miter",e.miterLimit=e.miterLimit||10,this._style=e,this.dirty=!0}},text:{get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}}}),h.prototype.updateText=function(){var e=this._style;this.context.font=e.font;for(var t=(e.wordWrap?this.wordWrap(this._text):this._text).split(/(?:\r\n|\r|\n)/),i=new Array(t.length),n=0,a=this.determineFontProperties(e.font),o=0;o<t.length;o++){var r=this.context.measureText(t[o]).width;i[o]=r,n=Math.max(n,r)}var s=n+e.strokeThickness;e.dropShadow&&(s+=e.dropShadowDistance),this.canvas.width=(s+this.context.lineWidth)*this.resolution;var l,c,u=this.style.lineHeight||a.fontSize+e.strokeThickness,p=u*t.length;if(e.dropShadow&&(p+=e.dropShadowDistance),this.canvas.height=(p+2*this._style.padding)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=e.font,this.context.strokeStyle=e.stroke,this.context.lineWidth=e.strokeThickness,this.context.textBaseline=e.textBaseline,this.context.lineJoin=e.lineJoin,this.context.miterLimit=e.miterLimit,e.dropShadow){this.context.fillStyle=e.dropShadowColor;var d=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance;for(o=0;o<t.length;o++)l=e.strokeThickness/2,c=e.strokeThickness/2+o*u+a.ascent,"right"===e.align?l+=n-i[o]:"center"===e.align&&(l+=(n-i[o])/2),e.fill&&this.context.fillText(t[o],l+d,c+f+this._style.padding)}for(this.context.fillStyle=e.fill,o=0;o<t.length;o++)l=e.strokeThickness/2,c=e.strokeThickness/2+o*u+a.ascent,"right"===e.align?l+=n-i[o]:"center"===e.align&&(l+=(n-i[o])/2),e.stroke&&e.strokeThickness&&this.context.strokeText(t[o],l,c+this._style.padding),e.fill&&this.context.fillText(t[o],l,c+this._style.padding);this.updateTexture()},h.prototype.updateTexture=function(){var e=this._texture;e.baseTexture.hasLoaded=!0,e.baseTexture.resolution=this.resolution,e.baseTexture.width=this.canvas.width/this.resolution,e.baseTexture.height=this.canvas.height/this.resolution,e.crop.width=e._frame.width=this.canvas.width/this.resolution,e.crop.height=e._frame.height=this.canvas.height/this.resolution,e.trim.x=0,e.trim.y=-this._style.padding,e.trim.width=e._frame.width,e.trim.height=e._frame.height-2*this._style.padding,this._width=this.canvas.width/this.resolution,this._height=this.canvas.height/this.resolution,e.baseTexture.emit("update",e.baseTexture),this.dirty=!1},h.prototype.renderWebGL=function(e){this.dirty&&this.updateText(),a.prototype.renderWebGL.call(this,e)},h.prototype._renderCanvas=function(e){this.dirty&&this.updateText(),a.prototype._renderCanvas.call(this,e)},h.prototype.determineFontProperties=function(e){var t=h.fontPropertiesCache[e];if(!t){t={};var i=h.fontPropertiesCanvas,n=h.fontPropertiesContext;n.font=e;var a=Math.ceil(n.measureText("|MÉq").width),o=Math.ceil(n.measureText("M").width),r=2*o;o=1.4*o|0,i.width=a,i.height=r,n.fillStyle="#f00",n.fillRect(0,0,a,r),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,o);var s,l,c=n.getImageData(0,0,a,r).data,u=c.length,p=4*a,d=0,f=!1;for(s=0;s<o;s++){for(l=0;l<p;l+=4)if(255!==c[d+l]){f=!0;break}if(f)break;d+=p}for(t.ascent=o-s,d=u-p,f=!1,s=r;o<s;s--){for(l=0;l<p;l+=4)if(255!==c[d+l]){f=!0;break}if(f)break;d-=p}t.descent=s-o,t.fontSize=t.ascent+t.descent,h.fontPropertiesCache[e]=t}return t},h.prototype.wordWrap=function(e){for(var t="",i=e.split("\n"),n=this._style.wordWrapWidth,a=0;a<i.length;a++){for(var o=n,r=i[a].split(" "),s=0;s<r.length;s++){var l=this.context.measureText(r[s]).width,c=l+this.context.measureText(" ").width;0===s||o<c?(0<s&&(t+="\n"),t+=r[s],o=n-l):(o-=c,t+=" "+r[s])}a<i.length-1&&(t+="\n")}return t},h.prototype.getBounds=function(e){return this.dirty&&this.updateText(),a.prototype.getBounds.call(this,e)},h.prototype.destroy=function(e){this.context=null,this.canvas=null,this._style=null,this._texture.destroy(void 0===e||e)}},{"../const":22,"../math":32,"../sprites/Sprite":66,"../textures/Texture":71,"../utils":76}],69:[function(e,t,i){var o=e("../utils"),n=e("../const"),a=e("eventemitter3");function r(e,t,i){a.call(this),this.uid=o.uid(),this.resolution=i||1,this.width=100,this.height=100,this.realWidth=100,this.realHeight=100,this.scaleMode=t||n.SCALE_MODES.DEFAULT,this.hasLoaded=!1,this.isLoading=!1,this.source=null,this.premultipliedAlpha=!0,this.imageUrl=null,this.isPowerOfTwo=!1,this.mipmap=!1,this._glTextures=[],e&&this.loadSource(e)}(r.prototype=Object.create(a.prototype)).constructor=r,(t.exports=r).prototype.update=function(){this.realWidth=this.source.naturalWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=o.isPowerOfTwo(this.realWidth,this.realHeight),this.emit("update",this)},r.prototype.loadSource=function(e){var t=this.isLoading;if(this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null),this.source=e,(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this._sourceLoaded();else if(!e.getContext){this.isLoading=!0;var i=this;e.onload=function(){e.onload=null,e.onerror=null,i.isLoading&&(i.isLoading=!1,i._sourceLoaded(),i.emit("loaded",i))},e.onerror=function(){e.onload=null,e.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},e.complete&&e.src&&(this.isLoading=!1,e.onload=null,e.onerror=null,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this))}},r.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},r.prototype.destroy=function(){this.imageUrl?(delete o.BaseTextureCache[this.imageUrl],delete o.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete o.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},r.prototype.dispose=function(){this.emit("dispose",this),this._glTextures.length=0},r.prototype.updateSourceImage=function(e){this.source.src=e,this.loadSource(this.source)},r.fromImage=function(e,t,i){var n=o.BaseTextureCache[e];if(void 0===t&&0!==e.indexOf("data:")&&(t=!0),!n){var a=new Image;t&&(a.crossOrigin=""),(n=new r(a,i)).imageUrl=e,a.src=e,(o.BaseTextureCache[e]=n).resolution=o.getResolutionOfUrl(e)}return n},r.fromCanvas=function(e,t){e._pixiId||(e._pixiId="canvas_"+o.uid());var i=o.BaseTextureCache[e._pixiId];return i||(i=new r(e,t),o.BaseTextureCache[e._pixiId]=i),i}},{"../const":22,"../utils":76,eventemitter3:11}],70:[function(e,t,i){var s=e("./BaseTexture"),l=e("./Texture"),c=e("../renderers/webgl/utils/RenderTarget"),u=e("../renderers/webgl/managers/FilterManager"),p=e("../renderers/canvas/utils/CanvasBuffer"),d=e("../math"),f=e("../const"),h=new d.Matrix;function n(e,t,i,n,a){if(!e)throw new Error("Unable to create RenderTexture, you must pass a renderer into the constructor.");t=t||100,i=i||100,a=a||f.RESOLUTION;var o=new s;if(o.width=t,o.height=i,o.resolution=a,o.scaleMode=n||f.SCALE_MODES.DEFAULT,o.hasLoaded=!0,l.call(this,o,new d.Rectangle(0,0,t,i)),this.width=t,this.height=i,this.resolution=a,this.render=null,this.renderer=e,this.renderer.type===f.RENDERER_TYPE.WEBGL){var r=this.renderer.gl;this.textureBuffer=new c(r,this.width,this.height,o.scaleMode,this.resolution),this.baseTexture._glTextures[r.id]=this.textureBuffer.texture,this.filterManager=new u(this.renderer),this.filterManager.onContextChange(),this.filterManager.resize(t,i),this.render=this.renderWebGL,this.renderer.currentRenderer.start(),this.renderer.currentRenderTarget.activate()}else this.render=this.renderCanvas,this.textureBuffer=new p(this.width*this.resolution,this.height*this.resolution),this.baseTexture.source=this.textureBuffer.canvas;this.valid=!0,this._updateUvs()}(n.prototype=Object.create(l.prototype)).constructor=n,(t.exports=n).prototype.resize=function(e,t,i){e===this.width&&t===this.height||(this.valid=0<e&&0<t,this.width=this._frame.width=this.crop.width=e,this.height=this._frame.height=this.crop.height=t,i&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.valid&&(this.textureBuffer.resize(this.width,this.height),this.filterManager&&this.filterManager.resize(this.width,this.height)))},n.prototype.clear=function(){this.valid&&(this.renderer.type===f.RENDERER_TYPE.WEBGL&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear())},n.prototype.renderWebGL=function(e,t,i,n){if(this.valid){if(n=void 0===n||n,this.textureBuffer.transform=t,this.textureBuffer.activate(),e.worldAlpha=1,n){e.worldTransform.identity(),e.currentBounds=null;var a,o,r=e.children;for(a=0,o=r.length;a<o;++a)r[a].updateTransform()}var s=this.renderer.filterManager;this.renderer.filterManager=this.filterManager,this.renderer.renderDisplayObject(e,this.textureBuffer,i),this.renderer.filterManager=s}},n.prototype.renderCanvas=function(e,t,i,n){if(this.valid){n=!!n;var a=e.worldTransform,o=h;o.identity(),t&&o.append(t),e.worldTransform=o,e.worldAlpha=1;var r,s,l=e.children;for(r=0,s=l.length;r<s;++r)l[r].updateTransform();i&&this.textureBuffer.clear(),e.worldTransform=a;var c=this.textureBuffer.context,u=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderDisplayObject(e,c),this.renderer.resolution=u}},n.prototype.destroy=function(){l.prototype.destroy.call(this,!0),this.textureBuffer.destroy(),this.filterManager&&this.filterManager.destroy(),this.renderer=null},n.prototype.getImage=function(){var e=new Image;return e.src=this.getBase64(),e},n.prototype.getBase64=function(){return this.getCanvas().toDataURL()},n.prototype.getCanvas=function(){if(this.renderer.type!==f.RENDERER_TYPE.WEBGL)return this.textureBuffer.canvas;var e=this.renderer.gl,t=this.textureBuffer.size.width,i=this.textureBuffer.size.height,n=new Uint8Array(4*t*i);e.bindFramebuffer(e.FRAMEBUFFER,this.textureBuffer.frameBuffer),e.readPixels(0,0,t,i,e.RGBA,e.UNSIGNED_BYTE,n),e.bindFramebuffer(e.FRAMEBUFFER,null);var a=new p(t,i),o=a.context.getImageData(0,0,t,i);return o.data.set(n),a.context.putImageData(o,0,0),a.canvas},n.prototype.getPixels=function(){var e,t;if(this.renderer.type!==f.RENDERER_TYPE.WEBGL)return e=this.textureBuffer.canvas.width,t=this.textureBuffer.canvas.height,this.textureBuffer.canvas.getContext("2d").getImageData(0,0,e,t).data;var i=this.renderer.gl;e=this.textureBuffer.size.width,t=this.textureBuffer.size.height;var n=new Uint8Array(4*e*t);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(0,0,e,t,i.RGBA,i.UNSIGNED_BYTE,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n},n.prototype.getPixel=function(e,t){if(this.renderer.type!==f.RENDERER_TYPE.WEBGL)return this.textureBuffer.canvas.getContext("2d").getImageData(e,t,1,1).data;var i=this.renderer.gl,n=new Uint8Array(4);return i.bindFramebuffer(i.FRAMEBUFFER,this.textureBuffer.frameBuffer),i.readPixels(e,t,1,1,i.RGBA,i.UNSIGNED_BYTE,n),i.bindFramebuffer(i.FRAMEBUFFER,null),n}},{"../const":22,"../math":32,"../renderers/canvas/utils/CanvasBuffer":44,"../renderers/webgl/managers/FilterManager":53,"../renderers/webgl/utils/RenderTarget":64,"./BaseTexture":69,"./Texture":71}],71:[function(e,t,i){var a=e("./BaseTexture"),n=e("./VideoBaseTexture"),o=e("./TextureUvs"),r=e("eventemitter3"),s=e("../math"),l=e("../utils");function c(e,t,i,n,a){r.call(this),this.noFrame=!1,t||(this.noFrame=!0,t=new s.Rectangle(0,0,1,1)),e instanceof c&&(e=e.baseTexture),this.baseTexture=e,this._frame=t,this.trim=n,this.valid=!1,this.requiresUpdate=!1,this._uvs=null,this.width=0,this.height=0,this.crop=i||t,this.rotate=!!a,e.hasLoaded?(this.noFrame&&(t=new s.Rectangle(0,0,e.width,e.height),e.on("update",this.onBaseTextureUpdated,this)),this.frame=t):e.once("loaded",this.onBaseTextureLoaded,this)}(c.prototype=Object.create(r.prototype)).constructor=c,t.exports=c,Object.defineProperties(c.prototype,{frame:{get:function(){return this._frame},set:function(e){if(this._frame=e,this.noFrame=!1,this.width=e.width,this.height=e.height,!this.trim&&!this.rotate&&(e.x+e.width>this.baseTexture.width||e.y+e.height>this.baseTexture.height))throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=e&&e.width&&e.height&&this.baseTexture.hasLoaded,this.trim?(this.width=this.trim.width,this.height=this.trim.height,this._frame.width=this.trim.width,this._frame.height=this.trim.height):this.crop=e,this.valid&&this._updateUvs()}}}),c.prototype.update=function(){this.baseTexture.update()},c.prototype.onBaseTextureLoaded=function(e){this.noFrame?this.frame=new s.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.emit("update",this)},c.prototype.onBaseTextureUpdated=function(e){this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)},c.prototype.destroy=function(e){this.baseTexture&&(e&&this.baseTexture.destroy(),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.crop=null,this.valid=!1},c.prototype.clone=function(){return new c(this.baseTexture,this.frame,this.crop,this.trim,this.rotate)},c.prototype._updateUvs=function(){this._uvs||(this._uvs=new o),this._uvs.set(this.crop,this.baseTexture,this.rotate)},c.fromImage=function(e,t,i){var n=l.TextureCache[e];return n||(n=new c(a.fromImage(e,t,i)),l.TextureCache[e]=n),n},c.fromFrame=function(e){var t=l.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t},c.fromCanvas=function(e,t){return new c(a.fromCanvas(e,t))},c.fromVideo=function(e,t){return"string"==typeof e?c.fromVideoUrl(e,t):new c(n.fromVideo(e,t))},c.fromVideoUrl=function(e,t){return new c(n.fromUrl(e,t))},c.addTextureToCache=function(e,t){l.TextureCache[t]=e},c.removeTextureFromCache=function(e){var t=l.TextureCache[e];return delete l.TextureCache[e],delete l.BaseTextureCache[e],t},c.EMPTY=new c(new a)},{"../math":32,"../utils":76,"./BaseTexture":69,"./TextureUvs":72,"./VideoBaseTexture":73,eventemitter3:11}],72:[function(e,t,i){function n(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1}(t.exports=n).prototype.set=function(e,t,i){var n=t.width,a=t.height;i?(this.x0=(e.x+e.height)/n,this.y0=e.y/a,this.x1=(e.x+e.height)/n,this.y1=(e.y+e.width)/a,this.x2=e.x/n,this.y2=(e.y+e.width)/a,this.x3=e.x/n,this.y3=e.y/a):(this.x0=e.x/n,this.y0=e.y/a,this.x1=(e.x+e.width)/n,this.y1=e.y/a,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/a,this.x3=e.x/n,this.y3=(e.y+e.height)/a)}},{}],73:[function(e,t,i){var n=e("./BaseTexture"),a=e("../utils");function o(e,t){if(!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),n.call(this,e,t),this.autoUpdate=!1,this._onUpdate=this._onUpdate.bind(this),this._onCanPlay=this._onCanPlay.bind(this),e.complete||(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this))),this.__loaded=!1}function r(e,t){t=t||"video/"+e.substr(e.lastIndexOf(".")+1);var i=document.createElement("source");return i.src=e,i.type=t,i}(o.prototype=Object.create(n.prototype)).constructor=o,(t.exports=o).prototype._onUpdate=function(){this.autoUpdate&&(window.requestAnimationFrame(this._onUpdate),this.update())},o.prototype._onPlayStart=function(){this.autoUpdate||(window.requestAnimationFrame(this._onUpdate),this.autoUpdate=!0)},o.prototype._onPlayStop=function(){this.autoUpdate=!1},o.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.source.play(),this.__loaded||(this.__loaded=!0,this.emit("loaded",this)))},o.prototype.destroy=function(){this.source&&this.source._pixiId&&(delete a.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),n.prototype.destroy.call(this)},o.fromVideo=function(e,t){e._pixiId||(e._pixiId="video_"+a.uid());var i=a.BaseTextureCache[e._pixiId];return i||(i=new o(e,t),a.BaseTextureCache[e._pixiId]=i),i},o.fromUrls=o.fromUrl=function(e,t){var i=document.createElement("video");if(Array.isArray(e))for(var n=0;n<e.length;++n)i.appendChild(r(e.src||e,e.mime));else i.appendChild(r(e.src||e,e.mime));return i.load(),i.play(),o.fromVideo(i,t)}},{"../utils":76,"./BaseTexture":69}],74:[function(e,t,i){var n=e("../const"),a=e("eventemitter3"),o="tick";function r(){var t=this;this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._emitter.listeners(o,!0)&&(t._requestId=requestAnimationFrame(t._tick)))},this._emitter=new a,this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/n.TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1}Object.defineProperties(r.prototype,{FPS:{get:function(){return 1e3/this.elapsedMS}},minFPS:{get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,n.TARGET_FPMS);this._maxElapsedMS=1/t}}}),r.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(o,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},r.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},r.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},r.prototype.add=function(e,t){return this._emitter.on(o,e,t),this._startIfPossible(),this},r.prototype.addOnce=function(e,t){return this._emitter.once(o,e,t),this._startIfPossible(),this},r.prototype.remove=function(e,t){return this._emitter.off(o,e,t),this._emitter.listeners(o,!0)||this._cancelIfNeeded(),this},r.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},r.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},r.prototype.update=function(e){var t;e=e||performance.now(),(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*n.TARGET_FPMS*this.speed,this._emitter.emit(o,this.deltaTime),this.lastTime=e},t.exports=r},{"../const":22,eventemitter3:11}],75:[function(e,t,i){var n=e("./Ticker"),a=new n;a.autoStart=!0,t.exports={shared:a,Ticker:n}},{"./Ticker":74}],76:[function(e,t,i){var n=e("../const"),a=t.exports={_uid:0,_saidHello:!1,pluginTarget:e("./pluginTarget"),async:e("async"),uid:function(){return++a._uid},hex2rgb:function(e,t){return(t=t||[])[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},hex2string:function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},rgb2hex:function(e){return(255*e[0]<<16)+(255*e[1]<<8)+255*e[2]},canUseNewCanvasBlendModes:function(){if("undefined"==typeof document)return!1;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",t="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",i=new Image;i.src=e+"AP804Oa6"+t;var n=new Image;n.src=e+"/wCKxvRF"+t;var a=document.createElement("canvas");a.width=6,a.height=1;var o=a.getContext("2d");o.globalCompositeOperation="multiply",o.drawImage(i,0,0),o.drawImage(n,2,0);var r=o.getImageData(2,0,1,1).data;return 255===r[0]&&0===r[1]&&0===r[2]},getNextPowerOfTwo:function(e){if(0<e&&0==(e&e-1))return e;for(var t=1;t<e;)t<<=1;return t},isPowerOfTwo:function(e,t){return 0<e&&0==(e&e-1)&&0<t&&0==(t&t-1)},getResolutionOfUrl:function(e){var t=n.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):1},sayHello:function(e){if(!a._saidHello){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome"))n.VERSION;else window.console;a._saidHello=!0}},isWebGLSupported:function(){var e={stencil:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);return!(!i||!i.getContextAttributes().stencil)}catch(e){return!1}},TextureCache:{},BaseTextureCache:{}}},{"../const":22,"./pluginTarget":77,async:2}],77:[function(e,t,i){t.exports={mixin:function(e){!function(i){i.__plugins={},i.registerPlugin=function(e,t){i.__plugins[e]=t},i.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},i.__plugins)this.plugins[e]=new i.__plugins[e](this)},i.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}(e)}}},{}],78:[function(e,t,i){var n=e("./core"),a=e("./mesh"),o=e("./extras"),r=e("./filters");n.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},n.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(n,{Stage:{get:function(){return console.warn("You do not need to use a PIXI Stage any more, you can simply render any container."),n.Container}},DisplayObjectContainer:{get:function(){return console.warn("DisplayObjectContainer has been shortened to Container, please use Container from now on."),n.Container}},Strip:{get:function(){return console.warn("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),a.Mesh}},Rope:{get:function(){return console.warn("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),a.Rope}},MovieClip:{get:function(){return console.warn("The MovieClip class has been moved to extras.MovieClip, please use extras.MovieClip from now on."),o.MovieClip}},TilingSprite:{get:function(){return console.warn("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),o.TilingSprite}},BitmapText:{get:function(){return console.warn("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),o.BitmapText}},blendModes:{get:function(){return console.warn("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),n.BLEND_MODES}},scaleModes:{get:function(){return console.warn("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),n.SCALE_MODES}},BaseTextureCache:{get:function(){return console.warn("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),n.utils.BaseTextureCache}},TextureCache:{get:function(){return console.warn("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),n.utils.TextureCache}},math:{get:function(){return console.warn("The math namespace is deprecated, please access members already accessible on PIXI."),n}}}),n.Sprite.prototype.setTexture=function(e){this.texture=e,console.warn("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},o.BitmapText.prototype.setText=function(e){this.text=e,console.warn("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},n.Text.prototype.setText=function(e){this.text=e,console.warn("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},n.Text.prototype.setStyle=function(e){this.style=e,console.warn("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},n.Texture.prototype.setFrame=function(e){this.frame=e,console.warn("setFrame is now deprecated, please use the frame property, e.g : myTexture.frame = frame;")},Object.defineProperties(r,{AbstractFilter:{get:function(){return console.warn("filters.AbstractFilter is an undocumented alias, please use AbstractFilter from now on."),n.AbstractFilter}},FXAAFilter:{get:function(){return console.warn("filters.FXAAFilter is an undocumented alias, please use FXAAFilter from now on."),n.FXAAFilter}},SpriteMaskFilter:{get:function(){return console.warn("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),n.SpriteMaskFilter}}}),n.utils.uuid=function(){return console.warn("utils.uuid() is deprecated, please use utils.uid() from now on."),n.utils.uid()}},{"./core":29,"./extras":85,"./filters":102,"./mesh":126}],79:[function(e,t,i){var v=e("../core");function _(e,t){v.Container.call(this),t=t||{},this.textWidth=0,this.textHeight=0,this._glyphs=[],this._font={tint:void 0!==t.tint?t.tint:16777215,align:t.align||"left",name:null,size:0},this.font=t.font,this._text=e,this.maxWidth=0,this.dirty=!1,this.updateText()}(_.prototype=Object.create(v.Container.prototype)).constructor=_,t.exports=_,Object.defineProperties(_.prototype,{tint:{get:function(){return this._font.tint},set:function(e){this._font.tint="number"==typeof e&&0<=e?e:16777215,this.dirty=!0}},align:{get:function(){return this._font.align},set:function(e){this._font.align=e||"left",this.dirty=!0}},font:{get:function(){return this._font},set:function(e){e&&("string"==typeof e?(e=e.split(" "),this._font.name=1===e.length?e[0]:e.slice(1).join(" "),this._font.size=2<=e.length?parseInt(e[0],10):_.fonts[this._font.name].size):(this._font.name=e.name,this._font.size="number"==typeof e.size?e.size:parseInt(e.size,10)),this.dirty=!0)}},text:{get:function(){return this._text},set:function(e){e=e.toString()||" ",this._text!==e&&(this._text=e,this.dirty=!0)}}}),_.prototype.updateText=function(){for(var e=_.fonts[this._font.name],t=new v.Point,i=null,n=[],a=0,o=0,r=[],s=0,l=this._font.size/e.size,c=-1,u=0;u<this.text.length;u++){var p=this.text.charCodeAt(u);if(c=/(\s)/.test(this.text.charAt(u))?u:c,/(?:\r\n|\r|\n)/.test(this.text.charAt(u)))r.push(a),o=Math.max(o,a),s++,t.x=0,t.y+=e.lineHeight,i=null;else if(-1!==c&&0<this.maxWidth&&t.x*l>this.maxWidth)n.splice(c,u-c),u=c,c=-1,r.push(a),o=Math.max(o,a),s++,t.x=0,t.y+=e.lineHeight,i=null;else{var d=e.chars[p];d&&(i&&d.kerning[i]&&(t.x+=d.kerning[i]),n.push({texture:d.texture,line:s,charCode:p,position:new v.Point(t.x+d.xOffset,t.y+d.yOffset)}),a=t.x+(d.texture.width+d.xOffset),t.x+=d.xAdvance,i=p)}}r.push(a),o=Math.max(o,a);var f=[];for(u=0;u<=s;u++){var h=0;"right"===this._font.align?h=o-r[u]:"center"===this._font.align&&(h=(o-r[u])/2),f.push(h)}var m=n.length,b=this.tint;for(u=0;u<m;u++){var g=this._glyphs[u];g?g.texture=n[u].texture:(g=new v.Sprite(n[u].texture),this._glyphs.push(g)),g.position.x=(n[u].position.x+f[n[u].line])*l,g.position.y=n[u].position.y*l,g.scale.x=g.scale.y=l,g.tint=b,g.parent||this.addChild(g)}for(u=m;u<this._glyphs.length;++u)this.removeChild(this._glyphs[u]);this.textWidth=o*l,this.textHeight=(t.y+e.lineHeight)*l},_.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},_.prototype.getLocalBounds=function(){return this.validate(),v.Container.prototype.getLocalBounds.call(this)},_.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},_.fonts={}},{"../core":29}],80:[function(e,t,i){var n=e("../core");function a(e){n.Sprite.call(this,e[0]),this._textures=e,this.animationSpeed=1,this.loop=!0,this.onComplete=null,this._currentTime=0,this.playing=!1}(a.prototype=Object.create(n.Sprite.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{totalFrames:{get:function(){return this._textures.length}},textures:{get:function(){return this._textures},set:function(e){this._textures=e,this.texture=this._textures[Math.floor(this._currentTime)%this._textures.length]}},currentFrame:{get:function(){return Math.floor(this._currentTime)%this._textures.length}}}),a.prototype.stop=function(){this.playing&&(this.playing=!1,n.ticker.shared.remove(this.update,this))},a.prototype.play=function(){this.playing||(this.playing=!0,n.ticker.shared.add(this.update,this))},a.prototype.gotoAndStop=function(e){this.stop(),this._currentTime=e;var t=Math.floor(this._currentTime);this._texture=this._textures[t%this._textures.length]},a.prototype.gotoAndPlay=function(e){this._currentTime=e,this.play()},a.prototype.update=function(e){this._currentTime+=this.animationSpeed*e;var t=Math.floor(this._currentTime);t<0?this.loop?this._texture=this._textures[this._textures.length-1+t%this._textures.length]:(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this.loop||t<this._textures.length?this._texture=this._textures[t%this._textures.length]:t>=this._textures.length&&(this.gotoAndStop(this.textures.length-1),this.onComplete&&this.onComplete())},a.prototype.destroy=function(){this.stop(),n.Sprite.prototype.destroy.call(this)},a.fromFrames=function(e){for(var t=[],i=0;i<e.length;++i)t.push(new n.Texture.fromFrame(e[i]));return new a(t)},a.fromImages=function(e){for(var t=[],i=0;i<e.length;++i)t.push(new n.Texture.fromImage(e[i]));return new a(t)}},{"../core":29}],81:[function(e,t,i){var c=e("../core"),o=new c.Point;function r(e,t,i){c.Sprite.call(this,e),this.tileScale=new c.Point(1,1),this.tilePosition=new c.Point(0,0),this._width=t||100,this._height=i||100,this._uvs=new c.TextureUvs,this._canvasPattern=null,this.shader=new c.AbstractFilter(["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","uniform mat3 projectionMatrix;","uniform vec4 uFrame;","uniform vec4 uTransform;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vec2 coord = aTextureCoord;","   coord -= uTransform.xy;","   coord /= uTransform.zw;","   vTextureCoord = coord;","   vColor = vec4(aColor.rgb * aColor.a, aColor.a);","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform vec4 uFrame;","uniform vec2 uPixelSize;","void main(void){","   vec2 coord = mod(vTextureCoord, uFrame.zw);","   coord = clamp(coord, uPixelSize, uFrame.zw - uPixelSize);","   coord += uFrame.xy;","   gl_FragColor =  texture2D(uSampler, coord) * vColor ;","}"].join("\n"),{uFrame:{type:"4fv",value:[0,0,1,1]},uTransform:{type:"4fv",value:[0,0,1,1]},uPixelSize:{type:"2fv",value:[1,1]}})}(r.prototype=Object.create(c.Sprite.prototype)).constructor=r,t.exports=r,Object.defineProperties(r.prototype,{width:{get:function(){return this._width},set:function(e){this._width=e}},height:{get:function(){return this._height},set:function(e){this._height=e}}}),r.prototype._onTextureUpdate=function(){},r.prototype._renderWebGL=function(e){var t=this._texture;if(t&&t._uvs){var i=t._uvs,n=t._frame.width,a=t._frame.height,o=t.baseTexture.width,r=t.baseTexture.height;t._uvs=this._uvs,t._frame.width=this.width,t._frame.height=this.height,this.shader.uniforms.uPixelSize.value[0]=1/o,this.shader.uniforms.uPixelSize.value[1]=1/r,this.shader.uniforms.uFrame.value[0]=i.x0,this.shader.uniforms.uFrame.value[1]=i.y0,this.shader.uniforms.uFrame.value[2]=i.x1-i.x0,this.shader.uniforms.uFrame.value[3]=i.y2-i.y0,this.shader.uniforms.uTransform.value[0]=this.tilePosition.x%(n*this.tileScale.x)/this._width,this.shader.uniforms.uTransform.value[1]=this.tilePosition.y%(a*this.tileScale.y)/this._height,this.shader.uniforms.uTransform.value[2]=o/this._width*this.tileScale.x,this.shader.uniforms.uTransform.value[3]=r/this._height*this.tileScale.y,e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this),t._uvs=i,t._frame.width=n,t._frame.height=a}},r.prototype._renderCanvas=function(e){var t=this._texture;if(t.baseTexture.hasLoaded){var i=e.context,n=this.worldTransform,a=e.resolution,o=t.baseTexture,r=this.tilePosition.x%(t._frame.width*this.tileScale.x),s=this.tilePosition.y%(t._frame.height*this.tileScale.y);if(!this._canvasPattern){var l=new c.CanvasBuffer(t._frame.width,t._frame.height);l.context.drawImage(o.source,-t._frame.x,-t._frame.y),this._canvasPattern=l.context.createPattern(l.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(n.a*a,n.b*a,n.c*a,n.d*a,n.tx*a,n.ty*a),i.scale(this.tileScale.x,this.tileScale.y),i.translate(r+this.anchor.x*-this._width,s+this.anchor.y*-this._height),this.blendMode!==e.currentBlendMode&&(e.currentBlendMode=this.blendMode,i.globalCompositeOperation=e.blendModes[e.currentBlendMode]),i.fillStyle=this._canvasPattern,i.fillRect(-r,-s,this._width/this.tileScale.x,this._height/this.tileScale.y)}},r.prototype.getBounds=function(){var e,t,i,n,a=this._width,o=this._height,r=a*(1-this.anchor.x),s=a*-this.anchor.x,l=o*(1-this.anchor.y),c=o*-this.anchor.y,u=this.worldTransform,p=u.a,d=u.b,f=u.c,h=u.d,m=u.tx,b=u.ty,g=p*s+f*c+m,v=h*c+d*s+b,_=p*r+f*c+m,y=h*c+d*r+b,w=p*r+f*l+m,S=h*l+d*r+b,x=p*s+f*l+m,k=h*l+d*s+b;e=x<(e=w<(e=_<(e=g)?_:e)?w:e)?x:e,i=k<(i=S<(i=y<(i=v)?y:i)?S:i)?k:i,t=(t=(t=(t=g)<_?_:t)<w?w:t)<x?x:t,n=(n=(n=(n=v)<y?y:n)<S?S:n)<k?k:n;var $=this._bounds;return $.x=e,$.width=t-e,$.y=i,$.height=n-i,this._currentBounds=$},r.prototype.containsPoint=function(e){this.worldTransform.applyInverse(e,o);var t,i=this._width,n=this._height,a=-i*this.anchor.x;return o.x>a&&o.x<a+i&&(t=-n*this.anchor.y,o.y>t&&o.y<t+n)},r.prototype.destroy=function(){c.Sprite.prototype.destroy.call(this),this.tileScale=null,this._tileScaleOffset=null,this.tilePosition=null,this._uvs=null},r.fromFrame=function(e,t,i){var n=c.utils.TextureCache[e];if(!n)throw new Error('The frameId "'+e+'" does not exist in the texture cache '+this);return new r(n,t,i)},r.fromImage=function(e,t,i,n,a){return new r(c.Texture.fromImage(e,n,a),t,i)}},{"../core":29}],82:[function(e,t,i){var s=e("../core"),n=s.DisplayObject,l=new s.Matrix;n.prototype._cacheAsBitmap=!1,n.prototype._originalRenderWebGL=null,n.prototype._originalRenderCanvas=null,n.prototype._originalUpdateTransform=null,n.prototype._originalHitTest=null,n.prototype._originalDestroy=null,n.prototype._cachedSprite=null,Object.defineProperties(n.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){this._cacheAsBitmap!==e&&((this._cacheAsBitmap=e)?(this._originalRenderWebGL=this.renderWebGL,this._originalRenderCanvas=this.renderCanvas,this._originalUpdateTransform=this.updateTransform,this._originalGetBounds=this.getBounds,this._originalDestroy=this.destroy,this._originalContainsPoint=this.containsPoint,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(this._cachedSprite&&this._destroyCachedDisplayObject(),this.renderWebGL=this._originalRenderWebGL,this.renderCanvas=this._originalRenderCanvas,this.getBounds=this._originalGetBounds,this.destroy=this._originalDestroy,this.updateTransform=this._originalUpdateTransform,this.containsPoint=this._originalContainsPoint))}}}),n.prototype._renderCachedWebGL=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cachedSprite.worldAlpha=this.worldAlpha,e.setObjectRenderer(e.plugins.sprite),e.plugins.sprite.render(this._cachedSprite))},n.prototype._initCachedDisplayObject=function(e){if(!this._cachedSprite){e.currentRenderer.flush();var t=this.getLocalBounds().clone();if(this._filters){var i=this._filters[0].padding;t.x-=i,t.y-=i,t.width+=2*i,t.height+=2*i}var n=e.currentRenderTarget,a=e.filterManager.filterStack,o=new s.RenderTexture(e,0|t.width,0|t.height),r=l;r.tx=-t.x,r.ty=-t.y,this.renderWebGL=this._originalRenderWebGL,o.render(this,r,!0,!0),e.setRenderTarget(n),e.filterManager.filterStack=a,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new s.Sprite(o),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},n.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cachedSprite.worldAlpha=this.worldAlpha,this._cachedSprite.renderCanvas(e))},n.prototype._initCachedDisplayObjectCanvas=function(e){if(!this._cachedSprite){var t=this.getLocalBounds(),i=e.context,n=new s.RenderTexture(e,0|t.width,0|t.height),a=l;a.tx=-t.x,a.ty=-t.y,this.renderCanvas=this._originalRenderCanvas,n.render(this,a,!0),e.context=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.getBounds=this._getCachedBounds,this._cachedSprite=new s.Sprite(n),this._cachedSprite.worldTransform=this.worldTransform,this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this.updateTransform(),this.containsPoint=this._cachedSprite.containsPoint.bind(this._cachedSprite)}},n.prototype._getCachedBounds=function(){return this._cachedSprite._currentBounds=null,this._cachedSprite.getBounds()},n.prototype._destroyCachedDisplayObject=function(){this._cachedSprite._texture.destroy(),this._cachedSprite=null},n.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this._originalDestroy()}},{"../core":29}],83:[function(e,t,i){var n=e("../core");n.DisplayObject.prototype.name=null,n.Container.prototype.getChildByName=function(e){for(var t=0;t<this.children.length;t++)if(this.children[t].name===e)return this.children[t];return null}},{"../core":29}],84:[function(e,t,i){var n=e("../core");n.DisplayObject.prototype.getGlobalPosition=function(e){return e=e||new n.Point,this.parent?(this.displayObjectUpdateTransform(),e.x=this.worldTransform.tx,e.y=this.worldTransform.ty):(e.x=this.position.x,e.y=this.position.y),e}},{"../core":29}],85:[function(e,t,i){e("./cacheAsBitmap"),e("./getChildByName"),e("./getGlobalPosition"),t.exports={MovieClip:e("./MovieClip"),TilingSprite:e("./TilingSprite"),BitmapText:e("./BitmapText")}},{"./BitmapText":79,"./MovieClip":80,"./TilingSprite":81,"./cacheAsBitmap":82,"./getChildByName":83,"./getGlobalPosition":84}],86:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nuniform vec4 dimensions;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 uv = gl_FragCoord.xy;\n\n    vec3 col = texture2D(uSampler, floor( uv / pixelSize ) * pixelSize / dimensions.xy).rgb;\n\n    float gray = (col.r + col.g + col.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    vec2 p = mod( uv / ( pixelSize * 0.5 ), 2.0) - vec2(1.0);\n    col = col * character(n, p);\n\n    gl_FragColor = vec4(col, 1.0);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"1f",value:8}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.uniforms.pixelSize.value=e}}})},{"../../core":29}],87:[function(e,t,i){var a=e("../../core"),n=e("../blur/BlurXFilter"),o=e("../blur/BlurYFilter");function r(){a.AbstractFilter.call(this),this.blurXFilter=new n,this.blurYFilter=new o,this.defaultFilter=new a.AbstractFilter}(r.prototype=Object.create(a.AbstractFilter.prototype)).constructor=r,(t.exports=r).prototype.applyFilter=function(e,t,i){var n=e.filterManager.getRenderTarget(!0);this.defaultFilter.applyFilter(e,t,i),this.blurXFilter.applyFilter(e,t,n),e.blendModeManager.setBlendMode(a.BLEND_MODES.SCREEN),this.blurYFilter.applyFilter(e,n,i),e.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL),e.filterManager.returnRenderTarget(n)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}})},{"../../core":29,"../blur/BlurXFilter":90,"../blur/BlurYFilter":91}],88:[function(e,t,i){var n=e("../../core");function a(e,t){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform float dirX;\nuniform float dirY;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[3];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[0] = aTextureCoord + vec2( (0.004 * strength) * dirX, (0.004 * strength) * dirY );\n    vBlurTexCoords[1] = aTextureCoord + vec2( (0.008 * strength) * dirX, (0.008 * strength) * dirY );\n    vBlurTexCoords[2] = aTextureCoord + vec2( (0.012 * strength) * dirX, (0.012 * strength) * dirY );\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[3];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vTextureCoord     ) * 0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0]) * 0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1]) * 0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2]) * 0.004431848411938341;\n}\n",{strength:{type:"1f",value:1},dirX:{type:"1f",value:e||0},dirY:{type:"1f",value:t||0}}),this.defaultFilter=new n.AbstractFilter,this.passes=1,this.dirX=e||0,this.dirY=t||0,this.strength=4}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype.applyFilter=function(e,t,i,n){var a=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.width/t.size.width),1===this.passes)e.filterManager.applyFilter(a,t,i,n);else{var o=e.filterManager.getRenderTarget(!0);e.filterManager.applyFilter(a,t,o,n);for(var r=0;r<this.passes-2;r++)e.filterManager.applyFilter(a,o,o,n);e.filterManager.applyFilter(a,o,i,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*e,this.strength=e}},dirX:{get:function(){return this.dirX},set:function(e){this.uniforms.dirX.value=e}},dirY:{get:function(){return this.dirY},set:function(e){this.uniforms.dirY.value=e}}})},{"../../core":29}],89:[function(e,t,i){var n=e("../../core"),a=e("./BlurXFilter"),o=e("./BlurYFilter");function r(){n.AbstractFilter.call(this),this.blurXFilter=new a,this.blurYFilter=new o}(r.prototype=Object.create(n.AbstractFilter.prototype)).constructor=r,(t.exports=r).prototype.applyFilter=function(e,t,i){var n=e.filterManager.getRenderTarget(!0);this.blurXFilter.applyFilter(e,t,n),this.blurYFilter.applyFilter(e,n,i),e.filterManager.returnRenderTarget(n)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.padding=.5*Math.abs(e),this.blurXFilter.blur=this.blurYFilter.blur=e}},passes:{get:function(){return this.blurXFilter.passes},set:function(e){this.blurXFilter.passes=this.blurYFilter.passes=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e}}})},{"../../core":29,"./BlurXFilter":90,"./BlurYFilter":91}],90:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(-0.012 * strength, 0.0);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(-0.008 * strength, 0.0);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(-0.004 * strength, 0.0);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2( 0.004 * strength, 0.0);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2( 0.008 * strength, 0.0);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2( 0.012 * strength, 0.0);\n\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype.applyFilter=function(e,t,i,n){var a=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.width/t.size.width),1===this.passes)e.filterManager.applyFilter(a,t,i,n);else{for(var o=e.filterManager.getRenderTarget(!0),r=t,s=o,l=0;l<this.passes-1;l++){e.filterManager.applyFilter(a,r,s,!0);var c=s;s=r,r=c}e.filterManager.applyFilter(a,r,i,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*Math.abs(e),this.strength=e}}})},{"../../core":29}],91:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    gl_FragColor += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n}\n",{strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype.applyFilter=function(e,t,i,n){var a=this.getShader(e);if(this.uniforms.strength.value=Math.abs(this.strength)/4/this.passes*(t.frame.height/t.size.height),1===this.passes)e.filterManager.applyFilter(a,t,i,n);else{for(var o=e.filterManager.getRenderTarget(!0),r=t,s=o,l=0;l<this.passes-1;l++){e.filterManager.applyFilter(a,r,s,!0);var c=s;s=r,r=c}e.filterManager.applyFilter(a,r,i,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*Math.abs(e),this.strength=e}}})},{"../../core":29}],92:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 delta;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta * percent);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{delta:{type:"v2",value:{x:.1,y:0}}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a},{"../../core":29}],93:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[25];\n\nvoid main(void)\n{\n\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.r = (m[0] * c.r);\n        gl_FragColor.r += (m[1] * c.g);\n        gl_FragColor.r += (m[2] * c.b);\n        gl_FragColor.r += (m[3] * c.a);\n        gl_FragColor.r += m[4];\n\n    gl_FragColor.g = (m[5] * c.r);\n        gl_FragColor.g += (m[6] * c.g);\n        gl_FragColor.g += (m[7] * c.b);\n        gl_FragColor.g += (m[8] * c.a);\n        gl_FragColor.g += m[9];\n\n     gl_FragColor.b = (m[10] * c.r);\n        gl_FragColor.b += (m[11] * c.g);\n        gl_FragColor.b += (m[12] * c.b);\n        gl_FragColor.b += (m[13] * c.a);\n        gl_FragColor.b += m[14];\n\n     gl_FragColor.a = (m[15] * c.r);\n        gl_FragColor.a += (m[16] * c.g);\n        gl_FragColor.a += (m[17] * c.b);\n        gl_FragColor.a += (m[18] * c.a);\n        gl_FragColor.a += m[19];\n\n}\n",{m:{type:"1fv",value:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype._loadMatrix=function(e,t){var i=e;(t=!!t)&&(this._multiply(i,this.uniforms.m.value,e),i=this._colorMatrix(i)),this.uniforms.m.value=i},a.prototype._multiply=function(e,t,i){return e[0]=t[0]*i[0]+t[1]*i[5]+t[2]*i[10]+t[3]*i[15],e[1]=t[0]*i[1]+t[1]*i[6]+t[2]*i[11]+t[3]*i[16],e[2]=t[0]*i[2]+t[1]*i[7]+t[2]*i[12]+t[3]*i[17],e[3]=t[0]*i[3]+t[1]*i[8]+t[2]*i[13]+t[3]*i[18],e[4]=t[0]*i[4]+t[1]*i[9]+t[2]*i[14]+t[3]*i[19],e[5]=t[5]*i[0]+t[6]*i[5]+t[7]*i[10]+t[8]*i[15],e[6]=t[5]*i[1]+t[6]*i[6]+t[7]*i[11]+t[8]*i[16],e[7]=t[5]*i[2]+t[6]*i[7]+t[7]*i[12]+t[8]*i[17],e[8]=t[5]*i[3]+t[6]*i[8]+t[7]*i[13]+t[8]*i[18],e[9]=t[5]*i[4]+t[6]*i[9]+t[7]*i[14]+t[8]*i[19],e[10]=t[10]*i[0]+t[11]*i[5]+t[12]*i[10]+t[13]*i[15],e[11]=t[10]*i[1]+t[11]*i[6]+t[12]*i[11]+t[13]*i[16],e[12]=t[10]*i[2]+t[11]*i[7]+t[12]*i[12]+t[13]*i[17],e[13]=t[10]*i[3]+t[11]*i[8]+t[12]*i[13]+t[13]*i[18],e[14]=t[10]*i[4]+t[11]*i[9]+t[12]*i[14]+t[13]*i[19],e[15]=t[15]*i[0]+t[16]*i[5]+t[17]*i[10]+t[18]*i[15],e[16]=t[15]*i[1]+t[16]*i[6]+t[17]*i[11]+t[18]*i[16],e[17]=t[15]*i[2]+t[16]*i[7]+t[17]*i[12]+t[18]*i[17],e[18]=t[15]*i[3]+t[16]*i[8]+t[17]*i[13]+t[18]*i[18],e[19]=t[15]*i[4]+t[16]*i[9]+t[17]*i[14]+t[18]*i[19],e},a.prototype._colorMatrix=function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t},a.prototype.brightness=function(e,t){var i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},a.prototype.grayscale=a.prototype.greyscale=function(e,t){var i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},a.prototype.blackAndWhite=function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)},a.prototype.hue=function(e,t){e=(e||0)/180*Math.PI;var i=Math.cos(e),n=Math.sin(e),a=[.213+.787*i+-.213*n,.715+-.715*i+-.715*n,.072+-.072*i+.928*n,0,0,.213+-.213*i+.143*n,.715+i*(1-.715)+.14*n,.072+-.072*i+-.283*n,0,0,.213+-.213*i+-.787*n,.715+-.715*i+.715*n,.072+.928*i+.072*n,0,0,0,0,0,1,0];this._loadMatrix(a,t)},a.prototype.contrast=function(e,t){var i=(e||0)+1,n=-128*(i-1),a=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0];this._loadMatrix(a,t)},a.prototype.saturate=function(e,t){var i=2*(e||0)/3+1,n=-.5*(i-1),a=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(a,t)},a.prototype.desaturate=function(e){this.saturate(-1)},a.prototype.negative=function(e){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],e)},a.prototype.sepia=function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)},a.prototype.technicolor=function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)},a.prototype.polaroid=function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)},a.prototype.toBGR=function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)},a.prototype.kodachrome=function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)},a.prototype.browni=function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)},a.prototype.vintage=function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)},a.prototype.colorTone=function(e,t,i,n,a){var o=((i=i||16770432)>>16&255)/255,r=(i>>8&255)/255,s=(255&i)/255,l=((n=n||3375104)>>16&255)/255,c=(n>>8&255)/255,u=(255&n)/255,p=[.3,.59,.11,0,0,o,r,s,e=e||.2,0,l,c,u,t=t||.15,0,o-l,r-c,s-u,0,0];this._loadMatrix(p,a)},a.prototype.night=function(e,t){var i=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(i,t)},a.prototype.predator=function(e,t){var i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,t)},a.prototype.lsd=function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)},a.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperties(a.prototype,{matrix:{get:function(){return this.uniforms.m.value},set:function(e){this.uniforms.m.value=e}}})},{"../../core":29}],94:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float step;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    color = floor(color * step) / step;\n\n    gl_FragColor = color;\n}\n",{step:{type:"1f",value:5}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{step:{get:function(){return this.uniforms.step.value},set:function(e){this.uniforms.step.value=e}}})},{"../../core":29}],95:[function(e,t,i){var n=e("../../core");function a(e,t,i){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n",{matrix:{type:"1fv",value:new Float32Array(e)},texelSize:{type:"v2",value:{x:1/t,y:1/i}}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{matrix:{get:function(){return this.uniforms.matrix.value},set:function(e){this.uniforms.matrix.value=new Float32Array(e)}},width:{get:function(){return 1/this.uniforms.texelSize.value.x},set:function(e){this.uniforms.texelSize.value.x=1/e}},height:{get:function(){return 1/this.uniforms.texelSize.value.y},set:function(e){this.uniforms.texelSize.value.y=1/e}}})},{"../../core":29}],96:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a},{"../../core":29}],97:[function(e,t,i){var n=e("../../core");function a(e){var t=new n.Matrix;e.renderable=!1,n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vMapCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vMapCoord;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nvoid main(void)\n{\n   vec4 original =  texture2D(uSampler, vTextureCoord);\n   vec4 map =  texture2D(mapSampler, vMapCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y));\n}\n",{mapSampler:{type:"sampler2D",value:e.texture},otherMatrix:{type:"mat3",value:t.toArray(!0)},scale:{type:"v2",value:{x:1,y:1}}}),this.maskSprite=e,this.maskMatrix=t,this.scale=new n.Point(20,20)}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype.applyFilter=function(e,t,i){var n=e.filterManager;n.calculateMappedMatrix(t.frame,this.maskSprite,this.maskMatrix),this.uniforms.otherMatrix.value=this.maskMatrix.toArray(!0),this.uniforms.scale.value.x=this.scale.x*(1/t.frame.width),this.uniforms.scale.value.y=this.scale.y*(1/t.frame.height);var a=this.getShader(e);n.applyFilter(a,t,i)},Object.defineProperties(a.prototype,{map:{get:function(){return this.uniforms.mapSampler.value},set:function(e){this.uniforms.mapSampler.value=e}}})},{"../../core":29}],98:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 dimensions;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * dimensions.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n",{scale:{type:"1f",value:1},angle:{type:"1f",value:5},dimensions:{type:"4fv",value:[0,0,0,0]}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{scale:{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},angle:{get:function(){return this.uniforms.angle.value},set:function(e){this.uniforms.angle.value=e}}})},{"../../core":29}],99:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nuniform float strength;\nuniform vec2 offset;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying vec2 vBlurTexCoords[6];\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3((aVertexPosition+offset), 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n\n    vBlurTexCoords[ 0] = aTextureCoord + vec2(0.0, -0.012 * strength);\n    vBlurTexCoords[ 1] = aTextureCoord + vec2(0.0, -0.008 * strength);\n    vBlurTexCoords[ 2] = aTextureCoord + vec2(0.0, -0.004 * strength);\n    vBlurTexCoords[ 3] = aTextureCoord + vec2(0.0,  0.004 * strength);\n    vBlurTexCoords[ 4] = aTextureCoord + vec2(0.0,  0.008 * strength);\n    vBlurTexCoords[ 5] = aTextureCoord + vec2(0.0,  0.012 * strength);\n\n   vColor = vec4(aColor.rgb * aColor.a, aColor.a);\n}\n","precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vBlurTexCoords[6];\nvarying vec4 vColor;\n\nuniform vec3 color;\nuniform float alpha;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 sum = vec4(0.0);\n\n    sum += texture2D(uSampler, vBlurTexCoords[ 0])*0.004431848411938341;\n    sum += texture2D(uSampler, vBlurTexCoords[ 1])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 2])*0.2419707245191454;\n    sum += texture2D(uSampler, vTextureCoord     )*0.3989422804014327;\n    sum += texture2D(uSampler, vBlurTexCoords[ 3])*0.2419707245191454;\n    sum += texture2D(uSampler, vBlurTexCoords[ 4])*0.05399096651318985;\n    sum += texture2D(uSampler, vBlurTexCoords[ 5])*0.004431848411938341;\n\n    gl_FragColor = vec4( color.rgb * sum.a * alpha, sum.a * alpha );\n}\n",{blur:{type:"1f",value:1/512},color:{type:"c",value:[0,0,0]},alpha:{type:"1f",value:.7},offset:{type:"2f",value:[5,5]},strength:{type:"1f",value:1}}),this.passes=1,this.strength=4}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype.applyFilter=function(e,t,i,n){var a=this.getShader(e);if(this.uniforms.strength.value=this.strength/4/this.passes*(t.frame.height/t.size.height),1===this.passes)e.filterManager.applyFilter(a,t,i,n);else{for(var o=e.filterManager.getRenderTarget(!0),r=t,s=o,l=0;l<this.passes-1;l++){e.filterManager.applyFilter(a,r,s,n);var c=s;s=r,r=c}e.filterManager.applyFilter(a,r,i,n),e.filterManager.returnRenderTarget(o)}},Object.defineProperties(a.prototype,{blur:{get:function(){return this.strength},set:function(e){this.padding=.5*e,this.strength=e}}})},{"../../core":29}],100:[function(e,t,i){var a=e("../../core"),n=e("../blur/BlurXFilter"),o=e("./BlurYTintFilter");function r(){a.AbstractFilter.call(this),this.blurXFilter=new n,this.blurYTintFilter=new o,this.defaultFilter=new a.AbstractFilter,this.padding=30,this._dirtyPosition=!0,this._angle=45*Math.PI/180,this._distance=10,this.alpha=.75,this.hideObject=!1,this.blendMode=a.BLEND_MODES.MULTIPLY}(r.prototype=Object.create(a.AbstractFilter.prototype)).constructor=r,(t.exports=r).prototype.applyFilter=function(e,t,i){var n=e.filterManager.getRenderTarget(!0);this._dirtyPosition&&(this._dirtyPosition=!1,this.blurYTintFilter.uniforms.offset.value[0]=Math.sin(this._angle)*this._distance,this.blurYTintFilter.uniforms.offset.value[1]=Math.cos(this._angle)*this._distance),this.blurXFilter.applyFilter(e,t,n),e.blendModeManager.setBlendMode(this.blendMode),this.blurYTintFilter.applyFilter(e,n,i),e.blendModeManager.setBlendMode(a.BLEND_MODES.NORMAL),this.hideObject||this.defaultFilter.applyFilter(e,t,i),e.filterManager.returnRenderTarget(n)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYTintFilter.blur=e}},blurX:{get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e}},blurY:{get:function(){return this.blurYTintFilter.blur},set:function(e){this.blurYTintFilter.blur=e}},color:{get:function(){return a.utils.rgb2hex(this.blurYTintFilter.uniforms.color.value)},set:function(e){this.blurYTintFilter.uniforms.color.value=a.utils.hex2rgb(e)}},alpha:{get:function(){return this.blurYTintFilter.uniforms.alpha.value},set:function(e){this.blurYTintFilter.uniforms.alpha.value=e}},distance:{get:function(){return this._distance},set:function(e){this._dirtyPosition=!0,this._distance=e}},angle:{get:function(){return this._angle},set:function(e){this._dirtyPosition=!0,this._angle=e}}})},{"../../core":29,"../blur/BlurXFilter":90,"./BlurYTintFilter":99}],101:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\nuniform float gray;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix(gl_FragColor.rgb, vec3(0.2126*gl_FragColor.r + 0.7152*gl_FragColor.g + 0.0722*gl_FragColor.b), gray);\n}\n",{gray:{type:"1f",value:1}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{gray:{get:function(){return this.uniforms.gray.value},set:function(e){this.uniforms.gray.value=e}}})},{"../../core":29}],102:[function(e,t,i){t.exports={AsciiFilter:e("./ascii/AsciiFilter"),BloomFilter:e("./bloom/BloomFilter"),BlurFilter:e("./blur/BlurFilter"),BlurXFilter:e("./blur/BlurXFilter"),BlurYFilter:e("./blur/BlurYFilter"),BlurDirFilter:e("./blur/BlurDirFilter"),ColorMatrixFilter:e("./color/ColorMatrixFilter"),ColorStepFilter:e("./color/ColorStepFilter"),ConvolutionFilter:e("./convolution/ConvolutionFilter"),CrossHatchFilter:e("./crosshatch/CrossHatchFilter"),DisplacementFilter:e("./displacement/DisplacementFilter"),DotScreenFilter:e("./dot/DotScreenFilter"),GrayFilter:e("./gray/GrayFilter"),DropShadowFilter:e("./dropshadow/DropShadowFilter"),InvertFilter:e("./invert/InvertFilter"),NoiseFilter:e("./noise/NoiseFilter"),NormalMapFilter:e("./normal/NormalMapFilter"),PixelateFilter:e("./pixelate/PixelateFilter"),RGBSplitFilter:e("./rgb/RGBSplitFilter"),ShockwaveFilter:e("./shockwave/ShockwaveFilter"),SepiaFilter:e("./sepia/SepiaFilter"),SmartBlurFilter:e("./blur/SmartBlurFilter"),TiltShiftFilter:e("./tiltshift/TiltShiftFilter"),TiltShiftXFilter:e("./tiltshift/TiltShiftXFilter"),TiltShiftYFilter:e("./tiltshift/TiltShiftYFilter"),TwistFilter:e("./twist/TwistFilter")}},{"./ascii/AsciiFilter":86,"./bloom/BloomFilter":87,"./blur/BlurDirFilter":88,"./blur/BlurFilter":89,"./blur/BlurXFilter":90,"./blur/BlurYFilter":91,"./blur/SmartBlurFilter":92,"./color/ColorMatrixFilter":93,"./color/ColorStepFilter":94,"./convolution/ConvolutionFilter":95,"./crosshatch/CrossHatchFilter":96,"./displacement/DisplacementFilter":97,"./dot/DotScreenFilter":98,"./dropshadow/DropShadowFilter":100,"./gray/GrayFilter":101,"./invert/InvertFilter":103,"./noise/NoiseFilter":104,"./normal/NormalMapFilter":105,"./pixelate/PixelateFilter":106,"./rgb/RGBSplitFilter":107,"./sepia/SepiaFilter":108,"./shockwave/ShockwaveFilter":109,"./tiltshift/TiltShiftFilter":111,"./tiltshift/TiltShiftXFilter":112,"./tiltshift/TiltShiftYFilter":113,"./twist/TwistFilter":114}],103:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform float invert;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    gl_FragColor.rgb = mix( (vec3(1)-gl_FragColor.rgb) * gl_FragColor.a, gl_FragColor.rgb, 1.0 - invert);\n}\n",{invert:{type:"1f",value:1}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{invert:{get:function(){return this.uniforms.invert.value},set:function(e){this.uniforms.invert.value=e}}})},{"../../core":29}],104:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float noise;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    float diff = (rand(vTextureCoord) - 0.5) * noise;\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    gl_FragColor = color;\n}\n",{noise:{type:"1f",value:.5}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{noise:{get:function(){return this.uniforms.noise.value},set:function(e){this.uniforms.noise.value=e}}})},{"../../core":29}],105:[function(e,t,i){var n=e("../../core");function a(e){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D displacementMap;\nuniform sampler2D uSampler;\n\nuniform vec4 dimensions;\n\nconst vec2 Resolution = vec2(1.0,1.0);      //resolution of screen\nuniform vec3 LightPos;    //light position, normalized\nconst vec4 LightColor = vec4(1.0, 1.0, 1.0, 1.0);      //light RGBA -- alpha is intensity\nconst vec4 AmbientColor = vec4(1.0, 1.0, 1.0, 0.5);    //ambient RGBA -- alpha is intensity\nconst vec3 Falloff = vec3(0.0, 1.0, 0.2);         //attenuation coefficients\n\nuniform vec3 LightDir; // = vec3(1.0, 0.0, 1.0);\n\nuniform vec2 mapDimensions; // = vec2(256.0, 256.0);\n\n\nvoid main(void)\n{\n    vec2 mapCords = vTextureCoord.xy;\n\n    vec4 color = texture2D(uSampler, vTextureCoord.st);\n    vec3 nColor = texture2D(displacementMap, vTextureCoord.st).rgb;\n\n\n    mapCords *= vec2(dimensions.x/512.0, dimensions.y/512.0);\n\n    mapCords.y *= -1.0;\n    mapCords.y += 1.0;\n\n    // RGBA of our diffuse color\n    vec4 DiffuseColor = texture2D(uSampler, vTextureCoord);\n\n    // RGB of our normal map\n    vec3 NormalMap = texture2D(displacementMap, mapCords).rgb;\n\n    // The delta position of light\n    // vec3 LightDir = vec3(LightPos.xy - (gl_FragCoord.xy / Resolution.xy), LightPos.z);\n    vec3 LightDir = vec3(LightPos.xy - (mapCords.xy), LightPos.z);\n\n    // Correct for aspect ratio\n    // LightDir.x *= Resolution.x / Resolution.y;\n\n    // Determine distance (used for attenuation) BEFORE we normalize our LightDir\n    float D = length(LightDir);\n\n    // normalize our vectors\n    vec3 N = normalize(NormalMap * 2.0 - 1.0);\n    vec3 L = normalize(LightDir);\n\n    // Pre-multiply light color with intensity\n    // Then perform 'N dot L' to determine our diffuse term\n    vec3 Diffuse = (LightColor.rgb * LightColor.a) * max(dot(N, L), 0.0);\n\n    // pre-multiply ambient color with intensity\n    vec3 Ambient = AmbientColor.rgb * AmbientColor.a;\n\n    // calculate attenuation\n    float Attenuation = 1.0 / ( Falloff.x + (Falloff.y*D) + (Falloff.z*D*D) );\n\n    // the calculation which brings it all together\n    vec3 Intensity = Ambient + Diffuse * Attenuation;\n    vec3 FinalColor = DiffuseColor.rgb * Intensity;\n    gl_FragColor = vColor * vec4(FinalColor, DiffuseColor.a);\n\n    // gl_FragColor = vec4(1.0, 0.0, 0.0, Attenuation); // vColor * vec4(FinalColor, DiffuseColor.a);\n\n/*\n    // normalise color\n    vec3 normal = normalize(nColor * 2.0 - 1.0);\n\n    vec3 deltaPos = vec3( (light.xy - gl_FragCoord.xy) / resolution.xy, light.z );\n\n    float lambert = clamp(dot(normal, lightDir), 0.0, 1.0);\n\n    float d = sqrt(dot(deltaPos, deltaPos));\n    float att = 1.0 / ( attenuation.x + (attenuation.y*d) + (attenuation.z*d*d) );\n\n    vec3 result = (ambientColor * ambientIntensity) + (lightColor.rgb * lambert) * att;\n    result *= color.rgb;\n\n    gl_FragColor = vec4(result, 1.0);\n*/\n}\n",{displacementMap:{type:"sampler2D",value:e},scale:{type:"2f",value:{x:15,y:15}},offset:{type:"2f",value:{x:0,y:0}},mapDimensions:{type:"2f",value:{x:1,y:1}},dimensions:{type:"4f",value:[0,0,0,0]},LightPos:{type:"3f",value:[0,1,0]}}),e.baseTexture._powerOf2=!0,e.baseTexture.hasLoaded?this.onTextureLoaded():e.baseTexture.once("loaded",this.onTextureLoaded,this)}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype.onTextureLoaded=function(){this.uniforms.mapDimensions.value.x=this.uniforms.displacementMap.value.width,this.uniforms.mapDimensions.value.y=this.uniforms.displacementMap.value.height},Object.defineProperties(a.prototype,{map:{get:function(){return this.uniforms.displacementMap.value},set:function(e){this.uniforms.displacementMap.value=e}},scale:{get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},offset:{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}}})},{"../../core":29}],106:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 dimensions;\nuniform vec2 pixelSize;\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n\n    vec2 size = dimensions.xy / pixelSize;\n\n    vec2 color = floor( ( vTextureCoord * size ) ) / size + pixelSize/dimensions.xy * 0.5;\n\n    gl_FragColor = texture2D(uSampler, color);\n}\n",{dimensions:{type:"4fv",value:new Float32Array([0,0,0,0])},pixelSize:{type:"v2",value:{x:10,y:10}}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{size:{get:function(){return this.uniforms.pixelSize.value},set:function(e){this.uniforms.pixelSize.value=e}}})},{"../../core":29}],107:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 dimensions;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/dimensions.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/dimensions.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/dimensions.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n",{red:{type:"v2",value:{x:20,y:20}},green:{type:"v2",value:{x:-20,y:20}},blue:{type:"v2",value:{x:20,y:-20}},dimensions:{type:"4fv",value:[0,0,0,0]}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{red:{get:function(){return this.uniforms.red.value},set:function(e){this.uniforms.red.value=e}},green:{get:function(){return this.uniforms.green.value},set:function(e){this.uniforms.green.value=e}},blue:{get:function(){return this.uniforms.blue.value},set:function(e){this.uniforms.blue.value=e}}})},{"../../core":29}],108:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float sepia;\n\nconst mat3 sepiaMatrix = mat3(0.3588, 0.7044, 0.1368, 0.2990, 0.5870, 0.1140, 0.2392, 0.4696, 0.0912);\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n   gl_FragColor.rgb = mix( gl_FragColor.rgb, gl_FragColor.rgb * sepiaMatrix, sepia);\n}\n",{sepia:{type:"1f",value:1}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{sepia:{get:function(){return this.uniforms.sepia.value},set:function(e){this.uniforms.sepia.value=e}}})},{"../../core":29}],109:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nuniform vec2 center;\nuniform vec3 params; // 10.0, 0.8, 0.1\nuniform float time;\n\nvoid main()\n{\n    vec2 uv = vTextureCoord;\n    vec2 texCoord = uv;\n\n    float dist = distance(uv, center);\n\n    if ( (dist <= (time + params.z)) && (dist >= (time - params.z)) )\n    {\n        float diff = (dist - time);\n        float powDiff = 1.0 - pow(abs(diff*params.x), params.y);\n\n        float diffTime = diff  * powDiff;\n        vec2 diffUV = normalize(uv - center);\n        texCoord = uv + (diffUV * diffTime);\n    }\n\n    gl_FragColor = texture2D(uSampler, texCoord);\n}\n",{center:{type:"v2",value:{x:.5,y:.5}},params:{type:"v3",value:{x:10,y:.8,z:.1}},time:{type:"1f",value:0}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{center:{get:function(){return this.uniforms.center.value},set:function(e){this.uniforms.center.value=e}},params:{get:function(){return this.uniforms.params.value},set:function(e){this.uniforms.params.value=e}},time:{get:function(){return this.uniforms.time.value},set:function(e){this.uniforms.time.value=e}}})},{"../../core":29}],110:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    gl_FragColor = color / total;\n    gl_FragColor.rgb /= gl_FragColor.a + 0.00001;\n}\n",{blur:{type:"1f",value:100},gradientBlur:{type:"1f",value:600},start:{type:"v2",value:{x:0,y:window.innerHeight/2}},end:{type:"v2",value:{x:600,y:window.innerHeight/2}},delta:{type:"v2",value:{x:30,y:30}},texSize:{type:"v2",value:{x:window.innerWidth,y:window.innerHeight}}}),this.updateDelta()}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,(t.exports=a).prototype.updateDelta=function(){this.uniforms.delta.value.x=0,this.uniforms.delta.value.y=0},Object.defineProperties(a.prototype,{blur:{get:function(){return this.uniforms.blur.value},set:function(e){this.uniforms.blur.value=e}},gradientBlur:{get:function(){return this.uniforms.gradientBlur.value},set:function(e){this.uniforms.gradientBlur.value=e}},start:{get:function(){return this.uniforms.start.value},set:function(e){this.uniforms.start.value=e,this.updateDelta()}},end:{get:function(){return this.uniforms.end.value},set:function(e){this.uniforms.end.value=e,this.updateDelta()}}})},{"../../core":29}],111:[function(e,t,i){var n=e("../../core"),a=e("./TiltShiftXFilter"),o=e("./TiltShiftYFilter");function r(){n.AbstractFilter.call(this),this.tiltShiftXFilter=new a,this.tiltShiftYFilter=new o}(r.prototype=Object.create(n.AbstractFilter.prototype)).constructor=r,(t.exports=r).prototype.applyFilter=function(e,t,i){var n=e.filterManager.getRenderTarget(!0);this.tiltShiftXFilter.applyFilter(e,t,n),this.tiltShiftYFilter.applyFilter(e,n,i),e.filterManager.returnRenderTarget(n)},Object.defineProperties(r.prototype,{blur:{get:function(){return this.tiltShiftXFilter.blur},set:function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e}},gradientBlur:{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e}},start:{get:function(){return this.tiltShiftXFilter.start},set:function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e}},end:{get:function(){return this.tiltShiftXFilter.end},set:function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e}}})},{"../../core":29,"./TiltShiftXFilter":112,"./TiltShiftYFilter":113}],112:[function(e,t,i){var n=e("./TiltShiftAxisFilter");function a(){n.call(this)}(a.prototype=Object.create(n.prototype)).constructor=a,(t.exports=a).prototype.updateDelta=function(){var e=this.uniforms.end.value.x-this.uniforms.start.value.x,t=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(e*e+t*t);this.uniforms.delta.value.x=e/i,this.uniforms.delta.value.y=t/i}},{"./TiltShiftAxisFilter":110}],113:[function(e,t,i){var n=e("./TiltShiftAxisFilter");function a(){n.call(this)}(a.prototype=Object.create(n.prototype)).constructor=a,(t.exports=a).prototype.updateDelta=function(){var e=this.uniforms.end.value.x-this.uniforms.start.value.x,t=this.uniforms.end.value.y-this.uniforms.start.value.y,i=Math.sqrt(e*e+t*t);this.uniforms.delta.value.x=-t/i,this.uniforms.delta.value.y=e/i}},{"./TiltShiftAxisFilter":110}],114:[function(e,t,i){var n=e("../../core");function a(){n.AbstractFilter.call(this,null,"precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\n\nvoid main(void)\n{\n   vec2 coord = vTextureCoord - offset;\n   float dist = length(coord);\n\n   if (dist < radius)\n   {\n       float ratio = (radius - dist) / radius;\n       float angleMod = ratio * ratio * angle;\n       float s = sin(angleMod);\n       float c = cos(angleMod);\n       coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n   }\n\n   gl_FragColor = texture2D(uSampler, coord+offset);\n}\n",{radius:{type:"1f",value:.5},angle:{type:"1f",value:5},offset:{type:"v2",value:{x:.5,y:.5}}})}(a.prototype=Object.create(n.AbstractFilter.prototype)).constructor=a,t.exports=a,Object.defineProperties(a.prototype,{offset:{get:function(){return this.uniforms.offset.value},set:function(e){this.uniforms.offset.value=e}},radius:{get:function(){return this.uniforms.radius.value},set:function(e){this.uniforms.radius.value=e}},angle:{get:function(){return this.uniforms.angle.value},set:function(e){this.uniforms.angle.value=e}}})},{"../../core":29}],115:[function(e,t,i){var d=e("../core");function n(){this.global=new d.Point,this.target=null,this.originalEvent=null}n.prototype.constructor=n,(t.exports=n).prototype.getLocalPosition=function(e,t,i){var n=e.worldTransform,a=i||this.global,o=n.a,r=n.c,s=n.tx,l=n.b,c=n.d,u=n.ty,p=1/(o*c+r*-l);return(t=t||new d.Point).x=c*p*a.x+-r*p*a.x+(u*r-s*c)*p,t.y=o*p*a.y+-l*p*a.y+(-u*o+s*l)*p,t}},{"../core":29}],116:[function(e,t,i){var n=e("../core"),a=e("./InteractionData");function o(e,t){t=t||{},this.renderer=e,this.autoPreventDefault=void 0===t.autoPreventDefault||t.autoPreventDefault,this.interactionFrequency=t.interactionFrequency||10,this.mouse=new a,this.eventData={stopped:!1,target:null,type:null,data:this.mouse,stopPropagation:function(){this.stopped=!0}},this.interactiveDataPool=[],this.interactionDOMElement=null,this.eventsAdded=!1,this.onMouseUp=this.onMouseUp.bind(this),this.processMouseUp=this.processMouseUp.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.processMouseDown=this.processMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.processMouseMove=this.processMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.processMouseOverOut=this.processMouseOverOut.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.processTouchStart=this.processTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.processTouchEnd=this.processTouchEnd.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.processTouchMove=this.processTouchMove.bind(this),this.last=0,this.currentCursorStyle="inherit",this._tempPoint=new n.Point,this.resolution=1,this.setTargetElement(this.renderer.view,this.renderer.resolution)}Object.assign(n.DisplayObject.prototype,e("./interactiveTarget")),o.prototype.constructor=o,(t.exports=o).prototype.setTargetElement=function(e,t){this.removeEvents(),this.interactionDOMElement=e,this.resolution=t||1,this.addEvents()},o.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"),window.document.addEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.addEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.addEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.addEventListener("touchmove",this.onTouchMove,!0),window.addEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!0)},o.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),window.document.removeEventListener("mousemove",this.onMouseMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onMouseOut,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),this.interactionDOMElement=null,window.removeEventListener("mouseup",this.onMouseUp,!0),this.eventsAdded=!1)},o.prototype.update=function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.interactionDOMElement&&(this.didMove?this.didMove=!1:(this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor))))},o.prototype.dispatchEvent=function(e,t,i){i.stopped||(i.target=e,i.type=t,e.emit(t,i),e[t]&&e[t](i))},o.prototype.mapPositionToPoint=function(e,t,i){var n=this.interactionDOMElement.getBoundingClientRect();e.x=(t-n.left)*(this.interactionDOMElement.width/n.width)/this.resolution,e.y=(i-n.top)*(this.interactionDOMElement.height/n.height)/this.resolution},o.prototype.processInteractive=function(e,t,i,n,a){if(void 0!==t){if(!t.visible)return!1;var o=t.children,r=!1;if(a=a||t.interactive,t.interactiveChildren)for(var s=o.length-1;0<=s;s--)!r&&n?r=this.processInteractive(e,o[s],i,!0,a):this.processInteractive(e,o[s],i,!1,!1);return a&&(n&&(t.hitArea?(t.worldTransform.applyInverse(e,this._tempPoint),r=t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):t.containsPoint&&(r=t.containsPoint(e))),t.interactive&&i(t,r)),r}},o.prototype.onMouseDown=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.autoPreventDefault&&this.mouse.originalEvent.preventDefault(),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseDown,!0)},o.prototype.processMouseDown=function(e,t){var i=this.mouse.originalEvent,n=2===i.button||3===i.which;t&&(e[n?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(e,n?"rightdown":"mousedown",this.eventData))},o.prototype.onMouseUp=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseUp,!0)},o.prototype.processMouseUp=function(e,t){var i=this.mouse.originalEvent,n=2===i.button||3===i.which,a=n?"_isRightDown":"_isLeftDown";t?(this.dispatchEvent(e,n?"rightup":"mouseup",this.eventData),e[a]&&(e[a]=!1,this.dispatchEvent(e,n?"rightclick":"click",this.eventData))):e[a]&&(e[a]=!1,this.dispatchEvent(e,n?"rightupoutside":"mouseupoutside",this.eventData))},o.prototype.onMouseMove=function(e){this.mouse.originalEvent=e,this.eventData.data=this.mouse,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.didMove=!0,this.cursor="inherit",this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseMove,!0),this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},o.prototype.processMouseMove=function(e,t){this.dispatchEvent(e,"mousemove",this.eventData),this.processMouseOverOut(e,t)},o.prototype.onMouseOut=function(e){this.mouse.originalEvent=e,this.eventData.stopped=!1,this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.interactionDOMElement.style.cursor="inherit",this.mapPositionToPoint(this.mouse.global,e.clientX,e.clientY),this.processInteractive(this.mouse.global,this.renderer._lastObjectRendered,this.processMouseOverOut,!1)},o.prototype.processMouseOverOut=function(e,t){t?(e._over||(e._over=!0,this.dispatchEvent(e,"mouseover",this.eventData)),e.buttonMode&&(this.cursor=e.defaultCursor)):e._over&&(e._over=!1,this.dispatchEvent(e,"mouseout",this.eventData))},o.prototype.onTouchStart=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,i=t.length,n=0;n<i;n++){var a=t[n],o=this.getTouchData(a);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchStart,!0),this.returnTouchData(o)}},o.prototype.processTouchStart=function(e,t){t&&(e._touchDown=!0,this.dispatchEvent(e,"touchstart",this.eventData))},o.prototype.onTouchEnd=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,i=t.length,n=0;n<i;n++){var a=t[n],o=this.getTouchData(a);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchEnd,!0),this.returnTouchData(o)}},o.prototype.processTouchEnd=function(e,t){t?(this.dispatchEvent(e,"touchend",this.eventData),e._touchDown&&(e._touchDown=!1,this.dispatchEvent(e,"tap",this.eventData))):e._touchDown&&(e._touchDown=!1,this.dispatchEvent(e,"touchendoutside",this.eventData))},o.prototype.onTouchMove=function(e){this.autoPreventDefault&&e.preventDefault();for(var t=e.changedTouches,i=t.length,n=0;n<i;n++){var a=t[n],o=this.getTouchData(a);o.originalEvent=e,this.eventData.data=o,this.eventData.stopped=!1,this.processInteractive(o.global,this.renderer._lastObjectRendered,this.processTouchMove,!1),this.returnTouchData(o)}},o.prototype.processTouchMove=function(e,t){t=t,this.dispatchEvent(e,"touchmove",this.eventData)},o.prototype.getTouchData=function(e){var t=this.interactiveDataPool.pop();return(t=t||new a).identifier=e.identifier,this.mapPositionToPoint(t.global,e.clientX,e.clientY),navigator.isCocoonJS&&(t.global.x=t.global.x/this.resolution,t.global.y=t.global.y/this.resolution),e.globalX=t.global.x,e.globalY=t.global.y,t},o.prototype.returnTouchData=function(e){this.interactiveDataPool.push(e)},o.prototype.destroy=function(){this.removeEvents(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactiveDataPool=null,this.interactionDOMElement=null,this.onMouseUp=null,this.processMouseUp=null,this.onMouseDown=null,this.processMouseDown=null,this.onMouseMove=null,this.processMouseMove=null,this.onMouseOut=null,this.processMouseOverOut=null,this.onTouchStart=null,this.processTouchStart=null,this.onTouchEnd=null,this.processTouchEnd=null,this.onTouchMove=null,this.processTouchMove=null,this._tempPoint=null},n.WebGLRenderer.registerPlugin("interaction",o),n.CanvasRenderer.registerPlugin("interaction",o)},{"../core":29,"./InteractionData":115,"./interactiveTarget":118}],117:[function(e,t,i){t.exports={InteractionData:e("./InteractionData"),InteractionManager:e("./InteractionManager"),interactiveTarget:e("./interactiveTarget")}},{"./InteractionData":115,"./InteractionManager":116,"./interactiveTarget":118}],118:[function(e,t,i){t.exports={interactive:!1,buttonMode:!1,interactiveChildren:!0,defaultCursor:"pointer",_over:!1,_touchDown:!1}},{}],119:[function(e,t,i){var o=e("resource-loader").Resource,f=e("../core"),h=e("../extras"),r=e("path");function s(e,t){var i={},n=e.data.getElementsByTagName("info")[0],a=e.data.getElementsByTagName("common")[0];i.font=n.getAttribute("face"),i.size=parseInt(n.getAttribute("size"),10),i.lineHeight=parseInt(a.getAttribute("lineHeight"),10),i.chars={};for(var o=e.data.getElementsByTagName("char"),r=0;r<o.length;r++){var s=parseInt(o[r].getAttribute("id"),10),l=new f.Rectangle(parseInt(o[r].getAttribute("x"),10)+t.frame.x,parseInt(o[r].getAttribute("y"),10)+t.frame.y,parseInt(o[r].getAttribute("width"),10),parseInt(o[r].getAttribute("height"),10));i.chars[s]={xOffset:parseInt(o[r].getAttribute("xoffset"),10),yOffset:parseInt(o[r].getAttribute("yoffset"),10),xAdvance:parseInt(o[r].getAttribute("xadvance"),10),kerning:{},texture:new f.Texture(t.baseTexture,l)}}var c=e.data.getElementsByTagName("kerning");for(r=0;r<c.length;r++){var u=parseInt(c[r].getAttribute("first"),10),p=parseInt(c[r].getAttribute("second"),10),d=parseInt(c[r].getAttribute("amount"),10);i.chars[p].kerning[u]=d}e.bitmapFont=i,h.BitmapText.fonts[i.font]=i}t.exports=function(){return function(t,i){if(!t.data||!t.isXml)return i();if(0===t.data.getElementsByTagName("page").length||0===t.data.getElementsByTagName("info").length||null===t.data.getElementsByTagName("info")[0].getAttribute("face"))return i();var e=r.dirname(t.url);"."===e&&(e=""),this.baseUrl&&e&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(e+="/"),e=e.replace(this.baseUrl,"")),e&&"/"!==e.charAt(e.length-1)&&(e+="/");var n=e+t.data.getElementsByTagName("page")[0].getAttribute("file");if(f.utils.TextureCache[n])s(t,f.utils.TextureCache[n]),i();else{var a={crossOrigin:t.crossOrigin,loadType:o.LOAD_TYPE.IMAGE};this.add(t.name+"_image",n,a,function(e){s(t,e.texture),i()})}}}},{"../core":29,"../extras":85,path:3,"resource-loader":18}],120:[function(e,t,i){t.exports={Loader:e("./loader"),bitmapFontParser:e("./bitmapFontParser"),spritesheetParser:e("./spritesheetParser"),textureParser:e("./textureParser"),Resource:e("resource-loader").Resource}},{"./bitmapFontParser":119,"./loader":121,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],121:[function(e,t,i){var n=e("resource-loader"),a=e("./textureParser"),o=e("./spritesheetParser"),r=e("./bitmapFontParser");function s(e,t){n.call(this,e,t);for(var i=0;i<s._pixiMiddleware.length;++i)this.use(s._pixiMiddleware[i]())}(s.prototype=Object.create(n.prototype)).constructor=s,(t.exports=s)._pixiMiddleware=[n.middleware.parsing.blob,a,o,r],s.addPixiMiddleware=function(e){s._pixiMiddleware.push(e)};var l=n.Resource;l.setExtensionXhrType("fnt",l.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":119,"./spritesheetParser":122,"./textureParser":123,"resource-loader":18}],122:[function(e,t,i){var n=e("resource-loader").Resource,a=e("path"),u=e("../core");t.exports=function(){return function(s,l){if(!s.data||!s.isJson||!s.data.frames)return l();var e={crossOrigin:s.crossOrigin,loadType:n.LOAD_TYPE.IMAGE},t=a.dirname(s.url.replace(this.baseUrl,"")),c=u.utils.getResolutionOfUrl(s.url);this.add(s.name+"_image",t+"/"+s.data.meta.image,e,function(e){s.textures={};var t=s.data.frames;for(var i in t){var n=t[i].frame;if(n){var a=null,o=null;if(a=t[i].rotated?new u.Rectangle(n.x,n.y,n.h,n.w):new u.Rectangle(n.x,n.y,n.w,n.h),t[i].trimmed&&(o=new u.Rectangle(t[i].spriteSourceSize.x/c,t[i].spriteSourceSize.y/c,t[i].sourceSize.w/c,t[i].sourceSize.h/c)),t[i].rotated){var r=a.width;a.width=a.height,a.height=r}a.x/=c,a.y/=c,a.width/=c,a.height/=c,s.textures[i]=new u.Texture(e.texture.baseTexture,a,a.clone(),o,t[i].rotated),u.utils.TextureCache[i]=s.textures[i]}}l()})}}},{"../core":29,path:3,"resource-loader":18}],123:[function(e,t,i){var n=e("../core");t.exports=function(){return function(e,t){e.data&&e.isImage&&(e.texture=new n.Texture(new n.BaseTexture(e.data,null,n.utils.getResolutionOfUrl(e.url))),n.utils.TextureCache[e.url]=e.texture),t()}}},{"../core":29}],124:[function(e,t,i){var y=e("../core"),c=new y.Point,u=new y.Polygon;function p(e,t,i,n,a){y.Container.call(this),this._texture=null,this.uvs=i||new Float32Array([0,1,1,1,1,0,0,1]),this.vertices=t||new Float32Array([0,0,100,0,100,100,0,100]),this.indices=n||new Uint16Array([0,1,2,3]),this.dirty=!0,this.blendMode=y.BLEND_MODES.NORMAL,this.canvasPadding=0,this.drawMode=a||p.DRAW_MODES.TRIANGLE_MESH,this.texture=e}(p.prototype=Object.create(y.Container.prototype)).constructor=p,t.exports=p,Object.defineProperties(p.prototype,{texture:{get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e)&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this))}}}),p.prototype._renderWebGL=function(e){e.setObjectRenderer(e.plugins.mesh),e.plugins.mesh.render(this)},p.prototype._renderCanvas=function(e){var t=e.context,i=this.worldTransform;e.roundPixels?t.setTransform(i.a,i.b,i.c,i.d,0|i.tx,0|i.ty):t.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty),this.drawMode===p.DRAW_MODES.TRIANGLE_MESH?this._renderCanvasTriangleMesh(t):this._renderCanvasTriangles(t)},p.prototype._renderCanvasTriangleMesh=function(e){for(var t=this.vertices,i=this.uvs,n=t.length/2,a=0;a<n-2;a++){var o=2*a;this._renderCanvasDrawTriangle(e,t,i,o,2+o,4+o)}},p.prototype._renderCanvasTriangles=function(e){for(var t=this.vertices,i=this.uvs,n=this.indices,a=n.length,o=0;o<a;o+=3){var r=2*n[o],s=2*n[o+1],l=2*n[o+2];this._renderCanvasDrawTriangle(e,t,i,r,s,l)}},p.prototype._renderCanvasDrawTriangle=function(e,t,i,n,a,o){var r=this._texture.baseTexture.source,s=this._texture.baseTexture.width,l=this._texture.baseTexture.height,c=t[n],u=t[a],p=t[o],d=t[n+1],f=t[a+1],h=t[o+1],m=i[n]*s,b=i[a]*s,g=i[o]*s,v=i[n+1]*l,_=i[a+1]*l,y=i[o+1]*l;if(0<this.canvasPadding){var w=this.canvasPadding/this.worldTransform.a,S=this.canvasPadding/this.worldTransform.d,x=(c+u+p)/3,k=(d+f+h)/3,$=c-x,C=d-k,T=Math.sqrt($*$+C*C);c=x+$/T*(T+w),d=k+C/T*(T+S),C=f-k,u=x+($=u-x)/(T=Math.sqrt($*$+C*C))*(T+w),f=k+C/T*(T+S),C=h-k,p=x+($=p-x)/(T=Math.sqrt($*$+C*C))*(T+w),h=k+C/T*(T+S)}e.save(),e.beginPath(),e.moveTo(c,d),e.lineTo(u,f),e.lineTo(p,h),e.closePath(),e.clip();var z=m*_+v*g+b*y-_*g-v*b-m*y,P=c*_+v*p+u*y-_*p-v*u-c*y,A=m*u+c*g+b*p-u*g-c*b-m*p,O=m*_*p+v*u*g+c*b*y-c*_*g-v*b*p-m*u*y,j=d*_+v*h+f*y-_*h-v*f-d*y,F=m*f+d*g+b*h-f*g-d*b-m*h,I=m*_*h+v*f*g+d*b*y-d*_*g-v*b*h-m*f*y;e.transform(P/z,j/z,A/z,F/z,O/z,I/z),e.drawImage(r,0,0),e.restore()},p.prototype.renderMeshFlat=function(e){var t=this.context,i=e.vertices,n=i.length/2;t.beginPath();for(var a=1;a<n-2;a++){var o=2*a,r=i[o],s=i[2+o],l=i[4+o],c=i[1+o],u=i[3+o],p=i[5+o];t.moveTo(r,c),t.lineTo(s,u),t.lineTo(l,p)}t.fillStyle="#FF0000",t.fill(),t.closePath()},p.prototype._onTextureUpdate=function(){this.updateFrame=!0},p.prototype.getBounds=function(e){if(!this._currentBounds){for(var t=e||this.worldTransform,i=t.a,n=t.b,a=t.c,o=t.d,r=t.tx,s=t.ty,l=-1/0,c=-1/0,u=1/0,p=1/0,d=this.vertices,f=0,h=d.length;f<h;f+=2){var m=d[f],b=d[f+1],g=i*m+a*b+r,v=o*b+n*m+s;u=g<u?g:u,p=v<p?v:p,l=l<g?g:l,c=c<v?v:c}if(u===-1/0||c===1/0)return y.Rectangle.EMPTY;var _=this._bounds;_.x=u,_.width=l-u,_.y=p,_.height=c-p,this._currentBounds=_}return this._currentBounds},p.prototype.containsPoint=function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,c);var t,i,n=this.vertices,a=u.points;if(this.drawMode===p.DRAW_MODES.TRIANGLES){var o=this.indices;for(i=this.indices.length,t=0;t<i;t+=3){var r=2*o[t],s=2*o[t+1],l=2*o[t+2];if(a[0]=n[r],a[1]=n[1+r],a[2]=n[s],a[3]=n[1+s],a[4]=n[l],a[5]=n[1+l],u.contains(c.x,c.y))return!0}}else for(i=n.length,t=0;t<i;t+=6)if(a[0]=n[t],a[1]=n[t+1],a[2]=n[t+2],a[3]=n[t+3],a[4]=n[t+4],a[5]=n[t+5],u.contains(c.x,c.y))return!0;return!1},p.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":29}],125:[function(e,t,i){var n=e("./Mesh"),p=e("../core");function a(e,t){n.call(this,e),this.points=t,this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length),this._ready=!0,this.refresh()}(a.prototype=Object.create(n.prototype)).constructor=a,(t.exports=a).prototype.refresh=function(){var e=this.points;if(!(e.length<1)&&this._texture._uvs){var t=this.uvs,i=this.indices,n=this.colors,a=this._texture._uvs,o=new p.Point(a.x0,a.y0),r=new p.Point(a.x2-a.x0,a.y2-a.y0);t[0]=0+o.x,t[1]=0+o.y,t[2]=0+o.x,t[3]=1*r.y+o.y,n[0]=1,n[1]=1,i[0]=0,i[1]=1;for(var s,l,c=e.length,u=1;u<c;u++)e[u],l=u/(c-1),t[s=4*u]=l*r.x+o.x,t[s+1]=0+o.y,t[s+2]=l*r.x+o.x,t[s+3]=1*r.y+o.y,n[s=2*u]=1,n[s+1]=1,i[s=2*u]=s,i[s+1]=s+1;this.dirty=!0}},a.prototype._onTextureUpdate=function(){n.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},a.prototype.updateTransform=function(){var e=this.points;if(!(e.length<1)){for(var t,i,n,a,o,r=e[0],s=0,l=0,c=this.vertices,u=e.length,p=0;p<u;p++)i=e[p],n=4*p,l=-((t=p<e.length-1?e[p+1]:i).x-r.x),s=t.y-r.y,1<10*(1-p/(u-1))&&1,s/=a=Math.sqrt(s*s+l*l),l/=a,s*=o=this._texture.height/2,l*=o,c[n]=i.x+s,c[1+n]=i.y+l,c[2+n]=i.x-s,c[3+n]=i.y-l,r=i;this.containerUpdateTransform()}}},{"../core":29,"./Mesh":124}],126:[function(e,t,i){t.exports={Mesh:e("./Mesh"),Rope:e("./Rope"),MeshRenderer:e("./webgl/MeshRenderer"),MeshShader:e("./webgl/MeshShader")}},{"./Mesh":124,"./Rope":125,"./webgl/MeshRenderer":127,"./webgl/MeshShader":128}],127:[function(e,t,i){var n=e("../../core"),r=e("../Mesh");function a(e){n.ObjectRenderer.call(this,e),this.indices=new Uint16Array(15e3);for(var t=0,i=0;t<15e3;t+=6,i+=4)this.indices[t+0]=i+0,this.indices[t+1]=i+1,this.indices[t+2]=i+2,this.indices[t+3]=i+0,this.indices[t+4]=i+2,this.indices[t+5]=i+3}(a.prototype=Object.create(n.ObjectRenderer.prototype)).constructor=a,t.exports=a,n.WebGLRenderer.registerPlugin("mesh",a),a.prototype.onContextChange=function(){},a.prototype.render=function(e){e._vertexBuffer||this._initWebGL(e);var t=this.renderer,i=t.gl,n=e._texture.baseTexture,a=t.shaderManager.plugins.meshShader,o=e.drawMode===r.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;t.blendModeManager.setBlendMode(e.blendMode),i.uniformMatrix3fv(a.uniforms.translationMatrix._location,!1,e.worldTransform.toArray(!0)),i.uniformMatrix3fv(a.uniforms.projectionMatrix._location,!1,t.currentRenderTarget.projectionMatrix.toArray(!0)),i.uniform1f(a.uniforms.alpha._location,e.worldAlpha),e.dirty?(e.dirty=!1,i.bindBuffer(i.ARRAY_BUFFER,e._vertexBuffer),i.bufferData(i.ARRAY_BUFFER,e.vertices,i.STATIC_DRAW),i.vertexAttribPointer(a.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,e._uvBuffer),i.bufferData(i.ARRAY_BUFFER,e.uvs,i.STATIC_DRAW),i.vertexAttribPointer(a.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),n._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,n._glTextures[i.id]):this.renderer.updateTexture(n),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e._indexBuffer),i.bufferData(i.ELEMENT_ARRAY_BUFFER,e.indices,i.STATIC_DRAW)):(i.bindBuffer(i.ARRAY_BUFFER,e._vertexBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,e.vertices),i.vertexAttribPointer(a.attributes.aVertexPosition,2,i.FLOAT,!1,0,0),i.bindBuffer(i.ARRAY_BUFFER,e._uvBuffer),i.vertexAttribPointer(a.attributes.aTextureCoord,2,i.FLOAT,!1,0,0),i.activeTexture(i.TEXTURE0),n._glTextures[i.id]?i.bindTexture(i.TEXTURE_2D,n._glTextures[i.id]):this.renderer.updateTexture(n),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e._indexBuffer),i.bufferSubData(i.ELEMENT_ARRAY_BUFFER,0,e.indices)),i.drawElements(o,e.indices.length,i.UNSIGNED_SHORT,0)},a.prototype._initWebGL=function(e){var t=this.renderer.gl;e._vertexBuffer=t.createBuffer(),e._indexBuffer=t.createBuffer(),e._uvBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._vertexBuffer),t.bufferData(t.ARRAY_BUFFER,e.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,e._uvBuffer),t.bufferData(t.ARRAY_BUFFER,e.uvs,t.STATIC_DRAW),e.colors&&(e._colorBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._colorBuffer),t.bufferData(t.ARRAY_BUFFER,e.colors,t.STATIC_DRAW)),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e._indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,e.indices,t.STATIC_DRAW)},a.prototype.flush=function(){},a.prototype.start=function(){var e=this.renderer.shaderManager.plugins.meshShader;this.renderer.shaderManager.setShader(e)},a.prototype.destroy=function(){}},{"../../core":29,"../Mesh":124}],128:[function(e,t,i){var n=e("../../core");function a(e){n.Shader.call(this,e,["precision lowp float;","attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","}"].join("\n"),["precision lowp float;","varying vec2 vTextureCoord;","uniform float alpha;","uniform sampler2D uSampler;","void main(void){","   gl_FragColor = texture2D(uSampler, vTextureCoord) * alpha ;","}"].join("\n"),{alpha:{type:"1f",value:0},translationMatrix:{type:"mat3",value:new Float32Array(9)},projectionMatrix:{type:"mat3",value:new Float32Array(9)}},{aVertexPosition:0,aTextureCoord:0})}(a.prototype=Object.create(n.Shader.prototype)).constructor=a,t.exports=a,n.ShaderManager.registerPlugin("meshShader",a)},{"../../core":29}],129:[function(e,t,i){Object.assign||(Object.assign=e("object-assign"))},{"object-assign":12}],130:[function(e,t,i){e("./Object.assign"),e("./requestAnimationFrame")},{"./Object.assign":129,"./requestAnimationFrame":131}],131:[function(e,t,i){(function(e){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!e.performance||!e.performance.now){var t=Date.now();e.performance||(e.performance={}),e.performance.now=function(){return Date.now()-t}}for(var n=Date.now(),i=["ms","moz","webkit","o"],a=0;a<i.length&&!e.requestAnimationFrame;++a)e.requestAnimationFrame=e[i[a]+"RequestAnimationFrame"],e.cancelAnimationFrame=e[i[a]+"CancelAnimationFrame"]||e[i[a]+"CancelRequestAnimationFrame"];e.requestAnimationFrame||(e.requestAnimationFrame=function(e){if("function"!=typeof e)throw new TypeError(e+"is not a function");var t=Date.now(),i=16+n-t;return i<0&&(i=0),n=t,setTimeout(function(){n=Date.now(),e(performance.now())},i)}),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(e){clearTimeout(e)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)}),PIXI.DisplayObject.prototype.draggable=function(e,t){if(null==t&&null===e)this.__draggable=!1,this.off("mousedown",i.mousedownbind),this.off("touchstart",i.mousedownbind),this.off("mousemove",i.mousemovebind),this.off("touchmove",i.mousemovebind),this.off("mouseup",i.mouseupbind),this.off("touchend",i.mouseupbind),this.off("mouseupoutside",i.mouseupoutsidebind),this.off("touchendoutside",i.mouseupoutsidebind),this.interactive=!0;else if(void 0===t){this.__draggable&&this.draggable(null);var i=e||{};for(var n in this.DragAndDropManager=i.manager,PIXI.DragAndDropManager.options.drag)i.hasOwnProperty(n)||(i[n]=PIXI.DragAndDropManager.options.drag[n]);this.dragOptions=i,this.offset=new PIXI.Point(0,0),this.original=new PIXI.Point(0,0),i.snap&&(this.snapElements=[]),i.collidable&&(this.collidableElements=[]),this.interactive=!0,this.__draggable=!0,i.mousedownbind=PIXI.DragAndDropManager.onMouseDown.bind(this),this.on("mousedown",i.mousedownbind),this.on("touchstart",i.mousedownbind),i.mousemovebind=PIXI.DragAndDropManager.onMouseMove.bind(this),this.on("mousemove",i.mousemovebind),this.on("touchmove",i.mousemovebind),i.mouseupbind=PIXI.DragAndDropManager.onMouseUp.bind(this),this.on("mouseup",i.mouseupbind),this.on("touchend",i.mouseupbind),i.mouseupoutsidebind=PIXI.DragAndDropManager.onMouseUpOutside.bind(this),this.on("mouseupoutside",i.mouseupoutsidebind),this.on("touchendoutside",i.mouseupoutsidebind)}else this.dragOptions&&(this.__draggable||this.draggable(),this.dragOptions[e]=t,"snap"===e&&t&&(this.snapElements=[]),"snap"===e&&t&&(this.collidableElements=[]));return this},PIXI.DisplayObject.prototype.droppable=function(e,t){if(null==t&&null===e)this.__droppable=!1,this.interactive=!0;else if(void 0===t){var i=e||{};for(var n in this.DragAndDropManager=i.manager,PIXI.DragAndDropManager.options.drop)i.hasOwnProperty(n)||(i[n]=PIXI.DragAndDropManager.options.drop[n]);this.dropOptions=i,this.interactive=!0,this.__droppable=!0}else this.dropOptions&&(this.__droppable||this.droppable(),this.dropOptions[e]=t);return this},PIXI.DragAndDropManager=function(e){this.interactionManager=e,this.draggableItems=[],this.droppableItems=[],this.tweeningItems=[],this.boundTick=this.tick.bind(this),this.isTicking=!1},PIXI.DragAndDropManager.prototype.constructor=PIXI.DragAndDropManager,PIXI.DragAndDropManager.prototype.refresh=function(){this.clear();var e=this.interactionManager.renderer._lastObjectRendered;this.findDraggableDroppable(e)},PIXI.DragAndDropManager.prototype.findDraggableDroppable=function(e){if(this.collect(e),e.interactiveChildren)for(var t=e.children,i=t.length-1;0<=i;i--)this.findDraggableDroppable(t[i])},PIXI.DragAndDropManager.prototype.clear=function(){this.draggableItems.length=0,this.droppableItems.length=0},PIXI.DragAndDropManager.prototype.collect=function(e){e.__draggable&&this.draggableItems.push(e),e.__droppable&&this.droppableItems.push(e)},PIXI.DragAndDropManager.prototype.onDrag=function(e,t){var i=e.dragOptions;if(e.tweening||i.disabled)e.__isDragging=!1;else{var n,a;if(i.handle)if("string"==typeof i.handle){var o=!1;for(n=e.children.length-1;0<=n;n--)if(((a=e.children[n]).label===i.handle||a.__draggable&&a.dragOptions.label===i.handle||a.__droppable&&a.dropOptions.label===i.handle)&&this.interactionManager.hitTest(a,t)){o=!0;break}if(!o)return void(e.__isDragging=!1)}else if(!this.interactionManager.hitTest(i.handle,t))return void(e.__isDragging=!1);if(i.cancel)if("string"==typeof i.cancel){for(n=e.children.length-1;0<=n;n--)if(((a=e.children[n]).label===i.cancel||a.__draggable&&a.dragOptions.label===i.cancel||a.__droppable&&a.dropOptions.label===i.cancel)&&this.interactionManager.hitTest(a,t))return void(e.__isDragging=!1)}else if(this.interactionManager.hitTest(i.cancel,t))return void(e.__isDragging=!1);if(i.cursorAt){var r=t.getLocalPosition(e);e.offset.set(i.cursorAt[0]-r.x,i.cursorAt[1]-r.y)}else e.offset.set(0,0);e.original.x=e.worldTransform.tx,e.original.y=e.worldTransform.ty,t.start?(t.start.x=t.data.global.x,t.start.y=t.data.global.y):t.start=t.data.global.clone(),e.originalAlpha=e.alpha}},PIXI.DragAndDropManager.prototype.onDragStart=function(e,t){this.refresh();var i=e.dragOptions;if(Math.abs(t.start.x-t.data.global.x)<i.distance&&Math.abs(t.start.y-t.data.global.y)<i.distance)e.__dragStart=!1;else{if(this.destroyHelperSprite(e),"clone"===i.helper?(e.dragElement=new PIXI.Sprite(e.generateTexture()),e.parent.addChild(e.dragElement),e.dragElement.position.set(e.x,e.y),e.dragElement.pivot.set(e.pivot.x,e.pivot.y),e.anchor&&e.dragElement.anchor.set(e.anchor.x,e.anchor.y),"inherit"!==i.cursor&&(e.dragElement.interactive=!0)):e.dragElement=e,e.dragElement._defaultCursor=e.dragElement.defaultCursor,e.dragElement.defaultCursor=i.cursor,e.dragElement._buttonMode=e.dragElement.buttonMode,e.dragElement.buttonMode=!0,e.dragElement.alpha=e.alpha*i.alpha,i.snap)for(var n=(a=this.draggableItems).length-1;0<=n;n--)!(o=a[n]).worldVisible||!0!==i.snap&&i.snap!==o.dragOptions.label||o===e||(r=o.hitArea?o.hitArea:o.getBounds(),o.snapBounds?(o.snapBounds.x=r.x,o.snapBounds.y=r.y,o.snapBounds.x2=r.x+r.width,o.snapBounds.y2=r.y+r.height):o.snapBounds={x:r.x,y:r.y,x2:r.x+r.width,y2:r.y+r.height,dist:0},e.snapElements.push(o));if(i.containment&&i.collidable){var a,o,r;for(n=(a=this.draggableItems).length-1;0<=n;n--)(o=a[n]).worldVisible&&o.dragOptions.collidable&&o!==e&&i.containment==o.dragOptions.containment&&(r=o.getBounds(),o.collideBounds={x:r.x,y:r.y,x2:r.x+r.width,y2:r.y+r.height,dist:0},e.collidableElements.push(o))}i.start&&i.start(e,t)}},PIXI.DragAndDropManager.prototype.onDragMove=function(){function E(e){return e*e}return function(e,t){var i,n=e.dragOptions,a=t.data.global.x,o=t.data.global.y,r=a-t.start.x,s=o-t.start.y,l=e.original.x+r-e.offset.x,c=e.original.y+s-e.offset.y,u=e.dragElement.worldTransform.tx,p=e.dragElement.worldTransform.ty,d=l+e.width*e.worldTransform.a,f=c+e.height*e.worldTransform.d;if(n.containment){if(n.containment.getContainedElement){var h={x:(I=n.containment.toLocal({x:l,y:c})).x+e.width/2,y:I.y+e.height/2},m=n.containment.getContainedElement(e,h),b=n.containment.toGlobal(m),g=e.dragElement.parent.toLocal(b);l=g.x-e.width/2,c=g.y-e.height/2}else i="parent"===n.containment?e.parent.getBounds():n.containment instanceof PIXI.Rectangle?n.containment:n.containment.getBounds(),"y"!==n.axis&&(l<i.x?l=i.x:d>i.x+i.width&&(l=i.x+i.width-e.width*e.worldTransform.a)),"x"!==n.axis&&(c<i.y?c=i.y:f>i.y+i.height&&(c=i.y+i.height-e.height*e.worldTransform.d));var v;if(n.grid)n.grid[0]&&"y"!==n.axis&&(v=n.grid[0],l=e.original.x+Math.round((l-e.original.x)/v)*v,i&&!(0<l||d<i.width)&&(l+=0<l?-v:v)),n.grid[1]&&"x"!==n.axis&&(v=n.grid[1],c=e.original.y+Math.round((c-e.original.y)/v)*v,i&&!(0<c||f<i.height)&&(c+=0<c?-v:v));if(n.snap){var _,y,w,S,x,k=!1,$=n.snapTolerance;if(n.snapSort){var C=e.worldTransform.tx+e.width/2,T=e.worldTransform.ty+e.height/2;for(j=e.snapElements.length-1;0<=j;j--)(_=e.snapElements[j]).snapBounds.dist=E(C-_.worldTransform.tx-_.width/2)+E(T-_.worldTransform.ty-_.height/2);e.snapElements.sort(this.closestSort)}for(j=e.snapElements.length-1;!k&&0<=j;j--)y=(_=e.snapElements[j]).snapBounds.x,w=_.snapBounds.x2,S=_.snapBounds.y,x=_.snapBounds.y2,y-$<d&&l<w+$&&S-$<f&&c<x+$&&("inner"!==n.snapMode&&(Math.abs(S-f)<=$?(c=S-e.height,k=!0):Math.abs(x-c)<=$&&(c=x,k=!0),Math.abs(y-d)<=$?(l=y-e.width,k=!0):Math.abs(w-l)<=$&&(l=w,k=!0)),k||"outer"===n.snapMode||(Math.abs(S-c)<=$?(c=S,k=!0):Math.abs(x-f)<=$&&(c=x-e.height,k=!0),Math.abs(y-l)<=$?(l=y,k=!0):Math.abs(w-d)<=$&&(l=w-e.width,k=!0)))}if(n.collidable)for(var z=l,P=c,A=l+e.width,O=c+e.height,j=0;j<e.collidableElements.length;j++){var F=e.collidableElements[j].collideBounds;F.x2>z&&F.x<A&&F.y2>P&&F.y<O&&(l=u,c=p)}}var I=e.dragElement.parent.toLocal({x:l,y:c});"x"===n.axis?e.dragElement.x=I.x:("y"===n.axis||(e.dragElement.x=I.x),e.dragElement.y=I.y),n.drag&&n.drag(e,t),e.ondrag&&e.ondrag({target:e})}}(),PIXI.DragAndDropManager.prototype.onDrop=function(e,t){this.refresh();var i=e.dragOptions;e.dragElement.defaultCursor=e.dragElement._defaultCursor,e.dragElement.buttonMode=e.dragElement._buttonMode;var n=this.droppableItems,a=!1;if(n.length){var o,r,s,l,c=[],u=e.dragElement.getBounds();for(u.x2=u.x+u.width,u.y2=u.y+u.height,s=n.length-1;0<=s;s--)if((o=n[s]).worldVisible&&o!==e&&!o.dropOptions.disabled)if((r=o.dropOptions.accept)instanceof Array){for(l=r.length-1;0<=l;l--)if((r[l]===this||r[l]===i.label)&&this.intersect(e,t,o,u)){if(a=!0,o.dropOptions.greedy){c.length=0,c.push(o),s=-1;break}c.push(o)}}else if((r===this||r===i.label||!0===r)&&this.intersect(e,t,o,u)){if(a=!0,o.dropOptions.greedy){c.length=0,c.push(o);break}c.push(o)}for(s=c.length-1;0<=s;s--){var p=c[s];if(p.dropOptions.drop){p.dropOptions.drop(e,t);var d=e.dragOptions.snapTo;if(d&&"middle"==d){var f=p.worldTransform,h=e.worldTransform,m=f.tx+p.width/2*f.a-e.width/2*h.a,b=f.ty+p.height/2*f.d-e.height/2*h.d,g=e.dragElement.parent.toLocal({x:m,y:b});e.dragElement.x=g.x,e.dragElement.y=g.y}}}}else a=!0;"invalid"===i.revert&&!a||"valid"===i.revert&&a||!0===i.revert?i.revertDuration?(e.tweening=!0,this.tweeningItems.push({time:Date.now(),duration:i.revertDuration,item:e,mouse:t,x:e.dragElement.x,y:e.dragElement.y,dx:e.dragElement.x-e.original.x,dy:e.dragElement.y-e.original.y}),this.isTicking||(this.isTicking=!0,this.tick())):(e.dragElement.x=e.original.x,e.dragElement.y=e.original.y,this.stop(e,t)):(e.dragElement!==e&&(e.x=e.dragElement.x,e.y=e.dragElement.y),this.stop(e,t))},PIXI.DragAndDropManager.prototype.tick=function(){var e=this.tweeningItems.length;if(e){requestAnimationFrame(this.boundTick);for(var t,i,n,a=Date.now(),o=e-1;0<=o;o--)i=a-(t=this.tweeningItems[o]).time,n=t.item,i>=t.duration?(n.tweening=!1,n.dragElement.x=n.original.x,n.dragElement.y=n.original.y,this.stop(n,t.mouse),this.tweeningItems.splice(o,1)):(n.dragElement.x=t.x-t.dx*i/t.duration,n.dragElement.y=t.y-t.dy*i/t.duration)}else this.isTicking=!1},PIXI.DragAndDropManager.prototype.stop=function(e,t){e.dragElement.alpha=e.originalAlpha,this.destroyHelperSprite(e),e.dragOptions.snap&&(e.snapElements.length=0),e.dragOptions.collidable&&(e.collidableElements.length=0),e.dragOptions.stop&&e.dragOptions.stop(e,t)},PIXI.DragAndDropManager.prototype.closestSort=function(e,t){return e.snapBounds.snapDist<t.snapBounds.snapDist?-1:e.snapBounds.snapDist>t.snapBounds.snapDist?1:0},PIXI.DragAndDropManager.prototype.destroyHelperSprite=function(e){e.dragElement&&e.dragElement!==e&&(e.dragElement.parent.removeChild(e.dragElement),e.dragElement.texture.destroy(!0),e.dragElement=null)},PIXI.DragAndDropManager.prototype.intersect=function(e,t,i,n){var a;switch(i.dropOptions.tolerance){case"intersect":return(a=i.getBounds()).x<n.x+n.width/2&&n.x2-n.width/2<a.x+a.width&&a.y<n.y+n.height/2&&n.y2-n.height/2<a.y+a.height;case"fit":return(a=i.getBounds()).x<=n.x&&n.x2<=a.x+a.width&&a.y<=n.y&&n.y2<=a.y+a.height;case"pointer":return this.interactionManager.hitTest(i,t);case"touch":return a=i.getBounds(),(n.y>=a.y&&n.y<=a.y+a.height||n.y2>=a.y&&n.y2<=a.y+a.height||n.y<a.y&&n.y2>a.y+a.height)&&(n.x>=a.x&&n.x<=a.x+a.width||n.x2>=a.x&&n.x2<=a.x+a.width||n.x<a.x&&n.x2>a.x+a.width);default:return!1}},PIXI.DragAndDropManager.onMouseDown=function(e){this.dragOptions.mousedown&&this.dragOptions.mousedown(e),this.__isDragging=!0,this.DragAndDropManager.onDrag(this,e)},PIXI.DragAndDropManager.onMouseMove=function(e){this.dragOptions.mousemove&&this.dragOptions.mousemove(e),this.__isDragging&&(this.__dragStart?this.DragAndDropManager.onDragMove(this,e):(this.__dragStart=!0,this.DragAndDropManager.onDragStart(this,e)))},PIXI.DragAndDropManager.onMouseUp=function(e){this.dragOptions.mouseup&&this.dragOptions.mouseup(e),this.__isDragging&&(this.__isDragging=!1,this.__dragStart&&(this.__dragStart=!1,this.DragAndDropManager.onDrop(this,e)))},PIXI.DragAndDropManager.onMouseUpOutside=function(e){this.dragOptions.mouseupoutside&&this.dragOptions.mouseupoutside(e),this.__isDragging&&(this.__isDragging=!1,this.__dragStart&&(this.__dragStart=!1,this.DragAndDropManager.onDrop(this,e)))},PIXI.DragAndDropManager.options={drag:{distance:1,axis:null,containment:null,cursor:"inherit",cursorAt:null,grid:!1,handle:null,cancel:null,helper:"original",alpha:1,revert:!1,revertDuration:500,label:null,snap:null,snapMode:"both",snapSort:!1,snapTolerance:20,disabled:!1,drag:null,start:null,stop:null,mousedown:null,mousemove:null,mouseup:null,mouseupoutside:null},drop:{label:null,drop:null,accept:!0,greedy:!1,disabled:!1,tolerance:"intersect"}},$(document).ready(function(){window.util={jsonParseWithSlice:function(e){return JSON.parse(e.slice(1,-1))},isNullOrUndefined:function(e){return null==e},getExtension:function(e){return e.split(".").pop().toLowerCase()},isImage:function(e){if(null===e)return!1;var t=this.getExtension(e),i=!1;return _.contains(["gif","jpg","png","jpeg","bmp"],t)&&(i=!0),i},decimalToHex:function(e,t){var i=Number(e).toString(16);for(t=null==t?t=2:t;i.length<t;)i="0"+i;return i},padHex:function(e,t){for(t=null==t?t=2:t;e.length<t;)e="0"+e;return e},log:function(e,t,i){ub.errors.push({type:e,message:t,data:i})},error:function(e){console.error(e)},collectionToArray:function(e){var t=[];return _.each(e,function(e){t.push(e)}),t},toTitleCase:function(e){var t=e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()});return t=ub.data.specialCodes.getCode(t)},truncate:function(e){return e.replace(/^(.{9}).+/,"$1…")},dateFormat:function(e){var t=e;return moment.utc(t).local().format("LLL")},dataSelector:function(e,t){var i=e;if(_.each(t,function(e,t){i+="[data-"+t+"='"+e+"']"}),0<$(i).length)return $(i);console.error("Invalid Selector: "+i)}},String.prototype.toTitleCase=function(){var e=this.toString();return window.util.toTitleCase(e.split("_").join(" "))},String.prototype.toCodeCase=function(){return this.toString().split(" ").join("_").toLowerCase()},String.prototype.toHyphenCase=function(){return this.toString().replace(/[\*\^\'\!\/\(\)]/g,"").split(" ").join("-").toLowerCase()},String.prototype.prepareModifierLabel=function(){var e=this.toString();return e.replace(" ",""),e.replace("left_","").replace("right_","").toTitleCase()},String.prototype.lpad=function(e,t){for(var i=this;i.length<t;)i=e+i;return i},String.prototype.rpad=function(e,t){for(var i=this;i.length<t;)i+=e;return i}}),$(document).ready(function(){ub.constants={},ub.constants.order_actions={SUBMIT_ORDER:"submit_order",SAVE_ORDER:"save_order"}}),$(document).ready(function(){ub.VERSION="1",ub.config.feature_flags={ui:{draggable_applications:!0,hotspots:!0,drag_limits:!1,scale_text:!1,hotspot_applications:!0}},ub.config.features={uniforms:{betaSportUniforms:!1,priceItemName:!1,testOrders:!1,tackeTwillCustomSizes:!1},setState:function(e,t,i){return void 0===this[e]&&ub.utilities.error("Feature Section ["+e+"] not found"),void 0===this[e][t]&&ub.utilities.error("Feature Section ["+e+"]["+t+"] not found"),this[e][t]=i,ub.displayDoneAt("Setting the feature ["+e+" / "+t+"] to "+i),this[e][t]},isOn:function(e,t){return void 0===this[e]&&ub.utilities.error("Feature Section ["+e+"] not found"),void 0===this[e][t]&&ub.utilities.error("Feature Section ["+e+"]["+t+"] not found"),this[e][t]}},ub.config.setFeatureFlag=function(i,n){var e,t,a=ub.data.locations.getUrl("feature");t={user_id:ub.user.id,feature:i},void 0!==a&&(e=ub.config.api_host+a.url,$.ajax({url:e,type:"POST",data:JSON.stringify(t),dataType:"json",crossDomain:!0,contentType:"application/json",success:function(e){var t;t=ub.data.featureFlagCodes.getCode(i),ub.config.features.setState(t.section,t.code,e.success),void 0!==n&&n(e)}}))},ub.config.setFeatureFlags=function(){ub.config.setFeatureFlag("Beta Sport Uniforms"),ub.config.setFeatureFlag("Show price items of uniforms"),ub.config.setFeatureFlag("Test Orders"),ub.config.setFeatureFlag("Tackle Twill Custom Sizes"),ub.config.newFeatureFlagsInfoDisplay(["New Filter","New PDF"])},ub.config.newFeatureFlagsInfoDisplay=function(e){console.log(""),console.info("[ New Feature Flag Checker ]"),_.each(e,function(e){ub.funcs.betaFeaturesChecker(e,function(){console.info("Setting the feature [ "+e+" ] to true")},function(){console.info("Setting the feature [ "+e+" ] to false")})}),console.log("")},ub.config.isFeatureOn=function(e,t){var i=ub.config.feature_flags[e][t];return"boolean"!=typeof i?(console.warn("Feature Flag ("+e+"-"+t+") doesn't exist"),!1):i},ub.config.print_version=function(){var e=["\n %c %c %c ✰ Prolook Uniform Builder v"+ub.VERSION+" ✰  %c  %c  ENV: "+ub.config.app_env+" | Host: "+ub.config.host+" | API: "+ub.config.api_host+" %c %c %c\n\n","background: #3d3d3d; padding:5px 0;","background: #3d3d3d; padding:5px 0;","color: #fff; background: #030307; padding:5px 0;","color: #3d3d3d; background: #3d3d3d; padding:5px 0;","color: #3d3d3d; background: #acacac; padding:5px 0;","color: #3d3d3d; background: #3d3d3d; padding:5px 0;","color: #fff; background: #3d3d3d; padding:5px 0;","color: #fff; background: #3d3d3d; padding:5px 0;"];window.console.log.apply(console,e)},ub.config.ignoreScaleRulesOnSublimatedAndTwill=function(e){return!ub.config.features.isOn("uniforms","tackeTwillCustomSizes")&&_.contains([],e)},ub.config.ignoreFontRulesOnSublimatedAndTwill=function(e){return _.contains([],e)}}),$(document).ready(function(){ub.utilities={maintenanceMessage:function(){var e=$("#m-maintenance-message").html(),t=Mustache.render(e,{date:""});bootbox.dialog({title:"Maintenance Schedule",message:t}).init(function(){})},warn:function(e,t,i){console.warn(e)},error:function(e,t,i){console.trace(),console.error(e)},proggError:function(e,t,i){console.trace(),console.error(e)},info:function(e,t,i){console.info(e)},actionLog:function(e,t,i){console.info(e)},buildTemplateString:function(e,t){var i=$(e).html();return Mustache.render(i,t)},cloneObject:function(e){return JSON.parse(JSON.stringify(e))},getJSON:function(e,i,n){var a="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("get",e,!0),a.onreadystatechange=function(){var e,t;4==a.readyState&&(200==(e=a.status)?(t=JSON.parse(a.responseText),i&&i(t)):n&&n(e))},a.send()},postJSON:function(e,t,i,n){var a="undefined"!=typeof XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");a.open("post",e,!0),a.setRequestHeader("Content-type","application/json"),a.onreadystatechange=function(){var e,t;4==a.readyState&&(200==(e=a.status)?(t=JSON.parse(a.responseText),i&&i(t)):n&&n(e))};var o=JSON.stringify(t);a.send(o)},domParserDecoder:function(e){return(new DOMParser).parseFromString("<!doctype html><body>"+e,"text/html").body.textContent}},ub.pickersDialog=void 0,ub.pickersStartTime=function(){"builder"===ub.page&&(ub.startTime=new Date,$("div.debug-panel").addClass("pickersLoader"))};ub.startTime=function(){ub.startTime=new Date,ub.utilities.info(ub.config.uniform_name+" - "+ub.config.sport),ub.utilities.info("")},ub.getElapsedTime=function(){var e=new Date-ub.startTime,t=Math.round(e);return t=(t=(t/=1e3).toFixed(4)).toString().lpad("&nbsp;",7)};ub.displayDoneAt=function(e){if("builder"===ub.page){var t,i,n,a,o="";"Rendering awesomeness ..."===e?(setTimeout(function(){$("div.debug-panel").fadeOut()},500),t=e+" <strong>"+ub.getElapsedTime()+" secs.</strong>",o="awesomeness"):t='[<strong class="light">'+ub.getElapsedTime()+" sec.</strong> ]\t"+(void 0!==e?e+" ":""),i=(i=(i=(i=(i=(i=t.replace("&nbsp;"," ")).replace("<br />","")).replace("<strong>","")).replace('<strong class="light">',"")).replace("</strong>","")).replace('class="light"',""),ub.utilities.info(i),n='<span class="load-line '+o+'">'+t+"</span>",$("div.loading-messages").append(n),a="Loading "+ub.config.uniform_name+" ["+ub.config.sport+"]","none"!==ub.config.uniform_name&&"none"!==ub.config.sport||(a="Loading Pickers..."),ub.updateDebugPanel("",n,a),$("span.load-line").fadeIn()}},ub.funcs.closePickersDialog=function(){setTimeout(function(){$("div.debug-panel").fadeOut()},100)},ub.afterLoadScripts=function(){"local"===ub.config.app_env?ub.utilities.info("Local environment detected, skipping afterload scripts."):$.getScript("/uniform-builder/js/uniform-builder-after-load-scripts.js")}}),$(document).ready(function(){ub.funcs.getApplicationSettings=function(e){var t=parseInt(e);return ub.current_material.settings.applications[t]},ub.funcs.getApplicationObjectByPerspective=function(e,t){var i=t+"_view",n="objects_"+e;return ub.objects[i][n]},ub.funcs.getApplicationViewObjects=function(e){var t;if(void 0!==(t=ub.funcs.getApplicationSettings(e)))return t.application.views,_.map(t.application.views,function(e){return{perspective:e.perspective,isPrimary:e.application.isPrimary,perspectiveObject:ub.funcs.getApplicationObjectByPerspective(e.application.id,e.perspective),perspectiveSettings:e.application}});ub.utilities.warn("Invalid Application ID: "+e)}}),$(document).ready(function(){ub.utilities.errorWithCode=function(e,t){var i=e;void 0!==e&&(console.log(" "),console.error("Error Code: "+i.errorCode),void 0!==i.captionForInput&&(console.error(i.captionForInput+":"),console.error(" "+t)),console.error("Message:"),console.error(" "+i.message),void 0!==i.example&&(console.error("Example:"),console.error(" "+i.example)),console.error("Solution:",i.solutions),console.error(" "+i.solutions),console.log(" "))},ub.errorCodes={items:[{errorCode:"maskLayerNotFound",message:"A Material Option is not found for a particular perspective",example:"Left Cowl Insert is not found on back perspective",solutions:"Upload the layer on the specified perspective, if its not visible, just a upload a blank layer.",captionForInput:"Material Option / Perspective"},{errorCode:"namesDontMatch",message:"Names of Material Option don't match (invalid case)",example:"Right Arm trim when in other perspective it's Right Arm Trim",solutions:"Check the name of the material option for correct casing.",captionForInput:"Material Option"},{errorCode:"zeroOneInchInPX",message:"One Inch In PX field is zero.",example:void 0,solutions:"Add a value to one_inch_in_px",captionForInput:void 0}],getCode:function(e,t){var i=_.find(this.items,{errorCode:e});return void 0===i&&ub.utilities.info("Invalid Error code. ["+e+"]"),i},prepareShortcuts:function(){return ub.errorCode={},_.each(this.items,function(e){ub.errorCode[e.errorCode]=e}),!0}},ub.errorLogs={items:[],push:function(e){this.items.push(e),this.print(e)},print:function(e){str=e.msg+": "+e.input,ub.utilities.info(str)}}}),$(document).ready(function(){ub.endpoints={items:[{name:"Get Sales Rep by Zip Code",code:"getSalesRepByZipCode",url:"api/sales_reps/get_by_zipcode/",info:"Concatenate Zip Code at the end of the url to get sales reps on those areas."},{name:"Get All Sales Rep",code:"getAllSalesReps",url:"api/sales_reps/",info:"Get All Sales Rep (no parameters)"},{name:"Get Order Info",code:"getOrderInfoByOrderID",url:"api/order/orderId/",info:"Concatenate Order Code at the end of the url to get order info."},{name:"Get Order Items",code:"getOrderItemsByOrderID",url:"api/order/items/",info:"Concatenate Order Code at the end of the url to get order items."},{name:"Get Order Items",code:"getOrderItemsByOrderID",url:"api/order/items/",info:"Concatenate Order Code at the end of the url to get order items."},{name:"Get Messages By Recipient ID",code:"getMessagesByRecipientID",url:"api/messages/recipient/",info:"Concatenate Recepient ID at the end of the URL to get the messages ."},{name:"Update Artwork Status",code:"updateArtworkStatus",url:"api/order/updateArtworkStatus",info:"Pass Order ID and Status."},{name:"Update Order Item",code:"updateOrderItem",url:"api/orders/updateOrderItem",info:"Pass the key value pair"},{name:"Get Orders w/ Items",code:"getOrdersWItems",url:"api/order/orderswItems/",info:"Concatenate Order ID at the end of the URL to get the order details."},{name:"Update Artwork Request",code:"updateArtworkRequest",url:"api/artwork_request/update/",info:"Post artwork id, order code and approve value"},{name:"Get Cut Links",code:"getCutLinks",url:"api/cut_links/",info:"Get PDF Urls"},{name:"Get Mascot Scales",code:"getMascotScales",url:"api/v1-0/get_mascot_size",info:"Get Mascot Scales"},{name:"Create New Embellishment Data",code:"createNewEmbellishmentData",url:"api/v1-0/inksoft_design",info:"Create New Embelishment Data"},{name:"Update Custom Artwork",code:"updateCustomArtwork",url:"api/v1-0/inksoft_design/update",info:"Update Custom Artwork"}],getUrl:function(e){var t=_.find(this.items,{code:e});return void 0===t&&ub.utilities.error("Can't find url for ["+name+"]"),t},getFullUrlString:function(e){var t=_.find(this.items,{code:e});return void 0===t&&ub.utilities.error("Can't find url for ["+e+"]"),ub.config.api_host+"/"+t.url},fetch:function(e,t,i){$.ajax({url:ub.endpoints.getFullUrlString(e)+t,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success&&i(e)}})},fetchPOST:function(e,t,i){var n=ub.endpoints.getFullUrlString(e);$.ajax({url:n,data:JSON.stringify(t),type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?(ub.displayDoneAt("Mascot Sizes Loaded ..."),i(e)):ub.devtools.debugMode&&(console.log(" "),console.error("URL String: "+n),console.error("No Mascot Size detected for the following parameters: "),console.error(t),console.log(" "))}})}},window.ubep=ub.endpoints}),$(document).ready(function(){ub.styleValues={},window.ubsv=ub.styleValues,ub.styleValues.mascotScales={items:[],hasValues:function(){return void 0!==ub.styleValues.mascotScales.match},cleanUp:function(e,t,i){var n=ub.styleValues.mascotScales.match,a="",o="";""!==n.block_pattern_options&&void 0!==n.block_pattern_options?a=JSON.parse(n.block_pattern_options):"Compression (Apparel)"===e&&(o=JSON.parse(n[0].properties)),""!==n.properties&&void 0!==n.properties&&(o=JSON.parse(n.properties)),n.block_pattern_options=a,n.properties=o,ub.styleValues.mascotScales.items=n},fetchValues:function(){var e={block_patterns:ub.config.blockPattern,category:ub.config.sport,type:ub.config.type};"Compression (Apparel)"!==ub.config.sport&&(e.block_pattern_options=ub.config.option),ubep.fetchPOST("getMascotScales",e,function(e){ub.styleValues.mascotScales.match=e.mascot_size,ub.styleValues.mascotScales.cleanUp(ub.config.sport,ub.config.type,ub.config.option),ub.utilities.info("Mascot Scales Loaded."),ub.styleValues.embellishmentScales.match=e.mascot_size,ub.styleValues.embellishmentScales.cleanUp(ub.config.sport,ub.config.type,ub.config.option),ub.utilities.info("Embellishment Scales Loaded.")})},getScale:function(e){var t,i=e,n=void 0,a=void 0===ub.styleValues.mascotScales.match;if(ub.funcs.isSocks()&&(i=2.5),"Socks (Apparel)"===ub.config.sport&&(i=e),"Crew Sock"===ub.config.blockPattern&&(i=2.5),void 0===(t=a?void 0:_.find(ub.styleValues.mascotScales.match.properties,{size:i.toString()})))if(ub.config.features.isOn("uniforms","tackeTwillCustomSizes")){var o=1<e?Math.abs(e%1-e):1-e%1+e,r=e<12?o+1:o-1,s=_.find(ub.styleValues.mascotScales.match.properties,{size:o.toString()}).scale,l=_.find(ub.styleValues.mascotScales.match.properties,{size:r.toString()}).scale;s=parseFloat(s);var c=(l=parseFloat(l))-s;n=1<e?{x:Math.abs(c)*(e%1)+s,y:Math.abs(c)*(e%1)+s}:{x:Math.abs(c)*(e%1),y:Math.abs(c)*(e%1)}}else ub.utilities.error("Mascot Scale for Size "+e+" is not found. Using {x: 0.5, y: 0.5}."),n=void 0;else n={x:parseFloat(t.scale),y:parseFloat(t.scale)};return n}},ub.styleValues.embellishmentScales={items:[],hasValues:function(){return void 0!==ub.styleValues.embellishmentScales.match},cleanUp:function(e,t,i){var n=ub.styleValues.embellishmentScales.match,a="",o="";""!==n.block_pattern_options&&void 0!==n.block_pattern_options?a=n.block_pattern_options:"Compression (Apparel)"===e&&(o=n[0].properties),""!==n.properties&&void 0!==n.properties&&(o=n.properties),n.block_pattern_options=a,n.properties=o,ub.styleValues.embellishmentScales.items=n},fetchValues:function(){ubep.fetch("getembellishmentScales",function(e){ub.styleValues.embellishmentScales.items=e.mascot_sizes,ub.styleValues.embellishmentScales.cleanUp(ub.config.sport,ub.config.type,ub.config.option),ub.utilities.info("Mascot Scales Loaded.")})},getScale:function(e){var t,i=e,n=void 0,a=void 0===ub.styleValues.embellishmentScales.match;if(ub.funcs.isSocks()&&(i=2.5),"Socks (Apparel)"===ub.config.sport&&(i=e),"Crew Sock"===ub.config.blockPattern&&(i=2.5),void 0===(t=a?void 0:_.find(ub.styleValues.embellishmentScales.match.properties,{size:i.toString()})))if(ub.config.features.isOn("uniforms","tackeTwillCustomSizes")){var o=1<e?Math.abs(e%1-e):1-e%1+e,r=e<12?o+1:o-1,s=_.find(ub.styleValues.embellishmentScales.match.properties,{size:o.toString()}).scale,l=_.find(ub.styleValues.embellishmentScales.match.properties,{size:r.toString()}).scale;s=parseFloat(s);var c=(l=parseFloat(l))-s;n=1<e?{x:Math.abs(c)*(e%1)+s,y:Math.abs(c)*(e%1)+s}:{x:Math.abs(c)*(e%1),y:Math.abs(c)*(e%1)}}else ub.utilities.error("Mascot Scale for Size "+e+" is not found. Using {x: 0.5, y: 0.5}."),n=void 0;else n={x:parseFloat(t.scale),y:parseFloat(t.scale)};return n}}}),$(document).ready(function(){ub.funcs.afterLoadFunctionList=[],ub.funcs.executeAfterLoadFunctionList=function(){ub.utilities.info("Executing Afterload Functions"),console.log(""),_.each(ub.funcs.afterLoadFunctionList,function(e){e()})},ub.funcs.addFunctionToAfterloadList=function(e){"function"==typeof e?ub.funcs.afterLoadFunctionList.push(e):ub.utilities.proggError("Argument func must be of type function...")},ub.funcs.betaFeaturesChecker=function(t,e,i){var n=JSON.parse(localStorage.getItem("feature_flags"));if(_.contains(["New PDF","New Filter"],t))if("true"===localStorage.getItem("beta_features")){var a=n.find(function(e){return e.name===t});"true"===localStorage.getItem("beta_features")&&void 0!==a&&a.name===t&&a.user_ids.includes(ub.user.id.toString())?e():i()}else i()}}),$(document).ready(function(){ub.richardson={},ub.richardson.data={}}),$(document).ready(function(){ub.richardson.funcs={},ub.richardson.funcs.init=function(){ub.branding.useAllColors=!0}}),$(document).ready(function(){ub.fabric={},ub.fabric.fabricSelectionBlocks={items:[{blockPattern:["PTS Pro Select Raglan","PTS Pro Select Sleeveless"],layers:[98,99,100,101]},{blockPattern:["PTS Signature Raglan"],layers:[98,99,100,101,102,103]}],isFabricSelectionEnabled:function(){return _.filter(ub.fabric.fabricSelectionBlocks.items,function(e){return _.includes(e.blockPattern,ub.config.blockPattern)})}},ub.fabric.defaultFabric=function(){var e=_.filter(ub.current_material.materials_options,function(e){return("Highlights"===e.name||"Shadows"===e.name)&&1===e.default_asset}),t=_.map(e,function(e){return{name:e.name,layer:e.layer_level,default_asset:e.default_asset,perspective:e.perspective}}),i=_.uniq(_.pluck(t,"layer"));return ub.utilities.info("Activating Fabric ids: "),ub.utilities.info(i),_.contains(i,98)?"one":_.contains(i,100)?"two":_.contains(i,102)?"three":"none"},ub.fabric.initFabric=function(){var e=ub.fabric.defaultFabric();"one"===e&&ub.fabric.fabricOne(),"two"===e&&ub.fabric.fabricTwo(),"three"===e&&ub.fabric.fabricThree(),ub.utilities.info("Initializing fabric function...")},ub.fabric.testFabric=function(){},ub.fabric.fabricOne=function(){_.each(ub.fabric.fabricCollections,function(e){98!==e.id&&99!==e.id||(e.obj.visible=!0),100!==e.id&&101!==e.id||(e.obj.visible=!1),102!==e.id&&103!==e.id||(e.obj.visible=!1)})},ub.fabric.fabricTwo=function(){_.each(ub.fabric.fabricCollections,function(e){100!==e.id&&101!==e.id||(e.obj.visible=!0),98!==e.id&&99!==e.id||(e.obj.visible=!1),102!==e.id&&103!==e.id||(e.obj.visible=!1)})},ub.fabric.fabricThree=function(){_.each(ub.fabric.fabricCollections,function(e){103!==e.id&&102!==e.id||(e.obj.visible=!0),98!==e.id&&99!==e.id||(e.obj.visible=!1),100!==e.id&&101!==e.id||(e.obj.visible=!1)})},ub.fabric.fabricInitSample=function(){ub.fabric.fabricTwo(),$("span.table-btn").fadeIn(),$("span.table-btn").on("click",function(){ub.fabric.activateFabrics()}),"PTS Pro Select Raglan"===ub.config.blockPattern||"PTS Pro Select Sleeveless"===ub.config.blockPattern?(console.log("Hiding Mixed Button"),$("span#mixed").fadeOut()):console.log("Mixed Button Shown")},ub.fabric.activateFabrics=function(e){if(ub.funcs.beforeActivateApplication(),!$("div#primaryPatternPopup").is(":visible")&&!$("div#primaryMascotPopup").is(":visible")&&(ub.funcs.beforeActivateApplication(),ub.funcs.okToStart())){ub.funcs.activatePanelGuard(),$("div#changeApplicationUI").remove(),ub.funcs.deactivatePanels();var t="";t='<div id="applicationUI" data-application-id="-1">',t+='<div class="header">',t+='<div class="body">',t+='<div class="cover"></div>',t+='<div class="ui-row">',t+="Fabric Change Test",t+="</div>",t+='<div class="ui-row">',t+='<button class="fabric-button" id="solid">Solid (98 - 99)</button>',t+="</div>",t+='<div class="ui-row">',t+='<button class="fabric-button active" id="all-mesh">All Mesh (100 - 101)</button>',t+="</div>","PTS Pro Select Raglan"!==ub.config.blockPattern&&"PTS Pro Select Sleeveless"!==ub.config.blockPattern&&(t+='<div class="ui-row">',t+='<button  class="fabric-button" id="mixed">Mixed (102 - 103)</button>',t+="</div>"),t+='<div class="clearfix"></div>',t+="</div>",t+="</div>",$(".modifier_main_container").append(t),$("button.fabric-button").on("click",function(){var e=$(this).attr("id");$("button.fabric-button").removeClass("active"),"solid"===e?ub.fabric.fabricOne():"all-mesh"===e?ub.fabric.fabricTwo():"mixed"===e&&ub.fabric.fabricThree(),$(this).addClass("active")}),$("div#applicationUI").fadeIn()}},ub.fabric.init=function(){0<ub.fabric.fabricSelectionBlocks.isFabricSelectionEnabled().length&&ub.fabric.fabricInitSample(),"richardson"===ub.current_material.material.brand&&ub.fabric.initFabric()},ub.funcs.addFunctionToAfterloadList(ub.fabric.init)}),$(document).ready(function(){ub.branding={logoUrl:"/images/branding/pl-logo-black-1e1e1e.png",appTitle:"",useAllColors:!1,useAlternativeUI:!1},$("a.navbar-brand > img").attr("src",ub.branding.logoUrl),ub.funcs.initBrands=function(){"Richardson"===ub.config.brand&&ub.richardson.funcs.init()},ub.funcs.enableAlternativeUI=function(){ub.branding.useAlternativeUI=!0},ub.funcs.initBrands()}),$(document).ready(function(t){ub.funcs.initHSELLogo=function(){ub.config.isFromHSEL&&(t("#navbar-header").append('<a class="navbar-brand btn" style="padding: 21px 20px 20px 10px !important;"><img src="https://pngimage.net/wp-content/uploads/2018/06/x-image-png-4.png" style="height: 20px; width: 20px;"></a>'),t("#navbar-header").append('<a class="navbar-brand btn" id="hsel-logo" href="javascript:void(0)"><img src="/images/hsel/logo.png" class="hsel-logo"></a>'),t(".navbar-brand.btn.dropdown-toggle").css("min-width","0"),t(".main-picker-items[data-item='Men'").trigger("click"),_.delay(function(){t('.main-picker-items.apparel.grow[data-item="eSports"]').trigger("click")},100),t("a#hsel-logo").on("click",function(e){e.preventDefault(),t(".main-picker-items[data-item='Men'").trigger("click"),_.delay(function(){t('.main-picker-items.apparel.grow[data-item="eSports"]').trigger("click")},50)}))}}),$(document).ready(function(){}),$(document).ready(function(){ub.errors=[],ub.uiVersion="v2",ub.offsetValue=70,ub.funcs.ui={},ub.is={},ub.ui={},ub.ui.drops={},ub.modifiers={},ub.tethers={},ub.dimensions={},ub.dimensions.width=1e3,ub.dimensions.height=1100,ub.offset={x:70,y:70},ub.active=null,ub.vars={},ub.sport="",ub.maxLayers=0,ub.zIndexMultiplier=4,ub.uiTools={},ub.nlp={},ub.totalWidth=1e3,ub.searchResults={},ub.ALPHA_ON=1,ub.ALPHA_OFF=.1,ub.activeApplication=void 0,ub.tools={},ub.tools.activeTool={moveTool:!1,scaleTool:!1,rotateTool:!1,resetTool:!1,deleteTool:!1,deactivate:function(){this.moveTool=!1,this.scaleTool=!1,this.rotateTool=!1,this.resetTool=!1,this.deleteTool=!1},active:function(){return this.moveTool||this.scaleTool||this.rotateTool||this.resetTool||this.deleteTool}},ub.tools.manipulator={},ub.tools.manipulator.tools=void 0,ub.status={},ub.status.manipulatorDown=!1,ub.filterStructure={},ub.zoom=!1,ub.showLocation=!1,ub.current_group_id="1",ub.current_part=1,ub.active_view="front",ub.active_part=void 0,ub.active_lock=void 0,ub.same_here_once=!1,ub.interacted={previous:{name:void 0},current:{name:void 0}},ub.container_div="main_view",ub.views=["front","back","left","right"],ub.stage=new PIXI.Container,ub.left_view=new PIXI.Container,ub.front_view=new PIXI.Container,ub.back_view=new PIXI.Container,ub.right_view=new PIXI.Container,ub.pattern_view=new PIXI.Container,ub.gradient_preview=new PIXI.Container,window.ub.pixi={},window.ub.pixi.new_sprite=function(e){return new PIXI.Sprite(PIXI.Texture.fromImage(e+"?v="+new Date/1e3))},PIXI.SCALE_MODES.DEFAULT=PIXI.SCALE_MODES.LINEAR,$("#main_view").hide(),ub.stage.interactive=!0,ub.pCanvas=document.getElementById(ub.container_div),ub.renderer=PIXI.autoDetectRenderer(ub.dimensions.width,ub.dimensions.height,{transparent:!1},!1),ub.renderer.backgroundColor=6381662,ub.stage.addChild(ub.left_view),ub.stage.addChild(ub.front_view),ub.stage.addChild(ub.back_view),ub.stage.addChild(ub.right_view),ub.stage.addChild(ub.pattern_view),ub.stage.addChild(ub.gradient_preview),void 0!==ub.renderer&&null!==ub.pCanvas&&ub.pCanvas.appendChild(ub.renderer.view),ub.interactionManager=ub.renderer.plugins.interaction,ub.dragAndDropManager=new PIXI.DragAndDropManager(ub.interactionManager),ub.right_view.position.x=ub.dimensions.width,ub.back_view.position.x=ub.dimensions.width,ub.left_view.position.x=ub.dimensions.width,ub.pattern_view.position.x=ub.dimensions.width,ub.current_material={},ub.current_material.settings={},ub.current_material.settings.pdfOrderForm="",ub.current_material.settings.roster=[],ub.current_material.settings.order_info={},ub.current_material.settings.size_breakdown={},ub.current_material.settings.pipings={},ub.current_material.settings.randomFeeds={},ub.current_material.settings.thumbnails={front_view:"",back_view:"",left_view:"",right_view:""},ub.current_material.settings.pdfOrderForm="",ub.states={},ub.states.canDoubleClick=!1,ub.states.active_application="undefined",ub.data={},ub.data.views=["front","back","left","right"],ub.data.sorting=!1,ub.data.justSorted=!1,ub.data.design_sets=void 0,ub.data.materials=void 0,ub.data.colors={},ub.data.fonts=void 0,ub.data.pipings=void 0,ub.data.tagged_styles={},ub.data.backTabLayer=-300,ub.data.prolookLayer=-303,ub.data.maxLength=12,ub.data.maxLengthNumbers=2,ub.data.maxLengthSublimated=32,ub.data.hasProcessedArtworks=!1,ub.data.inkSoftBaseURL="https://stores.inksoft.com",ub.data.inkSoftProlookStore="/Prolook_Sports",ub.data.inksoftFontsFolder="https://s3-us-west-2.amazonaws.com/uniformbuilder/inksoft-fonts/",ub.config.switchToFrontBody=new Date("Fri Aug 14 2017 17:08:32 GMT+0800 (+08)"),ub.folders={piping:"/images/pipings"},ub.data.pipings=[{name:"Neck Piping 1/8",size:"1/8",set:"Neck Piping",color1:!0,color2:!0,color3:!1,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/eighth/Right/3.png"}]}]},{name:"Neck Piping 1/4",size:"1/4",set:"Neck Piping",color1:!0,color2:!1,color3:!1,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Neck Piping/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Neck Piping/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Neck Piping/fourth/Right/3.png"}]}]},{name:"Yoke Piping 1/8",size:"1/8",set:"Yoke Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/eighth/Right/3.png"}]}]},{name:"Yoke Piping 1/4",size:"1/4",set:"Yoke Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Yoke Piping/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Yoke Piping/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Yoke Piping/fourth/Right/3.png"}]}]},{name:"Center Piping 1/8",size:"1/8",set:"Center Piping",color1:!0,color2:!1,color3:!1,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/eighth/Front/1.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/eighth/Back/1.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/eighth/Left/1.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/eighth/Right/1.png"}]}]},{name:"Center Piping 1/4",size:"1/4",set:"Center Piping",color1:!0,color2:!1,color3:!1,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/fourth/Front/1.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/fourth/Back/1.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/fourth/Left/1.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Center Piping/fourth/Right/1.png"}]}]},{name:"Left End of Sleeve Piping 1/8",size:"1/8",set:"Left End of Sleeve Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/eighth/Right/3.png"}]}]},{name:"Left End of Sleeve Piping 1/4",size:"1/4",set:"Left End of Sleeve Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/fourth/Right/3.png"}]}]},{name:"Left End of Sleeve Piping 1/2",size:"1/2",set:"Left End of Sleeve Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left End of Sleeve Piping/half/Right/3.png"}]}]},{name:"Right End of Sleeve Piping 1/8",size:"1/8",set:"Right End of Sleeve Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/eighth/Right/3.png"}]}]},{name:"Right End of Sleeve Piping 1/4",size:"1/4",set:"Right End of Sleeve Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/fourth/Right/3.png"}]}]},{name:"Right End of Sleeve Piping 1/2",size:"1/2",set:"Right End of Sleeve Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right End of Sleeve Piping/half/Right/3.png"}]}]},{name:"Left Sleeve Piping 1-inch Up 1/8",size:"1/8",set:"Left Sleeve Piping 1-inch Up",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/eighth/Right/3.png"}]}]},{name:"Left Sleeve Piping 1-inch Up 1/4",size:"1/4",set:"Left Sleeve Piping 1-inch Up",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/fourth/Right/3.png"}]}]},{name:"Left Sleeve Piping 1-inch Up 1/2",size:"1/2",set:"Left Sleeve Piping 1-inch Up",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left Sleeve Piping 1-inch Up/half/Right/3.png"}]}]},{name:"Right Sleeve Piping 1-inch Up 1/8",size:"1/8",set:"Right Sleeve Piping 1-inch Up",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/eighth/Right/3.png"}]}]},{name:"Right Sleeve Piping 1-inch Up 1/4",size:"1/4",set:"Right Sleeve Piping 1-inch Up",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/fourth/Right/3.png"}]}]},{name:"Right Sleeve Piping 1-inch Up 1/2",size:"1/2",set:"Right Sleeve Piping 1-inch Up",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right Sleeve Piping 1-inch Up/half/Right/3.png"}]}]},{name:"Left Set-in Piping 1/8",size:"1/8",set:"Left Set-in Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/eighth/Right/3.png"}]}]},{name:"Left Set-in Piping 1/4",size:"1/4",set:"Left Set-in Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Left Set-in Piping/fourth/Right/3.png"}]}]},{name:"Right Set-in Piping 1/8",size:"1/8",set:"Right Set-in Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/eighth/Right/3.png"}]}]},{name:"Right Set-in Piping 1/4",size:"1/4",set:"Right Set-in Piping",color1:!0,color2:!0,color3:!0,perspectives:[{perspective:"front",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Front/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Front/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Front/3.png"}]},{perspective:"back",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Back/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Back/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Back/3.png"}]},{perspective:"left",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Left/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Left/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Left/3.png"}]},{perspective:"right",layers:[{position:1,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Right/1.png"},{position:2,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Right/2.png"},{position:3,filename:ub.folders.piping+"/Right Set-in Piping/fourth/Right/3.png"}]}]}],ub.data.pipings=[],ub.data.searchSource={},ub.data.colorsUsed={},ub.data.defaultUniformStyle={},ub.data.modifierLabels={},ub.data.boundaries_transformed_one_dimensional={front:[],back:[],right:[],left:[]},ub.data.boundaries_transformed={},ub.data.applications_transformed_one_dimensional=[],ub.data.applications_transformed={},ub.data.applications_transformed_temp={body:{applications:[{id:1,application_views:[{perspective:"front"},{perspective:"back"},{perspective:"left"},{perspective:"right"}]}]}},ub.data.uniformSizes=[{sport:"football",category:"adult",sizes:["XS","S","M","L","XL","2XL","3XL","4XL","5XL","YXS","YS","YM","YL","YXL","Y2XL","Y3XL"]},{sport:"football",category:"youth",sizes:["YS","YM","YL","YXL","Y2XL","Y3XL"]}],ub.data.defaultFontSizes=[{size:1,outputSize:60},{size:2,outputSize:80},{size:3,outputSize:100},{size:4,outputSize:120},{size:5,outputSize:140},{size:6,outputSize:140},{size:7,outputSize:160},{size:8,outputSize:320},{size:9,outputSize:340},{size:10,outputSize:360},{size:11,outputSize:380},{size:12,outputSize:400}],ub.data.sportAliases={items:[{name:"Football",alias:"football"},{name:"Football 2017",alias:"football 2017"},{name:"Wrestling",alias:"text_wrestling"},{name:"Baseball",alias:"baseball"},{name:"Fastpitch",alias:"fastpitch"},{name:"Compression (Apparel)",alias:"compression"},{name:"Tech-Tee (Apparel)",alias:"tech-tee"},{name:"Crew Socks (Apparel)",alias:"crew-socks"},{name:"Hockey",alias:"hockey"},{name:"Cinch Sack (Apparel)",alias:"cinch-sack"},{name:"Volleyball",alias:"volleyball"},{name:"Fan Replica Jersey (Apparel)",alias:"fan-replica-jersey"},{name:"2017 Team Short with Pockets (Apparel)",alias:"team-short"},{name:"Signature Coaches Short (Apparel)",alias:"signature-coaches-short"},{name:"Soccer",alias:"soccer"},{name:"Basketball",alias:"basketball"},{name:"Lacrosse",alias:"lacrosse"},{name:"Game Day Jackets (Apparel)",alias:"game-day-jackets"},{name:"Hoodie (Apparel)",alias:"hoodie"},{name:"Field Hockey",alias:"field-hockey"},{name:"Compression Pant (Apparel)",alias:"compression-pant"},{name:"Wrestling Compression Shorts (Apparel)",alias:"wrestling-compression-shorts"},{name:"Cage Jacket (Apparel)",alias:"cage-jacket"},{name:"Compression Pant (Apparel)",alias:"compression-pant-apparel"},{name:"Polo (Apparel)",alias:"polo-apparel"},{name:"Wrestling 2018",alias:"wrestling-2018"},{name:"Socks (Apparel)",alias:"socks"},{name:"Tennis",alias:"tennis"},{name:"SFN Jogger (Apparel)",alias:"sfn-jogger"},{name:"Yoga Pant (Apparel)",alias:"yoga-pant"},{name:"Tech Tee (eSports)",alias:"gamer-jersey-esports"}],getAlias:function(e){if(void 0===(t=_.find(this.items,{name:e}))){ub.utilities.warn(e+" not found."),ub.utilities.warn("Forcing lowercase instead. Using ("+e.toLowerCase()+")");var t={name:e,alias:e.toLowerCase()}}return t}},ub.data.fontSizes={items:[{fontID:1,fontName:"Aachen Bold",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:2,fontName:"Algerian",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:3,fontName:"Angels",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:4,fontName:"Arabian Nights",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:5,fontName:"Athletic",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:6,fontName:"Baccus Expanded",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:7,fontName:"Bean Town",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:8,fontName:"Bomber",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:9,fontName:"Bosox",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:10,fontName:"Brush Script",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:11,fontName:"Carbon Block",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:12,fontName:"Celtic",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:13,fontName:"Cobalt",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:14,fontName:"Cobra",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:15,fontName:"Cracker jack",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:16,fontName:"Demonized",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:17,fontName:"Dodger Script",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]},{fontID:18,fontName:"Duck Face",startSize:20,increment:10,fontSizeTable:[{inputSize:"1",outputSize:20},{inputSize:"2",outputSize:30},{inputSize:"3",outputSize:40},{inputSize:"4",outputSize:50},{inputSize:"5",outputSize:60},{inputSize:"6",outputSize:70},{inputSize:"7",outputSize:80},{inputSize:"8",outputSize:90},{inputSize:"9",outputSize:100},{inputSize:"10",outputSize:110},{inputSize:"11",outputSize:120},{inputSize:"12",outputSize:130}]}]},ub.data.applications={items:[{id:1,layer:"Body",perspective:"front",name:"Front / Top",code:"1",layer_order:30,rotation:0,position:{x:.5,y:.25}},{id:2,layer:"Body",perspective:"front",name:"Front / Center",code:"2",layer_order:31,rotation:0,position:{x:.5,y:.36}},{id:3,layer:"Body",perspective:"front",name:"Front / Center (2nd)",code:"3",layer_order:32,rotation:0,position:{x:.5,y:.36}},{id:4,layer:"Body",perspective:"front",name:"Front / Bottom Right",code:"4",layer_order:33,rotation:0,position:{x:.35,y:.7}},{id:5,layer:"Body",perspective:"front",name:"Front / Bottom Left",code:"5",layer_order:34,rotation:0,position:{x:.65,y:.7}},{id:6,layer:"Body",perspective:"back",name:"Back Top",code:"6",layer_order:35,rotation:0,position:{x:.5,y:.2}},{id:7,layer:"Body",perspective:"back",name:"Back Center",code:"7",layer_order:36,rotation:0,position:{x:.5,y:.32}},{id:8,layer:"Left Sleeve",perspective:"left",name:"Left Shoulder - Top",code:"8",layer_order:37,rotation:0,position:{x:.47,y:.15}},{id:9,layer:"Left Sleeve",perspective:"left",name:"Left Shoulder - Bottom",code:"9",layer_order:38,rotation:0,position:{x:.47,y:.23}},{id:10,layer:"Right Sleeve",perspective:"right",name:"Right Shoulder - Top",code:"10",layer_order:39,rotation:0,position:{x:.47,y:.15}},{id:11,layer:"Right Sleeve",perspective:"right",name:"Right Shoulder - Bottom",code:"11",layer_order:40,rotation:0,position:{x:.47,y:.27}},{id:12,layer:"Right Sleeve",perspective:"front",name:"Right Sleeves",code:"12",layer_order:41,rotation:.96,position:{x:.14,y:.25}},{id:13,layer:"Left Sleeve",perspective:"front",name:"Left Sleeve",code:"13",layer_order:42,rotation:5.31,position:{x:.86,y:.25}},{id:14,layer:"Body",perspective:"left",name:"Left Center",code:"14",layer_order:43,rotation:0,position:{x:.384,y:.46}},{id:15,layer:"Body",perspective:"right",name:"Right Center",code:"15",layer_order:43,rotation:0,position:{x:.63,y:.45}}]},ub.data.mascots=void 0,ub.data.patterns={},ub.data.genders=[{code:"men",name:"Men"},{code:"women",name:"Women"},{code:"youth",name:"Youth"}],ub.data.sports=[{gender:"Men",sports:[{code:"football",name:"Football",active:"1",tooltip:"",disabledClass:""},{code:"wrestling",name:"Wrestling",active:"1",tooltip:"",disabledClass:""},{code:"basketball",name:"Basketball",active:"1"},{code:"baseball",name:"Baseball",active:"1"},{code:"lacrosse",name:"Lacrosse",active:"1"},{code:"hockey",name:"Hockey",active:"1"},{code:"soccer",name:"Soccer",active:"1"}]},{gender:"Women",sports:[{code:"volleyball",name:"Volleyball",active:"1"},{code:"fastpitch",name:"Fastpitch",active:"1"},{code:"soccer",name:"Soccer"},{code:"basketball",name:"Basketball",active:"1"},{code:"hockey",name:"Hockey",active:"1"},{code:"field-hockey",name:"Field Hockey",active:"1"}]},{gender:"Youth",sports:[{name:"Baseball",active:"1"},{name:"Basketball",active:"1"},{name:"Football",active:"1"},{name:"Soccer",active:"1"}]}],ub.data.apparel=[{gender:"Men",sports:[{code:"polo",name:"Polo (Apparel)",active:"1"},{code:"hoodie",name:"Hoodie (Apparel)",active:"1"},{code:"compression",name:"Compression (Apparel)",active:"1"},{code:"tech_tee",name:"Tech-Tee (Apparel)",active:"1"},{code:"game-day-jackets",name:"Game Day Jackets (Apparel)",active:"1"},{code:"1-4 zip",name:"Quarter Zip Jacket (Apparel)",active:"1"},{code:"cage-jacket",name:"Cage Jacket (Apparel)",active:"1"},{code:"fan-replica-jersey",name:"Fan Replica Jersey (Apparel)",active:"1"},{code:"compression-pant",name:"Compression Pant (Apparel)",active:"1"},{code:"team-short",name:"2017 Team Short with Pockets (Apparel)",active:"1"},{code:"signature-coaches-short",name:"Signature Coaches Short (Apparel)",active:"1"},{code:"wrestling-compression-shorts",name:"Wrestling Compression Shorts (Apparel)",active:"1"},{code:"cinch_sack",name:"Cinch Sack (Apparel)",active:"1"},{code:"sock",name:"Socks (Apparel)",active:"1"}]},{gender:"Women",sports:[{code:"tech_tee",name:"Tech-Tee (Apparel)",active:"1"},{code:"polo",name:"Polo (Apparel)",active:"1"},{code:"fan-replica-jersey",name:"Fan Replica Jersey (Apparel)",active:"1"},{code:"1-4 zip",name:"Quarter Zip Jacket (Apparel)",active:"1"},{code:"game-day-jackets",name:"Game Day Jackets (Apparel)",active:"1"},{code:"hoodie",name:"Hoodie (Apparel)",active:"1"},{code:"cage-jacket",name:"Cage Jacket (Apparel)",active:"1"},{code:"cinch_sack",name:"Cinch Sack (Apparel)",active:"1"},{code:"sock",name:"Socks (Apparel)",active:"1"}]},{gender:"Youth",sports:[]}],ub.data.gradients={items:[{name:"None",code:"none",angle:0,color_stops:[]},{name:"Bottom To Top",code:"bottom_to_top",angle:0,color_stops:[{id:1,value:0,color:"#005dab"},{id:2,value:.9,color:"#1a1a1a"}]},{name:"Top To Bottom",code:"top_to_bottom",angle:0,color_stops:[{id:1,value:0,color:"#535353"},{id:2,value:.9,color:"#005dab"}]},{name:"Sharp Edge",code:"sharp_edge",angle:0,color_stops:[{id:1,value:0,color:"#1a1a1a"},{id:2,value:.9,color:"#1a1a1a"},{id:3,value:1,color:"#005dab"}]},{name:"Radial",code:"radial",angle:180,color_stops:[{id:1,value:0,color:"#005dab"},{id:2,value:1,color:"#1a1a1a"}]},{name:"Diagonal 1",code:"diagonal_1",angle:45,color_stops:[{id:1,value:0,color:"#005dab"},{id:2,value:.2,color:"#1a1a1a"},{id:3,value:.3,color:"#1a1a1a"},{id:4,value:.4,color:"#005dab"},{id:5,value:.8,color:"#1a1a1a"},{id:6,value:.9,color:"#1a1a1a"},{id:7,value:1,color:"#005dab"}]},{name:"Diagonal 2",code:"diagonal_2",angle:315,color_stops:[{id:1,value:0,color:"#005dab"},{id:2,value:.2,color:"#1a1a1a"},{id:3,value:.3,color:"#1a1a1a"},{id:4,value:.4,color:"#005dab"},{id:5,value:.8,color:"#1a1a1a"},{id:6,value:.9,color:"#1a1a1a"},{id:7,value:1,color:"#005dab"}]},{name:"Diagonal 3",code:"diagonal_3",angle:45,color_stops:[{id:1,value:0,color:"#005dab"},{id:2,value:.4,color:"#1a1a1a"},{id:3,value:.6,color:"#1a1a1a"},{id:4,value:1,color:"#005dab"}]},{name:"Custom",code:"custom",angle:0,color_stops:[{id:1,value:0,color:"#008da9"},{id:2,value:1,color:"#ffde00"}]}]},ub.data.accents={items:[{id:0,name:"Default",code:"default",title:"Single Color",thumbnail:"no-accent.png",layers:[{name:"Base Color",default_color:"bdc4c7",layer_no:1,increment_x:0,increment_y:0,outline:0,zIndex:-2},{name:"Mask",default_color:"bdc4c7",layer_no:1,increment_x:0,increment_y:0,outline:0,zIndex:-1}]},{id:1,name:"Outlined",code:"outlined",title:"Two Color",thumbnail:"outlined.png",layers:[{name:"Base Color",default_color:"98012e",layer_no:1,increment_x:0,increment_y:0,outline:0,type:"fill",zIndex:-3},{name:"Outline 1",default_color:"1e1e1e",layer_no:2,increment_x:0,increment_y:0,outline:1,type:"outer_stroke",zIndex:-2},{name:"Mask",default_color:"bdc4c7",layer_no:3,increment_x:0,increment_y:0,outline:0,zIndex:-1}]},{id:2,name:"Single Outline with Shadow",code:"single outline shadow",title:"Two Color with Drop Shadow",thumbnail:"single_outline_with_shadow.png",layers:[{name:"Base Color",default_color:"98012e",layer_no:1,increment_x:0,increment_y:0,outline:0,type:"fill",zIndex:-4},{name:"Outline 1",default_color:"bdc4c7",layer_no:2,increment_x:0,increment_y:0,outline:1,type:"outer_stroke",zIndex:-3},{name:"Shadow",default_color:"1e1e1e",layer_no:3,increment_x:.03,increment_y:.02,outline:1,type:"shadow",zIndex:-2},{name:"Mask",default_color:"bdc4c7",layer_no:4,increment_x:0,increment_y:0,outline:0,zIndex:-1}]},{id:3,name:"Double Outline",code:"double_outline",title:"Three Color",thumbnail:"double_outline.png",layers:[{name:"Base Color",default_color:"98012e",layer_no:1,increment_x:0,increment_y:0,outline:0,type:"fill",zIndex:-4},{name:"Outline 1",default_color:"e6e6e6",layer_no:2,increment_x:0,increment_y:0,outline:1,type:"middle_stroke",zIndex:-3},{name:"Outline 2",default_color:"1e1e1e",layer_no:3,increment_x:0,increment_y:0,outline:2,type:"outer_stroke",zIndex:-2},{name:"Mask",default_color:"bdc4c7",layer_no:4,increment_x:0,increment_y:0,outline:0,zIndex:-1}]},{id:4,name:"Drop Shadow",code:"drop_shadow",title:"Single Color with Drop Shadow",thumbnail:"drop_shadow.png",layers:[{name:"Base Color",default_color:"e6e6e6",layer_no:1,increment_x:0,increment_y:0,outline:0,zIndex:-3},{name:"Shadow",default_color:"1e1e1e",layer_no:2,increment_x:.03,increment_y:.02,outline:0,zIndex:-2},{name:"Mask",default_color:"1e1e1e",layer_no:3,increment_x:0,increment_y:0,outline:0,zIndex:-1}]},{id:8,name:"Outlined with Drop Shadow",code:"outlined_with_drop_shadow",title:"Three Color with Drop Shadow",thumbnail:"outlined_with_drop_shadow.png",layers:[{name:"Base Color",default_color:"98012e",layer_no:1,increment_x:0,increment_y:0,outline:0,type:"fill",zIndex:-5},{name:"Outline 1",default_color:"e6e6e6",layer_no:2,increment_x:0,increment_y:0,outline:1,type:"middle_stroke",zIndex:-4},{name:"Outline 2",default_color:"1e1e1e",layer_no:3,increment_x:0,increment_y:0,outline:2,type:"outer_stroke",zIndex:-3},{name:"Shadow",default_color:"1e1e1e",layer_no:4,increment_x:.04,increment_y:.03,outline:2,zIndex:-2,type:"outer_stroke",type:"shadow"},{name:"Mask",default_color:"bdc4c7",layer_no:5,increment_x:0,increment_y:0,outline:0,zIndex:-1}]}]},ub.data.tailSweeps=[],ub.uniformSizes={YXS:{name:"Youth Extra Small",active:!1},YS:{name:"Youth Small",active:!1},YM:{name:"Youth Medium",active:!1},YL:{name:"Youth Large",active:!1},YXL:{name:"Youth Extra Large",active:!1},Y2XL:{name:"Youth Double Extra Large",active:!1},Y3XL:{name:"Youth Triple Extra Large",active:!1},XS:{name:"Extra Small",active:!1},S:{name:"Small",active:!1},M:{name:"Medium",active:!1},L:{name:"Large",active:!1},XL:{name:"Extra Large",active:!1},"2XL":{name:"Double Extra Large",active:!1},"3XL":{name:"Triple Extra Large",active:!1}},ub.data.playerNumbers=[{number:"1",status:"free"},{number:"2",status:"free"},{number:"3",status:"free"},{number:"4",status:"free"},{number:"5",status:"free"},{number:"6",status:"free"},{number:"7",status:"free"},{number:"8",status:"free"},{number:"9",status:"free"},{number:"10",status:"free"},{number:"11",status:"free"},{number:"12",status:"free"},{number:"13",status:"free"},{number:"14",status:"free"},{number:"15",status:"free"},{number:"16",status:"free"},{number:"17",status:"free"},{number:"18",status:"free"},{number:"19",status:"free"},{number:"20",status:"free"},{number:"21",status:"free"},{number:"22",status:"free"},{number:"23",status:"free"},{number:"24",status:"free"},{number:"25",status:"free"},{number:"26",status:"free"},{number:"27",status:"free"},{number:"28",status:"free"},{number:"29",status:"free"},{number:"30",status:"free"},{number:"31",status:"free"},{number:"32",status:"free"},{number:"33",status:"free"},{number:"34",status:"free"},{number:"35",status:"free"},{number:"36",status:"free"},{number:"37",status:"free"},{number:"38",status:"free"},{number:"39",status:"free"},{number:"40",status:"free"},{number:"41",status:"free"},{number:"42",status:"free"},{number:"43",status:"free"},{number:"44",status:"free"},{number:"45",status:"free"},{number:"46",status:"free"},{number:"47",status:"free"},{number:"48",status:"free"},{number:"49",status:"free"},{number:"50",status:"free"},{number:"51",status:"free"},{number:"52",status:"free"},{number:"53",status:"free"},{number:"54",status:"free"},{number:"55",status:"free"},{number:"56",status:"free"},{number:"57",status:"free"},{number:"58",status:"free"},{number:"59",status:"free"},{number:"60",status:"free"},{number:"61",status:"free"},{number:"62",status:"free"},{number:"63",status:"free"},{number:"64",status:"free"},{number:"65",status:"free"},{number:"66",status:"free"},{number:"67",status:"free"},{number:"68",status:"free"},{number:"69",status:"free"},{number:"70",status:"free"},{number:"71",status:"free"},{number:"72",status:"free"},{number:"73",status:"free"},{number:"74",status:"free"},{number:"75",status:"free"},{number:"76",status:"free"},{number:"77",status:"free"},{number:"78",status:"free"},{number:"79",status:"free"},{number:"80",status:"free"},{number:"81",status:"free"},{number:"82",status:"free"},{number:"83",status:"free"},{number:"84",status:"free"},{number:"85",status:"free"},{number:"86",status:"free"},{number:"87",status:"free"},{number:"88",status:"free"},{number:"89",status:"free"},{number:"90",status:"free"},{number:"91",status:"free"},{number:"92",status:"free"},{number:"93",status:"free"},{number:"94",status:"free"},{number:"95",status:"free"},{number:"96",status:"free"},{number:"97",status:"free"},{number:"98",status:"free"},{number:"99",status:"free"},{number:"00",status:"free"}],ub.data.leftSideOverrides=["Carbon Block","CHARGERS","Beaver Block","Badgers","Bears","HAWKS","Horned Frogs","Jaguars","MARYLAND","Sky Line","Spartans","Syracuse","Yard Line"],ub.funcs.fontOffSets=[{location:"33",fontName:"Badgers",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:77,adjustmentX:486.466,scaleY:1,scaleX:1},{location:"33",fontName:"Badgers",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:74,adjustmentX:486.466,scaleY:1,scaleX:1},{location:"33",fontName:"Badgers",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:76,adjustmentX:258.466,scaleY:1,scaleX:1},{location:"33",fontName:"Badgers",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:70,adjustmentX:258.466,scaleY:1,scaleX:1},{location:"33",fontName:"Badgers",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:37,adjustmentX:760.466,scaleY:1,scaleX:1},{location:"33",fontName:"Badgers",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:39,adjustmentX:760.466,scaleY:1,scaleX:1},{location:"9",fontName:"Badgers",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:180,adjustmentX:478.486,scaleY:1,scaleX:1},{location:"9",fontName:"Badgers",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:180,adjustmentX:478.486,scaleY:1,scaleX:1},{location:"9",fontName:"Badgers",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:168,adjustmentX:111,scaleY:1,scaleX:1},{location:"9",fontName:"Badgers",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:168,adjustmentX:117,scaleY:1,scaleX:1},{location:"9",fontName:"Badgers",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:174,adjustmentX:892,scaleY:1,scaleX:1},{location:"9",fontName:"Badgers",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:174,adjustmentX:889,scaleY:1,scaleX:1},{location:"33",fontName:"CHARGERS",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:86,adjustmentX:474.012,scaleY:.58,scaleX:1},{location:"33",fontName:"CHARGERS",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:81,adjustmentX:472.012,scaleY:.63,scaleX:1},{location:"33",fontName:"CHARGERS",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:79,adjustmentX:244,scaleY:1,scaleX:1},{location:"33",fontName:"CHARGERS",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:76,adjustmentX:246,scaleY:1,scaleX:1},{location:"33",fontName:"CHARGERS",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:47,adjustmentX:779,scaleY:1,scaleX:1},{location:"33",fontName:"CHARGERS",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:53,adjustmentX:775,scaleY:1,scaleX:1},{location:"9",fontName:"CHARGERS",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:193,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"CHARGERS",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:190,adjustmentX:474.012,scaleY:1,scaleX:1},{location:"9",fontName:"CHARGERS",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:188,adjustmentX:115,scaleY:1,scaleX:1},{location:"9",fontName:"CHARGERS",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:183,adjustmentX:122,scaleY:1,scaleX:1},{location:"9",fontName:"CHARGERS",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:187,adjustmentX:892,scaleY:1,scaleX:1},{location:"9",fontName:"CHARGERS",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:180,adjustmentX:884,scaleY:1,scaleX:1},{location:"33",fontName:"Bears",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:78,adjustmentX:474.012,scaleY:.6,scaleX:1},{location:"33",fontName:"Bears",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:76,adjustmentX:474.012,scaleY:.7,scaleX:1},{location:"33",fontName:"Bears",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:79,adjustmentX:260.5,scaleY:1,scaleX:1},{location:"33",fontName:"Bears",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:73,adjustmentX:260.5,scaleY:1,scaleX:1},{location:"33",fontName:"Bears",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:39,adjustmentX:765,scaleY:1,scaleX:1},{location:"33",fontName:"Bears",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:43,adjustmentX:760,scaleY:1,scaleX:1},{location:"9",fontName:"Bears",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:178,adjustmentX:475.012,scaleY:1,scaleX:1},{location:"9",fontName:"Bears",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:180,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"Bears",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:173,adjustmentX:117,scaleY:1,scaleX:1},{location:"9",fontName:"Bears",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:172,adjustmentX:121,scaleY:1,scaleX:1},{location:"9",fontName:"Bears",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:174,adjustmentX:887,scaleY:1,scaleX:1},{location:"9",fontName:"Bears",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:172,adjustmentX:885,scaleY:1,scaleX:1},{location:"33",fontName:"Beaver Block",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:80,adjustmentX:474.012,scaleY:.6,scaleX:1},{location:"33",fontName:"Beaver Block",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:77,adjustmentX:472.012,scaleY:.65,scaleX:1},{location:"33",fontName:"Beaver Block",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:75,adjustmentX:255,scaleY:1,scaleX:1},{location:"33",fontName:"Beaver Block",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:72,adjustmentX:255,scaleY:1,scaleX:1},{location:"33",fontName:"Beaver Block",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:38,adjustmentX:770,scaleY:1,scaleX:1},{location:"33",fontName:"Beaver Block",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:44,adjustmentX:763,scaleY:1,scaleX:1},{location:"9",fontName:"Beaver Block",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:183,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"Beaver Block",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:182,adjustmentX:475.012,scaleY:1,scaleX:1},{location:"9",fontName:"Beaver Block",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:175,adjustmentX:116,scaleY:1,scaleX:1},{location:"9",fontName:"Beaver Block",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:175,adjustmentX:119,scaleY:1,scaleX:1},{location:"9",fontName:"Beaver Block",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:176,adjustmentX:892,scaleY:1,scaleX:1},{location:"9",fontName:"Beaver Block",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:176,adjustmentX:883,scaleY:1,scaleX:1},{location:"33",fontName:"Carbon Block",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:74,adjustmentX:474.012,scaleY:.58,scaleX:1},{location:"33",fontName:"Carbon Block",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:75,adjustmentX:474.012,scaleY:.65,scaleX:1},{location:"33",fontName:"Carbon Block",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:79,adjustmentX:254,scaleY:1,scaleX:1},{location:"33",fontName:"Carbon Block",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:74,adjustmentX:253,scaleY:1,scaleX:1},{location:"33",fontName:"Carbon Block",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:37,adjustmentX:767,scaleY:1,scaleX:1},{location:"33",fontName:"Carbon Block",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:37,adjustmentX:765,scaleY:1,scaleX:1},{location:"9",fontName:"Carbon Block",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:182,adjustmentX:475.012,scaleY:1,scaleX:1},{location:"9",fontName:"Carbon Block",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:180,adjustmentX:474.012,scaleY:1,scaleX:1},{location:"9",fontName:"Carbon Block",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:175,adjustmentX:115,scaleY:1,scaleX:1},{location:"9",fontName:"Carbon Block",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:175,adjustmentX:117,scaleY:1,scaleX:1},{location:"9",fontName:"Carbon Block",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:175,adjustmentX:890,scaleY:1,scaleX:1},{location:"9",fontName:"Carbon Block",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:175,adjustmentX:890,scaleY:1,scaleX:1},{location:"33",fontName:"HAWKS",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:85,adjustmentX:474.012,scaleY:.57,scaleX:1},{location:"33",fontName:"HAWKS",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:83,adjustmentX:472.012,scaleY:.68,scaleX:1},{location:"33",fontName:"HAWKS",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:78,adjustmentX:243,scaleY:1,scaleX:1},{location:"33",fontName:"HAWKS",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:80,adjustmentX:248,scaleY:1,scaleX:1},{location:"33",fontName:"HAWKS",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:49,adjustmentX:780,scaleY:1,scaleX:1},{location:"33",fontName:"HAWKS",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:48,adjustmentX:770,scaleY:1,scaleX:1},{location:"9",fontName:"HAWKS",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:193,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"HAWKS",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:190,adjustmentX:474.012,scaleY:1,scaleX:1},{location:"9",fontName:"HAWKS",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:185,adjustmentX:112,scaleY:1,scaleX:1},{location:"9",fontName:"HAWKS",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:182,adjustmentX:118,scaleY:1,scaleX:1},{location:"9",fontName:"HAWKS",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:189,adjustmentX:890,scaleY:1,scaleX:1},{location:"9",fontName:"HAWKS",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:182,adjustmentX:884,scaleY:1,scaleX:1},{location:"33",fontName:"Horned Frogs",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:79,adjustmentX:474.012,scaleY:.56,scaleX:1},{location:"33",fontName:"Horned Frogs",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:79,adjustmentX:472.012,scaleY:.68,scaleX:1},{location:"33",fontName:"Horned Frogs",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:78,adjustmentX:252,scaleY:1,scaleX:1},{location:"33",fontName:"Horned Frogs",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:73,adjustmentX:255,scaleY:1,scaleX:1},{location:"33",fontName:"Horned Frogs",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:40,adjustmentX:770,scaleY:1,scaleX:1},{location:"33",fontName:"Horned Frogs",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:46,adjustmentX:765,scaleY:1,scaleX:1},{location:"9",fontName:"Horned Frogs",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:183,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"Horned Frogs",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:183,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"Horned Frogs",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:178,adjustmentX:114,scaleY:1,scaleX:1},{location:"9",fontName:"Horned Frogs",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:176,adjustmentX:117,scaleY:1,scaleX:1},{location:"9",fontName:"Horned Frogs",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:175,adjustmentX:888,scaleY:1,scaleX:1},{location:"9",fontName:"Horned Frogs",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:175,adjustmentX:883,scaleY:1,scaleX:1},{location:"33",fontName:"Jaguars",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:85,adjustmentX:474.012,scaleY:.58,scaleX:1},{location:"33",fontName:"Jaguars",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:82,adjustmentX:472.012,scaleY:.7,scaleX:1},{location:"33",fontName:"Jaguars",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:79,adjustmentX:243,scaleY:1,scaleX:1},{location:"33",fontName:"Jaguars",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:75,adjustmentX:249,scaleY:1,scaleX:1},{location:"33",fontName:"Jaguars",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:52,adjustmentX:775,scaleY:1,scaleX:1},{location:"33",fontName:"Jaguars",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:57,adjustmentX:770,scaleY:1,scaleX:1},{location:"9",fontName:"Jaguars",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:190,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"Jaguars",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:188,adjustmentX:474.012,scaleY:1,scaleX:1},{location:"9",fontName:"Jaguars",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:185,adjustmentX:116,scaleY:1,scaleX:1},{location:"9",fontName:"Jaguars",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:178,adjustmentX:123,scaleY:1,scaleX:1},{location:"9",fontName:"Jaguars",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:185,adjustmentX:887,scaleY:1,scaleX:1},{location:"9",fontName:"Jaguars",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:175,adjustmentX:883,scaleY:1,scaleX:1},{location:"33",fontName:"MARYLAND",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:77,adjustmentX:474.012,scaleY:.6,scaleX:1},{location:"33",fontName:"MARYLAND",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:77,adjustmentX:472.012,scaleY:.68,scaleX:1},{location:"33",fontName:"MARYLAND",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:79,adjustmentX:258,scaleY:1,scaleX:1},{location:"33",fontName:"MARYLAND",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:75,adjustmentX:258,scaleY:1,scaleX:1},{location:"33",fontName:"MARYLAND",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:37,adjustmentX:767,scaleY:1,scaleX:1},{location:"33",fontName:"MARYLAND",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:45,adjustmentX:760,scaleY:1,scaleX:1},{location:"9",fontName:"MARYLAND",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:180,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"MARYLAND",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:180,adjustmentX:474.012,scaleY:1,scaleX:1},{location:"9",fontName:"MARYLAND",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:172,adjustmentX:115,scaleY:1,scaleX:1},{location:"9",fontName:"MARYLAND",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:175,adjustmentX:124,scaleY:1,scaleX:1},{location:"9",fontName:"MARYLAND",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:172,adjustmentX:892,scaleY:1,scaleX:1},{location:"9",fontName:"MARYLAND",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:170,adjustmentX:879,scaleY:1,scaleX:1},{location:"33",fontName:"Sky Line",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:80,adjustmentX:474.012,scaleY:.6,scaleX:1},{location:"33",fontName:"Sky Line",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:77,adjustmentX:474.012,scaleY:.68,scaleX:1},{location:"33",fontName:"Sky Line",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:72,adjustmentX:252,scaleY:1,scaleX:1},{location:"33",fontName:"Sky Line",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:72,adjustmentX:255,scaleY:1,scaleX:1},{location:"33",fontName:"Sky Line",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:43,adjustmentX:765,scaleY:1,scaleX:1},{location:"33",fontName:"Sky Line",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:50,adjustmentX:760,scaleY:1,scaleX:1},{location:"9",fontName:"Sky Line",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:180,adjustmentX:477.012,scaleY:1,scaleX:1},{location:"9",fontName:"Sky Line",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:180,adjustmentX:477.012,scaleY:1,scaleX:1},{location:"9",fontName:"Sky Line",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:177,adjustmentX:109,scaleY:1,scaleX:1},{location:"9",fontName:"Sky Line",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:175,adjustmentX:119,scaleY:1,scaleX:1},{location:"9",fontName:"Sky Line",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:175,adjustmentX:887,scaleY:1,scaleX:1},{location:"9",fontName:"Sky Line",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:173,adjustmentX:877,scaleY:1,scaleX:1},{location:"33",fontName:"Spartans",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:79,adjustmentX:474.012,scaleY:.57,scaleX:1},{location:"33",fontName:"Spartans",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:77,adjustmentX:474.012,scaleY:.7,scaleX:1},{location:"33",fontName:"Spartans",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:73,adjustmentX:254,scaleY:1,scaleX:1},{location:"33",fontName:"Spartans",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:72,adjustmentX:255,scaleY:1,scaleX:1},{location:"33",fontName:"Spartans",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:40,adjustmentX:763,scaleY:1,scaleX:1},{location:"33",fontName:"Spartans",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:45,adjustmentX:763,scaleY:1,scaleX:1},{location:"9",fontName:"Spartans",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:180,adjustmentX:477.012,scaleY:1,scaleX:1},{location:"9",fontName:"Spartans",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:180,adjustmentX:477.012,scaleY:1,scaleX:1},{location:"9",fontName:"Spartans",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:175,adjustmentX:110,scaleY:1,scaleX:1},{location:"9",fontName:"Spartans",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:174,adjustmentX:120,scaleY:1,scaleX:1},{location:"9",fontName:"Spartans",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:175,adjustmentX:889,scaleY:1,scaleX:1},{location:"9",fontName:"Spartans",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:173,adjustmentX:880,scaleY:1,scaleX:1},{location:"33",fontName:"Syracuse",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:79,adjustmentX:474.012,scaleY:.58,scaleX:1},{location:"33",fontName:"Syracuse",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:78,adjustmentX:474.012,scaleY:.7,scaleX:1},{location:"33",fontName:"Syracuse",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:77,adjustmentX:253,scaleY:1,scaleX:1},{location:"33",fontName:"Syracuse",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:73,adjustmentX:255,scaleY:1,scaleX:1},{location:"33",fontName:"Syracuse",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:37,adjustmentX:770,scaleY:1,scaleX:1},{location:"33",fontName:"Syracuse",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:48,adjustmentX:758,scaleY:1,scaleX:1},{location:"9",fontName:"Syracuse",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:183,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"Syracuse",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:180,adjustmentX:475.012,scaleY:1,scaleX:1},{location:"9",fontName:"Syracuse",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:175,adjustmentX:116,scaleY:1,scaleX:1},{location:"9",fontName:"Syracuse",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:175,adjustmentX:124,scaleY:1,scaleX:1},{location:"9",fontName:"Syracuse",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:178,adjustmentX:892,scaleY:1,scaleX:1},{location:"9",fontName:"Syracuse",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:172,adjustmentX:878,scaleY:1,scaleX:1},{location:"33",fontName:"Yard Line",perspective:"right",size:"4",origY:74,origX:486.466,adjustmentY:80,adjustmentX:474.012,scaleY:.58,scaleX:1},{location:"33",fontName:"Yard Line",perspective:"right",size:"3",origY:74,origX:486.466,adjustmentY:76,adjustmentX:474.012,scaleY:.68,scaleX:1},{location:"33",fontName:"Yard Line",perspective:"front",size:"4",origY:72,origX:258.466,adjustmentY:72,adjustmentX:254,scaleY:1,scaleX:1},{location:"33",fontName:"Yard Line",perspective:"front",size:"3",origY:72,origX:258.466,adjustmentY:72,adjustmentX:255,scaleY:1,scaleX:1},{location:"33",fontName:"Yard Line",perspective:"back",size:"4",origY:44,origX:760.466,adjustmentY:42,adjustmentX:764,scaleY:1,scaleX:1},{location:"33",fontName:"Yard Line",perspective:"back",size:"3",origY:44,origX:760.466,adjustmentY:48,adjustmentX:760,scaleY:1,scaleX:1},{location:"9",fontName:"Yard Line",perspective:"right",size:"4",origY:180,origX:478.486,adjustmentY:182,adjustmentX:475.012,scaleY:1,scaleX:1},{location:"9",fontName:"Yard Line",perspective:"right",size:"3",origY:180,origX:478.486,adjustmentY:182,adjustmentX:472.512,scaleY:1,scaleX:1},{location:"9",fontName:"Yard Line",perspective:"front",size:"4",origY:168,origX:118.466,adjustmentY:175,adjustmentX:113,scaleY:1,scaleX:1},{location:"9",fontName:"Yard Line",perspective:"front",size:"3",origY:168,origX:118.466,adjustmentY:175,adjustmentX:117,scaleY:1,scaleX:1},{location:"9",fontName:"Yard Line",perspective:"back",size:"4",origY:174,origX:884.466,adjustmentY:175,adjustmentX:888,scaleY:1,scaleX:1},{location:"9",fontName:"Yard Line",perspective:"back",size:"3",origY:174,origX:884.466,adjustmentY:17,adjustmentX:885,scaleY:1,scaleX:1},{location:"32",fontName:"Badgers",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:77,adjustmentX:518,scaleY:1,scaleX:1},{location:"32",fontName:"Badgers",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:72,adjustmentX:518,scaleY:1,scaleX:1},{location:"32",fontName:"Badgers",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:70,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Badgers",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:65,adjustmentX:743,scaleY:1,scaleX:1},{location:"32",fontName:"Badgers",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:233,scaleY:1,scaleX:1},{location:"32",fontName:"Badgers",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:45,adjustmentX:237,scaleY:1,scaleX:1},{location:"10",fontName:"Badgers",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:185,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Badgers",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:185,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Badgers",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:889,scaleY:1,scaleX:1},{location:"10",fontName:"Badgers",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:173,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"Badgers",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:177,adjustmentX:112,scaleY:1,scaleX:1},{location:"10",fontName:"Badgers",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:176,adjustmentX:115,scaleY:1,scaleX:1},{location:"32",fontName:"Bears",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentX:518,adjustmentY:78,scaleY:.6,scaleX:1},{location:"32",fontName:"Bears",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:76,adjustmentX:518,scaleY:.7,scaleX:1},{location:"32",fontName:"Bears",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:75,adjustmentX:739.5,scaleY:1,scaleX:1},{location:"32",fontName:"Bears",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:69,adjustmentX:739.5,scaleY:1,scaleX:1},{location:"32",fontName:"Bears",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Bears",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:48,adjustmentX:245,scaleY:1,scaleX:1},{location:"10",fontName:"Bears",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:178,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Bears",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:180,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Bears",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:170,adjustmentX:883,scaleY:1,scaleX:1},{location:"10",fontName:"Bears",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:172,adjustmentX:879,scaleY:1,scaleX:1},{location:"10",fontName:"Bears",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:175,adjustmentX:117,scaleY:1,scaleX:1},{location:"10",fontName:"Bears",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:174,adjustmentX:119,scaleY:1,scaleX:1},{location:"32",fontName:"Beaver Block",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentX:518,adjustmentY:80,scaleY:.6,scaleX:1},{location:"32",fontName:"Beaver Block",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:77,adjustmentX:520,scaleY:.65,scaleX:1},{location:"32",fontName:"Beaver Block",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:70,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Beaver Block",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:69,adjustmentX:742,scaleY:1,scaleX:1},{location:"32",fontName:"Beaver Block",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Beaver Block",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:50,adjustmentX:240,scaleY:1,scaleX:1},{location:"10",fontName:"Beaver Block",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:180,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Beaver Block",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:182,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Beaver Block",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"Beaver Block",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:175,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"10",fontName:"Beaver Block",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:176,adjustmentX:112,scaleY:1,scaleX:1},{location:"10",fontName:"Beaver Block",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:176,adjustmentX:119,scaleY:1,scaleX:1},{location:"32",fontName:"Buffs Bold",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:74,adjustmentX:518,scaleY:.65,scaleX:1},{location:"32",fontName:"Buffs Bold",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:75,adjustmentX:518,scaleY:.6,scaleX:1},{location:"32",fontName:"Buffs Bold",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:75,adjustmentX:743,scaleY:1,scaleX:1},{location:"32",fontName:"Buffs Bold",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:71,adjustmentX:740,scaleY:1,scaleX:1},{location:"32",fontName:"Buffs Bold",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:240,scaleY:1,scaleX:1},{location:"32",fontName:"Buffs Bold",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:48,adjustmentX:245,scaleY:1,scaleX:1},{location:"10",fontName:"Buffs Bold",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:180,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Buffs Bold",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:178,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Buffs Bold",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:171,adjustmentX:887,scaleY:1,scaleX:1},{location:"10",fontName:"Buffs Bold",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:172,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"10",fontName:"Buffs Bold",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:171,adjustmentX:113,scaleY:1,scaleX:1},{location:"10",fontName:"Buffs Bold",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:172,adjustmentX:113,scaleY:1,scaleX:1},{location:"32",fontName:"CHARGERS",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:86,adjustmentX:518,scaleY:.58,scaleX:1},{location:"32",fontName:"CHARGERS",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:81,adjustmentX:520,scaleY:.63,scaleX:1},{location:"32",fontName:"CHARGERS",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:755,scaleY:1,scaleX:1},{location:"32",fontName:"CHARGERS",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:70,adjustmentX:751,scaleY:1,scaleX:1},{location:"32",fontName:"CHARGERS",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:55,adjustmentX:225,scaleY:1,scaleX:1},{location:"32",fontName:"CHARGERS",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:59,adjustmentX:228,scaleY:1,scaleX:1},{location:"10",fontName:"CHARGERS",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:193,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"CHARGERS",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:190,adjustmentX:518,scaleY:1,scaleX:1},{location:"10",fontName:"CHARGERS",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:187,adjustmentX:889,scaleY:1,scaleX:1},{location:"10",fontName:"CHARGERS",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:182,adjustmentX:877,scaleY:1,scaleX:1},{location:"10",fontName:"CHARGERS",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:187,adjustmentX:113,scaleY:1,scaleX:1},{location:"10",fontName:"CHARGERS",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:182,adjustmentX:121,scaleY:1,scaleX:1},{location:"32",fontName:"Carbon Block",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:74,adjustmentX:518,scaleY:.58,scaleX:1},{location:"32",fontName:"Carbon Block",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:75,adjustmentX:518,scaleY:.65,scaleX:1},{location:"32",fontName:"Carbon Block",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Carbon Block",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:67,adjustmentX:746,scaleY:1,scaleX:1},{location:"32",fontName:"Carbon Block",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Carbon Block",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:45,adjustmentX:236,scaleY:1,scaleX:1},{location:"10",fontName:"Carbon Block",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:182,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Carbon Block",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:180,adjustmentX:518,scaleY:1.1,scaleX:1},{location:"10",fontName:"Carbon Block",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:887,scaleY:1,scaleX:1},{location:"10",fontName:"Carbon Block",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:175,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"Carbon Block",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:175,adjustmentX:115,scaleY:1,scaleX:1},{location:"10",fontName:"Carbon Block",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:175,adjustmentX:115,scaleY:1,scaleX:1},{location:"32",fontName:"Full Block",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:82,adjustmentX:518,scaleY:.58,scaleX:1},{location:"32",fontName:"Full Block",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:79,adjustmentX:520,scaleY:.65,scaleX:1},{location:"32",fontName:"Full Block",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:75,adjustmentX:750,scaleY:1,scaleX:1},{location:"32",fontName:"Full Block",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:75,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Full Block",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:45,adjustmentX:230,scaleY:1,scaleX:1},{location:"32",fontName:"Full Block",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:49,adjustmentX:236,scaleY:1,scaleX:1},{location:"10",fontName:"Full Block",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:185,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Full Block",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:185,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Full Block",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:177,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"Full Block",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:176,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"10",fontName:"Full Block",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:180,adjustmentX:107,scaleY:1,scaleX:1},{location:"10",fontName:"Full Block",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:176,adjustmentX:115,scaleY:1,scaleX:1},{location:"32",fontName:"HAWKS",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:85,adjustmentX:518,scaleY:.57,scaleX:1},{location:"32",fontName:"HAWKS",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:83,adjustmentX:520,scaleY:.68,scaleX:1},{location:"32",fontName:"HAWKS",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:75,adjustmentX:758,scaleY:1,scaleX:1},{location:"32",fontName:"HAWKS",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:75,adjustmentX:750,scaleY:1,scaleX:1},{location:"32",fontName:"HAWKS",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:55,adjustmentX:223,scaleY:1,scaleX:1},{location:"32",fontName:"HAWKS",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:53,adjustmentX:230,scaleY:1,scaleX:1},{location:"10",fontName:"HAWKS",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:193,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"HAWKS",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:190,adjustmentX:518,scaleY:1,scaleX:1},{location:"10",fontName:"HAWKS",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:185,adjustmentX:888,scaleY:1,scaleX:1},{location:"10",fontName:"HAWKS",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:182,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"10",fontName:"HAWKS",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:187,adjustmentX:115,scaleY:1,scaleX:1},{location:"10",fontName:"HAWKS",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:182,adjustmentX:119,scaleY:1,scaleX:1},{location:"32",fontName:"Horned Frogs",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:79,adjustmentX:518,scaleY:.56,scaleX:1},{location:"32",fontName:"Horned Frogs",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:79,adjustmentX:520,scaleY:.68,scaleX:1},{location:"32",fontName:"Horned Frogs",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Horned Frogs",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:70,adjustmentX:743,scaleY:1,scaleX:1},{location:"32",fontName:"Horned Frogs",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:235,scaleY:1,scaleX:1},{location:"32",fontName:"Horned Frogs",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:50,adjustmentX:240,scaleY:1,scaleX:1},{location:"10",fontName:"Horned Frogs",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:183,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Horned Frogs",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:183,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Horned Frogs",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:172,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"Horned Frogs",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:175,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"10",fontName:"Horned Frogs",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:177,adjustmentX:115,scaleY:1,scaleX:1},{location:"10",fontName:"Horned Frogs",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:175,adjustmentX:119,scaleY:1,scaleX:1},{location:"32",fontName:"Jaguars",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:85,adjustmentX:518,scaleY:.58,scaleX:1},{location:"32",fontName:"Jaguars",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:82,adjustmentX:520,scaleY:.7,scaleX:1},{location:"32",fontName:"Jaguars",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:75,adjustmentX:755,scaleY:1,scaleX:1},{location:"32",fontName:"Jaguars",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:72,adjustmentX:748,scaleY:1,scaleX:1},{location:"32",fontName:"Jaguars",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:55,adjustmentX:230,scaleY:1,scaleX:1},{location:"32",fontName:"Jaguars",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:60,adjustmentX:240,scaleY:1,scaleX:1},{location:"10",fontName:"Jaguars",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:190,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Jaguars",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:188,adjustmentX:518,scaleY:1,scaleX:1},{location:"10",fontName:"Jaguars",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:185,adjustmentX:882,scaleY:1,scaleX:1},{location:"10",fontName:"Jaguars",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:178,adjustmentX:873,scaleY:1,scaleX:1},{location:"10",fontName:"Jaguars",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:185,adjustmentX:115,scaleY:1,scaleX:1},{location:"10",fontName:"Jaguars",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:183,adjustmentX:125,scaleY:1,scaleX:1},{location:"32",fontName:"MARYLAND",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:77,adjustmentX:518,scaleY:.6,scaleX:1},{location:"32",fontName:"MARYLAND",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:77,adjustmentX:520,scaleY:.68,scaleX:1},{location:"32",fontName:"MARYLAND",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:739.5,scaleY:1,scaleX:1},{location:"32",fontName:"MARYLAND",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:70,adjustmentX:740,scaleY:1,scaleX:1},{location:"32",fontName:"MARYLAND",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"MARYLAND",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:50,adjustmentX:245,scaleY:1,scaleX:1},{location:"10",fontName:"MARYLAND",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:180,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"MARYLAND",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:180,adjustmentX:518,scaleY:1,scaleX:1},{location:"10",fontName:"MARYLAND",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:172,adjustmentX:887,scaleY:1,scaleX:1},{location:"10",fontName:"MARYLAND",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:172,adjustmentX:874,scaleY:1,scaleX:1},{location:"10",fontName:"MARYLAND",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:170,adjustmentX:114,scaleY:1,scaleX:1},{location:"10",fontName:"MARYLAND",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:172,adjustmentX:125,scaleY:1,scaleX:1},{location:"32",fontName:"PISTONS",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:80,adjustmentX:518,scaleY:.6,scaleX:1},{location:"32",fontName:"PISTONS",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:78,adjustmentX:520,scaleY:.7,scaleX:1},{location:"32",fontName:"PISTONS",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"PISTONS",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:70,adjustmentX:742,scaleY:1,scaleX:1},{location:"32",fontName:"PISTONS",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"PISTONS",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:45,adjustmentX:240,scaleY:1,scaleX:1},{location:"10",fontName:"PISTONS",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:182,adjustmentX:516,scaleY:1,scaleX:1},{location:"10",fontName:"PISTONS",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:182,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"PISTONS",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"PISTONS",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:173,adjustmentX:878,scaleY:1,scaleX:1},{location:"10",fontName:"PISTONS",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:176,adjustmentX:113,scaleY:1,scaleX:1},{location:"10",fontName:"PISTONS",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:173,adjustmentX:115,scaleY:1,scaleX:1},{location:"32",fontName:"Sky Line",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:80,adjustmentX:518,scaleY:.6,scaleX:1},{location:"32",fontName:"Sky Line",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:77,adjustmentX:518,scaleY:.68,scaleX:1},{location:"32",fontName:"Sky Line",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Sky Line",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:70,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Sky Line",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Sky Line",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:52,adjustmentX:240,scaleY:1,scaleX:1},{location:"10",fontName:"Sky Line",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:180,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Sky Line",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:180,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Sky Line",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:883,scaleY:1,scaleX:1},{location:"10",fontName:"Sky Line",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:173,adjustmentX:872,scaleY:1,scaleX:1},{location:"10",fontName:"Sky Line",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:175,adjustmentX:110,scaleY:1,scaleX:1},{location:"10",fontName:"Sky Line",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:173,adjustmentX:120,scaleY:1,scaleX:1},{location:"32",fontName:"Spartans",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:79,adjustmentX:518,scaleY:.57,scaleX:1},{location:"32",fontName:"Spartans",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:77,adjustmentX:518,scaleY:.7,scaleX:1},{location:"32",fontName:"Spartans",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Spartans",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:73,adjustmentX:743,scaleY:1,scaleX:1},{location:"32",fontName:"Spartans",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:39,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Spartans",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:45,adjustmentX:237,scaleY:1,scaleX:1},{location:"10",fontName:"Spartans",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:180,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Spartans",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:180,adjustmentX:515,scaleY:1,scaleX:1},{location:"10",fontName:"Spartans",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:177,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"Spartans",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:173,adjustmentX:873,scaleY:1,scaleX:1},{location:"10",fontName:"Spartans",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:173,adjustmentX:108,scaleY:1,scaleX:1},{location:"10",fontName:"Spartans",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:173,adjustmentX:117,scaleY:1,scaleX:1},{location:"32",fontName:"Syracuse",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:79,adjustmentX:518,scaleY:.58,scaleX:1},{location:"32",fontName:"Syracuse",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:78,adjustmentX:518,scaleY:.7,scaleX:1},{location:"32",fontName:"Syracuse",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Syracuse",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:70,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Syracuse",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Syracuse",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:53,adjustmentX:245,scaleY:1,scaleX:1},{location:"10",fontName:"Syracuse",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:183,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Syracuse",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:180,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Syracuse",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:885,scaleY:1,scaleX:1},{location:"10",fontName:"Syracuse",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:175,adjustmentX:875,scaleY:1,scaleX:1},{location:"10",fontName:"Syracuse",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:175,adjustmentX:112,scaleY:1,scaleX:1},{location:"10",fontName:"Syracuse",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:175,adjustmentX:125,scaleY:1,scaleX:1},{location:"32",fontName:"Upright",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:78,adjustmentX:518,scaleY:.58,scaleX:1},{location:"32",fontName:"Upright",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:76,adjustmentX:518,scaleY:.69,scaleX:1},{location:"32",fontName:"Upright",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:739.5,scaleY:1,scaleX:1},{location:"32",fontName:"Upright",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:72,adjustmentX:743,scaleY:1,scaleX:1},{location:"32",fontName:"Upright",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Upright",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:45,adjustmentX:245,scaleY:1,scaleX:1},{location:"10",fontName:"Upright",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:180,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Upright",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:180,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Upright",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:883,scaleY:1,scaleX:1},{location:"10",fontName:"Upright",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:173,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"10",fontName:"Upright",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:175,adjustmentX:883,scaleY:1,scaleX:1},{location:"10",fontName:"Upright",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:173,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"32",fontName:"Yard Line",perspective:"left",size:"4",origY:74,origX:505.546,adjustmentY:80,adjustmentX:518,scaleY:.58,scaleX:1},{location:"32",fontName:"Yard Line",perspective:"left",size:"3",origY:74,origX:505.546,adjustmentY:76,adjustmentX:518,scaleY:.68,scaleX:1},{location:"32",fontName:"Yard Line",perspective:"front",size:"4",origY:72,origX:733.546,adjustmentY:72,adjustmentX:745,scaleY:1,scaleX:1},{location:"32",fontName:"Yard Line",perspective:"front",size:"3",origY:72,origX:733.546,adjustmentY:72,adjustmentX:743,scaleY:1,scaleX:1},{location:"32",fontName:"Yard Line",perspective:"back",size:"4",origY:44,origX:231.546,adjustmentY:44,adjustmentX:237,scaleY:1,scaleX:1},{location:"32",fontName:"Yard Line",perspective:"back",size:"3",origY:44,origX:231.546,adjustmentY:48,adjustmentX:240,scaleY:1,scaleX:1},{location:"10",fontName:"Yard Line",perspective:"left",size:"4",origY:180,origX:513.526,adjustmentY:182,adjustmentX:517,scaleY:1,scaleX:1},{location:"10",fontName:"Yard Line",perspective:"left",size:"3",origY:180,origX:513.526,adjustmentY:182,adjustmentX:519.5,scaleY:1,scaleX:1},{location:"10",fontName:"Yard Line",perspective:"front",size:"4",origY:168,origX:873.546,adjustmentY:175,adjustmentX:883,scaleY:1,scaleX:1},{location:"10",fontName:"Yard Line",perspective:"front",size:"3",origY:168,origX:873.546,adjustmentY:175,adjustmentX:879.5,scaleY:1,scaleX:1},{location:"10",fontName:"Yard Line",perspective:"back",size:"4",origY:174,origX:107.546,adjustmentY:175,adjustmentX:112,scaleY:1,scaleX:1},{location:"10",fontName:"Yard Line",perspective:"back",size:"3",origY:174,origX:107.546,adjustmentY:175,adjustmentX:115,scaleY:1,scaleX:1}],ub.funcs.load_fonts=function(){var t="";_.each(ub.data.fonts,function(e){t+='@font-face {\n\tfont-family: "'+e.name+"\";\n\tsrc: url('"+e.font_path+"');\n\tformat('truetype');\n}\n"});var e=ub.config.host+"/Fonts/tailsweeptrial_2.otf";t='<style type="text/css">'+(t+="@font-face { \n\tfont-family: 'Tail Sweep Trial 2'; \n\tsrc: url('"+e+"'); \n\tformat('opentype');\n}\n")+"</style>",$("head").prepend(t)},ub.data.undoHistory=void 0,ub.data.placeHolderApplications=[{id:100,perspective:"front"},{id:101,perspective:"back"},{id:102,perspective:"left"},{id:103,perspective:"right"}],ub.data.blockPatternLengths={items:[{blockPattern:"ARIZONA",widthFront:1e3,widthBack:993},{blockPattern:"DELUXE 1",widthFront:ub.totalWidth,widthBack:ub.totalWidth},{blockPattern:"DELUXE 2",widthFront:998,widthBack:1007},{blockPattern:"PRO COMBAT",widthFront:998,widthBack:993},{blockPattern:"TEXAS TECH 14",widthFront:1003,widthBack:1004},{blockPattern:"UA",widthFront:ub.totalWidth,widthBack:ub.totalWidth},{blockPattern:"USC",widthFront:ub.totalWidth,widthBack:1002},{blockPattern:"UTAH",widthFront:999,widthBack:1001}],getSettings:function(e){return _.find(this.items,{blockPattern:e})}},ub.data.blockPatternLength=void 0,ub.data.buffsBoldAdjustments={items:[{blockPattern:"ARIZONA",x:118},{blockPattern:"DELUXE 1",x:115},{blockPattern:"DELUXE 2",x:110},{blockPattern:"PRO COMBAT",x:120},{blockPattern:"TEXAS TECH 14",x:115},{blockPattern:"UA",x:115},{blockPattern:"USC",x:115},{blockPattern:"UTAH",x:115},{blockPattern:"INFUSED 14",x:115}],getSettings:function(e){return _.find(this.items,{blockPattern:e})}},ub.data.buffsBoldAdjustment=void 0,ub.data.macFonts={items:[{fontName:"Yard Line",size:8,yOffset:-39,scale:{x:.92,y:1.02}},{fontName:"Yard Line",size:10,yOffset:-40,scale:{x:.92,y:1.04}},{fontName:"Yard Line",size:12,yOffset:-45,scale:{x:.84,y:1.02}},{fontName:"HAWKS",size:8,yOffset:-33,scale:{x:.75,y:1.04}},{fontName:"HAWKS",size:10,yOffset:-35,scale:{x:.75,y:1.03}},{fontName:"HAWKS",size:12,yOffset:-38,scale:{x:.69,y:1.03}},{fontName:"Spartans",size:8,yOffset:-30,scale:{x:.8,y:1.04}},{fontName:"Spartans",size:10,yOffset:-34,scale:{x:.8,y:1.03}},{fontName:"Spartans",size:12,yOffset:-33,scale:{x:.76,y:1.04}}],getSettings:function(e,t){return _.find(this.items,{fontName:e,size:t})}},ub.data.pantLocations={items:[40,39,38,23,22,21,20,19,18,17,16,15,14,13,12],isValidLocation:function(e){return _.includes(this.items,e)}},ub.data.uploading=!1,ub.data.orderAttachment="",ub.data.validDocumentTypesForUpload={items:["gif","jpg","bmp","docx","doc","png","jpeg","tga","pdf","ppt","pptx"],isValidDocument:function(e){return _.includes(this.items,e)}},ub.data.sampleFonts={items:[{sport:"Football",fontName:"Badgers"},{sport:"Wrestling",fontName:"Badgers"},{sport:"Baseball",fontName:"Impact Baseball"},{sport:"Fastpitch",fontName:"Impact"},{sport:"Tech-Tee (Apparel)",fontName:"TCT Impact"},{sport:"Compression (Apparel)",fontName:"TCT Impact"},{sport:"Hockey",fontName:"HCKY_impact"}],getSampleFont:function(e){var t=_.find(this.items,{sport:e});return void 0===t&&(1<=ub.data.fonts.length?t=_.first(ub.data.fonts):console.warn("Sample Font for "+e+" not found.")),t}},ub.data.applicationPullUps={items:[{sport:"Football 2017",applicationNumber:"26",size:4,pullUpHeight:0},{sport:"Football 2017",applicationNumber:"26",size:3,pullUpHeight:-20},{sport:"Football 2017",applicationNumber:"26",size:2,pullUpHeight:-35},{sport:"Football 2017",applicationNumber:"27",size:4,pullUpHeight:0},{sport:"Football 2017",applicationNumber:"27",size:3,pullUpHeight:-20},{sport:"Football 2017",applicationNumber:"27",size:2,pullUpHeight:-35},{sport:"Football 2017",applicationNumber:"5",size:4,pullUpHeight:0},{sport:"Football 2017",applicationNumber:"5",size:3,pullUpHeight:0},{sport:"Football 2017",applicationNumber:"5",size:2,pullUpHeight:-35},{sport:"Baseball",applicationNumber:"26",size:4,pullUpHeight:0},{sport:"Baseball",applicationNumber:"26",size:3,pullUpHeight:-20},{sport:"Baseball",applicationNumber:"26",size:2,pullUpHeight:-35},{sport:"Baseball",applicationNumber:"27",size:4,pullUpHeight:0},{sport:"Baseball",applicationNumber:"27",size:3,pullUpHeight:-20},{sport:"Baseball",applicationNumber:"27",size:2,pullUpHeight:-35},{sport:"Baseball",applicationNumber:"5",size:4,pullUpHeight:0},{sport:"Baseball",applicationNumber:"5",size:3,pullUpHeight:0},{sport:"Baseball",applicationNumber:"5",size:2,pullUpHeight:-35},{sport:"Fastpitch",applicationNumber:"26",size:4,pullUpHeight:0},{sport:"Fastpitch",applicationNumber:"26",size:3,pullUpHeight:-20},{sport:"Fastpitch",applicationNumber:"26",size:2,pullUpHeight:-35},{sport:"Fastpitch",applicationNumber:"27",size:4,pullUpHeight:0},{sport:"Fastpitch",applicationNumber:"27",size:3,pullUpHeight:-20},{sport:"Fastpitch",applicationNumber:"27",size:2,pullUpHeight:-35},{sport:"Fastpitch",applicationNumber:"5",size:3,pullUpHeight:0},{sport:"Fastpitch",applicationNumber:"5",size:2,pullUpHeight:-35},{sport:"Compression (Apparel)",applicationNumber:"2",size:3,pullUpHeight:0},{sport:"Compression (Apparel)",applicationNumber:"2",size:2,pullUpHeight:-21},{sport:"Compression (Apparel)",applicationNumber:"5",size:3,pullUpHeight:0},{sport:"Compression (Apparel)",applicationNumber:"5",size:2,pullUpHeight:-21},{sport:"Tech-Tee (Apparel)",applicationNumber:"2",size:3,pullUpHeight:0},{sport:"Tech-Tee (Apparel)",applicationNumber:"2",size:2,pullUpHeight:-21},{sport:"Tech-Tee (Apparel)",applicationNumber:"5",size:2,pullUpHeight:-21},{sport:"Tech-Tee (Apparel)",applicationNumber:"5",size:3,pullUpHeight:0},{sport:"Hockey",applicationNumber:"2",size:3,pullUpHeight:0},{sport:"Hockey",applicationNumber:"2",size:2,pullUpHeight:-21},{sport:"Hockey",applicationNumber:"5",size:2,pullUpHeight:-21},{sport:"Hockey",applicationNumber:"5",size:3,pullUpHeight:0},{sport:"Basketball",applicationNumber:"2",size:3,pullUpHeight:0},{sport:"Basketball",applicationNumber:"2",size:2,pullUpHeight:-21},{sport:"Basketball",applicationNumber:"5",size:2,pullUpHeight:-21},{sport:"Basketball",applicationNumber:"5",size:3,pullUpHeight:0},{sport:"Basketball",applicationNumber:"5",size:4,pullUpHeight:0},{sport:"Basketball",applicationNumber:"5",size:1,pullUpHeight:0},{sport:"Lacrosse",applicationNumber:"5",size:2,pullUpHeight:0}],getPullUp:function(e,t,i){var n=t;isNaN(n)&&(n=2);var a=_.find(this.items,{sport:e,size:n,applicationNumber:i});return void 0===a&&console.warn("pullUp height for "+e+", size "+t+" on "+i+" not found."),a}},ub.data.mascotOffsetsPant={items:[{sport:"baseball",option:["Trad_Elastic_Knicker"],applicationNumbers:[37,38,39,40],size:1,yAdjustment:-15},{sport:"baseball",option:["Trad_Elastic_Knicker"],applicationNumbers:[37,38,39,40],size:2,yAdjustment:2},{sport:"baseball",option:["Trad_Elastic_Knicker"],applicationNumbers:[37,38,39,40],size:3,yAdjustment:28},{sport:"baseball",option:["Trad_Elastic_Knicker"],applicationNumbers:[37,38,39,40],size:4,yAdjustment:48},{sport:"baseball",option:["FullCut_Open_Full","Trad_Elastic_Full","Trad_Elastic_Mid","Trad_Open_Full"],applicationNumbers:[37,38,39,40],size:1,yAdjustment:-8},{sport:"baseball",option:["FullCut_Open_Full","Trad_Elastic_Full","Trad_Elastic_Mid","Trad_Open_Full"],applicationNumbers:[37,38,39,40],size:2,yAdjustment:0},{sport:"baseball",option:["FullCut_Open_Full","Trad_Elastic_Full","Trad_Elastic_Mid","Trad_Open_Full"],applicationNumbers:[37,38,39,40],size:3,yAdjustment:21},{sport:"baseball",option:["FullCut_Open_Full","Trad_Elastic_Full","Trad_Elastic_Mid","Trad_Open_Full"],applicationNumbers:[37,38,39,40],size:4,yAdjustment:36}],getSize:function(e,t,i,n){var a=_.filter(this.items,{sport:e});void 0===a&&ub.utilities.warn("Pant Mascot offsets for "+e+" not found");var o=_.filter(a,function(e){return _.contains(e.option,t)});return void 0===o&&ub.utilities.warn("Pant Mascot offsets for "+e+" option "+t+" not found"),void 0===(o=_.find(o,{size:n}))||_.contains(o.applicationNumbers,i)||(ub.utilities.warn("Pant Mascot offsets for "+e+" option "+t+" # "+i+" not found"),o=void 0),o}},ub.data.mascotOffsets={items:[{sport:"tech-tee",applicationNumber:1,size:2,yAdjustment:-12},{sport:"tech-tee",applicationNumber:1,size:3,yAdjustment:4},{sport:"tech-tee",applicationNumber:5,size:8,yAdjustment:-14},{sport:"tech-tee",applicationNumber:5,size:10,yAdjustment:11},{sport:"tech-tee",applicationNumber:6,size:6,yAdjustment:-15},{sport:"tech-tee",applicationNumber:6,size:3,yAdjustment:1},{sport:"compression",applicationNumber:1,size:2,yAdjustment:-12},{sport:"compression",applicationNumber:1,size:3,yAdjustment:4},{sport:"compression",applicationNumber:5,size:8,yAdjustment:-14},{sport:"compression",applicationNumber:5,size:10,yAdjustment:11},{sport:"compression",applicationNumber:6,size:2,yAdjustment:-15},{sport:"compression",applicationNumber:6,size:3,yAdjustment:1}],getSize:function(e,t,i){var n=_.find(this.items,{sport:e,applicationNumber:t,size:i});return void 0===n&&ub.utilities.warn("Not Found mascot offset for Sport:  "+e+", Location #: "+t+" size: "+i),n}},ub.data.mascotSizesPant={items:[],getSize:function(e,t,i){var n,a;return void 0===(n=_.filter(this.items,{sport:e,size:t}))&&ub.utilities.warn("mascotSize for "+e+" not found."),void 0===(a=_.find(n,function(e){return _.contains(e.option,i)}))&&ub.utilities.warn("Option "+i+" in "+e+" for size: "+t+" not found."),a}},ub.data.mascotSizes={items:[{sport:"Default",size:2,scale:{x:.18,y:.18}},{sport:"Default",size:3,scale:{x:.27,y:.27}},{sport:"Default",size:4,scale:{x:.36,y:.36}},{sport:"Default",size:5,scale:{x:.44,y:.44}},{sport:"Default",size:8,scale:{x:.72,y:.72}},{sport:"Default",size:10,scale:{x:.9,y:.9}}],getSize:function(e,t){var i=_.find(this.items,{sport:e,size:t}),n=ub.current_material.material.block_pattern;return"Baseball"===e&&_.contains(["Cage Jacket"],n)&&(i=_.find(this.items,{sport:e,size:t,blockPattern:n})),void 0===i&&(ub.utilities.warn("mascotSize for "+e+" not found. Using default"),void 0===(i=_.find(this.items,{sport:"Default",size:t}))&&(ub.utilities.warn("Default size for mascot on "+e+" not found. Using 0.5 x 0.5"),i={sport:e,size:t,scale:{x:.5,y:.5}})),i}},ub.data.messageTypes=["unread","orders","prolook","feedback","pm"],ub.data.unreadMessages=void 0,ub.data.notificationMessage=[{type:"unread",description:"If you have new messages it will be listed here."},{type:"prolook",description:"This is a place for PROLOOK announcements such as promos, new features released for the customizer and other similar things."},{type:"orders",description:"Notifications regarding the order you submitted goes here, such as custom artwork status and overall progress, where your order is now, etc."},{type:"pm",description:"Direct messages sent to you by other users goes here."},{type:"feedback",description:"Your feedback is important to us, our replies to the feedback you send us goes here."},{type:"sent",description:"Messages that you sent goes here, if its not yet read by the recipient it is still marked as [New!]."}],ub.data.tailsweepCharacters={items:[{code:"astros",lengths:[{length:1,character:"À"},{length:2,character:"À"},{length:3,character:"À"},{length:4,character:"Á"},{length:5,character:"Â"},{length:6,character:"Ã"},{length:7,character:"Ä"},{length:8,character:"Å"},{length:9,character:"Æ"},{length:10,character:"Ç"},{length:11,character:"È"},{length:12,character:"É"}]},{code:"brewers",lengths:[{length:1,character:"Ê"},{length:2,character:"Ê"},{length:3,character:"Ê"},{length:4,character:"Ë"},{length:5,character:"Ì"},{length:6,character:"Í"},{length:7,character:"Î"},{length:8,character:"Ï"},{length:9,character:"Ð"},{length:10,character:"Ñ"},{length:11,character:"Ò"},{length:12,character:"Ó"}]},{code:"dodgers",lengths:[{length:1,character:"Ô"},{length:2,character:"Ô"},{length:3,character:"Ô"},{length:4,character:"Õ"},{length:5,character:"Ö"},{length:6,character:"×"},{length:7,character:"Ø"},{length:8,character:"Ù"},{length:9,character:"Ú"},{length:10,character:"Û"},{length:11,character:"Ü"},{length:12,character:"Ý"}]},{code:"orioles",lengths:[{length:1,character:"Þ"},{length:2,character:"Þ"},{length:3,character:"Þ"},{length:4,character:"ß"},{length:5,character:"à"},{length:6,character:"á"},{length:7,character:"â"},{length:8,character:"ã"},{length:9,character:"ä"},{length:10,character:"å"},{length:11,character:"æ"},{length:12,character:"ç"}]},{code:"yankees",lengths:[{length:1,character:"è"},{length:2,character:"è"},{length:3,character:"è"},{length:4,character:"é"},{length:5,character:"ê"},{length:6,character:"ë"},{length:7,character:"ì"},{length:8,character:"í"},{length:9,character:"î"},{length:10,character:"ï"},{length:11,character:"ð"},{length:12,character:"ñ"}]},{code:"sanfranciscogia",lengths:[{length:1,character:"ò"},{length:2,character:"ò"},{length:3,character:"ò"},{length:4,character:"ó"},{length:5,character:"ô"},{length:6,character:"õ"},{length:7,character:"ö"},{length:8,character:"÷"},{length:9,character:"ø"},{length:10,character:"ù"},{length:11,character:"ú"},{length:12,character:"û"}]},{code:"expos",lengths:[{length:1,character:"ü"},{length:2,character:"ü"},{length:3,character:"ü"},{length:4,character:"ý"},{length:5,character:"þ"},{length:6,character:"ÿ"},{length:7,character:"ı"},{length:8,character:"ˆ"},{length:9,character:"ˇ"},{length:10,character:"ˉ"},{length:11,character:"˘"},{length:12,character:"˙"}]},{code:"oaklands",lengths:[{length:1,character:"˚"},{length:2,character:"˚"},{length:3,character:"˚"},{length:4,character:"˛"},{length:5,character:"˜"},{length:6,character:"˝"},{length:7,character:"–"},{length:8,character:"—"},{length:9,character:"‘"},{length:10,character:"’"},{length:11,character:"‚"},{length:12,character:"“"}]},{code:"indians",lengths:[{length:1,character:"”"},{length:2,character:"”"},{length:3,character:"”"},{length:4,character:"„"},{length:5,character:"†"},{length:6,character:"‡"},{length:7,character:"•"},{length:8,character:"…"},{length:9,character:"‹"},{length:10,character:"›"},{length:11,character:"⁄"},{length:12,character:"‬₣"}]},{code:"royals",lengths:[{length:1,character:"₤"},{length:2,character:"₤"},{length:3,character:"₤"},{length:4,character:"₧"},{length:5,character:"€"},{length:6,character:"№"},{length:7,character:"™"},{length:8,character:"∂"},{length:9,character:"∆"},{length:10,character:"∏"},{length:11,character:"∑"},{length:12,character:"‬−"}]},{code:"twins",lengths:[{length:1,character:"√"},{length:2,character:"√"},{length:3,character:"√"},{length:4,character:"√"},{length:5,character:"√"},{length:6,character:"∞"},{length:7,character:"∫"},{length:8,character:"≈"},{length:9,character:"≤"},{length:10,character:"≥"},{length:11,character:"ﬁ"},{length:12,character:"ﬂ"}]}],getCharacter:function(e,t){var i=_.find(this.items,{code:e});if(void 0===i)return i;var n=_.find(i.lengths,{length:t});return void 0===n?void ub.utilities.warn("tailsweep length not found for "+e):n.character}},ub.data.sizes={items:[],getSizes:function(e,t,i){var n=_.find(this.items,{sport:e,gender:t,type:i});return void 0===n&&ub.utilities.warn("Sport Not Found"),n}},ub.data.originalSports=["Football","Wrestling"],ub.data.initialSizes={items:[{type:"player_number",types:[{applicationNumbers:[2],resultApplicationType:"front_number",size:8,font_size:8,sport:["Football"]},{applicationNumbers:[2],resultApplicationType:"front_number",size:4,font_size:4,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[32,33],resultApplicationType:"shoulder_number",size:4,font_size:4,sport:["Hockey"]},{applicationNumbers:[9,10],resultApplicationType:"sleeve_number",size:4,font_size:4,sport:["Hockey"]},{applicationNumbers:[2,6],resultApplicationType:"front_number",size:6,font_size:6,sport:["Hockey"]},{applicationNumbers:[2],resultApplicationType:"front_number",size:6,font_size:6,sport:["Lacrosse"]},{applicationNumbers:[6],resultApplicationType:"back_number",size:8,font_size:8,sport:["Lacrosse"]},{applicationNumbers:[26,27,28,29,30,31,25,3,24],resultApplicationType:"front_number",size:4,font_size:4,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[7,51,8],resultApplicationType:"back_number",size:4,font_size:4,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[5],resultApplicationType:"back_number",size:8,font_size:8,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[9,10],resultApplicationType:"sleeve_number",size:4,font_size:4,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[9,10],resultApplicationType:"sleeve_number",size:3,font_size:3,sport:["Football 2017"]},{applicationNumbers:[32,33],resultApplicationType:"shoulder_number",size:3,font_size:3,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[41,42,43,44],resultApplicationType:"sleeve_number",size:3,font_size:3,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[-1],resultApplicationType:"shoulder_number",size:4,font_size:4,sport:["Default","Baseball","Fastpitch"]},{applicationNumbers:[2],resultApplicationType:"front_number",size:8,font_size:8,sport:["Test"]},{applicationNumbers:[5],resultApplicationType:"back_number",size:10,font_size:10,sport:["Test"]}]}],getSize:function(e,t,i){var n=void 0,a=_.find(this.items,{type:e});return console.log("Start output here..."),void 0===a&&ub.utilities.warn("Initial Size not found for "+e+" on location #"+t),void 0===(n=_.find(a.types,function(e){return _.contains(e.applicationNumbers,t)&&_.contains(e.sport,i)}))&&(n=_.find(a.types,function(e){return _.contains(e.applicationNumbers,t)&&_.contains(e.sport,"Default")})),void 0===n&&t<70&&(ub.utilities.warn("Using catch all initial size (-1)"),n=_.find(a.types,function(e){return _.contains(e.applicationNumbers,-1)&&_.contains(e.sport,"Default")})),70<t&&(n={applicationNumbers:[-1],resultApplicationType:"front_number",size:4,font_size:4,sport:["Default","Free Form Tool"]}),ub.funcs.isCurrentSport("Baseball")&&70<t&&(n.size=5,n.font_size=5),n}},ub.data.initialSizesLower={items:[{type:"player_number",types:[{applicationNumbers:[1,2,3,4,5,6],resultApplicationType:"front_number",size:4,font_size:4,sport:["Hockey"],blockPattern:["Hockey Socks"]},{applicationNumbers:[7,8],resultApplicationType:"back_number",size:4,font_size:4,sport:["Hockey"],blockPattern:["Hockey Socks"]}]}],getSize:function(e,t,i,n){var a=void 0,o=_.find(this.items,{type:e});return console.log("Start output here..."),void 0===o&&ub.utilities.warn("Initial Size not found for "+e+" on location #"+t),void 0===(a=_.find(o.types,function(e){return _.contains(e.applicationNumbers,t)&&_.contains(e.sport,i)&&_.contains(e.blockPattern,n)}))&&(a=_.find(o.types,function(e){return _.contains(e.applicationNumbers,t)&&_.contains(e.sport,"Default")&&_.contains(e.blockPattern,n)})),void 0===a&&t<70&&(ub.utilities.warn("Using catch all initial size (-1)"),a=_.find(o.types,function(e){return _.contains(e.applicationNumbers,-1)&&_.contains(e.sport,"Default")&&_.contains(e.blockPattern,n)})),70<t&&(a={applicationNumbers:[-1],resultApplicationType:"front_number",size:4,font_size:4,sport:["Default","Free Form Tool"]}),a}},ub.data.sportsMain={items:["Hockey","Tech-Tee (Apparel)","Compression (Apparel)","Cinch Sack (Apparel)","Polo (Apparel)","Hoodie (Apparel)","Crew Socks (Apparel)","Volleyball","Hoodie (Apparel)","Polo (Apparel)","Hockey","Quarter Zip Jacket (Apparel)","Fan Replica Jersey (Apparel)","Basketball (Apparel)","Lacrosse","Soccer","2017 Team Short with Pockets (Apparel)","Signature Coaches Short (Apparel)","Basketball","Cage Jacket (Apparel)","Football 2017","Game Day Jackets (Apparel)","Field Hockey","Compression Pant (Apparel)","Socks (Apparel)","Cage Jacket (Apparel)","Wrestling 2018","Tennis"],options:["Fight Short"],blockPatterns:["Cage Jacket","Cage Jacket (Apparel)"],currentOk:function(){return(_.contains(this.items,ub.current_material.material.uniform_category)||_.contains(this.options,ub.current_material.material.neck_option)||_.contains(this.blockPatterns,ub.current_material.material.block_pattern))&&("sublimated"===ub.current_material.material.uniform_application_type||"knitted"===ub.current_material.material.uniform_application_type)}},ub.data.anchors={items:[{applicationNumbers:[1,2,5,6],anchor:{x:.5,y:1}}],getAnchor:function(t){var e=_.find(this.items,function(e){return _.contains(e.applicationNumbers,t)});return void 0===e&&(e={applicationNumbers:[-1],anchor:{x:.5,y:.5}}),e}},ub.data.matchingApplications=[33,32,9,10,42,41,44,43,52,53,54,55],ub.data.matchingIDs={items:[{id:9,matchingID:10},{id:10,matchingID:9},{id:32,matchingID:33},{id:33,matchingID:32},{id:52,matchingID:53},{id:53,matchingID:52},{id:54,matchingID:55},{id:55,matchingID:54},{id:43,matchingID:44},{id:44,matchingID:43},{id:41,matchingID:42},{id:42,matchingID:41}],sportsExemption:["Baseball"],getMatchingID:function(e){var t=void 0,i=ub.config.sport;return _.contains(this.sportsExemption,i)?t:void 0!==(t=_.find(this.items,{id:parseInt(e)}))?t.matchingID:void 0}},ub.data.freeFormToolEnabledSports={items:[{sport:"Wrestling",sublimatedPart:"Body"},{sport:"Crew Socks (Apparel)",sublimatedPart:"Sublimated"},{sport:"Compression (Apparel)",sublimatedPart:"Extra"},{sport:"Cinch Sack (Apparel)",sublimatedPart:"Body"},{sport:"Tech-Tee (Apparel)",sublimatedPart:"Extra"},{sport:"Football",sublimatedPart:"Body"},{sport:"Baseball",sublimatedPart:"Extra"},{sport:"Volleyball",sublimatedPart:"Extra"},{sport:"Hoodie (Apparel)",sublimatedPart:"Extra"},{sport:"Polo (Apparel)",sublimatedPart:"Extra"},{sport:"Hockey",sublimatedPart:"Extra"},{sport:"Quarter Zip Jacket (Apparel)",sublimatedPart:"Extra"},{sport:"Fan Replica Jersey (Apparel)",sublimatedPart:"Extra"},{sport:"Basketball (Apparel)",sublimatedPart:"Extra"},{sport:"Lacrosse",sublimatedPart:"Extra"},{sport:"Fastpitch",sublimatedPart:"Body"},{sport:"Soccer",sublimatedPart:"Extra"},{sport:"2017 Team Short with Pockets (Apparel)",sublimatedPart:"Extra"},{sport:"Signature Coaches Short (Apparel)",sublimatedPart:"Extra"},{sport:"Football 2017",sublimatedPart:"Body"},{sport:"Game Day Jackets (Apparel)",sublimatedPart:"Body"},{sport:"Field Hockey",sublimatedPart:"Extra"},{sport:"Compression Pant (Apparel)",sublimatedPart:"Extra"},{sport:"Socks (Apparel)",sublimatedPart:"Extra"},{sport:"Wrestling Compression Shorts (Apparel)",sublimatedPart:"Extra"},{sport:"Basketball",sublimatedPart:"Extra"},{sport:"Cage Jacket (Apparel)",sublimatedPart:"Extra"},{sport:"Wrestling Compression Short Sleeve (Apparel)",sublimatedPart:"Extra"},{sport:"Field Hockey",sublimatedPart:"Extra"},{sport:"Wrestling Compression Shorts (Apparel)",sublimatedPart:"Extra"},{sport:"Wrestling 2018",sublimatedPart:"Extra"},{sport:"Tennis",sublimatedPart:"Extra"},{sport:"PTS Cage Jacket (Apparel)",sublimatedPart:"Extra"},{sport:"PTS Hoodie (Apparel)",sublimatedPart:"Extra"},{sport:"PTS Cage Jacket (Apparel)",sublimatedPart:"Body"},{sport:"Yoga Pant (Apparel)",sublimatedPart:"Extra"},{sport:"Yoga Pant (Apparel)",sublimatedPart:"Body"},{sport:"Tech Tee (eSports)",sublimatedPart:"Extra"},{sport:"SFN Jogger (Apparel)",sublimatedPart:"Extra"},{sport:"Polo (eSports)",sublimatedPart:"Extra"},{sport:"Hoodie (eSports)",sublimatedPart:"Extra"},{sport:"Track and Field",sublimatedPart:"Extra"}],get:function(e){var t=_.find(this.items,{sport:e});return"Football"===e&&"INFUSED 14"!==ub.current_material.material.block_pattern&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Baseball"!==e&&"Fastpitch"!==e||"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Hockey"===e&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Lacrosse"===e&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Wrestling Compression Shorts (Apparel)"===e&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),t},isValid:function(e){var t=_.find(this.items,{sport:e});return"Football"===e&&"INFUSED 14"!==ub.current_material.material.block_pattern&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Baseball"!==e&&"Fastpitch"!==e||"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Hockey"===e&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Lacrosse"===e&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),"Wrestling Compression Shorts (Apparel)"===e&&"sublimated"!==ub.current_material.material.uniform_application_type&&(t=void 0),0<_.size(t)}},ub.data.randomFeedArrangement={items:[{set:"Top Welt",order:0},{set:"Body",order:1},{set:"Heel",order:2},{set:"Padding",order:3},{set:"Arch",order:4},{set:"Toe",order:5},{set:"Ankle Padding",order:6}],getSortID:function(e){return _result=_.find(this.items,{set:e}),"undefined"==typeof _result&&(ub.utilities.warn("Set ["+e+"] not found. Using 0"),_result={order:0}),_result}},ub.data.minimumOrder={items:[{sport:"Crew Socks (Apparel)",qty:30},{sport:"Socks (Apparel)",qty:30},{sport:"Default",qty:6}],getQty:function(e){return _result=_.find(this.items,{sport:e}),"undefined"==typeof _result&&(ub.utilities.warn("Min. Order QTY for ["+e+"] not found. Using Default"),_result=_.find(this.items,{sport:"Default"})),_result}},ub.data.sublimatedColorArrangement={items:[{colorName:"White",order:1},{colorName:"Black",order:2},{colorName:"Red",order:3},{colorName:"Brick Red",order:4},{colorName:"Cardinal",order:5},{colorName:"Seminole",order:6},{colorName:"Maroon",order:7},{colorName:"Pink",order:8},{colorName:"Neon Pink",order:9},{colorName:"Orange",order:10},{colorName:"Texas Orange",order:11},{colorName:"Tennessee Orange",order:12},{colorName:"Gold",order:13},{colorName:"Old Gold",order:14},{colorName:"Vegas Gold",order:15},{colorName:"Yellow",order:16},{colorName:"Optic Yellow",order:17},{colorName:"Safety Green",order:18},{colorName:"Lime Green",order:19},{colorName:"Kelly Green",order:20},{colorName:"Forest Green",order:21},{colorName:"Dark Green",order:22},{colorName:"Royal Blue",order:23},{colorName:"Dark Royal Blue",order:24},{colorName:"Navy Blue",order:25},{colorName:"Dark Navy Blue",order:26},{colorName:"Purple",order:27},{colorName:"Dark Purple",order:28},{colorName:"Marlin Blue",order:29},{colorName:"Turquoise",order:30},{colorName:"Aqua",order:31},{colorName:"Carolina Blue",order:32},{colorName:"Columbia Blue",order:33},{colorName:"Charcoal Grey",order:34},{colorName:"Gray",order:35},{colorName:"Silver Gray",order:36},{colorName:"Cream",order:37},{colorName:"Brown",order:38}],getOrderID:function(e){var t=_.find(this.items,{colorName:e});return void 0===t&&(t={colorName:e,order:this.items.length+1},ub.utilities.warn("Sort order not found for "+e+" using "+(this.items.length+1))),t}},ub.data.activeSports={items:[{sport:"Football"},{sport:"Wrestling"},{sport:"Crew Socks (Apparel)"},{sport:"Polo (Apparel)"},{sport:"Cinch Sack (Apparel)"},{sport:"Baseball"},{sport:"Compression (Apparel)"},{sport:"Tech-Tee (Apparel)"},{sport:"Hoodie (Apparel)"},{sport:"Quarter Zip Jacket (Apparel)"},{sport:"Volleyball"},{sport:"Fan Replica Jersey (Apparel)"},{sport:"Lacrosse"},{sport:"Signature Coaches Short (Apparel)"},{sport:"2017 Team Short with Pockets (Apparel)"},{sport:"Game Day Jackets (Apparel)"},{sport:"Fastpitch"},{sport:"Soccer"},{sport:"Basketball"},{sport:"Hockey"},{sport:"Socks (Apparel)"},{sport:"Cage Jacket (Apparel)"},{sport:"Compression Pant (Apparel)"},{sport:"Field Hockey"},{sport:"Wrestling Compression Shorts (Apparel)"}],isSportOK:function(e){return void 0!==_.find(this.items,{name:e})}},ub.data.tempSports={items:[],isSportOK:function(e){return void 0!==_.find(this.items,{name:e})}},ub.data.secondaryBarLabels={items:[{sport:"Wrestling",type:"both",upperLabel:"Singlet",lowerLabel:"Fight Shorts"},{sport:"Wrestling 2018",type:"both",upperLabel:"Singlets & Tops",lowerLabel:"Shorts"},{sport:"Volleyball",type:"both",upperLabel:"Jersey",lowerLabel:"Compression Shorts"},{sport:"Crew Socks (Apparel)",type:"lower",lowerLabel:"Crew Sock"},{sport:"Compression (Apparel)",type:"upper",upperLabel:"Compression"},{sport:"Tech-Tee (Apparel)",type:"upper",upperLabel:"Tech-Tee"},{sport:"Cinch Sack (Apparel)",type:"upper",upperLabel:"Cinch Sack"},{sport:"Hoodie (Apparel)",type:"upper",upperLabel:"Hoodie"},{sport:"Quarter Zip Jacket (Apparel)",type:"upper",upperLabel:"Quarter Zip Jacket"},{sport:"Polo (Apparel)",type:"upper",upperLabel:"Polo"},{sport:"Soccer",type:"both",upperLabel:"Jersey",lowerLabel:"Shorts"},{sport:"Lacrosse",type:"both",upperLabel:"Jersey",lowerLabel:"Shorts"},{sport:"2017 Team Short with Pockets (Apparel)",type:"lower",lowerLabel:" Team Short"},{sport:"Signature Coaches Short (Apparel)",type:"lower",lowerLabel:"Shorts"},{sport:"Socks (Apparel)",type:"lower",lowerLabel:"Socks"},{sport:"Wrestling Compression Shorts (Apparel)",type:"lower",lowerLabel:"Shorts"},{sport:"Game Day Jackets (Apparel)",type:"upper",upperLabel:"Jacket"},{sport:"Cage Jacket (Apparel)",type:"upper",upperLabel:"Jackets"},{sport:"Fan Replica Jersey (Apparel)",type:"upper",upperLabel:"Jersey"},{sport:"Compression Pant (Apparel)",type:"lower",lowerLabel:" Pants"},{sport:"Default",type:"both",upperLabel:"Jersey",lowerLabel:"Pant"},{sport:"Yoga Pant (Apparel)",type:"lower",lowerLabel:" Pants"},{sport:"SFN Jogger (Apparel)",type:"lower",lowerLabel:" Pants"},{sport:"Tech Tee (eSports)",type:"upper",upperLabel:"Jersey"},{sport:"Polo (eSports)",type:"upper",upperLabel:"Jersey"},{sport:"Hoodie (eSports)",type:"upper",upperLabel:"Jersey"}],getLabel:function(e){var t=_.find(this.items,{sport:e});return void 0===t&&ub.utilities.info("Secondary Bar Labels not found for "+e),t}},ub.data.sportFilters=[{sport:"Football",filters:["All","Jersey","Pant"]},{sport:"Football 2017",filters:["All","Jersey","Pant"]},{sport:"Basketball",filters:["All","Jersey","Shorts"]},{sport:"Baseball",filters:["All","Jersey","Pant"]},{sport:"Fastpitch",filters:["All","Jersey","Pant"]},{sport:"Wrestling",filters:["All","Singlet","Fight Shorts"]},{sport:"Wrestling 2018",filters:["All","Singlets & Tops","Shorts"]},{sport:"Crew Socks (Apparel)",filters:["All"]},{sport:"Compression (Apparel)",filters:["All"]},{sport:"Tech-Tee (Apparel)",filters:["All"]},{sport:"Volleyball",filters:["All","Jersey","Compression Shorts"]},{sport:"Hoodie (Apparel)",filters:["All"]},{sport:"Quarter Zip Jacket (Apparel)",filters:["All","Jackets"]},{sport:"Polo (Apparel)",filters:["All"]},{sport:"Fan Replica Jersey (Apparel)",filters:["All"]},{sport:"Soccer",filters:["All","Jersey","Shorts"]},{sport:"Lacrosse",filters:["All","Jersey","Shorts"]},{sport:"Hockey",filters:["All","Jersey","Socks"]},{sport:"2017 Team Short with Pockets (Apparel)",filters:["All","Jersey","Team Shorts"]},{sport:"Signature Coaches Short (Apparel)",filters:["All","Jersey","Shorts"]},{sport:"Game Day Jackets (Apparel)",filters:["All","Jackets"]},{sport:"Socks (Apparel)",filters:["All","Jersey","Socks"]},{sport:"Polo (Apparel)",filters:["All"]},{sport:"Cage Jacket (Apparel)",filters:["All","Jackets"]},{sport:"Compression Pant (Apparel)",filters:["All"]},{sport:"Field Hockey",filters:["All","Jersey","Skorts"]},{sport:"Fan Replica Jersey (Apparel)",filters:["All","Jersey"]},{sport:"Wrestling Compression Shorts (Apparel)",filters:["All","Jersey","Shorts"]},{sport:"Compression Short (Apparel)",filters:["All","Pants"]},{sport:"Cinch Sack (Apparel)",filters:["All","Cinch Sack"]},{sport:"Tennis",filters:["All","Jersey","Shorts"]},{sport:"Yoga Pant (Apparel)",filters:["All"]},{sport:"SFN Jogger (Apparel)",filters:["All"]},{sport:"Tech Tee (eSports)",filters:["All"]},{sport:"Polo (eSports)",filters:["All"]},{sport:"Hoodie (eSports)",filters:["All"]},{sport:"Track and Field",filters:["All"]}],ub.data.sportsWithExtraLayer={isValid:function(e){var t=_.find(e,{name:"Extra"});return void 0!==t&&console.log("Extra Layer detected for "+ub.sport),void 0!==t}},ub.data.sportsWithHiddenYouthPrices={items:[{sport:"Crew Socks (Apparel)"},{sport:"Cinch Sack (Apparel)"},{sport:"Volleyball"},{sport:"Baseball"},{sport:"2017 Team Short with Pockets (Apparel)"},{sport:"Signature Coaches Short (Apparel)"},{sport:"Lacrosse"},{sport:"Polo (Apparel)"},{sport:"Fastpitch"},{sport:"Game Day Jackets (Apparel)"}],isHidden:function(e,t){return void 0!==_.find(this.items,{sport:e})}},ub.data.skipTeamColorProcessing={items:[{sport:"Cinch Sack (Apparel)",code:"body"},{sport:"Polo (Apparel)",code:"body"},{sport:"Hockey",code:"body"},{sport:"Hockey",code:"extra_left_cowl"},{sport:"Hockey",code:"extra_right_cowl"},{sport:"Quarter Zip Jacket (Apparel)",code:"body"},{sport:"Hoodie (Apparel)",code:"body"},{sport:"Volleyball",code:"body"}],shouldSkip:function(e,t){var i=_.find(this.items,{sport:e,code:t}),n=ub.current_material.material;if(void 0===i){var a="Wrestling"===e||"Baseball"===e,o="Fight Short"===n.neck_option,r="Cage Jacket"===n.block_pattern;a&&(o||r)&&"body"===t&&(i={sport:e,code:t})}return"body"!==t&&"extra"!==t||console.log(t),"Hockey"===n.uniform_category&&"Hockey Socks"===n.block_pattern&&(i=void 0),void 0!==i||ub.config.hiddenBody&&"body"===t||ub.config.hiddenBody&&"extra"===t}},ub.data.smallerPatterns={items:[{sport:"Wrestling",blockPatternOption:"Fight Short"},{sport:"Volleyball",blockPatternOption:"Compression Shorts"},{sport:"Soccer",blockPatternOption:"Short (M)"},{sport:"Soccer",blockPatternOption:"Short (W)"}],usesSmallerPattern:function(e,t){return void 0!==_.find(this.items,{sport:e,blockPatternOption:t})}},ub.data.featureFlagCodes={items:[{name:"Beta Sport Uniforms",code:"betaSportUniforms",section:"uniforms"},{name:"Show price items of uniforms",code:"priceItemName",section:"uniforms"},{name:"Test Orders",code:"testOrders",section:"uniforms"},{name:"Tackle Twill Custom Sizes",code:"tackeTwillCustomSizes",section:"uniforms"}],getCode:function(e){var t;return"udefined"==typeof(t=_.find(this.items,{name:e}))&&ub.utilities.error("Code for feature flag ["+e+"] is not found."),t}},ub.data.locations={items:[{name:"feature",url:"/api/feature/check"}],getUrl:function(e){var t;return void 0===(t=_.find(this.items,{name:e}))&&ub.utilities.error("Location ["+e+"] not found."),t}},ub.data.withBodyLeftRight={items:[{sport:"Volleyball",neckOption:"Compression Shorts"}],isOk:function(e,t){return void 0!==_.find(this.items,{sport:e,neckOption:t})}},ub.data.withBodyLeftRight={items:[{sport:"Volleyball",neckOption:"Compression Shorts"}],isOk:function(e,t){return void 0!==_.find(this.items,{sport:e,neckOption:t})}},ub.data.blockPatternsAlias={items:[{sport:"Basketball",name:"2018 Basketball Jersey",alias:"SFN Jersey"}],getAlias:function(e){var t=_.find(this.items,{name:e}),i=e;return void 0!==t&&(i=t.alias),i}},ub.data.neckOptionsAlias={items:[{sport:"Baseball",name:"Fullcut Open Full",alias:"Full Cut, Open Cuff, Full Length"},{sport:"Baseball",name:"Trad Open Full",alias:"Traditional Cut, Open Cuff, Full Length"},{sport:"Baseball",name:"Trad Elastic Full",alias:"Traditional Cut, Elastic Cuff, Full Length"},{sport:"Baseball",name:"Trad Elastic Knicker",alias:"Traditional Cut, Elastic Cuff, Knicker Length"},{sport:"Baseball",name:"Trad Elastic Mid",alias:"Traditional Cut, Elastic Cuff, Mid-Calf Length"}],getAlias:function(e){var t=_.find(this.items,{name:e}),i=e;return void 0!==t&&(i=t.alias),i}},ub.data.loadingOptionsAlias={items:[{name:"block_options",alias:"Block Options"},{name:"block_patterns",alias:"Block Patterns"},{name:"material",alias:"Style details"},{name:"materials_options",alias:"Style parts"},{name:"mascots_categories",alias:"Mascot categories"},{name:"mascots_groups_categories",alias:"Mascot groups"},{name:"mascots",alias:"Mascots"},{name:"patterns",alias:"Patterns"},{name:"fonts",alias:"Fonts"},{name:"colors",alias:"Colors"},{name:"tagged_styles",alias:"Tags"},{name:"cuts_links",alias:"Cuts Links"},{name:"logo_request",alias:"Logo Requests"},{name:"application_size",alias:"Application Sizes"}],getAlias:function(e){var t=_.find(this.items,{name:e}),i=e;return void 0!==t&&(i=t.alias),i}},ub.data.specialCodes={items:[{name:"Pro-dry",alias:"Pro-Dry"}],getCode:function(e){var t=_.find(this.items,{name:e}),i=e;return void 0!==t&&(i=t.alias),i}},ub.data.flippedMascots={items:[{code:"356"}],getCode:function(e){return void 0!==_.find(this.items,{code:e})}},ub.data.urlAlias={items:[{shortCode:"tech-tee",urlAlias:"Tech-Tee (Apparel)",thumbFilename:"tech_tee.png",gender:["men","women"]},{shortCode:"compression",urlAlias:"Compression (Apparel)",thumbFilename:"compression.png",gender:["men","women"]},{shortCode:"polo",urlAlias:"Polo (Apparel)",thumbFilename:"polo.png",gender:["men","women"]},{shortCode:"volleyball",urlAlias:"Volleyball",thumbFilename:"volleyball.png",gender:["women"]},{shortCode:"fastpitch",urlAlias:"Fastpitch",thumbFilename:"fastpitch.png",gender:["women"]},{shortCode:"crew-socks",urlAlias:"Crew Socks (Apparel)",thumbFilename:"crew_sock.png",gender:["men"]},{shortCode:"hoodie",urlAlias:"Hoodie (Apparel)",thumbFilename:"hoodie.png",gender:["men"]},{shortCode:"football",urlAlias:"Football",thumbFilename:"football.png",gender:["men"]},{shortCode:"baseball",urlAlias:"Baseball",thumbFilename:"baseball.png",gender:["men"]},{shortCode:"wrestling",urlAlias:"Wrestling",thumbFilename:"wrestling.png",gender:["men"]},{shortCode:"hockey",urlAlias:"Hockey",thumbFilename:"hockey.png",gender:["men","women"]},{shortCode:"cinch-sack",urlAlias:"Cinch Sack (Apparel)",thumbFilename:"cinch_sack.png",gender:["men"]},{shortCode:"one-fourth-zip-jacket",urlAlias:"Quarter Zip Jacket (Apparel)",thumbFilename:"1-4 zip.png",gender:["men","women"]},{shortCode:"fan-replica-jersey",urlAlias:"Fan Replica Jersey (Apparel)",thumbFilename:"fan_replica.png",gender:["men"]},{shortCode:"team-shorts",urlAlias:"2017 Team Short with Pockets (Apparel)",thumbFilename:"team-short.png",gender:["men"]},{shortCode:"signature-coaches-short",urlAlias:"Signature Coaches Short (Apparel)",thumbFilename:"signature-coaches-short.png",gender:["men"]},{shortCode:"game-day-coaches-jackets",urlAlias:"Game Day Jackets (Apparel)",thumbFilename:"game-day-coaches-jackets.png",gender:["men"]},{shortCode:"socks",urlAlias:"Socks (Apparel)",thumbFilename:"socks.png",gender:["men","women"]},{shortCode:"cage-jacket",urlAlias:"Cage Jacket (Apparel)",thumbFilename:"cage-jacket.png",gender:["men","women"]},{shortCode:"compression-pant",urlAlias:"Compression Pant (Apparel)",thumbFilename:"compression-pant.png",gender:["men"]},{shortCode:"field-hockey",urlAlias:"Field Hockey",thumbFilename:"field-hockey.png",gender:["women"]},{shortCode:"wrestling-compression-shorts",urlAlias:"Wrestling Compression Shorts (Apparel)",thumbFilename:"wrestling-compression-shorts.png",gender:["men"]},{shortCode:"sfn-jogger",urlAlias:"SFN Jogger (Apparel)",gender:["men"]},{shortCode:"yoga-pant",urlAlias:"Yoga Pant (Apparel)",gender:["women"]},{shortCode:"gamer-jersey-esports",urlAlias:"Tech Tee (eSports)",gender:["men"]},{shortCode:"gamer-polo-esports",urlAlias:"Polo (eSports)",gender:["men"]},{shortCode:"gamer-hoodie-esports",urlAlias:"Hoodie (eSports)",gender:["men"]},{shortCode:"track-and-field",urlAlias:"Track and Field",gender:["men","women"]}],getAlias:function(e){var t=void 0;return void 0===(t=_.find(this.items,{shortCode:e}))&&(t={shortCode:e,urlAlias:e.toTitleCase()}),t},getArray:function(){return _.pluck(this.items,"shortCode")}},ub.data.apparelList={items:[],isApparel:function(e){return _.contains(this.items,e)}},ub.data.applicationProjectionExemptions={items:[{perspective:["left","right"],part:["Cowl"],sport:["Football 2017","Fan Replica Jersey (Apparel)"],primary:"front"}],isExempted:function(t,i,n){var e=_.find(this.items,function(e){if(_.contains(e.perspective,t)&&_.contains(e.part,i)&&_.contains(e.sport,n))return e});return{isExempted:0<_.size(e),result:e}}},ub.data.usStates={items:[{name:"Alabama",code:"AL"},{name:"Alaska",code:"AK"},{name:"Arizona",code:"AZ"},{name:"Arkansas",code:"AR"},{name:"California",code:"CA"},{name:"Colorado",code:"CO"},{name:"Connecticut",code:"CT"},{name:"Delaware",code:"DE"},{name:"District of Columbia",code:"DC"},{name:"Florida",code:"FL"},{name:"Georgia",code:"GA"},{name:"Hawaii",code:"HI"},{name:"Idaho",code:"ID"},{name:"Illinois",code:"IL"},{name:"Indiana",code:"IN"},{name:"Iowa",code:"IA"},{name:"Kansa",code:"KS"},{name:"Kentucky",code:"KY"},{name:"Lousiana",code:"LA"},{name:"Maine",code:"ME"},{name:"Maryland",code:"MD"},{name:"Massachusetts",code:"MA"},{name:"Michigan",code:"MI"},{name:"Minnesota",code:"MN"},{name:"Mississippi",code:"MS"},{name:"Missouri",code:"MO"},{name:"Montana",code:"MT"},{name:"Nebraska",code:"NE"},{name:"Nevada",code:"NV"},{name:"New Hampshire",code:"NH"},{name:"New Jersey",code:"NJ"},{name:"New Mexico",code:"NM"},{name:"New York",code:"NY"},{name:"North Carolina",code:"NC"},{name:"North Dakota",code:"ND"},{name:"Ohio",code:"OH"},{name:"Oklahoma",code:"OK"},{name:"Oregon",code:"OR"},{name:"Pennsylvania",code:"PA"},{name:"Rhode Island",code:"RI"},{name:"South Carolina",code:"SC"},{name:"South Dakota",code:"SD"},{name:"Tennessee",code:"TN"},{name:"Texas",code:"TX"},{name:"Utah",code:"UT"},{name:"Vermont",code:"VT"},{name:"Virginia",code:"VA"},{name:"Washington",code:"WA"},{name:"West Virginia",code:"WV"},{name:"Wisconsin",code:"WI"},{name:"Wyoming",code:"WY"}],getStateByCode:function(e){var t=_.find(this.items,{code:e});return void 0===t&&ub.utilities.error("State not found for code ["+e+"]"),t},getStateByName:function(e){var t=_.find(this.items,{name:e});return void 0===t&&ub.utilities.error("State ["+e+"] not found!"),t}},ub.data.tackleTwillSportsFreeFormExemptions={items:["Football","Basketball","Baseball","Fastpitch","Hockey"],isValid:function(e){return _.contains(this.items,e)}},ub.data.excludedColors={items:[{sport:["Football","Football 2017"],uniformApplicationType:"tackle_twill",excludedColors:["PK","NP","Y","LG","DG","CR"]}],isExcluded:function(t,i,n){var e=_.filter(this.items,function(e){return _.contains(e.sport,t)&&i===e.uniformApplicationType});if(0<_.size(e)){e=_.filter(e,function(e){return _.contains(e.excludedColors,n)});return 0<_.size(e)}return!1}},ub.data.randomFeedExemptions={items:["3 inch Stir Up Sock","7 inch Stir Up Sock","9 inch Stir Up Sock","Quick Turn"],isExempted:function(e){return _.contains(this.items,e)}},ub.data.uniSexSports={items:[{sport:"Socks (Apparel)"},{sport:"Cinch Sack (Apparel)"},{sport:"Hoodie (Apparel)"},{sport:"Cage Jacket (Apparel)"},{sport:"Quarter Zip Jacket (Apparel)"},{sport:"Hockey"}],isUniSex:function(e){var t;return t=_.find(this.items,{sport:e}),0<_.size(t)}},ub.data.filterExclusions={items:["Crew","Men's","Goal","Default","Cinch Sack","Men's ","Singlet","Fight Shorts","Compression Tops","Compression Shorts"],isExcluded:function(e){return _.contains(this.items,e)}},ub.data.nonTackleTwillItems={items:["Socks (Apparel)","Fan Replica Jersey (Apparel)","Cage Jacket (Apparel)","Game Day Jackets (Apparel)","Compression Pant (Apparel)","Tech Tee (eSports)","Track and Field"],isNonTackleTwill:function(e){return _.contains(this.items,e)}},ub.data.tackleTwillOnly={items:["Lacrosse"],isTackleTwillOnly:function(e){return _.contains(this.items,e)}},ub.data.numberPopupExcemptions={items:["Baseball","Football 2017"],isValid:function(e,t){return void 0!==_.contains(this.items,e)&&"lower"===t}},ub.data.freeFormToolFirstPartSelection={items:["Yoga Pant (Apparel)","Basketball","Volleyball","Football 2017","Football","Hockey","Soccer","Track and Field"],activateOnLowerUniform:function(e){return _.contains(this.items,e)&&_.isEqual(ub.config.type,"lower")}},ub.data.consumeApplicationSizes={items:["Test","Football 2017","Wrestling 2018","Tennis","Baseball","Socks (Apparel)","Yoga Pant (Apparel)","Basketball","SFN Jogger (Apparel)","Hockey","Track and Field"],isValid:function(e){return _.contains(this.items,e)}},ub.dialog=bootbox,ub.data.sortIDs={items:[{sortID:1,blockPatternName:"Singlet"},{sortID:2,blockPatternName:"Compression Tops"},{sortID:3,blockPatternName:"Compression Shorts"},{sortID:4,blockPatternName:"Fight Shorts"},{sortID:5,blockPatternName:"Blank Styles"},{sortID:6,blockPatternName:"Favorites"}],getSortID:function(e){var t,i=0;return void 0===(t=_.find(this.items,{blockPatternName:e}))?(i=ub.data.sortIDs.items.length+1,console.warn("Sort ID for "+e+" not found using ")):i=t.sortID,i}},ub.data.oneInchPullUpExemptions={items:[{sport:"Socks (Apparel)",blockPattern:"Hockey Sock"},{sport:"Hockey",blockPattern:"Hockey Twill Set-in"},{sport:"Hockey",blockPattern:"Hockey Socks"}],isExempted:function(e,t){var i;return i=_.find(this.items,{sport:e,blockPattern:t}),0<_.size(i)}},ub.data.hideMaterialOptionOnSportModifierLabels={items:["PTS Cage Jacket (Apparel)","PTS Hoodie (Apparel)","Socks (Apparel)"],isValid:function(e,t,n){return _.contains(this.items,e)?_.omit(t,function(e,t,i){return _.contains(n,e.fullname)}):t}},ub.data.customSizes=["0.5","0.75","1","1.25","1.5","2","2.5","3","3.5","4","4.5","5","5.5","6","6.5","7","7.5","8","8.5","9","9.5","10","10.5","11","11.5","12"]}),$(document).ready(function(){ub.picker={isNew:!1},ub.filtersV2={primary:"all",secondary:"all",tertiary:"all",gender:"",sport:"",uniformType:"",items:[]},ub.data.secondaryBarLabelsV2={items:[{sport:"Wrestling",type:"both",upperLabel:"Singlet",lowerLabel:"Fight Shorts"},{sport:"Wrestling 2018",type:"both",upperLabel:"Singlets & Tops",lowerLabel:"Shorts"},{sport:"Volleyball",type:"both",upperLabel:"Jersey",lowerLabel:"Compression Shorts"},{sport:"Crew Socks (Apparel)",type:"lower",lowerLabel:"Crew Sock"},{sport:"Compression (Apparel)",type:"upper",upperLabel:"Compression"},{sport:"Tech-Tee (Apparel)",type:"upper",upperLabel:"Tech-Tee"},{sport:"Cinch Sack (Apparel)",type:"upper",upperLabel:"Cinch Sack"},{sport:"Hoodie (Apparel)",type:"upper",upperLabel:"Hoodie"},{sport:"Quarter Zip Jacket (Apparel)",type:"upper",upperLabel:"Quarter Zip Jacket"},{sport:"Polo (Apparel)",type:"upper",upperLabel:"Polo"},{sport:"Soccer",type:"both",upperLabel:"Jersey",lowerLabel:"Shorts"},{sport:"Lacrosse",type:"both",upperLabel:"Jersey",lowerLabel:"Shorts"},{sport:"2017 Team Short with Pockets (Apparel)",type:"lower",lowerLabel:" Team Short"},{sport:"Signature Coaches Short (Apparel)",type:"lower",lowerLabel:"Shorts"},{sport:"Socks (Apparel)",type:"lower",lowerLabel:"Socks"},{sport:"Wrestling Compression Shorts (Apparel)",type:"lower",lowerLabel:"Shorts"},{sport:"Game Day Jackets (Apparel)",type:"upper",upperLabel:"Jacket"},{sport:"Cage Jacket (Apparel)",type:"upper",upperLabel:"Jackets"},{sport:"Fan Replica Jersey (Apparel)",type:"upper",upperLabel:"Jersey"},{sport:"Compression Pant (Apparel)",type:"lower",lowerLabel:" Pants"},{sport:"Football 2017",type:"both",upperLabel:"Jersey",lowerLabel:"Pants"},{sport:"Yoga Pant (Apparel)",type:"lower",lowerLabel:" Pants"},{sport:"Hockey",type:"both",upperLabel:"Jersey",lowerLabel:" Socks"},{sport:"SFN Jogger (Apparel)",type:"lower",lowerLabel:" Pants"},{sport:"Tennis",type:"both",upperLabel:"Jersey",lowerLabel:" Shorts"},{sport:"Tech Tee (eSports)",type:"upper",upperLabel:"Jersey"},{sport:"Polo (eSports)",type:"upper",upperLabel:"Jersey"},{sport:"Hoodie (eSports)",type:"upper",upperLabel:"Jersey"}],getLabel:function(e){var t=_.find(this.items,{sport:e});return void 0===t&&ub.utilities.info("Secondary Bar Labels not found for "+e),t}},ub.funcs.initPicker=function(){ub.funcs.betaFeaturesChecker("New Filter",function(){ub.picker.isNew=!0},function(){ub.picker.isNew=!1}),ub.funcs.preventEnterKeyPress(),ub.funcs.triggerGenderTypeFilter(),ub.funcs.triggerUniformTypeFilter(),ub.funcs.triggerUpperLowerFilter(),ub.funcs.triggerSportFilter(),ub.funcs.triggerUniformApplicationTypeFilter(),ub.funcs.triggerBlockPatternFilter()},ub.funcs.preventEnterKeyPress=function(){$("form .cd-filter-content input").keydown(function(e){if(13==e.keyCode)return e.preventDefault(),!1})},ub.funcs.prepareSecondaryBarV2=function(e,t){ub.funcs.hidePrimaryBarFilter(),$('a.picker-slink[data-type="upper"]').show(),$('a.picker-slink[data-type="lower"]').show();var i=ub.data.secondaryBarLabelsV2.getLabel(e);void 0!==i?(_.isEqual(e,"Tennis")&&_.isEqual(t,"women")&&(i.lowerLabel="Skorts"),"upper"===i.type?($('a.picker-slink[data-type="upper"]').html(i.upperLabel),$('a.picker-slink[data-type="lower"]').hide()):"lower"===i.type?($('a.picker-slink[data-type="upper"]').hide(),$('a.picker-slink[data-type="lower"]').html(i.lowerLabel)):"both"===i.type&&($('a.picker-slink[data-type="upper"]').html(i.upperLabel),$('a.picker-slink[data-type="lower"]').html(i.lowerLabel))):($('a.picker-slink[data-type="upper"]').html("Jersey"),$('a.picker-slink[data-type="lower"]').html("Pants"))},ub.funcs.triggerUpperLowerFilter=function(){$(".cd-tab-filter li").on("click",function(e){var t=$(e.target).data("type");ub.funcs.setV2PrimaryFilter(t);var i;i=ub.funcs.getPrimaryFilterItems(t),ub.funcs.blockPatternCollections(i,!0),ub.filtersV2.items=i})},ub.funcs.triggerUniformApplicationTypeFilter=function(){$("li input.uniform-application-type[type=radio]").on("change",function(e){var t=$(e.target).data("type");ub.funcs.setV2SecondaryFilter(t);var i;i=ub.funcs.getSecondaryFilterItems(t),ub.funcs.blockPatternCollections(i,!0),ub.filtersV2.items=i})},ub.funcs.triggerBlockPatternFilter=function(){$("select#cd-block-pattern").on("change",function(e){var t=$(this).find(":selected").data("item");ub.filtersV2.tertiary=t.toString(),"all"===t?_newSet=ub.filtersV2.items:(_newSet=_.filter(ub.filtersV2.items,function(e){return e.block_pattern===t||e.block_pattern_alias===t}),"Blank Styles"===t&&(_newSet=_.filter(ub.filtersV2.items,function(e){return"1"===e.is_blank})),"Favorites"===t&&(_newSet=_.filter(ub.filtersV2.items,function(e){return!0===e.is_favorite}))),ub.funcs.blockPatternCollections(_newSet,!1),ub.funcs.sideBarFilterNeckOptionSelectOption()})},ub.funcs.triggerGenderTypeFilter=function(){$("li input.gender-type[type=radio]").on("change",function(e){var t=$(e.target).data("gender"),i=$('li input.uniform-type[name="uniformTypeButton"]:checked').data("category"),n=ub.funcs.getActiveSportByGender(i,t);$("#cd-sport option:gt(0)").remove(),_.each(n,function(e){var t=0<e.alias.length?e.alias:e.name;$("#cd-sport").append($("<option></option>").attr("value",e.name).attr("data-item",e.name).text(t))}),$('li input.gender-type[data-gender="women"]').prop("disabled",!1).css("cursor","pointer"),$('li input.uniform-type[data-category="esports"]').prop("disabled",!1).css("cursor","pointer"),ub.funcs.changeCursorType("li label.women-label","pointer"),ub.funcs.changeCursorType("li label.esports-label","pointer"),"women"===t&&($('li input.uniform-type[data-category="esports"]').prop("disabled",!0).css("cursor","not-allowed"),ub.funcs.changeCursorType("li label.esports-label","not-allowed"))})},ub.funcs.triggerUniformTypeFilter=function(){$("li input.uniform-type[type=radio]").on("change",function(e){var t=$(e.target).data("category"),i=$('li input.gender-type[name="genderButton"]:checked').data("gender"),n=ub.funcs.getActiveSportByGender(t,i);$("#cd-sport option:gt(0)").remove(),_.each(n,function(e){var t=0<e.alias.length?e.alias:e.name;$("#cd-sport").append($("<option></option>").attr("value",e.name).attr("data-item",e.name).text(t))}),$('li input.uniform-type[data-category="esports"]').prop("disabled",!1).css("cursor","pointer"),ub.funcs.changeCursorType("li label.esports-label","pointer"),"women"===i&&($('li input.uniform-type[data-category="esports"]').prop("disabled",!0).css("cursor","not-allowed"),ub.funcs.changeCursorType("li label.esports-label","not-allowed")),$('li input.gender-type[data-gender="women"]').prop("disabled",!1).css("cursor","pointer"),ub.funcs.changeCursorType("li label.women-label","pointer"),"esports"===t&&($('li input.gender-type[data-gender="women"]').prop("disabled",!0).css("cursor","not-allowed"),ub.funcs.changeCursorType("li label.women-label","not-allowed"))})},ub.funcs.triggerSportFilter=function(){$("select#cd-sport").on("change",function(e){var t=[],i=$(this).find(":selected").data("item"),n=$('li input.gender-type[name="genderButton"]:checked').data("gender"),a=$('li input.uniform-type[name="uniformTypeButton"]:checked').data("category");ub.data.uniSexSports.isUniSex(i)&&(n="unisex"),t="Football"===i?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.gender===n}):_.filter(ub.materials,{uniform_category:i,gender:n}),$('input.uniform-application-type[data-type="all"]').prop("checked",!0),ub.funcs.showKnittedOnApplicationTypeOption(i),ub.funcs.setV2Gender(n),ub.funcs.setV2Sport(i),ub.funcs.setV2UniformType(a),ub.funcs.setV2items(t),ub.funcs.initScroller("uniforms",t,i,void 0,void 0,n)})},ub.funcs.resetSecondaryBarFilter=function(){$("a.picker-slink.selected").removeClass("selected"),$('li.filter a.picker-slink[data-type="all"]').addClass("selected"),$('li.filter a.picker-slink[data-type="all"]').trigger("click")},ub.funcs.hidePrimaryBarFilter=function(){$("div#topbar").hide()},ub.funcs.getActiveSportByGender=function(t,i){var e=ub.data.activeSports.items,n=1;window.ub.config.toString&&(n="1");i=void 0!==i?i:ub.filtersV2.gender;return _.filter(e,function(e){return"men"==i?e.active_male===n&&"active"===e.active_type&&0<e.thumbnail_male.length&&e.type===t:e.active_female===n&&"active"===e.active_type&&0<e.thumbnail_female.length&&e.type===t})},ub.funcs.setSideBarSportFilter=function(){ub.funcs.showKnittedOnApplicationTypeOption(ub.filtersV2.sport);var e=ub.funcs.getActiveSportByGender(ub.filtersV2.uniformType,void 0);$("#cd-sport option:gt(0)").remove(),_.each(e,function(e){var t=0<e.alias.length?e.alias:e.name;$("#cd-sport").append($("<option></option>").attr("value",e.name).attr("data-item",e.name).text(t))}),$('#cd-sport option[data-item="'+ub.filtersV2.sport+'"]').attr("selected","selected"),ub.funcs.setActiveGenderTypeOnSideBar(),ub.funcs.setActiveUniformTypeOnSideBar()},ub.funcs.showKnittedOnApplicationTypeOption=function(e){"Socks (Apparel)"===e?($("li#uat-knitted").css("display","block"),$("li#uat-sublimated").css("display","block"),$("li#uat-tackle-twill").css("display","none")):($("li#uat-tackle-twill").css("display","block"),$("li#uat-sublimated").css("display","block"),$("li#uat-knitted").css("display","none"))},ub.funcs.sideBarFilterBlockPatternSelectOption=function(){var e=_blockPatternsCollection;$("#cd-block-pattern option:gt(0)").remove(),_.each(e,function(e){$("#cd-block-pattern").append($("<option></option>").attr("value","."+e.item.toHyphenCase()).attr("data-item",e.item).text(e.alias))})},ub.funcs.sideBarFilterNeckOptionSelectOption=function(){var e=_optionsCollection;$("#cd-neck-pattern option:gt(0)").remove(),_.each(e,function(e){$("#cd-neck-pattern").append($("<option></option>").attr("value","."+e.item).attr("data-item",e.item).text(e.alias))})},ub.funcs.addFilterObject=function(e){return _.each(e,function(e){if(e.block_pattern_fv2=e.block_pattern.toHyphenCase(),e.neck_option_fv2=e.neck_option.toHyphenCase(),0!=e.is_blank){var t="Blank Styles".toHyphenCase();e.block_pattern_fv2_blank=t}if(e.is_favorite){var i="Favorites".toHyphenCase();e.block_pattern_fv2_favorite=i}void 0!==e.neck_option&&void 0!==e.neck_option_alias&&(e.neck_option_fv2=e.neck_option_alias.toHyphenCase()),void 0!==e.block_pattern_alias&&0<e.block_pattern_alias.length&&(e.block_pattern_fv2=e.block_pattern_alias.toHyphenCase())})},ub.funcs.setV2PrimaryFilter=function(e){ub.filtersV2.primary=e},ub.funcs.setV2SecondaryFilter=function(e){ub.filtersV2.secondary=e},ub.funcs.setV2Gender=function(e){ub.filtersV2.gender=e.toLowerCase()},ub.funcs.setV2Sport=function(e){ub.filtersV2.sport=e},ub.funcs.setV2UniformType=function(e){ub.filtersV2.uniformType=e},ub.funcs.setV2items=function(e){ub.filtersV2.items=e},ub.funcs.setActiveGenderTypeOnSideBar=function(){$('li input.gender-type[name="genderButton"]:checked').prop("checked",!1),$('li input.gender-type[data-gender="'+ub.filtersV2.gender+'"]').prop("checked",!0)},ub.funcs.setActiveUniformTypeOnSideBar=function(){$('li input.uniform-type[name="uniformTypeButton"]:checked').prop("checked",!1),$('li input.uniform-type[data-category="'+ub.filtersV2.uniformType+'"]').prop("checked",!0)},ub.funcs.changeCursorType=function(e,t){$(e).css("cursor",t)},ub.funcs.getPrimaryFilterItems=function(e){ub.filtersV2.tertiary="all";var t=ub.filtersV2.gender;return ub.data.uniSexSports.isUniSex(ub.filtersV2.sport)&&(t="unisex"),"all"===e?"all"!==ub.filtersV2.secondary?"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.uniform_application_type===ub.filtersV2.secondary&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,uniform_application_type:ub.filtersV2.secondary,gender:t}):"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,gender:t}):"all"!==ub.filtersV2.secondary?"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.type===ub.filtersV2.primary&&e.uniform_application_type===ub.filtersV2.secondary&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,type:ub.filtersV2.primary,uniform_application_type:ub.filtersV2.secondary,gender:t}):"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.type===ub.filtersV2.primary&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,type:ub.filtersV2.primary,gender:t})},ub.funcs.getSecondaryFilterItems=function(e){ub.filtersV2.tertiary="all";var t=ub.filtersV2.gender;return ub.data.uniSexSports.isUniSex(ub.filtersV2.sport)&&(t="unisex"),"all"===e?"all"!==ub.filtersV2.primary?"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.type===ub.filtersV2.primary&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,type:ub.filtersV2.primary,gender:t}):"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,gender:t}):"all"!==ub.filtersV2.primary?"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.uniform_application_type===ub.filtersV2.secondary&&e.type===ub.filtersV2.primary&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,uniform_application_type:ub.filtersV2.secondary,type:ub.filtersV2.primary,gender:t}):"Football"===ub.filtersV2.sport?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.uniform_application_type===ub.filtersV2.secondary&&e.gender===t}):_.filter(ub.materials,{uniform_category:ub.filtersV2.sport,uniform_application_type:ub.filtersV2.secondary,gender:t})},ub.funcs.blockPatternCollections=function(e,t){var i=[],n=e,a=[];"Football"===ub.filtersV2.sport||"Football 2017"===ub.filtersV2.sport?(n=_.filter(e,{type:"lower"}),i=ub.funcs.getBlockPatternsAlias(n),"lower"===ub.filtersV2.primary&&"Sublimated 17"===ub.filtersV2.tertiary&&(a=["Belted Pant","Elastic Waistband Pant"])):(i=ub.funcs.getBlockPatternsAlias(n),a=ub.funcs.getNeckOptionsAliasV2(n));_.union(i,a);_blockPatternsCollection=[],_optionsCollection=[];var o=["BASEBALL","WRESTLING","Fight Short","Baseball Pants","Compression","Volleyball"],r=ub.funcs.sortBlockPatternForFilters(ub.filtersV2.sport,i);_.each(r,function(e){if(!_.contains(o,e)&&null!==e){var t=e.replace("Baseball Jersey","").toTitleCase();t=ub.data.blockPatternsAlias.getAlias(t),_blockPatternsCollection.push({alias:t,item:e})}}),"knitted"!==ub.filtersV2.secondary&&"tackle_twill"!==ub.filtersV2.secondary&&_blockPatternsCollection.push({alias:"Blank Styles",item:"Blank Styles"}),_blockPatternsCollection.push({alias:"Favorites",item:"Favorites"}),_.each(a,function(e){if(!_.contains(o,e)&&null!==e){var t=e.replace("Baseball Jersey","").toTitleCase();t=ub.data.neckOptionsAlias.getAlias(t),_optionsCollection.push({alias:t,item:e.toLowerCase().toHyphenCase()})}}),t&&(ub.funcs.sideBarFilterBlockPatternSelectOption(),ub.funcs.sideBarFilterNeckOptionSelectOption())},ub.funcs.getNeckOptionsAliasV2=function(e){var t=[];return _.each(e,function(e){var t=JSON.parse(e.block_pattern_options),i=_.find(t,{name:e.neck_option});e.neck_option_alias=void 0!==i.alias&&"undefined"!==i.alias&&""!==i.alias?i.alias:e.neck_option}),_.uniq(_.map(e,function(e){t.push(e.neck_option)})),_.uniq(t)},ub.funcs.initPicker()}),$(document).ready(function(){ub.uiData={},ub.uiData.patternSliderRange={forCalibration:["NK Stripe","Line Fade Body","Halftone Fade Sleeve"],min:-350,max:350,starts:0,adjustedStart:250},ub.uiData.patternOffset={items:[{patternCode:"line_fade_body",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1e3,max:1100,min:890},{patternCode:"line_fade_body",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1e3,max:1e3,min:850},{patternCode:"line_fade_sleeve",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:900,max:1e3,min:800},{patternCode:"line_fade_sleeve",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1e3,max:1100,min:850},{patternCode:"halftone_fade_chest",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1100,max:1200,min:1e3},{patternCode:"halftone_fade_chest",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1100,max:1300,min:1e3},{patternCode:"halftone_fade_sleeve",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1100,max:1200,min:1e3},{patternCode:"halftone_fade_sleeve",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1100,max:1300,min:1e3},{patternCode:"line_fade_body",partCodes:["hood_panel"],blockPatterns:["Hoodie"],offSet:325,max:485,min:250},{patternCode:"nk_stripe",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1100,max:1250,min:1e3},{patternCode:"nk_stripe",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1100,max:1250,min:1e3}],getOffset:function(t,i,n){var e=_.find(this.items,function(e){return e.patternCode===t&&_.contains(e.blockPatterns,i)&&_.contains(e.partCodes,n)});return void 0!==e?e:void 0}}}),$(document).ready(function(){ub.funcs.setupApplicationSizes=function(e){var t=e;_.each(t,function(e){e.sizes=[],e.parsedProperties=JSON.parse(e.properties),_.each(e.parsedProperties,function(t){t.sizes=[],_.each(t.size,function(e){t.sizes.push({size:e})})}),e.sizes=e.parsedProperties}),delete ub.data.application_size,ub.data.applicationSizes.configurations=t},ub.data.applicationSizes={configurations:[],getConfiguration:function(e,t){if(0!==ub.data.applicationSizes.configurations.length){var i=_.find(ub.data.applicationSizes.configurations,{uniform_application_type:ub.config.uniform_application_type});if(void 0!==i){var n=i.parsedProperties,a=_.filter(n,{type:e}),o=_.filter(a,function(e){return _.contains(e.application_number,t)});return _.first(o)}}else ub.utilities.info("No Backend Size Configuration detected for "+e+" - "+ub.config.sport+" / "+ub.config.blockPattern+" / "+ub.config.option)},items:[{name:"team_name",sport:"football",sizes:[{type:"embroidery",size:1},{type:"tackle twill",size:2}],factory:"PMP"},{name:"team_name",sport:"football",sizes:[{size:1},{size:2},{size:3}],factory:"BLB"},{name:"player_name",sport:"football",sizes:[{type:"tackle twill",size:2.5}],factory:"PMP"},{name:"player_name",sport:"football",sizes:[{size:2.5}],factory:"BLB"},{name:"front_number",sport:"football",sizes:[{size:8},{size:10}],type:"adult"},{name:"back_number",sport:"football",sizes:[{size:10},{size:12}],type:"adult"},{name:"front_number",sport:"football",sizes:[{size:6},{size:8}],type:"youth"},{name:"back_number",sport:"football",sizes:[{size:8},{size:10}],type:"youth"},{name:"shoulder_number",sport:"football",sizes:[{size:3},{size:4}]},{name:"sleeve_number",sport:"football",sizes:[{size:3},{size:4}]},{name:"numbers_extra",sport:"football",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"logo",sport:"football",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"mascot",sport:"football",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"mascot_2",sport:"football",sizes:[{size:8},{size:10}]},{name:"mascot_5",sport:"football",sizes:[{size:10},{size:12}]},{name:"mascot_wrestling",sport:"wrestling",sizes:[{size:5},{size:8},{size:10},{size:12}]},{name:"team_name",sport:"wrestling",sizes:[{size:2},{size:3},{size:4}]},{name:"text_wrestling",sport:"wrestling",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"text_baseball",sport:"baseball",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"team_name",sport:"baseball",sizes:[{size:2},{size:3},{size:4}],factory:"BLB"},{name:"player_name",sport:"baseball",sizes:[{size:2},{size:3}],factory:"PMP"},{name:"sleeve_number",sport:"baseball",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"baseball",applicationNumbers:[7,6],sizes:[{size:2},{size:3}]},{name:"mascot",sport:"baseball",applicationNumbers:[29,26,28,27,30,31,9,10,1],sizes:[{size:2},{size:3},{size:4}]},{name:"mascot",sport:"baseball",applicationNumbers:[5],sizes:[{size:6},{size:8},{size:10}]},{name:"front_number",sport:"baseball",sizes:[{size:3},{size:4}],type:"adult"},{name:"back_number",sport:"baseball",sizes:[{size:6},{size:8},{size:10}],type:"adult"},{name:"text_baseball",sport:"fastpitch",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"team_name",sport:"fastpitch",sizes:[{size:2},{size:3},{size:4}],factory:"BLB"},{name:"player_name",sport:"fastpitch",sizes:[{size:2},{size:3}],factory:"PMP"},{name:"sleeve_number",sport:"fastpitch",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"fastpitch",applicationNumbers:[7,6],sizes:[{size:2},{size:3}]},{name:"mascot",sport:"fastpitch",applicationNumbers:[29,26,28,27,30,31,9,10,1],sizes:[{size:2},{size:3},{size:4}]},{name:"mascot",sport:"fastpitch",applicationNumbers:[5],sizes:[{size:6},{size:8},{size:10}]},{name:"front_number",sport:"fastpitch",sizes:[{size:3},{size:4}],type:"adult"},{name:"back_number",sport:"fastpitch",sizes:[{size:6},{size:8},{size:10}],type:"adult"},{name:"mascot",sport:"crew-socks",applicationNumbers:[52,53,54,55],sizes:[{size:2.5}]},{name:"team_name",sport:"hockey",sizes:[{size:2},{size:3},{size:4}],factory:"BLB"},{name:"player_name",sport:"hockey",sizes:[{size:2.5}],factory:"PMP"},{name:"sleeve_number",sport:"hockey",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"shoulder_number",sport:"hockey",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"hockey",applicationNumbers:[6],sizes:[{size:2.5}]},{name:"player_name",sport:"hockey",applicationNumbers:[6],sizes:[{size:2.5}]},{name:"mascot",sport:"hockey",applicationNumbers:[9,10,33,32],sizes:[{size:3},{size:4}]},{name:"sleeve_number",sport:"hockey",applicationNumbers:[9,10,33,32],sizes:[{size:3},{size:4}]},{name:"mascot",sport:"hockey",applicationNumbers:[29,26,28,27,30,31,9,10,1],sizes:[{size:2},{size:3},{size:4}]},{name:"front_number",sport:"hockey",sizes:[{size:6},{size:8},{size:10},{size:12}],type:"adult"},{name:"mascot",applicationNumbers:[2,5],sport:"hockey",sizes:[{size:6},{size:8},{size:10},{size:12}],type:"adult"},{name:"back_number",sport:"hockey",sizes:[{size:6},{size:8},{size:10},{size:12}],type:"adult"},{name:"text_tech-tee",sport:"tech-tee",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"team_name",sport:"tech-tee",sizes:[{size:2},{size:3}],factory:"BLB"},{name:"player_name",sport:"tech-tee",sizes:[{size:2},{size:3}],factory:"PMP"},{name:"sleeve_number",sport:"tech-tee",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"tech-tee",sizes:[{size:2},{size:3},{size:4},{size:5},{size:8},{size:10}],factory:"BLB"},{name:"front_number",sport:"tech-tee",sizes:[{size:4},{size:5}],type:"adult"},{name:"back_number",sport:"tech-tee",sizes:[{size:8},{size:10}],type:"adult"},{name:"shoulder_number",sport:"tech-tee",sizes:[{size:3},{size:4}],type:"adult"},{name:"text_tech-tee",sport:"compression",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"team_name",sport:"compression",sizes:[{size:2},{size:3}],factory:"BLB"},{name:"player_name",sport:"compression",sizes:[{size:2},{size:3}],factory:"PMP"},{name:"sleeve_number",sport:"compression",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"compression",sizes:[{size:2},{size:3},{size:4},{size:5},{size:8},{size:10}],factory:"BLB"},{name:"front_number",sport:"compression",sizes:[{size:4},{size:5}],type:"adult"},{name:"back_number",sport:"compression",sizes:[{size:8},{size:10}],type:"adult"},{name:"shoulder_number",sport:"compression",sizes:[{size:3},{size:4}],type:"adult"},{name:"text_tech-tee",sport:"volleyball",sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"team_name",sport:"volleyball",sizes:[{size:2},{size:3}],factory:"BLB"},{name:"player_name",sport:"volleyball",sizes:[{size:2},{size:3}],factory:"PMP"},{name:"sleeve_number",sport:"volleyball",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"volleyball",sizes:[{size:2},{size:3},{size:4},{size:5},{size:8},{size:10}],factory:"BLB"},{name:"front_number",sport:"volleyball",sizes:[{size:4},{size:5}],type:"adult"},{name:"back_number",sport:"volleyball",sizes:[{size:8},{size:10}],type:"adult"},{name:"shoulder_number",sport:"volleyball",sizes:[{size:3},{size:4}],type:"adult"},{name:"team_name",sport:"cinch-sack",sizes:[{size:1},{size:2},{size:3},{size:4}],factory:"BLB"},{name:"player_name",sport:"cinch-sack",sizes:[{size:1},{size:2},{size:3},{size:4}],factory:"PMP"},{name:"mascot",applicationNumbers:[56,57],sport:"cinch-sack",sizes:[{size:2},{size:3},{size:4},{size:5},{size:6},{size:7}],factory:"BLB"},{name:"mascot",applicationNumbers:[58,59],sport:"cinch-sack",sizes:[{size:1},{size:2}],factory:"BLB"},{name:"front_number",sport:"cinch-sack",sizes:[{size:1},{size:2},{size:3},{size:4}],type:"adult"},{name:"back_number",sport:"cinch-sack",sizes:[{size:1},{size:2},{size:3},{size:4}],type:"adult"},{name:"team_name",sport:"team-short",sizes:[{size:1},{size:2},{size:3},{size:4}],factory:"BLB"},{name:"player_name",sport:"team-short",sizes:[{size:1},{size:2},{size:3},{size:4}],factory:"PMP"},{name:"mascot",applicationNumbers:[56,57],sport:"team-short",sizes:[{size:2},{size:3},{size:4},{size:5},{size:6},{size:7}],factory:"BLB"},{name:"mascot",applicationNumbers:[58,59],sport:"team-short",sizes:[{size:1},{size:2}],factory:"BLB"},{name:"front_number",sport:"team-short",sizes:[{size:1},{size:2},{size:3},{size:4}],type:"adult"},{name:"back_number",sport:"team-short",sizes:[{size:1},{size:2},{size:3},{size:4}],type:"adult"},{name:"team_name",sport:"signature-coaches-short",sizes:[{size:1},{size:2},{size:3},{size:4}],factory:"BLB"},{name:"player_name",sport:"signature-coaches-short",sizes:[{size:1},{size:2},{size:3},{size:4}],factory:"PMP"},{name:"mascot",applicationNumbers:[56,57],sport:"signature-coaches-short",sizes:[{size:2},{size:3},{size:4},{size:5},{size:6},{size:7}],factory:"BLB"},{name:"mascot",applicationNumbers:[58,59],sport:"signature-coaches-short",sizes:[{size:1},{size:2}],factory:"BLB"},{name:"front_number",sport:"signature-coaches-short",sizes:[{size:1},{size:2},{size:3},{size:4}],type:"adult"},{name:"back_number",sport:"signature-coaches-short",sizes:[{size:1},{size:2},{size:3},{size:4}],type:"adult"},{name:"team_name",sport:"basketball",sizes:[{size:2},{size:3},{size:4}],factory:"BLB"},{name:"player_name",sport:"basketball",sizes:[{size:2},{size:2.5}],factory:"PMP"},{name:"sleeve_number",sport:"basketball",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"basketball",applicationNumbers:[1,6,7,31,30],sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"mascot",sport:"basketball",applicationNumbers:[5],sizes:[{size:6},{size:8},{size:10}]},{name:"front_number",sport:"basketball",sizes:[{size:3},{size:4}],type:"adult"},{name:"back_number",sport:"basketball",sizes:[{size:6},{size:8},{size:10}],type:"adult"},{name:"team_name",sport:"lacrosse",sizes:[{size:1},{size:2},{size:3}],factory:"BLB"},{name:"player_name",sport:"lacrosse",sizes:[{size:2.5}],factory:"PMP"},{name:"sleeve_number",sport:"lacrosse",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"mascot",sport:"lacrosse",applicationNumbers:[1,6],sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"mascot",sport:"lacrosse",applicationNumbers:[7,31,30],sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"mascot",sport:"lacrosse",applicationNumbers:[5,2],sizes:[{size:6},{size:8},{size:10}]},{name:"front_number",sport:"lacrosse",sizes:[{size:6},{size:8},{size:10}],type:"adult"},{name:"back_number",sport:"lacrosse",sizes:[{size:6},{size:8},{size:10}],type:"adult"},{name:"team_name",sport:"default",sizes:[{size:2},{size:3}],factory:"BLB"},{name:"player_name",sport:"default",sizes:[{size:2},{size:3}],factory:"PMP"},{name:"sleeve_number",sport:"default",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"shoulder_number",sport:"default",sizes:[{size:3},{size:4}],factory:"BLB"},{name:"front_number",sport:"default",sizes:[{size:3},{size:4},{size:5}],type:"adult"},{name:"back_number",sport:"default",sizes:[{size:8},{size:10}],type:"adult"},{name:"mascot",sport:"default",sizes:[{size:2},{size:3},{size:4},{size:5},{size:8},{size:10}],factory:"BLB"},{name:"",sport:"default",sizes:[{size:2},{size:3},{size:4}],factory:"BLB"}],getSizes:function(e,t,i){"football 2017"===e&&(e="football");var n=_.filter(this.items,{sport:e,name:t});return void 0===n&&ub.utilities.warn(t+" Sizes for "+t+" not found."),void 0===(n=_.find(n,function(e){return _.contains(e.applicationNumbers,i)}))&&(ub.utilities.warn("Location #"+i+" for "+t+" in "+e+" not found. Using default."),n=_.find(this.items,{sport:"default",name:t})),n}},ub.data.applicationSizesPant={items:[{name:"mascot",sport:"baseball",applicationNumbers:[37,38],sizes:[{size:1},{size:2},{size:3}]},{name:"mascot",sport:"baseball",applicationNumbers:[39,40],sizes:[{size:1},{size:2}]},{name:"mascot",sport:"baseball",applicationNumbers:[15],sizes:[{size:1},{size:1.75}]},{name:"mascot",sport:"fastpitch",applicationNumbers:[37,38],sizes:[{size:1},{size:2},{size:3}]},{name:"mascot",sport:"fastpitch",applicationNumbers:[39,40],sizes:[{size:1},{size:2}]},{name:"mascot",sport:"fastpitch",applicationNumbers:[15],sizes:[{size:1},{size:1.75}]},{name:"mascot",sport:"volleyball",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5}]},{name:"mascot",sport:"signature-coaches-short",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5}]},{name:"mascot",sport:"team-short",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5}]},{name:"mascot",sport:"soccer",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5},{size:6},{size:7},{size:8},{size:9},{size:10},{size:11},{size:12}]},{name:"mascot",sport:"basketball",applicationNumbers:[16,17],sizes:[{size:1},{size:2},{size:3},{size:4}]},{name:"front_number",sport:"basketball",applicationNumbers:[12,13,16,17],sizes:[{size:3},{size:4}]},{name:"mascot",sport:"lacrosse",applicationNumbers:[12,13,16,17],sizes:[{size:3},{size:4}]},{name:"front_number",sport:"lacrosse",applicationNumbers:[12,13,16,17],sizes:[{size:3},{size:4}]},{name:"back_number",sport:"lacrosse",applicationNumbers:[12,13,16,17],sizes:[{size:3},{size:4}]},{name:"shoulder_number",sport:"lacrosse",applicationNumbers:[12,13,16,17],sizes:[{size:3},{size:4}]},{name:"mascot",sport:"football 2017",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5},{size:6},{size:7},{size:8},{size:9},{size:10},{size:11},{size:12}]},{name:"mascot",sport:"game-day-coaches-jackets",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5},{size:6},{size:7},{size:8},{size:9},{size:10},{size:11},{size:12}]},{name:"mascot",sport:"field-hockey",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5},{size:6},{size:7},{size:8},{size:9},{size:10},{size:11},{size:12}]},{name:"mascot",sport:"compression-pant",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5}]},{name:"mascot",sport:"wrestling-compression-shorts",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5},{size:6},{size:7},{size:8},{size:9},{size:10},{size:11},{size:12}]},{name:"mascot",sport:"wrestling-2018",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5},{size:6},{size:7},{size:8},{size:9},{size:10},{size:11},{size:12}]},{name:"mascot",sport:"tennis",applicationNumbers:[70],sizes:[{size:1},{size:2},{size:3},{size:4},{size:5},{size:6},{size:7},{size:8},{size:9},{size:10},{size:11},{size:12}]}],getSize:function(e,t,i){var n,a=_.filter(this.items,{name:e,sport:t});return void 0===a&&ub.utilities.warn("Application Sizes for "+e+" in "+t+" is not found!"),n=_.find(a,function(e){return _.contains(e.applicationNumbers,i)}),"volleyball"===t?a[0]:"fastpitch"===t?a[0]:"baseball"===t?a[0]:"team-short"===t?a[0]:"signature-coaches-short"===t?a[0]:"soccer"===t?a[0]:"lacrosse"===t?a[0]:"football 2017"===t?a[0]:"game-day-coaches-jackets"===t?a[0]:"field-hockey"===t?a[0]:"compression-pant"===t?a[0]:"wrestling-compression-shorts"===t?a[0]:"basketball"===t?a[0]:"wrestling-2018"===t?a[0]:"tennis"===t?a[0]:(void 0===n&&ub.utilities.warn("Mascot sizes for "+t+" #"+i+" not found."),n)}},ub.data.mascotSizesFromBackend={items:["Football 2017","Wrestling Compression Shorts"],isValid:function(e){return"undefined"!==_.find(this.items,e)}}}),$(document).ready(function(){ub.data.namedrops={items:[{name:"Sub1",mascots:[{elementID:0,mascotId:"188",name:"Bulldog_8",alias:"",colorSet:["GR","W","R","B"],zIndex:1}],texts:[{id:"north"},{id:"BULLDOGS FOOTBALL"}],decals:[{}]}],createNameDrop:function(e,t){},createTestND:function(){var e=SVG("namedrop-container").size(348,348),t=(e.rect(174,174).attr({fill:"#f06"}),$("svg").attr("id"),e.svg()),i="data:image/svg+xml;base64,"+window.btoa(t),n=new PIXI.Sprite(PIXI.Texture.fromImage(i));n.zIndex=-ub.funcs.generateZindex("namedrops"),ub.objects.front_view.namedrops_1=n,ub.front_view.addChild(n),n.position={x:491.53846153846155,y:476},ub.updateLayersOrder(ub.front_view)},showDialog:function(){var e=$("#m-name-drop-dialog").html(),t={parts:ub.funcs.getFreeFormLayers()},i=Mustache.render(e,t);bootbox.dialog({title:"Namedrop Editor",message:i,size:"large"}).init(function(){ub.data.namedrops.createTestND()})}}}),$(document).ready(function(){var l=exports;sportlist=ub.data.urlAlias.getArray(),ub.nlp.queryDistance=function(e,t){for(var i=[],n=[],a=[],o=(e.trim().split(" "),tokenizer.tokenize(e),[]),r=0;r<a.length;r++)for(var s=0;s<sportlist.length;s++)o.push(a[r]+sportlist[s]);l.jarowinklerDistanceWord(e,sportlist,function(e,t){0==e?i.push(t):2==e&&n.push(t)}),l.levenshteinDistanceWord(e,sportlist,function(e,t){0==e?i.push(t):2==e&&n.push(t)}),l.dicesDistanceWord(e,sportlist,function(e,t){0==e?i.push(t):2==e&&n.push(t)}),l.jarowinklerDistanceSentence(e,o,function(e,t){0==e?i.push(t):2==e&&n.push(t)}),l.levenshteinDistanceSentence(e,o,function(e,t){0==e?i.push(t):2==e&&n.push(t)}),l.dicesDistanceSentence(e,o,function(e,t){0==e?i.push(t):2==e&&n.push(t)}),0<n.length?t(!1,[]):0<i.length?(i.length,t(!1,i)):t(!1,[])},ub.nlp.query=function(e,i){if(""!=e){var t=l.removeAccents(e);t=t.toLowerCase(),ub.nlp.queryDistance(t,function(e,t){i({result:t})})}else i({result:"no input"})}}),$(document).ready(function(){ub.data.mock={tempPiping731:{numberOfColors:1,size:"1/8",layers:[{colorCode:"B",layer:1,status:!1},{colorCode:"",layer:1,status:!1},{colorCode:"",layer:1,status:!1}]}}}),$(document).ready(function(){ub.status={},ub.status.manipulatorDown=!1,ub.status.fullView={active:!1,getStatus:function(){return this.active},setStatus:function(e){return this.active=e,this.getStatus()}},ub.status.fullViewZoom={active:!1,view:void 0,getView:function(){return this.view},getStatus:function(){return this.active},setStatus:function(e,t){return this.active=e,this.view=t,this.getStatus()}},ub.status.gaFontTool={active:!1,getStatus:function(){return this.active},setStatus:function(e){return this.active=e,this.getStatus()}},ub.status.patternMasks={active:!1,getStatus:function(){return this.active},setStatus:function(e){return this.active=e,this.getStatus()}},ub.status.render={renderFrames:!0,getRenderStatus:function(){return this.renderFrames},setRenderStatus:function(e){return this.renderFrames=e,this.getRenderStatus()},stopRendering:function(){this.renderFrames=!1},resumeRendering:function(){this.renderFrames=!0}}}),$(document).ready(function(){ub.cPoint=function(e,t){this.x=e,this.y=t},ub.Contour=function(e){this.pts=[]},ub.Contour.prototype.area=function(){for(var e,t,i=0,n=this.pts,a=n.length,o=a-1,r=0;r<a;o=r++)e=n[r],t=n[o],i+=e.x*t.y,i-=e.y*t.x;return i/=2},ub.Contour.prototype.centroid=function(){for(var e,t,i,n=this.pts,a=n.length,o=0,r=0,s=a-1,l=0;l<a;s=l++)t=n[l],i=n[s],e=t.x*i.y-i.x*t.y,o+=(t.x+i.x)*e,r+=(t.y+i.y)*e;return e=6*this.area(),new ub.cPoint({x:o/e,y:r/e})}}),$(document).ready(function(){ub.funcs.updateEmbellishmentList=function(i){ub.current_material.is_url=window.ub.config.api_host+"/api/v1-0/inksoft_design/getByCreatedByUserID/"+ub.user.id+"/active",ub.loader(ub.current_material.is_url,"inksoft_designs",function(e,t){is.embellishments.userItems=e,void 0!==i&&i(),$('span.active-archive-tab[data-type="active"]').find("span.text").html("Active ("+_.size(is.embellishments.userItems)+")"),$('span.active-archive-tab[data-type="archived"]').find("span.text").html("Archives")})},ub.funcs.updateEmbellishmentListArchived=function(i){ub.current_material.is_url=window.ub.config.api_host+"/api/v1-0/inksoft_design/getByCreatedByUserID/"+ub.user.id+"/archived",ub.loader(ub.current_material.is_url,"inksoft_designs",function(e,t){is.embellishments.userItemsArchived=e,void 0!==i&&i(),$('span.active-archive-tab[data-type="archived"]').find("span.text").html("Archives ("+_.size(is.embellishments.userItemsArchived)+")"),$('span.active-archive-tab[data-type="active"]').find("span.text").html("Active")})},window.is.embellishments={items:[{id:1,name:"Default",design_id:1722182,user_id:771,png_filename:"https://stores.inksoft.com/images/publishers/10697/designs/1722182.front.480.png",svg_filename:"https://stores.inksoft.com/images/publishers/10697/designs/1722182.front.svg",thumbnail:"https://stores.inksoft.com/ProLook_Sports/JITImage/10697-1722182/front/FFFFFF/80.gif",design_summary:"",design_details:"",category:"Defaults",type:"user_design",is_public:"1",created_by_user_id:"43",status:"Final Approval OK",comments:"",update_history:"",first_name:"Arthur",last_name:"Abogadil",cfirst_name:"Jared",clast_name:"Blanchard"},{id:2,name:"Default",design_id:1722184,user_id:771,png_filename:"https://stores.inksoft.com/images/publishers/10697/designs/1722182.front.480.png",svg_filename:"https://stores.inksoft.com/images/publishers/10697/designs/1722182.front.svg",thumbnail:"https://stores.inksoft.com/ProLook_Sports/JITImage/10697-1722182/front/FFFFFF/80.gif",design_summary:"",design_details:"",category:"Defaults",type:"user_design",is_public:"1",created_by_user_id:"43",status:"Final Approval OK",comments:"",update_history:"",first_name:"Arthur",last_name:"Abogadil",cfirst_name:"Jared",clast_name:"Blanchard"},{id:3,name:"Default",design_id:1722186,user_id:771,png_filename:"https://stores.inksoft.com/images/publishers/10697/designs/1722182.front.480.png",svg_filename:"https://stores.inksoft.com/images/publishers/10697/designs/1722182.front.svg",thumbnail:"https://stores.inksoft.com/ProLook_Sports/JITImage/10697-1722182/front/FFFFFF/80.gif",design_summary:"",design_details:"",category:"Defaults",type:"user_design",is_public:"1",created_by_user_id:"43",status:"Final Approval OK",comments:"",update_history:"",first_name:"Arthur",last_name:"Abogadil",cfirst_name:"Jared",clast_name:"Blanchard"}],userItems:[],getEmbellismentsByType:function(){},getEmbellishmentByID:function(e){ub.funcs.getDesignSummary(e)},getDefaultEmbellishment:function(e){_.first(this.items);return _.first(this.items)}},window.is.getDefaultEmbellishment=function(){},window.is.loadDesigner=function(e,t){launchDesigner("HTML5DS",{DesignerLocation:"https://images.inksoft.com/designer/html5",EnforceBoundaries:"1",Background:"",VectorOnly:!0,DigitalPrint:!1,ScreenPrint:!0,Embroidery:!1,MaxScreenPrintColors:"8",RoundPrices:!1,StoreID:"80974",PublisherID:"10697",SessionID:"",SessionToken:"",CartRetailItemID:"",UserID:"1000001",UserName:"",UserEmail:"",DesignID:void 0!==e?e:"",DefaultProductID:"",DefaultProductStyleID:"",ProductID:"",ProductStyleID:"",ProductCategoryID:"",ClipArtGalleryID:"",DisableAddToCart:!0,DisableUploadImage:!1,DisableClipArt:!1,DisableUserArt:!0,DisableProducts:!0,DisableDesigns:!1,DisableDistress:!0,DisableResolutionMeter:!0,DisableUploadVectorArt:!1,DisableUploadRasterArt:!1,StartPage:"",StartPageCategoryID:"",StartPageHTML:"",StartBanner:"",OrderID:"",CartID:"",ArtID:"",FontID:"",Domain:"stores.inksoft.com",SSLEnabled:!0,SSLDomain:"stores.inksoft.com",StoreURI:"ProLook_Sports",Admin:"",NextURL:"javascript:designID=0;window.is.isMessage(designID,"+(void 0!==t?t:0)+");",CartURL:"https://stores.inksoft.com/ProLook_Sports/Cart",OrderSummary:!0,VideoLink:"http://www.youtube.com/watch?v=EfXICdRwt4E",Phone:"801-404-4022",WelcomeScreen:"",ContactUsLink:"/ProLook_Sports/Stores/Contact",WelcomeVideo:"",GreetBoxSetting:"LANDING",HelpVideoOverview:"",AutoZoom:!0,EnableNameNumbers:!0,AddThisPublisherId:"xa-4fccb0966fef0ba7",EnableCartPricing:!0,EnableCartCheckout:!1,EnableCartBilling:!1,EnableCartShipping:!0,PaymentDisabled:!1,PaymentRequired:!0,BillingAddressRequired:!0,PasswordLength:"4",DefaultCountryCode:"PH",CurrencyCode:"USD",CurrencySymbol:"$",HideProductPricing:!1,PB:!0,HideClipArtNames:!1,HideDesignNames:!1,ThemeName:"flat",FullScreen:!0,Version:"3.11.0.0",BackgroundColor:"",StoreLogo:"//stores.inksoft.com/images/publishers/10697/stores/ProLook_Sports/img/logo.png",StoreName:"ProLook Sports.",StoreEmail:"jared@prolook.com",EnableEZD:!1,EmbedType:"iframe",ArtCategoryID:"1000002",DesignCategoryID:"1000004"},document.getElementById("embeddedDesigner")),$("#isModal").modal({backdrop:"static",keyboard:!0,show:!1}),$("#isModal").is(":visible")?window.is.closeDesignStudio():($("#isModal").modal("show"),ub.status.render.stopRendering())},window.is.loadDesignerUpload=function(e,t){launchDesigner("HTML5DS",{DesignerLocation:"https://images.inksoft.com/designer/html5",EnforceBoundaries:"1",Background:"",VectorOnly:!0,DigitalPrint:!1,ScreenPrint:!0,Embroidery:!1,MaxScreenPrintColors:"8",RoundPrices:!1,StoreID:"80974",PublisherID:"10697",SessionID:"",SessionToken:"",CartRetailItemID:"",UserID:"1000001",UserName:"",UserEmail:"",DesignID:void 0!==e?e:"",DefaultProductID:"",DefaultProductStyleID:"",ProductID:"",ProductStyleID:"",ProductCategoryID:"",ClipArtGalleryID:"",DisableAddToCart:!0,DisableUploadImage:!1,DisableClipArt:!0,DisableUserArt:!0,DisableProducts:!0,DisableDesigns:!0,DisableDistress:!0,DisableResolutionMeter:!0,DisableUploadVectorArt:!1,DisableUploadRasterArt:!1,StartPage:"",StartPageCategoryID:"",StartPageHTML:"",StartBanner:"",OrderID:"",CartID:"",ArtID:"",FontID:"",Domain:"stores.inksoft.com",SSLEnabled:!0,SSLDomain:"stores.inksoft.com",StoreURI:"ProLook_Sports",Admin:"",NextURL:"javascript:designID=0;window.is.isMessage(designID,"+(void 0!==t?t:0)+");",CartURL:"https://stores.inksoft.com/ProLook_Sports/Cart",OrderSummary:!0,VideoLink:"http://www.youtube.com/watch?v=EfXICdRwt4E",Phone:"801-404-4022",WelcomeScreen:"",ContactUsLink:"/ProLook_Sports/Stores/Contact",WelcomeVideo:"",GreetBoxSetting:"LANDING",HelpVideoOverview:"",AutoZoom:!0,EnableNameNumbers:!0,AddThisPublisherId:"xa-4fccb0966fef0ba7",EnableCartPricing:!0,EnableCartCheckout:!1,EnableCartBilling:!1,EnableCartShipping:!0,PaymentDisabled:!1,PaymentRequired:!0,BillingAddressRequired:!0,PasswordLength:"4",DefaultCountryCode:"PH",CurrencyCode:"USD",CurrencySymbol:"$",HideProductPricing:!1,PB:!0,HideClipArtNames:!1,HideDesignNames:!1,ThemeName:"flat",FullScreen:!0,Version:"3.11.0.0",BackgroundColor:"",StoreLogo:"//stores.inksoft.com/images/publishers/10697/stores/ProLook_Sports/img/logo.png",StoreName:"ProLook Sports.",StoreEmail:"jared@prolook.com",EnableEZD:!1,EmbedType:"iframe",ArtCategoryID:"1000002",DesignCategoryID:"1000004"},document.getElementById("embeddedDesigner")),$("#isModal").modal({backdrop:"static",keyboard:!0,show:!1}),$("#isModal").is(":visible")?window.is.closeDesignStudio():($("#isModal").modal("show"),ub.status.render.stopRendering())},$("span.art-btn").unbind("click"),$("span.art-btn, div#cancel-art").on("click",function(){window.is.loadDesigner()}),window.is.closeDesignStudio=function(){$("#isModal").modal("hide"),$("div#embeddedDesigner").html(""),ub.status.render.resumeRendering(),window.ub.render_frames()},window.is.openDesignEdit=function(e,t,i,n,a){$overlay=$("#ajax-Page-overlay"),$overlay.fadeIn(),serializedData="StoreId="+e+"&UserId="+t+"&DesignId="+i+"&ArtId="+n,"1"==a&&(serializedData+="&StoreAdmin=Store"),$.ajax({url:"https://stores.inksoft.com/ProLook_Sports/Config/EditDesignInStudio",type:"POST",data:serializedData,success:function(e,t,i){$("#divDesignerContainerCustomerDesign").html(e),$("html, body").animate({scrollTop:0},"slow"),$("#DivSearchResult").slideUp(500)},error:function(e,t,i){$("#errorbox").show()},complete:function(){$overlay.fadeOut()}})},window.is.createSession=function(){},ub.funcs.updateEmbellishmentData=function(){},ub.funcs.createNewEmbellishmentData=function(e){var t,i=ub.endpoints.getFullUrlString("createNewEmbellishmentData");t={design_id:e.designSummary.DesignID,design_name:e.designSummary.Name,user_id:void 0!==ub.user.id?ub.user.id:2,created_by_user_id:void 0!==ub.user.id?ub.user.id:2,design_summary:JSON.stringify(e.designSummary),design_details:JSON.stringify(e.designDetails),png_filename:ub.data.inkSoftBaseURL+e.designSummary.Canvases[0].PngRelativeUrl,svg_filename:ub.data.inkSoftBaseURL+e.designSummary.Canvases[0].SvgRelativeUrl,thumbnail:ub.data.inkSoftBaseURL+e.designSummary.Canvases[0].ThumbnailRelativeUrl,type:"User Design",category:"User Design",is_public:0,status:"In Development",archived:0},$.ajax({url:i,type:"POST",data:JSON.stringify(t),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.funcs.updateEmbellishmentList()}})},window.is.isMessage=function(e,t,i){ub.data.embellismentDetails={designSummary:{},designSummaryLoaded:!1,designDetails:{},designDetailsLoaded:!1,setStatus:function(e,t){ub.data.embellismentDetails[e]=t,ub.data.embellismentDetails[e+"Loaded"]=!0,void 0===i&&this.designSummaryLoaded&&this.designDetailsLoaded&&ub.funcs.createNewEmbellishmentData(ub.data.embellismentDetails)}},window.is.closeDesignStudio(),ub.funcs.getDesignSummary(e,t),ub.funcs.getDesignDetails(e,t)},window.is.addDesignToUniform=function(e,t){void 0!==ub.objects.front_view.decal_1&&(ub.front_view.removeChild(ub.objects.front_view.decal_1),delete ub.objects.front_view.decal_1);var i,n,a=ub.data.inkSoftBaseURL+e.Canvases[0].PngRelativeUrl,o=(ub.pixi.new_sprite(a),ub.objects.front_view);if(o.decal_1=ub.pixi.new_sprite(a),(i=o.decal_1).zIndex=-1*ub.funcs.generateZindex("namedrops"),i.scale.set(.7,.7),i.position={x:500,y:400},i.anchor={x:.5,y:.5},ub.front_view.addChild(i),ub.objects.front_view.decal_1=i,void 0!==(n=_.find(ub.current_material.material.options,{perspective:"front_view",name:"Extra"}))){var r=ub.pixi.new_sprite(n);i.mask=r}ub.updateLayersOrder(ub.front_view)},ub.funcs.getDesignSummary=function(i,e){var t="https://stores.inksoft.com/GetDesignSummary/80974/"+i,n=ub.funcs.getApplicationSettings(e);n.application_type="embellishments",n.type="embellishments",n.status="on",$.ajax({url:t,type:"GET",dataType:"json",crossDomain:!0,success:function(e){var t={id:2,design_id:i,name:e.Name,user_id:void 0!==ub.user?ub.user.id:-1,png_filename:ub.data.inkSoftBaseURL+e.Canvases[0].PngRelativeUrl,svg_filename:ub.data.inkSoftBaseURL+e.Canvases[0].SvgRelativeUrl,thumbnail:ub.data.inkSoftBaseURL+e.Canvases[0].ThumbnailRelativeUrl,design_summary:JSON.stringify(e),design_details:"",category:"Defaults",type:"user_design",is_public:"1",created_by_user_id:"43",status:"Final Approval OK",comments:"",update_history:"",first_name:"Arthur",last_name:"Abogadil",cfirst_name:"Jared",clast_name:"Blanchard"};n.embellishment=t,ub.funcs.update_application_embellishments(n.application,n.embellishment),ub.data.embellismentDetails.setStatus("designSummary",e)}})},ub.funcs.getDesignDetails=function(e,t){var i="https://stores.inksoft.com/ProLook_Sports/Api2/GetDesignDetail?designId="+e+"&Format=JSON",n=ub.funcs.getApplicationSettings(t);$.ajax({url:i,type:"GET",dataType:"json",crossDomain:!0,success:function(e){ub.data.embellismentDetails.setStatus("designDetails",e),void 0===n.embellishment&&(n.embellishment={}),n.embellishment.design_details=e}})},ub.funcs.update_application_embellishments=function(e,t,i){var n,a=ub.current_material.settings;e.id,t.id;void 0!==a.applications[e.id]&&a.applications[e.id].scale;var o=a.applications[e.id];o.font_size=o.size;o.embellishment,ub[e.perspective+"_view"],ub.objects[e.perspective+"_view"];var r={application:e,embellishment:t,fromChangeColor:void 0!==i},s=ub.funcs.renderApplication($.ub.create_embellishment,r,e.id),l=ub.current_material.material.type,c=ub.current_material.containers[l].application_containers;c[e.id]={},c[e.id].object={sprite:s},n=o.status,void 0===o.status&&(n="on"),ub.funcs.toggleApplication(e.id,n),0!==ub.data.afterLoadCalled&&(ub.funcs.activateEmbellishments(e.id),ub.funcs.updateLayerTool())},ub.funcs.extractEmbellishmentColors=function(e){var t=ub.funcs.getSettingsObject(e).embellishment;""!==t.design_summary&&JSON.parse(t.design_summary)},ub.funcs.activateEmbellishments=function(e){if(!ub.funcs.popupsVisible()&&ub.funcs.okToStart()){ub.funcs.extractEmbellishmentColors(e),ub.funcs.activatePanelGuard();var t=ub.funcs.getApplicationSettings(e);if(ub.funcs.activateMoveTool(e),"embellishments"===t.application_type){if(ub.funcs.isBitFieldOn())if(_.find(ub.data.markerBitField,{value:!0}).code.toString()!==e.toString())return;$("div#changeApplicationUI").remove();var l=e.toString(),c=_.find(ub.current_material.settings.applications,{code:l}),o=c.application_type,i=ub.current_material.material.uniform_category,n=ub.data.sportAliases.getAlias(i),a=ub.funcs.getApplicationSizes("mascot",n.alias),r=ub.funcs.isFreeFormToolEnabled(l);"Football"===ub.current_material.material.uniform_category?("2"!==l||"mascot"!==o&&"embellishments"!==o||(a=ub.funcs.getApplicationSizes("mascot_2")),"5"!==l||"mascot"!==o&&"embellishments"!==o||(a=ub.funcs.getApplicationSizes("mascot_5"))):a="Wrestling"===ub.current_material.material.uniform_category?ub.funcs.getApplicationSizes("mascot_wrestling"):"Football"!==i&&"Wrestling"!==i&&void 0!==n?ub.funcs.isCurrentType("upper")?ub.data.applicationSizes.getSizes(n.alias,"mascot",parseInt(e)):ub.funcs.isCurrentType("lower")&&ub.funcs.isSocks()?ub.funcs.getApplicationSizes("mascot",n.alias,l):ub.funcs.getApplicationSizesPant("mascot",n.alias,l):(console.warn("no sizes setting defaulting to generic"),ub.funcs.getApplicationSizes("mascot"));var s=ub.data.applicationSizes.getConfiguration(o,l);ub.data.consumeApplicationSizes.isValid(ub.config.sport)?(ub.utilities.info("===>Using sizes from backend: "),console.log("Default Sizes: "),console.log(a),console.log("Application #: "),console.log(l),ub.data.mascotSizesFromBackend.isValid(ub.config.sport)&&void 0!==s&&(console.log("SIZE FROM CONFIG===>",s),console.log(s.sizes),console.log(_.pluck(s.sizes,"size")),a=s)):ub.data.consumeApplicationSizes.isValid(ub.config.sport)&&(ub.utilities.info("Application Type: "+o),ub.utilities.info("alias: "+n.alias),ub.utilities.error(ub.config.sport+" - "+o+" - "+l+" don't have application sizes settings on the backend."));var u=c.embellishment,p=(c.size,c.color_array,u.design_id),d=u.thumbnail,f=(o.toTitleCase(),"");ub.funcs.deactivatePanels(),ub.funcs.preProcessApplication(e),-1!==c.type.indexOf("number")&&2;var h="on";if(void 0!==c.status)h=c.status;f='<div id="applicationUI" class="embellishmentUI" data-application-id="'+l+'">',f+='<div class="header">',f+='<div class="toggle" data-status="'+h+'"><div class="valueContainer"><div class="toggleOption on">ON</div><div class="toggleOption off">OFF</div></div></div>',f+='<div class="applicationType"> ['+l+'] Custom Mascot <span class="changeApplicationType"><i class="fa fa-caret-down" aria-hidden="true"></i></span></div><span class="cog"><i class="fa fa-cog" aria-hidden="true"></i></span></div>',f+='<div class="body">',f+='<div class="cover"></div>',f+='<div class="ui-row">',f+='<label class="applicationLabels font_name">Embellishment</label>',f+='<span class="fontLeft" data-direction="previous" style="opacity: 0;"><i class="fa fa-chevron-left" aria-hidden="true"></i></span>',f+='<span class="font_name" style="font-size: 1.2em; font-family: '+p+';">'+c.embellishment.name+"</span>",f+='<span class="fontRight" data-direction="next"  style="opacity: 0;"><i class="fa fa-chevron-right" aria-hidden="true"></i></span>',f+="</div>",f+='<div class="ui-row">';var m,b=ub.config.features.isOn("uniforms","tackeTwillCustomSizes"),g="Size",v="";(r||ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand))&&(g="Measurements",v="custom"),f+='<label class="applicationLabels font_size '+v+'">'+g+"</label>";m="4"!==l||_.contains(["Hockey Socks"],ub.config.blockPattern)?a.sizes:[{size:"0.5"}],void 0===c.size&&(c.size=2!==e||5!==e?4:10,c.font_size=c.size,4===e&&(c.size=.5,c.font_size=c.size)),f+=ub.funcs.generateSizes(o,m,c,l),f+="</div>",!r&&b&&(f+='<div class="ui-row" style="color: white;">',f+='<label class="applicationLabels font_name"></label>',f+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="tall" style="margin-left: 30px;"><label style="width: 17%;">&nbspTall</label></option>',f+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="wide"><label style="width: 17%;">&nbspWide</label></option>',f+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="bestfit"><label>&nbspBest Fit</label></option>',f+="</div>"),f+='<div class="clearfix"></div>',f+='<div class="color-pattern-tabs" id="cpt">',f+='<span class="tab active" data-item="colors"></span>',f+='<span class="tab" data-item="manipulators"></span>',f+="</div>",f+='<div class="ui-row">',f+='<div class="column1 column1-embellishments colors">',f+='<div class="sub1">',f+="<br />",f+='<span class="accentThumb embellishmentThumb"><img class="inksoftThumb" src="'+d+'"/></span><br />',f+='<span class="embellishment-name">'+c.embellishment.name+" ("+c.embellishment.design_id+")</span><br />","Custom Logo"===c.embellishment.name&&(f+='<a class="view-file" data-file="'+c.customFilename+'" target="_new">View File</a>',f+="<br /><br />"),f+='<span class="flipButton">Flip</span>',f+="</div>",f+='<div class="colorContainer">',f+='<br /><a class="filePreview" target="_new" href="'+ub.config.host+"/utilities/previewEmbellishmentInfo/"+c.embellishment.design_id+'">View Art Details</a><br />',f+='<a class="filePreview" target="_new" href="'+c.embellishment.svg_filename+'">View Print Ready File</a><br />',"sublimated"===ub.config.uniform_application_type&&(f+='<br /><span class="watermark-intensity">Watermark Intensity</span>',f+='<input type="text" id="opacity-slider" value="" />'),f+="</div>",f+="</div>",f+=ub.utilities.buildTemplateString("#m-embellishment-sidebar",{}),_templateStrManipulators=ub.funcs.updateManipulatorsPanel(c),f+='<div class="column1 applications manipulators">',f+=_templateStrManipulators,f+="</div>",f+="</div>",f+="</div>",f+="</div>",$(".modifier_main_container").append(f);if($("input#opacity-slider").show(),"function"==typeof $("#opacity-slider").destroy&&$("#opacity-slider").destroy(),$("#opacity-slider").ionRangeSlider({min:0,max:100,from:"number"==typeof c.alpha?100*c.alpha:100,onChange:function(e){ub.funcs.changeMascotOpacity(c.code,e.from)}}),$("a.view-file").unbind("click"),$("a.view-file").on("click",function(){var e=$(this).data("file"),t=util.getExtension(e),i="";i+="pdf"===t||"ai"===t?"Open File ("+t+") on a new window<br />":"<img src ='"+e+"' /> <br />",i+="<a class='displayFilename' target='_new' href = '"+e+"'>"+e+"</a>",ub.showModalTool(i)}),ub.funcs.setupManipulatorEvents(c,o),$("div.color-pattern-tabs > span.tab").unbind("click"),$("div.color-pattern-tabs > span.tab").on("click",function(){var e=$(this).data("item");$("div.color-pattern-tabs > span.tab").removeClass("active"),$(this).addClass("active"),$("div.column1").hide(),$("div.column1."+e).fadeIn(),"manipulators"===e&&$('ul.tab-navs > li.tab[data-action="move"]').trigger("click")}),$("span.edit-embellishment").unbind("click"),$("span.edit-embellishment").on("click",function(){is.loadDesigner(c.embellishment.design_id,l)}),$("span.new-embellishment").unbind("click"),$("span.new-embellishment").on("click",function(){is.loadDesigner(void 0,l)}),$("span.select-embellishment").unbind("click"),$("span.select-embellishment").on("click",function(){is.loadDesignerUpload(void 0,l)}),$("a.select-existing").unbind("click"),$("a.select-existing").on("click",function(){void 0!==ub.user.id?void 0!==ub.user.id&&void 0!==is.embellishments.userItems&&0!==is.embellishments.userItems.length?ub.funcs.createEmbellishmentSelectionPopup(c):ub.showModalTool("You have not created an art yet, please click on Create New instead."):ub.showModalTool("You have to log-in to use your previous art.")}),$("a.create-new").unbind("click"),$("a.create-new").on("click",function(){is.loadDesigner(void 0,l)}),$("a.upload-file").unbind("click"),$("a.upload-file").on("click",function(){is.loadDesignerUpload(void 0,l)}),"Custom Logo"===c.embellishment.name&&void 0!==c.customFilename){var y=c.customFilename,w=y.split(".").pop();$prevImage=$("span.accentThumb > img"),"gif"===w||"jpg"===w||"bmp"===w||"png"===w||"jpeg"===w?$prevImage.attr("src",y):"pdf"===w?$prevImage.attr("src","/images/uiV1/pdf.png"):"ai"===w&&$prevImage.attr("src","/images/uiV1/ai.png")}$("span.inPlacePreviewButton").unbind("click"),$("span.inPlacePreviewButton").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),ub.funcs.updateCoordinates(c);ub.funcs.getPrimaryView(c.application);var S=ub.funcs.getPrimaryViewObject(c.application);void 0!==S.application.flip&&1===S.application.flip?$("span.flipButton").addClass("active"):$("span.flipButton").removeClass("active"),$("span.flipButton").unbind("click"),$("span.flipButton").on("click",function(){var e=_.find(ub.current_material.settings.applications,{code:l});ub.funcs.flipMascot(e)}),$("div.applicationType").on("click",function(){if(1<$("div#changeApplicationUI").length){"visible"===$("div#changeApplicationUI").data("status")?($("div#changeApplicationUI").hide().data("status","hidden"),$("div.applicationType").removeClass("toggledApplicationType")):($("div#changeApplicationUI").fadeIn().data("status","visible"),$("div.applicationType").addClass("toggledApplicationType"))}else{var t=_.find(ub.current_material.settings.applications,{code:l}),e=t.validApplicationTypes;f='<div id="changeApplicationUI" data-status="hidden" data-application-id="'+l+'">',f+='<div class="header">',f+='<div class="">Select Application Type for Location <strong>#'+l+"</strong></div>",f+='<div class="close-popup closeApplicationChanger"><i class="fa fa-times" aria-hidden="true"></i></div>',f+='<div class="body">';var i="",n="",a="";_.contains(e,"number")||(i="deactivatedOptionButton"),"front_number"!==o&&"back_number"!==o||(n="currentlySelectedType",a="(current)"),f+='<div data-type="player_number" class="optionButton '+i+" "+n+'">',f+='<div class="icon"><img src="/images/main-ui/icon-number-large.png"></div>',f+='<div class="caption">Player Number '+a+"</div>",f+="</div>",a=n=i="",_.contains(e,"team_name")||(i="deactivatedOptionButton"),"team_name"===o&&(n="currentlySelectedType",a="(current)"),f+='<div data-type="team_name" class="optionButton '+i+" "+n+'">',f+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',f+='<div class="caption">Team Name '+a+"</div>",f+="</div>",f+="<br />",a=n=i="",_.contains(e,"player_name")||(i="deactivatedOptionButton"),"player_name"===o&&(n="currentlySelectedType",a="(current)"),f+='<div data-type="player_name" class="optionButton '+i+" "+n+'">',f+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',f+='<div class="caption">Player Name '+a+"</div>",f+="</div>",a=n=i="",_.contains(e,"logo")||(i="deactivatedOptionButton"),"mascot"===o&&(n="currentlySelectedType",a="(current)"),f+='<div data-type="mascot" class="optionButton '+i+" "+n+'">',f+='<div class="icon"><img src="/images/main-ui/icon-mascot-large.png"></div>',f+='<div class="caption">Stock Mascot '+a+"</div>",f+="</div>","sublimated"!==ub.config.uniform_application_type&&"tackle_twill"===ub.config.uniform_application_type&&(_.contains(e,"embellishments")||(i="deactivatedOptionButton")),f+='<div class="optionButton '+i+'" data-type="embellishments">',f+='<div class="icon"><img src="/images/main-ui/icon-embellishments-large.png"></div>',f+='<div class="caption">Custom Mascot</div>',f+="</div>",f+="</div>",f+="</div>",a=n=i="",$(".modifier_main_container").append(f),$("div#changeApplicationUI").fadeIn().data("status","visible"),$("div.applicationType").addClass("toggledApplicationType"),$("div.optionButton").on("click",function(){if(!$(this).hasClass("deactivatedOptionButton")){var e=$(this).data("type");ub.funcs.changeApplicationType(t,e),$("div#changeApplicationUI").remove()}}),$("div.closeApplicationChanger").on("click",function(){$("div#changeApplicationUI").hide().data("status","hidden"),$("div.applicationType").removeClass("toggledApplicationType")})}});var x=void 0;void 0!==(x=ub.data.matchingIDs.getMatchingID(l))&&ub.funcs.toggleApplication(x.toString(),h),$("span.font_size").on("click",function(){var e=$(this).data("size");$(".font_size").removeClass("active"),$(this).addClass("active");var t=$(this).hasClass("custom"),i=$(this).hasClass("scale"),n=$(this).hasClass("rotate"),a=$(this).hasClass("move");if(t&&i)return $(".colorContainer.embellishment-buttons-container").hide(),$("div.color-pattern-tabs").hide(),$("color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.scale").trigger("click");if(t&&a)return $(".colorContainer.embellishment-buttons-container").hide(),$("div.color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.move").trigger("click");if(t&&n)return $(".colorContainer.embellishment-buttons-container").hide(),$("div.color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.rotate").trigger("click");var o=ub.funcs.clearScale(c);c.oldScale=o,ub.funcs.changeCustomMascotSize(e,c);var r=void 0;if(void 0!==(r=ub.data.matchingIDs.getMatchingID(l))){var s=_.find(ub.current_material.settings.applications,{code:r.toString()});ub.funcs.changeMascotSize(e,s)}ub.config.features.isOn("uniforms","tackeTwillCustomSizes")&&($("select.customSize option:first").prop("selected",!0),$("input.custom-size-type").prop("checked",!1),$("input.custom-size-type").attr("disabled",!1),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0))}),$("span.font_name").on("click",function(){is.loadDesigner(c.embellishment.design_id,l)}),$("span.accentThumb, span.accent").on("click",function(){is.loadDesigner(c.embellishment.design_id,l)}),$("span.colorItem").on("click",function(){var e=$(this).data("layer-no"),t=$(this).data("color-code"),i=($(this).data("layer-name"),$(this).data("temp")),n=ub.funcs.getColorByColorCode(t),a={layerNo:e,color:c.color_array[e-1],applicationCode:c.code};"undo"!==i&&ub.funcs.pushOldState("color change","application",c,a),ub.funcs.changeMascotColor(n,e,c),ub.funcs.changeActiveColorSmallColorPicker(e,t,n);var o=!0,r=void 0,s=void 0;void 0!==(r=ub.data.matchingIDs.getMatchingID(l))&&(s=_.find(ub.current_material.settings.applications,{code:r.toString()})),void 0!==s&&("free"!==s.type&&ub.funcs.isCurrentSport("Crew Socks (Apparel)")&&(o=!1),"object"==typeof c.mascot&&"object"==typeof s.mascot&&c.mascot.id===s.mascot.id&&(o=!0)),void 0!==r&&o&&ub.funcs.changeMascotColor(n,e,s)}),$("select.customSize").on("change",function(){var e=$(this).find(":selected").val(),t=ub.funcs.clearScale(c);c.oldScale=t,ub.funcs.changeCustomMascotSize(e,c);var i=void 0;if(void 0!==(i=ub.data.matchingIDs.getMatchingID(l))){var n=_.find(ub.current_material.settings.applications,{code:i.toString()});ub.funcs.changeMascotSize(e,n)}$("input.custom-size-type").prop("checked",!1),$("input.custom-size-type").attr("disabled",!1),$("span.font_size").removeClass("active"),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0)}),$("input.custom-size-type").on("click",function(){var e=$(this).data("type");c.custom_size_type=e}),$("div.toggleOption").unbind("click"),$("div.toggleOption").on("click",function(){var e;"on"===$("div.toggle").data("status")?(e="off",ub.funcs.deactivateMoveTool()):(e="on",ub.funcs.activateMoveTool(l)),"on"===e&&ub.funcs.LSRSBSFS(parseInt(l)),ub.funcs.toggleApplication(l,e);var t=void 0,i=!0,n=void 0;void 0!==(t=ub.data.matchingIDs.getMatchingID(l))&&(n=_.find(ub.current_material.settings.applications,{code:t.toString()})),void 0!==n&&"object"==typeof c.mascot&&"object"==typeof n.mascot&&(i=c.mascot.id===n.mascot.id),void 0!==t&&i&&ub.funcs.toggleApplication(t,e)}),$("div#applicationUI").fadeIn(),ub.funcs.activateMoveTool(e),ub.funcs.activateLayer(e),ub.funcs.toggleApplication(l,h),ub.funcs.activateDisableMoveTool(l),ub.funcs.activateCustomSizeType(c),void 0!==c.custom_obj&&ub.funcs.isTackleTwill()&&!1!==c.custom_obj.active&&($('input.custom-size-type[data-type="bestfit"]').prop("checked",!0),$("input.custom-size-type").attr("disabled",!0),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!1))}else ub.funcs.activateApplications(e)}},ub.funcs.activateBestFitOption=function(){$('input.custom-size-type[data-type="bestfit"]').prop("checked",!0),$('input.custom-size-type[data-type="tall"]').attr("disabled",!0),$('input.custom-size-type[data-type="wide"]').attr("disabled",!0),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!1),$("select.customSize option:first").prop("selected",!0),$("span.font_size").removeClass("active")},ub.funcs.activateCustomSizeType=function(e){"bestfit"===e.custom_size_type?ub.funcs.activateBestFitOption():"wide"===e.custom_size_type?$('input.custom-size-type[data-type="wide"]').prop("checked",!0):"tall"===e.custom_size_type?$('input.custom-size-type[data-type="tall"]').prop("checked",!0):$("input.custom-size-type").prop("checked",!1)},ub.funcs.resizeRightMainWindow=function(){ub.config.features.isOn("uniforms","tackeTwillCustomSizes")&&ub.funcs.isTackleTwill()?$("div#right-main-window").css("height","570px"):$("div#right-main-window").css("height","530px")},ub.funcs.createEmbellishmentPopup=function(e,t,l){var i,n;i=_.find(ub.data.mascots_categories,{name:t.category}),n=_.find(ub.data.mascots_groups_categories,{name:i.group_name}),ub.status.mascotPopupVisible=!0;var a={label:"Choose Mascot: ",mascots:_.filter(ub.data.mascots,{active:"1",category:"Bulldogs"}),categories:_.sortBy(ub.data.mascots_categories,"name"),groups_categories:_.sortBy(ub.data.mascots_groups_categories,"name"),paddingTop:"40px"},o=$("#m-new-mascot-popup").html(),r=Mustache.render(o,a);$("body").append(r),$popup=$("div#primaryMascotPopup"),$popup.fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")});var s=$('span.groups_category_item[data-category-name="My Mascots"]');if("number"!=typeof ub.user.id)s.hide();else{s.append("<br /><em>Mascots that went through custom artwork requests will appear on the [My Mascots] category after we have processed it, so that you can use it on your other designs.</em>")}var c=_.pluck(ub.data.mascots,"name");$("input.mascot_search").typeahead({hint:!0,highlight:!0,minLength:1},{name:"Mascots",source:ub.funcs.substringMatcher(c)}),$(".patternPopupResults").isotope({itemSelector:".item",layoutMode:"fitRows"}),$(".patternPopupResults").isotope({filter:".all"}),$("input.mascot_search").on("change",function(){var t=$(this).val().toLowerCase(),e={category:"",mascot_category_id:"",mascots:_.filter(ub.data.mascots,function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())})},i=$("#m-new-mascot-items").html(),n=Mustache.render(i,e);$("div.main-content").scrollTo(0),$("div.patternPopupResults").html(n),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,l)})}),$("span.category_item").on("click",function(){var e=$(this).data("category");$(".patternPopupResults").isotope({filter:"."+e}),$("span.category_item").removeClass("active_category"),$(this).addClass("active_category"),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")})}),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("span.groups_category_item").on("click",function(){var e=$(this).data("category").toString(),s=$(this).data("category-name"),t=_.filter(ub.data.mascots_categories,{mascots_group_category_id:e});if("all"!==e){var i={categories:_.sortBy(t,"name")},n=$("#m-new-mascot-popup-categories").html(),a=Mustache.render(n,i);$("div.popup_header").html("Mascots: "+s),$("div.categories").html(a),$("div.groups_categories").hide(),$("div.categories").fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("span.category_item").unbind("click"),$("span.category_item").on("click",function(){var e=$(this).data("category"),t=$(this).data("category-name");$("div.popup_header").html();if($("span.category_item").removeClass("active"),$(this).addClass("active"),$("div.popup_header").html("MASCOTS: "+s+", "+t),"back"===e)return $("div.categories").hide(),$("div.groups_categories").fadeIn(),void $("div.popup_header").html("MASCOTS");var i=_.filter(ub.data.mascots,{category:t});if("My Mascots"===t){var n=ub.user.id;i="number"==typeof ub.user.id?_.filter(i,function(e){return e.user_id.toString()===n.toString()||_.contains(ub.fontGuideIDs,n)}):_.filter(i,function(e){return"string"!=typeof e.user_id})}var a={category:t,mascot_category_id:e,mascots:_.sortBy(i,"name")},o=$("#m-new-mascot-items").html(),r=Mustache.render(o,a);$("div.patternPopupResults").html(r),$("div.main-content").scrollTo(0),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,l)})}),"My Mascots"===s&&$('span.category_item[data-category-name="My Mascots"]').trigger("click")}else $("div.popup_header").html("Mascots: All")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,l),$("div#primaryMascotPopup").remove(),ub.status.mascotPopupVisible=!1}),$("span.mascot-tab").on("click",function(){$(this).data("button");$("span.mascot-tab").removeClass("active"),$(this).addClass("active")}),ub.funcs.centerPatternPopup(),$("div.close-popup, span.close-popup").on("click",function(){$popup.remove(),ub.status.mascotPopupVisible=!1}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove(),ub.status.mascotPopupVisible=!1):$(this).data("status","visible")}),$('span[data-button="browse"]').on("click",function(){$("div.upload").fadeOut()}),$('span[data-button="upload"]').on("click",function(){$("div.upload").fadeIn()}),$("input#custom-artwork").change(function(){if(this.files&&this.files[0])ub.funcs.fileUpload(this.files[0],l,function(e){})}),$("span.ok_btn").on("click",function(){if("ok"===$(this).attr("data-status")){ub.current_material.settings.custom_artwork=window.uploaded_filename;var e=$('textarea[name="custom-artwork-additional-notes"]').val();l.customLogo=!0,l.customFilename=window.uploaded_filename,l.additionalNotes=e,$popup=$("div#primaryMascotPopup"),$popup.remove(),ub.funcs.changeMascotByID("1038",l,window.uploaded_filename,e)}}),$('span.groups_category_item[data-category-name="'+n.name+'"]').click(),$('span.category_item[data-category-name="'+i.name+'"]').click(),$('div.item[data-mascot-id="'+t.id+'"]').addClass("active"),void 0!==l.customFilename&&0<l.customFilename.length&&void 0===l.preview&&($('textarea[name="custom-artwork-additional-notes"]').val(l.additionalNotes),$("img#preview").attr("src",l.customFilename),$('span[data-button="upload"]').trigger("click"))},ub.funcs.afterLoadEmbellishments=function(){"sublimated"===ub.config.uniform_application_type?$("span.add-art").addClass("sublimated"):$("span.add-art").addClass("non-sublimated")},ub.funcs.changeEmbellishmentFromPopup=function(e,t,i){void 0===i&&ub.funcs.pushOldState("change mascot","application",t,{mascotID:t.mascot.id});var n=e.toString(),a=_.find(ub.data.mascots,{id:n}),o=t.id;ub.funcs.removeApplicationByID(o),t.mascot=a,"1039"!==n?t.color_array=ub.funcs.getDefaultColors():(t.color_array=[],t.color_array.push(ub.funcs.getColorByColorCode("W")),t.color_array.push(ub.funcs.getColorByColorCode("RB")),t.color_array.push(ub.funcs.getColorByColorCode("R"))),_.each(t.application.views,function(e){e.application.flip=0}),ub.funcs.update_application_mascot(t.application,t.mascot),$popup=$("div#primaryPatternPopup, div#primaryMascotPopup"),$popup.remove(),ub.status.mascotPopupVisible=!1},$("span.add-art").unbind("click"),$("span.add-art").on("click",function(){if("knitted"===ub.config.uniform_application_type||"sublimated"===ub.config.uniform_application_type)ub.funcs.deActivateZoom(),ub.funcs.addLocation(!0);else bootbox.dialog({title:"Sorry! This is not allowed here.",message:"Create Art / Upload File (embellishments) is currently enabled for sublimated styles only.",size:"medium"})}),ub.funcs.bindEmbellishmentEvents=function(){Tipped.create("div.archive"),Tipped.create("div.restore"),Tipped.create("span.archives"),$("div.embellishmentPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.embellishmentPopupResults > div.item").on("click",function(){var e=$(this).data("id"),t=$(this).data("filename"),i=$(this).data("svg-filename"),n=$(this).data("design-id"),a=$(this).data("design-name");$("div.item").removeClass("active"),$(this).addClass("active"),$("span.id").html(e),$("span.name").html(a),$("span.filename").html(t),$("a.previewLink").attr("href",i),$("img.preview").attr("src",t),$("span.add-to-uniform").data("id",e),$("span.add-to-uniform").data("design-id",n),$("span.add-to-uniform").unbind("click"),$("span.add-to-uniform").on("click",function(){var e=ub.is.settingsObj,t=void 0;if(is.isMessage(n,e.code,!0),void 0!==(t=ub.data.matchingIDs.getMatchingID(e.code))){_.find(ub.current_material.settings.applications,{code:t.toString()});is.isMessage(n,t,!0)}$embellishmentPopup.remove()})}),ub.funcs.centerAccentPopup(),$("div.close-popup").unbind("click"),$("div.close-popup").on("click",function(){ub.popup=$embellishmentPopup,$embellishmentPopup.remove(),ub.status.embellishmentPopupVisible=!1}),$embellishmentPopup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove(),ub.status.embellishmentPopupVisible=!1):$(this).data("status","visible")}),$("ul.embellishment-tabs > li").unbind("click"),$("ul.embellishment-tabs > li").on("click",function(){var e=$(this).data("type");$("ul.embellishment-tabs > li").removeClass("active"),$(this).addClass("active"),"create"===e&&($embellishmentPopup.remove(),is.loadDesigner(void 0,ub.is.settingsObj.code)),"upload"===e&&($embellishmentPopup.remove(),is.loadDesignerUpload(void 0,ub.is.settingsObj.code))}),$("input.search-bar").unbind("keyup"),$("input.search-bar").on("keyup",function(){var n=$("input.search-bar").val(),e=$("span.active-archive-tab.focus").data("type"),t=[],i=is.embellishments.userItems,a="#m-embellishment-popup-update-items";"active"!==e&&(i=is.embellishments.userItemsArchived,a="#m-embellishment-popup-update-items-restore"),t=0<n.length?_.filter(i,function(e){var t=e.design_name.toLowerCase(),i=n.toLowerCase();return-1!==t.indexOf(i)}):i,_htmlString=ub.utilities.buildTemplateString(a,{myEmbellishments:t}),$("div.embellishmentPopupResults").html(_htmlString),ub.funcs.bindEmbellishmentEvents(),$("div.item").first().trigger("click")}),$("span.archives").unbind("click"),$("span.archives").on("click",function(){}),ub.funcs.updateActiveStatus=function(t,e,i){var n={archived:"archive"===t?"1":"0",id:e,design_id:i};$.ajax({url:ub.endpoints.getFullUrlString("updateCustomArtwork"),type:"POST",data:JSON.stringify(n),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){"archive"===t?ub.funcs.updateUserItemsActive():ub.funcs.updateUserItemsArchived()}})},$("div.archive, div.restore").unbind("click"),$("div.archive, div.restore").on("click",function(){var t=$(this).data("id"),i=$(this).data("design-id"),e=$(this).data("design-name"),n=$(this).data("type");"archive"===n&&bootbox.confirm("Are you sure you want to archive "+e+"?<br /><br /> <em style='font-size: 0.9em;'>Archiving designs removes it on the default list so that your design list will not be cluttered. You can still view your archived designs by clicking the [Archives] button at the top right corner of this popup.</em>",function(e){e&&ub.funcs.updateActiveStatus(n,t,i)}),"restore"===n&&bootbox.confirm("Are you sure you want to restore "+e+"?",function(e){e&&ub.funcs.updateActiveStatus(n,t,i)})}),$("span.active-archive-tab").unbind("click"),$("span.active-archive-tab").on("click",function(){var e=$(this).data("type"),t="Search Active Designs";$("span.active-archive-tab").removeClass("focus"),$(this).addClass("focus"),$("div.embellishmentPopupResults").html(""),"archived"===e&&(ub.funcs.updateUserItemsArchived(),t="Search Archived Designs"),"active"===e&&ub.funcs.updateUserItemsActive(),$("input.search-bar").attr("placeholder",t)})},ub.funcs.updateUserItemsActive=function(e){$("div.embellishmentPopupResults").html(ub.utilities.buildTemplateString("#m-loading-animation",{})),$("div.main-content").addClass("loading"),ub.funcs.updateEmbellishmentList(function(e){var t,i;$("div.main-content").removeClass("loading"),$("div.embellishmentPopupResults").hide(),t=_.sortBy(is.embellishments.userItems,function(e){return parseInt(e.id)}),i=ub.utilities.buildTemplateString("#m-embellishment-popup-update-items",{myEmbellishments:t}),$("div.embellishmentPopupResults").html(i),ub.funcs.bindEmbellishmentEvents(),$("div.embellishmentPopupResults").fadeIn()})},ub.funcs.updateUserItemsArchived=function(e){$("div.embellishmentPopupResults").html(ub.utilities.buildTemplateString("#m-loading-animation",{})),$("div.main-content").addClass("loading"),ub.funcs.updateEmbellishmentListArchived(function(e){var t,i;$("div.main-content").removeClass("loading"),$("div.embellishmentPopupResults").hide(),t=_.sortBy(is.embellishments.userItemsArchived,function(e){return parseInt(e.id)}),i=ub.utilities.buildTemplateString("#m-embellishment-popup-update-items-restore",{myEmbellishments:t}),$("div.embellishmentPopupResults").html(i),ub.funcs.bindEmbellishmentEvents(),$("div.embellishmentPopupResults").fadeIn()})},ub.status.embellishmentPopupVisible=!1,ub.is.settingsObj=void 0,ub.funcs.createEmbellishmentSelectionPopup=function(e){ub.is.settingsObj=e,ub.status.embellishmentPopupVisible=!0;var t=_.sortBy(is.embellishments.userItems,function(e){return parseInt(e.id)}),i=$("#m-embellishment-popup").html(),n={myEmbellishments:t.reverse()},a=Mustache.render(i,n);$("body").append(a),$embellishmentPopup=$("div#primaryEmbellishmentPopup"),$embellishmentPopup.fadeIn(),ub.funcs.bindEmbellishmentEvents(),$("span.active-archive-tab.active").addClass("focus"),$("div.item").first().trigger("click"),$('span.active-archive-tab[data-type="active"]').find("span.text").html("Active ("+_.size(is.embellishments.userItems)+")")},ub.funcs.changeCustomMascotSize=function(e,t,i){var n=t.id;if(ub.funcs.removeApplicationByID(n),void 0===i){var a=void 0;void 0!==t.oldScale&&(a=t.oldScale),ub.funcs.pushOldState("change custom mascot size","application",t,{size:t.size,oldScale:a})}t.size=parseFloat(e),t.font_size=parseFloat(e),ub.funcs.update_application_embellishments(t.application,t.embellishment)},ub.funcs.addAppCustomScaleOnEmbellishmentScalesArray=function(i,e){var t=i.application.views,n=e.toString(),a=i.font_size.toString(),o=ub.styleValues.embellishmentScales;void 0!==o.match&&(o=o.match.properties),_.each(t,function(e){if(void 0!==e.application.appCustomScale){var t=parseFloat(e.application.appCustomScale.x);t=t.toString(),void 0!==_.find(o,{scale:t})&&void 0!==i.bestfit_obj||o.push({appId:n,size:a,scale:t})}})},ub.funcs.processScale=function(e){e=e;var t,i=ub.styleValues.embellishmentScales;if(void 0===e.custom_obj||"custom"===e.scale_type){var n=_.find(i.match.properties,{appId:e.code.toString()});void 0!==n&&"0"!==n.scale?(t={x:n.scale,y:n.scale},e.custom_obj={scale:t,fontSize:n.size,active:!0}):t=i.getScale(e.size)}else t=i.getScale(e.size),e.custom_obj.active=!1;return t}}),$(document).ready(function(){ub.data.mascotsCategories={},ub.funcs.transformMascots=function(){ub.data.mascots=_.filter(ub.data.mascots,{active:"1"}),"prolook"===ub.current_material.material.brand?ub.data.mascots=_.filter(ub.data.mascots,function(e){if("prolook"===e.brand||null===e.brand||"none"===e.brand)return e}):ub.data.mascots=_.filter(ub.data.mascots,function(e){if(e.brand===ub.current_material.material.brand)return e}),_.each(ub.data.mascots,function(e,t){var i=e.mascot_category_id;null!==i&&ub.config.toString&&(i=e.mascot_category_id.toString()),e.layers_properties=JSON.parse(e.layers_properties),ub.data.mascotsCategories[e.category]={name:e.category,id:i}})}}),$(document).ready(function(){ub.data.categoriesWithSingleViewApplications={items:[],getItem:function(i,n,e,t){var a,o,r=ub.utilities.domParserDecoder(e),s=ub.utilities.domParserDecoder(t);return a=_.find(this.items,function(e){i===e.sport&&ub.devtools.debugMode&&(ub.utilities.info("----"),ub.utilities.info(i),ub.utilities.info(n),ub.utilities.info(e.sport),ub.utilities.info(e.type),ub.utilities.info(e.blockPattern),ub.utilities.info(e.neckOption),ub.utilities.info(r),ub.utilities.info(s),ub.utilities.info("contains block pattern: "+_.contains(e.blockPattern,r)),ub.utilities.info("contains neck option: "+_.contains(e.neckOption,s)),ub.utilities.info("----"));var t=e.sport===i&&e.type===n&&_.contains(e.blockPattern,r)&&_.contains(e.neckOption,s);return t&&ub.devtools.debugMode&&ub.utilities.info("Single View Application detected for "+i+" / "+n+" / "+r+" / "+s),t}),!(o=0<_.size(a))&&ub.devtools.debugMode&&ub.utilities.warn("Single View Application not set for "+i+" / "+n+" / "+r+" / "+s),o}},ub.funcs.processSingleViewApplications=function(){_.each(ub.data.single_view_applications,function(e){e.blockPattern=JSON.parse(e.block_patterns),e.neckOption=JSON.parse(e.neck_options)}),ub.data.categoriesWithSingleViewApplications.items=ub.data.categoriesWithSingleViewApplications.items.concat(ub.data.single_view_applications)},ub.data.freeFormValidTypes={items:[{sport:"Crew Socks (Apparel)",part:"Sublimated",validTypes:["logo","team_name","embellishments"]},{sport:"Socks (Apparel)",part:"Sublimated",validTypes:["logo","team_name","embellishments","player_name"]},{sport:"Default",part:"Default",validTypes:["logo","number","player_name","team_name","embellishments"]}],getItem:function(e,t){var i=_.find(this.items,{sport:e,part:t});return void 0===i&&(i=_.find(this.items,{sport:"Default",part:"Default"})),i}},ub.data.placeHolderOverrideSports={items:["Crew Socks (Apparel)","Socks (Apparel)"],isValid:function(e){var t=_.contains(this.items,e);return t=t||0<ub.data.placeHolderOverrides.items.length}},ub.data.placeHolderOverrides={items:[],getOverrides:function(e,t,i,n){var a=_.find(this.items,{sport:e,part:t,perspective:i,blockPattern:n});return void 0===a&&(ub.utilities.info("Sport: "+e),ub.utilities.info("Part: "+t),ub.utilities.info("Perspective: "+i),ub.utilities.info("Block Pattern: "+n),ub.utilities.info("Placeholder Override not found, using default.")),a}},ub.data.placeHolderApplications=[{id:100,perspective:"front"},{id:101,perspective:"back"},{id:102,perspective:"left"},{id:103,perspective:"right"}],ub.data.placeholderApplicationSettings={100:{application_type:"free",application:{id:"100",name:"Free",views:[{perspective:"front",application:{type:"free",name:"Free",id:"100",layerOrder:{},topLeft:{x:471.53846153846155,y:472,xp:190.136476426799,yp:171.63636363636363},topRight:{x:523.5384615384615,y:472,xp:211.1042183622829,yp:171.63636363636363},bottomLeft:{x:471.53846153846155,y:524,xp:190.136476426799,yp:190.54545454545456},bottomRight:{x:523.5384615384615,y:524,xp:211.1042183622829,yp:190.54545454545456},isPrimary:1,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:503.53846153846155,y:498},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:497.53846153846155,y:498},rotation:0}},{perspective:"left",application:{type:"free",name:"Free",id:"100",layerOrder:{},topLeft:{x:235.53846153846155,y:474,xp:94.97518610421837,yp:172.36363636363637},topRight:{x:287.53846153846155,y:474,xp:115.94292803970222,yp:172.36363636363637},bottomLeft:{x:235.53846153846155,y:526,xp:94.97518610421837,yp:191.27272727272728},bottomRight:{x:287.53846153846155,y:526,xp:115.94292803970222,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:267.53846153846155,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:261.53846153846155,y:500},rotation:0}},{perspective:"right",application:{type:"free",name:"Free",id:"100",layerOrder:{},topLeft:{x:695.5384615384615,y:474,xp:280.4590570719603,yp:172.36363636363637},topRight:{x:747.5384615384615,y:474,xp:301.4267990074442,yp:172.36363636363637},bottomLeft:{x:695.5384615384615,y:526,xp:280.4590570719603,yp:191.27272727272728},bottomRight:{x:747.5384615384615,y:526,xp:301.4267990074442,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:727.5384615384615,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:721.5384615384615,y:500},rotation:0}}],layer:"Body",type:"free"},code:"100",type:"free",validApplicationTypes:["logo","number","player_name","team_name"],status:"off"},101:{application_type:"free",application:{id:"101",name:"Free",views:[{perspective:"back",application:{type:"free",name:"Free",id:"101",layerOrder:{},topLeft:{x:471.53846153846155,y:474,xp:190.136476426799,yp:172.36363636363637},topRight:{x:523.5384615384615,y:474,xp:211.1042183622829,yp:172.36363636363637},bottomLeft:{x:471.53846153846155,y:526,xp:190.136476426799,yp:191.27272727272728},bottomRight:{x:523.5384615384615,y:526,xp:211.1042183622829,yp:191.27272727272728},isPrimary:1,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:503.53846153846155,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:497.53846153846155,y:500},rotation:0}},{perspective:"left",application:{type:"free",name:"Free",id:"101",layerOrder:{},topLeft:{x:675.5384615384615,y:474,xp:272.394540942928,yp:172.36363636363637},topRight:{x:727.5384615384615,y:474,xp:293.3622828784119,yp:172.36363636363637},bottomLeft:{x:675.5384615384615,y:526,xp:272.394540942928,yp:191.27272727272728},bottomRight:{x:727.5384615384615,y:526,xp:293.3622828784119,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:707.5384615384615,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:701.5384615384615,y:500},rotation:0}},{perspective:"right",application:{type:"free",name:"Free",id:"101",layerOrder:{},topLeft:{x:225.53846153846155,y:474,xp:90.94292803970224,yp:172.36363636363637},topRight:{x:277.53846153846155,y:474,xp:111.91066997518611,yp:172.36363636363637},bottomLeft:{x:225.53846153846155,y:526,xp:90.94292803970224,yp:191.27272727272728},bottomRight:{x:277.53846153846155,y:526,xp:111.91066997518611,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:257.53846153846155,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:251.53846153846155,y:500},rotation:0}}],layer:"Body",type:"free"},code:"101",type:"free",validApplicationTypes:["logo","number","player_name","team_name"],status:"off"},102:{application_type:"free",application:{id:"102",name:"Free",views:[{perspective:"front",application:{type:"free",name:"Free",id:"102",layerOrder:{},topLeft:{x:651.5384615384615,y:474,xp:262.71712158808936,yp:172.36363636363637},topRight:{x:703.5384615384615,y:474,xp:283.6848635235732,yp:172.36363636363637},bottomLeft:{x:651.5384615384615,y:526,xp:262.71712158808936,yp:191.27272727272728},bottomRight:{x:703.5384615384615,y:526,xp:283.6848635235732,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:683.5384615384615,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:677.5384615384615,y:500},rotation:0}},{perspective:"back",application:{type:"free",name:"Free",id:"102",layerOrder:{},topLeft:{x:275.53846153846155,y:474,xp:111.10421836228288,yp:172.36363636363637},topRight:{x:327.53846153846155,y:474,xp:132.07196029776676,yp:172.36363636363637},bottomLeft:{x:275.53846153846155,y:526,xp:111.10421836228288,yp:191.27272727272728},bottomRight:{x:327.53846153846155,y:526,xp:132.07196029776676,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:307.53846153846155,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:301.53846153846155,y:500},rotation:0}},{perspective:"left",application:{type:"free",name:"Free",id:"102",layerOrder:{},topLeft:{x:471.53846153846155,y:474,xp:190.136476426799,yp:172.36363636363637},topRight:{x:523.5384615384615,y:474,xp:211.1042183622829,yp:172.36363636363637},bottomLeft:{x:471.53846153846155,y:526,xp:190.136476426799,yp:191.27272727272728},bottomRight:{x:523.5384615384615,y:526,xp:211.1042183622829,yp:191.27272727272728},isPrimary:1,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:503.53846153846155,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:497.53846153846155,y:500},rotation:0}}],layer:"Body",type:"free"},code:"102",type:"free",validApplicationTypes:["logo","number","player_name","team_name"],status:"off"},103:{application_type:"free",application:{id:"103",name:"Free",views:[{perspective:"front",application:{type:"free",name:"Free",id:"103",layerOrder:{},topLeft:{x:275.53846153846155,y:474,xp:111.10421836228288,yp:172.36363636363637},topRight:{x:327.53846153846155,y:474,xp:132.07196029776676,yp:172.36363636363637},bottomLeft:{x:275.53846153846155,y:526,xp:111.10421836228288,yp:191.27272727272728},bottomRight:{x:327.53846153846155,y:526,xp:132.07196029776676,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:307.53846153846155,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:301.53846153846155,y:500},rotation:0}},{perspective:"back",application:{type:"free",name:"Free",id:"103",layerOrder:{},topLeft:{x:651.5384615384615,y:474,xp:262.71712158808936,yp:172.36363636363637},topRight:{x:703.5384615384615,y:474,xp:283.6848635235732,yp:172.36363636363637},bottomLeft:{x:651.5384615384615,y:526,xp:262.71712158808936,yp:191.27272727272728},bottomRight:{x:703.5384615384615,y:526,xp:283.6848635235732,yp:191.27272727272728},isPrimary:0,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:683.5384615384615,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:677.5384615384615,y:500},rotation:0}},{perspective:"right",application:{type:"free",name:"Free",id:"103",layerOrder:{},topLeft:{x:471.53846153846155,y:474,xp:190.136476426799,yp:172.36363636363637},topRight:{x:523.5384615384615,y:474,xp:211.1042183622829,yp:172.36363636363637},bottomLeft:{x:471.53846153846155,y:526,xp:190.136476426799,yp:191.27272727272728},bottomRight:{x:523.5384615384615,y:526,xp:211.1042183622829,yp:191.27272727272728},isPrimary:1,hasLogo:1,hasTeamName:1,hasPlayerName:1,hasNumber:1,fontSizes:"2",verticalText:0,defaultMascot:"",defaultFont:"25",defaultText:"Test",defaultNumber:"47",mascotData:{},fontData:{},center:{x:503.53846153846155,y:500},colors:"W",accents:"0",width:52,height:52,widthp:10.483870967741936,heightp:9.454545454545455,pivot:{x:497.53846153846155,y:500},rotation:0}}],layer:"Body",type:"free"},code:"103",type:"free",validApplicationTypes:["logo","number","player_name","team_name"],status:"off"}}}),$(document).ready(function(){ub.funcs.isSocks=function(){return void 0!==ub.current_material.material&&(ub.funcs.isCurrentSport("Crew Socks (Apparel)")||ub.funcs.isCurrentSport("Socks (Apparel)"))},ub.funcs.isFootball=function(){return"Football"===ub.config.sport||"Football 2017"===ub.config.sport},ub.funcs.isLower=function(){return"lower"===ub.config.type},ub.funcs.fadeOutCustomizer=function(){},ub.funcs.fadeInCustomizer=function(){$("div#roster-input").fadeOut(),$("div#right-pane-column").fadeIn(),$("div#left-pane-column").fadeIn()},ub.funcs.addSizesTabs=function(e,t){$('span.tabButton[data-size="'+e+'"]').css("display","inline-block"),$("span.tabButton:visible").first().trigger("click"),$('span.size[data-size="'+e+'"]').attr("data-status","on"),0===$('tr.roster-row[data-size="'+e+'"]').length&&($('span.tabButton[data-size="'+e+'"]').trigger("click"),void 0===t&&$('span.add-player[data-size="'+e+'"]').trigger("click")),0<$('span.tabButton[data-category="youth"]:visible').length?$("span.youth-header").show():$("span.youth-header").hide(),0<$('span.tabButton[data-category="adult"]:visible').length?$("span.adult-header").show():$("span.adult-header").hide()},ub.funcs.removeSizesTabs=function(e){$('span.tabButton[data-size="'+e+'"]').hide(),$('span.size[data-size="'+e+'"]').attr("data-status","off"),$("span.tabButton:visible").first().trigger("click"),$('div.tab[data-size="'+e+'"]').hide(),0<$('span.tabButton[data-category="youth"]:visible').length?$("span.youth-header").show():$("span.youth-header").hide(),0<$('span.tabButton[data-category="adult"]:visible').length?$("span.adult-header").show():$("span.adult-header").hide()},ub.funcs.getActiveSizes=function(){var t=[];return $('span.size[data-status="on"]').each(function(){var e=$(this).data("size").toString();t.push(e)}),t},ub.funcs.reInitHover=function(){$("tr.roster-row").hover(function(){$(this).addClass("row-hover")},function(){$(this).removeClass("row-hover")})},ub.funcs.centerNumberSelectionPopup=function(){if($popup=$("div#numbersPopup"),$popup.fadeIn(),0!==$popup.length){var e=window.innerWidth,t=window.innerHeight,i=(e-$popup.width())/2,n=(t-$popup.height())/2;$popup.css({top:n,left:i})}},ub.funcs.setNumberStatus=function(e,t){_.find(ub.data.playerNumbers,{number:e.toString()}).status=t},ub.funcs.hideColumns=function(){ub.data.numberPopupExcemptions.isValid(ub.config.sport,ub.config.type)||$("th.sleevetype, th.lastnameapplication, td.sleevetype, td.lastnameapplication").hide(),ub.funcs.isSocks()&&$("td.PlayerLastNameInput, th.thlastname").hide(),ub.funcs.isCurrentSport("Wrestling")||ub.funcs.isSocks()?$("td.PlayerNumberInput, th.thPlayerNumberInput").hide():$("td.PlayerNumberInput, th.thPlayerNumberInput").show()},ub.funcs.updateSelect=function(e,t){var i=$('tr.roster-row[data-size="'+e+'"][data-index="'+t+'"]');i.find("select.sleeve-type").val($("select.default-sleeve-type").val()),i.find("select.lastname-application").val($("select.default-lastname-application").val())},ub.funcs.createNumbersSelectionPopup=function(a){$("body").scrollTo(0),$("div#numbersPopup").remove();var t="";t+='<div id="numbersPopup" data-status="visible">',t+='<div class="header">',t+="SELECT PLAYER NUMBERS",t+="</div>",_.each(ub.data.playerNumbers,function(e){t+='<span class="number '+e.status+'" data-status="'+e.status+'" data-number="'+e.number+'">',t+=e.number,t+="</span>"}),t+="<br />",t+='<span class="preview">Preview: </span> <span class="btn-cancel">Cancel</span> <span class="btn-ok">OK</span>',t+="</div>",$("body").append(t),ub.funcs.centerNumberSelectionPopup(),$("div#numbersPopup").fadeIn(),$("span.number.free, span.number.selected").on("click",function(){$(this).data("number");var e=$(this).data("status");"selected"===e?($(this).data("status","free"),$(this).removeClass("selected"),$(this).addClass("free")):"free"===e&&($(this).data("status","selected"),$(this).removeClass("free"),$(this).addClass("selected"))}),$("span.number.used").hover(function(){var e=$(this).data("number"),t=$('input[name="number"][value="'+e+'"]').parent().parent(),i=t.find('input[name="size"]').val(),n=t.find('input[name="lastname"]').val(),a=t.data("index");$("span.preview").html(a+". "+i+" - "+n)},function(){$("span.preview").html("Preview")}),$("span.btn-cancel").on("click",function(){$("div#numbersPopup").remove()}),$("span.btn-ok").on("click",function(){var t=[];$("span.number").each(function(){if("selected"===$(this).data("status")){var e=$(this).data("number");ub.funcs.setNumberStatus(e,"used"),t.push(e)}}),numbers=t;var i=$('table.roster-table[data-size="'+a+'"] > tbody'),n=i.find("tr").length;_.each(numbers,function(e){data={index:n,size:a,number:e},template=$("#m-roster-table-field").html(),markup=Mustache.render(template,data),$.when(i.append(markup)).then(ub.funcs.updateSelect(a,n)),n+=1}),!ub.funcs.isFootball()||ub.funcs.isFootball()&&"BLB"===ub.current_material.material.factory_code||"FBMJ"===ub.current_material.material.price_item_code?($("select.lastname-application").attr("disabled","disabled"),$("select.lastname-application").val("None"),$("select.sleeve-type").attr("disabled","disabled"),$("select.sleeve-type").val("Motion Cut")):($("select.lastname-application").removeAttr("disabled"),$("select.sleeve-type").removeAttr("disabled")),ub.funcs.hideColumns(),$('span.clear-row[data-size="'+a+'"]').unbind("click"),$('span.clear-row[data-size="'+a+'"]').on("click",function(){var e=$(this).data("index"),t=$(this).data("size");ub.funcs.bindRemoveRosterItemButton(e,t)}),ub.funcs.reInitHover(),$("div#numbersPopup").remove()})},ub.funcs.bindRemoveRosterItemButton=function(e,t){$('table.roster-table[data-size="'+t+'"] > tbody');var i=$('tr[data-size="'+t+'"][data-index="'+e+'"]'),n=i.find('input[name="number"]').val();ub.funcs.setNumberStatus(n,"free"),i.remove(),$('table.roster-table[data-size="'+t+'"] > tbody').find("tr.roster-row").each(function(e){var t=e+1;$(this).find("td").first().html(t),$(this).find("span.clear-row").attr("data-index",t),$(this).attr("data-index",t)})},ub.funcs.extractFields=function(e){var t=e.data("index"),i=e.find("input.size").val(),n=e.find("input.lastname").val(),a=e.find("input.number").val(),o=e.find("input.quantity").val(),r=e.find("select.sleeve-type").val(),s=e.find("select.lastname-application").val();return ub.funcs.isFootball()||(r="N/A"),{index:t,lastname:n,size:i,number:a,quantity:o,sleeveType:r,lastNameApplication:s,sample:0}},ub.funcs.validName=function(e){var t=!0;return 0<!e.trim().length&&(t=!1),t},ub.funcs.validQuantity=function(e){var t=!0;return 0<!parseInt(e)&&(t=!1),t},ub.funcs.rosterValid=function(){var o=!0,r=[],s=[];return $("tr.roster-row").each(function(){var e=$(this),t=ub.funcs.extractFields(e),i="",n=(ub.funcs.validName(t.lastname),ub.funcs.validQuantity(t.quantity)),a=t.index+". "+t.size+" (#"+t.number+")";o=!0,n||(o=!1,i=a+" - Invalid Quantity<br />",r.push(i)),o?e.css("background-color","white"):e.css("background-color","red"),_.includes(ub.funcs.getActiveSizes(),t.size)&&s.push(t)}),{valid:o,messages:r,roster:s}},ub.funcs.showRosterForm=function(){$("div#order-form").fadeOut(),$("div#roster-input").fadeIn()},ub.funcs.hideRosterAndOrderForm=function(){$("div#order-form").fadeOut(),$("div#roster-input").fadeOut()},ub.funcs.prepareSizingTable=function(){var a=[];_.each(ub.current_material.settings.roster,function(e){var t,i=e.sleeveType.toUpperCase(),n=_.find(a,{sleeveType:i});void 0===n&&(a.push({sleeveType:i,sizes:[]}),n=_.find(a,{sleeveType:i})),void 0===(t=_.find(n.sizes,{size:e.size}))&&(n.sizes.push({size:e.size,items:[],total:0,sizeString:""}),t=_.find(n.sizes,{size:e.size})),t.items.push({sleeveType:i,size:e.size,number:e.number}),t.total+=parseInt(e.quantity),t.sizeString+=e.number+", "}),_.each(a,function(e,t){_.each(a[t].sizes,function(e,t){e.sizeString=e.sizeString.substring(0,e.sizeString.length-2)})}),ub.current_material.settings.sizingTable=a,ub.current_material.settings.sizingTableHTML=ub.utilities.buildTemplateString("#m-sizing-table",{entries:ub.current_material.settings.sizingTable})},ub.funcs.getTotalQuantity=function(){var i=0,n=[];return _.each(ub.current_material.settings.roster,function(e){i+=parseInt(e.quantity);var t=_.find(n,{size:e.size});void 0===t&&(n.push({size:e.size,quantity:0}),t=_.find(n,{size:e.size})),t.quantity+=parseInt(e.quantity)}),ub.current_material.settings.size_breakdown=n,i},ub.funcs.isOrderFormValid=function(){return!0},ub.funcs.submitFeedback=function(e){var t=ub.user.id,i=ub.user.email;void 0===t&&(t=0,i=e.email);var n={subject:"Feedback",order_code:"",content:e.message,type:"feedback",email:i,name:e.name,screenshot:e.screenshot,material_id:e.material_id,saved_design_id:e.saved_design_id};void 0!==ub.user.id&&(n.user_id=t);var a=ub.config.api_host+"/api/feedback";$.ajax({url:a,type:"POST",data:JSON.stringify(n),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){console.log("FEEDBACK FORM SUBMITTED!",e)}})},ub.funcs.feedbackFormFromOrder=function(e,t,i,n,a,o){window.onbeforeunload=null;var r={message:e,imgFront:t,imgLeft:i,imgRight:n,imgBack:a},s=$("#m-feedback-form").html(),l=Mustache.render(s,r);$("body").append(l),-1<l.indexOf("saved")&&$("div.feedback-form").find("h4").html("Order Saved Successfully!"),$("div.feedback-form").fadeIn(),ub.funcs.centerPatternPopup(),$("span.ok-btn").on("click",function(){var e=$("textarea#feedback-message").val().trim();0!==e.length&&ub.funcs.submitFeedback(e),$("div.feedback-form").remove(),window.location=o}),$("span.cancel-btn").on("click",function(){$("div.feedback-form").remove()})},ub.funcs.reload=function(){window.location=ub.config.host},ub.funcs.imageUpload=function(e,t){var i=new FormData;i.append("file",e),void 0!==$.ajaxSettings.headers&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({data:i,url:ub.config.api_host+"/api/fileUpload",type:"POST",processData:!1,contentType:!1,crossDomain:!0,headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?(window.uploaded_filename=e.filename,t(e.filename),console.log("[ub.funcs.imageUpload]===>",e.filename)):(t(void 0),console.log("Error Uploading Image"),console.log(e.message))}})},ub.funcs.prepareImagesPreview=function(){ub.front_view.visible=!0,ub.back_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0;var e="<img src ='"+ub.getThumbnailImage2("front_view")+"' alt='...' class='img-thumbnail img-responsive front' />",t="<img src ='"+ub.getThumbnailImage2("back_view")+"' alt='...' class='img-thumbnail img-responsive back' />",i="<img src ='"+ub.getThumbnailImage2("left_view")+"' alt='...' class='img-thumbnail img-responsive left' />",n="<img src ='"+ub.getThumbnailImage2("right_view")+"' alt='...' class='img-thumbnail img-responsive right' />";ub.frontPreview=e,ub.backPreview=t,ub.leftPreview=i,ub.rightPreview=n},ub.funcs.freeFeedbackForm=function(){ub.feedbackForm=!1,$("a#feedback").on("click",function(){var e=$("#m-feedback-form-free").html(),t=Mustache.render(e,{});if($("body").append(t),ub.feedbackForm)console.log("[feedback form is already shown]"),$("div.free-feedback-form").each(function(e){0!==e&&$(this).remove()});else{if(console.log("[showing feedback form]"),ub.funcs.centerPatternPopup(),ub.feedbackForm=!0,ub.user&&($("#feedback-form .name").val(ub.user.fullname).attr("disabled","disabled"),$("#feedback-form .email").val(ub.user.email).attr("disabled","disabled")),-1!==ub.config.material_id&&$("#feedback-form .materialId").val(ub.config.material_id).attr("disabled","disabled").prev().find("small").hide(),void 0!==ub.config.savedDesignInfo&&$("#feedback-form .savedDesignId").val(ub.config.savedDesignInfo.savedDesignID).attr("disabled","disabled").prev().find("small").hide(),ub.funcs.prepareImagesPreview(),ub.user)if(-1===ub.current_material.id);else if(ub.frontPreview){var i="<div class='row'>                   <div class='col-md-12'>"+ub.frontPreview+ub.backPreview+ub.leftPreview+ub.rightPreview+"                   </div>                 </div><br/>";$(".feedback-left-panel").prepend(i)}$("span.ok-btn").on("click",function(){var e=$("#feedback-form .name").val().trim(),t=$("#feedback-form .email").val().trim(),i=$("#feedback-form .message").val().trim(),n=$("#feedback-form .materialId").val().trim(),a=$("#feedback-form .savedDesignId").val().trim();function o(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}if(o(t)&&0!==e.length&&0!==i.length){$("#feedback-form .name, #feedback-form .email, #feedback-form .message").removeClass("error");var r=$("img.img-thumbnail.upload")[0].src;"https://i.imgur.com/aB8nl6x.png"===r&&(r="");var s={name:e,email:t,message:i,screenshot:r,material_id:n,saved_design_id:a};ub.funcs.submitFeedback(s),$("div.free-feedback-form").remove(),ub.feedbackForm=!1}else 0===e.length&&$("#feedback-form .name").addClass("error"),o(t)||$("#feedback-form .email").addClass("error"),0===i.length&&$("#feedback-form .message").addClass("error")}),$("span.cancel-btn").on("click",function(){$("div.free-feedback-form").remove(),ub.feedbackForm=!1}),$("#feedback-form .name").on("keyup",function(){0!==$(this).val().length&&$(this).removeClass("error")}),$("#feedback-form .email").on("keyup",function(){0!==$(this).val().length&&$(this).removeClass("error")}),$("#feedback-form .message").on("keyup",function(){0!==$(this).val().length&&$(this).removeClass("error")}),$(".upload-btn").on("click",function(){$("#file-input-upload").trigger("click")}),$("#file-input-upload").on("change",function(){$(".upload-btn").find("i").removeClass("fa-cloud-upload").addClass("fa-refresh fa-spin"),ub.funcs.imageUpload(this.files[0],function(e){void 0===e?($(".upload-btn").find("i").removeClass("fa-refresh fa-spin").addClass("fa-cloud-upload"),$.smkAlert({text:"Error Uploading File",type:"warning",time:3,marginTop:"80px"})):($(".upload-btn").find("i").removeClass("fa-refresh fa-spin").addClass("fa-cloud-upload"),$("img.img-thumbnail.upload")[0].src=e)})})}})},ub.funcs.freeFeedbackForm();var a="",o="";ub.funcs.postOrderData=function(e,t){var i=e,n=t;$("span.submit-order").fadeOut(),$("span.processing").fadeIn(),delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({url:n,type:"POST",data:JSON.stringify(i),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){a=ub.config.host+"/order/view/"+e.order_code,ub.funcs.betaFeaturesChecker("New PDF",function(){ub.pdfService.preview_data.orderId=e.order_code,ub.pdfService.preview_data.searchKey=e.order_code,console.log("UPDATED PREVIEW DATA",ub.pdfService.preview_data)},function(){console.log("LEGACY logged via success")})}}).done(function(){ub.funcs.betaFeaturesChecker("New PDF",function(){console.log("POST ORDER DATA GENERATE PDF"),ub.funcs.pdfService(!0,ub.pdfService.preview_data)},function(){console.log("LEGACY logged via done")}),$("div#validate-order-form").remove(),$("span.processing").fadeOut(),$(".order-dialog").fadeOut(),$(".modal-backdrop").fadeOut(),o="Your order is now submitted for processing. A ProLook representative will be reaching out shortly to confirm your order and help finish the ordering process.",0===e.order.submitted&&(o="Your order is now saved. You can work on it later by going to [My Orders] and submit it when you are done."),ub.funcs.feedbackFormFromOrder(o,ub.current_material.settings.thumbnails.front_view,ub.current_material.settings.thumbnails.left_view,ub.current_material.settings.thumbnails.right_view,ub.current_material.settings.thumbnails.back_view,a)})},ub.funcs.setToPending=function(){var e=ub.endpoints.getFullUrlString("updateArtworkStatus");$.ajax({url:e,data:JSON.stringify({id:ub.config.orderIDParent,artwork_status:"pending"}),type:"POST",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.utilities.info("Sucessfully reset artwork status");var t=ub.config.host+"/order/view/"+ub.config.orderCode;$("div#validate-order-form").remove(),$("span.processing").fadeOut(),window.location=t}})},ub.funcs.updateOrderItemField=function(e){var t=ub.endpoints.getFullUrlString("updateOrderItem");void 0!==$.ajaxSettings.headers&&void 0!==$.ajaxSettings.headers["X-CSRF-TOKEN"]&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({url:t,data:JSON.stringify(e),type:"POST",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.utilities.info("Updated!"),ub.funcs.resetArtworkStatusToPending()}})},ub.funcs.hasCustomArtworkRequests=function(){var t=!1;return _.each(ub.current_material.settings.applications,function(e){e.customLogo&&(t=!0)}),t},ub.funcs.resetArtworkStatusToPending=function(){ub.funcs.hasCustomArtworkRequests()&&ub.funcs.setToPending()},ub.funcs.resubmitOrderForm=function(){ub.funcs.updateOrderItemField({id:parseInt(ub.config.orderID),builder_customizations:JSON.stringify(ub.current_material.settings)})},ub.funcs.submitOrderForm=function(e){if(ub.funcs.isOrderFormValid()){var t=$("textarea#additional-notes").val(),i=ub.current_material.material.factory_code,n="",a="",o=parseInt(ub.current_material.material.item_id),r=parseInt(ub.current_material.material.block_pattern_id),s=ub.neckOption,l=ub.current_material.material.name,c=$('input[name="client-organization"]').val(),u=$('input[name="client-name"]').val(),p=$('input[name="client-email"]').val(),d=$('input[name="client-phone"]').val(),f=$('input[name="client-fax"]').val(),h=$('input[name="athletic-director"]').val(),m=$('input[name="billing-organization"]').val(),b=$('input[name="billing-contact-name"]').val(),g=$('input[name="billing-email"]').val(),v=$('input[name="billing-phone"]').val(),y=$('input[name="billing-fax"]').val(),w=$('input[name="billing-address"]').val(),S=$('input[name="billing-city"]').val(),x=$('select[name="billing-state"]').val(),k=$('input[name="billing-zip"]').val(),C=$('input[name="shipping-organization"]').val(),T=$('input[name="shipping-contact-name"]').val(),z=$('input[name="shipping-email"]').val(),P=$('input[name="shipping-phone"]').val(),A=$('input[name="shipping-fax"]').val(),O=$('input[name="shipping-address"]').val(),j=$('input[name="shipping-city"]').val(),F=$('select[name="shipping-state"]').val(),I=$('input[name="shipping-zip"]').val(),E=[];void 0===ub.current_material.settings.custom_artwork&&(ub.current_material.settings.custom_artwork=""),_.each(ub.current_material.settings.roster,function(e){a="BLB"===i?(n="Motion","N/A"):(n=e.sleeveType,e.sleeveType);var t={Size:e.size,Number:e.number,Name:e.lastname,Sample:0,LastNameApplication:a,SleeveCut:n,Quantity:e.quantity};E.push(t)});var D=ub.user.id;void 0===D&&(D=0);var M=ub.config.uniform_application_type.toTitleCase(),R="1";e==ub.constants.order_actions.SAVE_ORDER&&(R=0);var B={action:e,order:{brand:ub.current_material.material.brand,client:u,submitted:R,user_id:D,user_name:ub.user.fullname,origin:ub.config.app_env,test_order:ub.funcs.submitAsTestOrder()},athletic_director:{organization:c,contact:h,email:p,phone:d,fax:f},billing:{organization:m,contact:b,email:g,address:w,city:S,state:x,phone:v,fax:y,zip:k},shipping:{organization:C,contact:T,email:z,address:O,city:j,state:F,phone:P,fax:A,zip:I},order_items:[{item_id:o,block_pattern_id:r,neck_option:s,description:l,type:ub.current_material.material.type,builder_customizations:JSON.stringify(ub.current_material.settings),set_group_id:0,factory_order_id:"",design_sheet:ub.current_material.settings.pdfOrderForm,roster:E,price:ub.funcs.getPrice(ub.current_material.material),applicationType:M,application_type:ub.config.uniform_application_type,additional_attachments:ub.data.orderAttachment,notes:t}]},L=ub.config.api_host+"/api/order";ub.funcs.postOrderData(B,L)}else ub.startModal("Please Complete Order Form Details")},ub.funcs.displayLinks=function(e){var t=ub.current_material.settings.pdfOrderForm=e;window.scrollTo(0,0),$("span.processing-pdf").fadeOut(),$("span.previewFormPdf").fadeIn(),$("span.save-order").fadeIn();var i=ub.funcs.getOrderQty(),n=ub.current_material.material.uniform_category;_result=ub.data.minimumOrder.getQty(n),$("span.submit-confirmed-order").fadeIn();var a="/pdfjs/web/viewer.html?file="+t;$("iframe#pdfViewer").attr("src",a),$("a.previewPDFLink").attr("href",a),$("div#validate-order-form > span.processing").fadeOut(),$("span.submit-confirmed-order").unbind("click"),$("span.submit-confirmed-order").on("click",function(){"Submitting Order..."!==$("span.submit-confirmed-order").html()&&"Resubmitting Order..."!==$("span.submit-confirmed-order").html()&&(i<_result.qty?bootbox.alert("Minimum order for "+ub.current_material.material.uniform_category+" is "+_result.qty+" items per style."):ub.data.updateOrderFromCustomArtworkRequest?(console.log("===> submiting form with artwork status updated"),$("span.submit-confirmed-order").html("Resubmitting Order..."),$.smkAlert({text:"Artwork Status updated",type:"info",time:3,marginTop:"80px"}),ub.funcs.resubmitOrderForm()):(console.log("===> submiting form"),ub.funcs.submitOrderForm(ub.constants.order_actions.SUBMIT_ORDER),$("span.submit-confirmed-order").html("Submitting Order..."),bootbox.dialog({title:"Please wait while we submit your order. Thank You!",message:'<p class="text-center" style="font-size:30px;"><i class="fa fa-spin fa-spinner"></i> Loading...</p>',className:"order-dialog",closeButton:!1}).init(function(){})))}),$("span.save-order").unbind("click"),$("span.save-order").on("click",function(){"Saving Order..."!==$("span.submit-confirmed-order").html()&&(ub.funcs.submitOrderForm(ub.constants.order_actions.SAVE_ORDER),$("span.save-order").html("Saving Order..."),bootbox.dialog({title:"Please wait while we save your order. Thank You!",message:'<p class="text-center" style="font-size:30px;"><i class="fa fa-spin fa-spinner"></i> Loading...</p>',className:"order-dialog",closeButton:!1}).init(function(){}))})},ub.funcs.submitAsTestOrder=function(){return ub.config.features.isOn("uniforms","testOrders")?1:0},ub.funcs.prepareData=function(){var e=$("textarea#additional-notes").val(),i=ub.current_material.material.factory_code,n="",a="",t=parseInt(ub.current_material.material.item_id),o=ub.current_material.material.name,r=$('input[name="client-name"]').val(),s=$('input[name="client-email"]').val(),l=$('input[name="client-phone"]').val(),c=$('input[name="client-fax"]').val(),u=$('input[name="athletic-director"]').val(),p=$('input[name="billing-organization"]').val(),d=$('input[name="billing-contact-name"]').val(),f=$('input[name="billing-email"]').val(),h=$('input[name="billing-phone"]').val(),m=$('input[name="billing-fax"]').val(),b=$('input[name="billing-address"]').val(),g=$('input[name="billing-city"]').val(),v=$('select[name="billing-state"]').val(),y=$('input[name="billing-zip"]').val(),w=$('input[name="shipping-organization"]').val(),S=$('input[name="shipping-contact-name"]').val(),x=$('input[name="shipping-email"]').val(),k=$('input[name="shipping-phone"]').val(),C=$('input[name="shipping-fax"]').val(),T=$('input[name="shipping-address"]').val(),z=$('input[name="shipping-city"]').val(),P=$('select[name="shipping-state"]').val(),A=$('input[name="shipping-zip"]').val(),O=_.indexBy(_.sortBy(ub.data.modifierLabels,"intGroupID"),"group_id"),j=[];_.each(ub.current_material.settings.roster,function(e){a="BLB"===i?(n="Motion","N/A"):(n=e.sleeveType,e.sleeveType);var t={Size:e.size,Number:e.number,Name:e.lastname,Sample:0,LastNameApplication:a,SleeveCut:n,Quantity:e.quantity};j.push(t)});var F=ub.config.uniform_application_type.toTitleCase();return ub.current_material.settings.sorted_modifier_labels=O,{order:{client:r,submitted:"1",sku:"B-M-FBIJ-INF14-01-F01-17",material_id:ub.current_material.material.id,url:ub.config.host+window.document.location.pathname,user_name:ub.user.fullname,test_order:ub.funcs.submitAsTestOrder()},athletic_director:{contact:u,email:s,phone:l,fax:c},billing:{organization:p,contact:d,email:f,address:b,city:g,state:v,phone:h,fax:m,zip:y},shipping:{organization:w,contact:S,email:x,address:T,city:z,state:P,phone:k,fax:C,zip:A},order_items:[{brand:ub.current_material.material.brand,item_id:t,type:ub.current_material.material.type,description:o,builder_customizations:ub.current_material.settings,set_group_id:0,factory_order_id:"",design_sheet:ub.current_material.settings.pdfOrderForm,roster:j,sku:ub.current_material.material.sku,material_id:ub.current_material.material.id,url:ub.config.host+window.document.location.pathname,price:ub.funcs.getPrice(ub.current_material.material),applicationType:F,application_type:ub.config.uniform_application_type,additional_attachments:ub.data.orderAttachment,notes:e}]}},ub.funcs.generatePDF=function(){if(ub.funcs.isOrderFormValid()){$("span.processing-pdf").fadeIn(),$("span.previewFormPdf").fadeIn(),$("iframe#pdfViewer").attr("src",""),$("a.previewPDFLink").attr("href",""),$("span.submit-confirmed-order").fadeOut(),$("span.save-order").fadeOut(),ub.funcs.pushState({data:"generate-pdf",title:"Generate PDF",url:"?generate-pdf"});var e=ub.funcs.prepareData();console.log("ub.funcs.prepareData() output=====>",e),console.log("PROCESSING!!!");var t=e.order_items[0].builder_customizations,i=e.order_items[0],n=moment(Date.now()).format(),a={selectedSource:"Prolook Customizer",selectedTemplate:"Prolook",searchKey:"preview-"+i.material_id+"-"+i.item_id+"-"+n.replace(/[:+]/g,"-"),thumbnails:t.thumbnails,category:t.uniform_category,fullName:"",client:e.order.client,orderId:"",foid:"",description:i.description,cutPdf:t.cut_pdf,stylesPdf:t.styles_pdf,roster:t.roster,pipings:t.pipings,createdDate:moment(Date.now()).format("YYYY/MM/DD"),notes:i.notes,sizeBreakdown:t.size_breakdown,applications:t.applications,sizingTable:t.sizingTable,upper:t.upper,lower:t.lower,hiddenBody:t.hiddenBody,randomFeeds:t.randomFeeds,legacyPDF:"",applicationType:i.application_type,sml:t.sorted_modifier_labels,sku:_.isEmpty(ub.current_material.material.sku)?"-":ub.current_material.material.sku};ub.funcs.betaFeaturesChecker("New PDF",function(){console.log("RUNNING REQUEST TO PDF SERVICE"),ub.funcs.pdfService(!0,a),ub.pdfService={preview_data:a}},function(){console.log("RUNNING REQUEST TO LEGACY PDF"),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({data:JSON.stringify({builder_customizations:e}),url:ub.config.host+"/generateOrderForm",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?(ub.funcs.displayLinks(e.filename),ub.data.updateOrderFromCustomArtworkRequest&&($("span.submit-confirmed-order").html('Resubmit Order <i class="fa fa-arrow-right" aria-hidden="true"></i>'),$("span.save-order").hide())):(console.log("error: "),console.log(e.message))},error:function(e){$.smkAlert({text:"Something went wrong while generating the PDF. Please try again later. Send your feedback if the problem persists. We appreciate your comments. Our team will be working on it as soon as possible.",type:"warning"})}})})}else ub.startModal("Please Complete Order Form Details")},ub.funcs.pdfService=function(e,t){var i=null;$.ajax({async:e,data:JSON.stringify(t),url:"https://pdf-generator.prolook.com/api/upload",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",success:function(e){e.success?(i=e.pdfUrl,console.log("SENDING TO DISPLAY"),ub.funcs.displayLinks(i)):(console.log("error: "),console.log(e),$.smkAlert({text:"[ERROR]\n\n["+e+"]\n\nSomething went wrong while generating the PDF. Please try again later. Send your feedback if the problem persists. We appreciate your comments. Our team will be working on it as soon as possible.",type:"warning",permanent:!0}))},error:function(e){console.log("===error===",e),$.smkAlert({text:"["+e+"]\n\nSomething went wrong while generating the PDF. Please try again later. Send your feedback if the problem persists. We appreciate your comments. Our team will be working on it as soon as possible.",type:"warning",permanent:!0})}})},ub.funcs.thumbnailsUploaded=function(){var e=ub.current_material.settings.thumbnails,t=""!==e.front_view,i=""!==e.back_view,n=""!==e.left_view,a=""!==e.right_view;return t&&i&&n&&a},ub.funcs.showValidateOrderForm=function(){$("div#validate-order-form").fadeIn(),$("span.back-to-roster-form-button").unbind("click"),$("span.back-to-roster-form-button").on("click",function(){ub.funcs.reShowOrderFrom()})},ub.funcs.validateOrderForm=function(){ub.funcs.hideRosterAndOrderForm(),ub.funcs.showValidateOrderForm(),ub.funcs.generatePDF()},ub.funcs.duplicateClientInfo=function(){var e=$("#client-name").val(),t=$("#athletic-director").val(),i=$("#client-email").val(),n=$("#phone").val(),a=$("#fax").val();$("#billing-checkbox").is(":checked")&&($("#billing-organization").val(e),$("#billing-contact-name").val(t),$("#billing-email").val(i),$("#billing-phone").val(n),$("#billing-fax").val(a)),$("#shipping-checkbox").is(":checked")&&($("#shipping-organization").val(e),$("#shipping-contact-name").val(t),$("#shipping-email").val(i),$("#shipping-phone").val(n),$("#shipping-fax").val(a))},ub.funcs.setVal=function(e,t){"shipping-state"===e||"billing-state"===e?$('select[name="'+e+'"]').val(t):$('input[name="'+e+'"]').val(t)},ub.funcs.prepareOrderForm=function(e){var t=e,i="";if($("div#order-form").fadeIn(),void 0!==e){void 0!==t.notes&&(i=t.notes.content),ub.data.hasProcessedArtworks&&(t=e.order,i=_.last(ub.data.orderInfo.notes).content),ub.funcs.setVal("client-name",t.client),ub.funcs.setVal("athletic-director",t.client),ub.funcs.setVal("client-email",t.email),ub.funcs.setVal("client-phone",t.phone),ub.funcs.setVal("client-fax",t.fax),ub.funcs.setVal("billing-organization",t.bill_organization),ub.funcs.setVal("billing-contact-name",t.bill_contact_person),ub.funcs.setVal("billing-email",t.bill_email),ub.funcs.setVal("billing-phone",t.bill_phone),ub.funcs.setVal("billing-address",t.bill_address),ub.funcs.setVal("billing-city",t.bill_city),ub.funcs.setVal("billing-state",t.bill_state),ub.funcs.setVal("billing-zip",t.bill_zip),ub.funcs.setVal("shipping-organization",t.ship_organization),ub.funcs.setVal("shipping-contact-name",t.ship_contact_person),ub.funcs.setVal("shipping-email",t.ship_email),ub.funcs.setVal("shipping-phone",t.ship_phone),ub.funcs.setVal("shipping-address",t.ship_address),ub.funcs.setVal("shipping-city",t.ship_city),ub.funcs.setVal("shipping-state",t.ship_state),ub.funcs.setVal("shipping-zip",t.ship_zip),$('textarea[name="additional-notes"]').val(i);var n=JSON.parse(e.items[0].additional_attachments);util.isImage(n)&&($("img#additional-attachment-preview").attr("src",n),$("a#additional-attachment-link").attr("href",n),$("span#additional-attachment-label").html(n)),$("span#additional-attachment-link").html(JSON.parse(e.items[0].additional_attachments))}},ub.funcs.showOrderForm=function(e){ub.funcs.pushState({data:"order-form",title:"Order Form",url:"?order-form"}),$("div#roster-input").fadeOut(),window.scrollTo(0,0),ub.funcs.prepareOrderForm(e),ub.funcs.prepareSizingTable();var t=ub.funcs.getTotalQuantity();$("td.uniform-name").html(ub.current_material.material.name),$("td.quantity").html(t);var i="";_.each(ub.current_material.settings.size_breakdown,function(e){i+='<tr class="tr-size-row">',i+="<td>",i+=e.size,i+="</td>",i+='<td align="right">',i+=e.quantity,i+="</td>",i+="</tr>"}),i+='<tr class="items">',i+='<td align="right">',i+="<strong>TOTAL</strong>",i+="</td>",i+='<td align="right">',i+="<strong>"+t+"</strong>",i+="</td>",i+="</tr>",$("table#size-breakdown").find("tr.tr-size-row").remove(),$("table#size-breakdown").find("tr.items").remove(),$("table#size-breakdown").append(i),$("span.back-to-roster-form-button").on("click",function(){ub.funcs.showRosterForm()}),$("input#additional-attachment").change(function(){if(ub.data.uploading=!0,ub.data.orderAttachment="",$("span.additional-attachment-message").html('Uploading...<img src="/images/loading.gif" />'),this.files&&this.files[0])ub.funcs.fileUploadAttachment(this.files[0],function(e,t,i){if(void 0===e)return $.smkAlert({text:"Error Uploading File",type:"warning",time:3,marginTop:"80px"}),void $("span.additional-attachment-message").html("Error Uploading File");i?(ub.data.orderAttachment=e,$("span.additional-attachment-message").html("Upload ok! Please click on the [Continue] button to proceed.")):($("span.additional-attachment-message").html("Invalid File Type: "+t),$.smkAlert({text:"Invalid File Type: "+t,type:"warning",time:3,marginTop:"80px"})),ub.data.uploading=!1})});var n=[];$("input#client-name").on("blur",function(){""!=$("input#client-name").val()?(n=[],ub.funcs.billingShippingStateAreRequired(n),$(this).removeClass("is-invalid")):((n=[]).unshift({message:"Client name is required!",id:"client-name"}),ub.funcs.billingShippingStateAreRequired(n),$(this).addClass("is-invalid")),ub.funcs.displayOrderFormErrors(n)}),$("select#billing-state").on("change",function(){0!=$("select#billing-state").val()?(n=[],ub.funcs.clientNameShippingStateAreRequired(n),$("div.billing-state-form-group span.select2-selection").css("border","1px solid #aaa")):((n=[]).push({message:"State in Billing Info is required!",id:"billing-state"}),ub.funcs.clientNameShippingStateAreRequired(n),$("div.billing-state-form-group span.select2-selection").css("border","1px solid red")),ub.funcs.displayOrderFormErrors(n)}),$("select#shipping-state").on("change",function(){0!=$("select#shipping-state").val()?(n=[],ub.funcs.clientNameBillingStateAreRequired(n),$("div.shipping-state-form-group span.select2-selection").css("border","1px solid #aaa")):((n=[]).push({message:"State in Shipping Info is required!",id:"shipping-state"}),ub.funcs.clientNameBillingStateAreRequired(n),$("div.shipping-state-form-group span.select2-selection").css("border","1px solid red")),ub.funcs.displayOrderFormErrors(n)}),$("span.submit-order").unbind("click"),$("span.submit-order").on("click",function(){var e=[];if(""===$("input#client-name").val().trim()?(e.push({message:"Client name is required!",id:"client-name"}),$("input#client-name").addClass("is-invalid")):$("input#client-name").removeClass(".is-invalid"),0==$("select#billing-state").val()?(e.push({message:"State in Billing Info is required!",id:"billing-state"}),$("div.billing-state-form-group span.select2-selection").css("border","1px solid red")):$("div.billing-state-form-group span.select2-selection").css("border","1px solid #aaa"),0==$("select#shipping-state").val()?(e.push({message:"State in Shipping Info is required!",id:"shipping-state"}),$("div.shipping-state-form-group span.select2-selection").css("border","1px solid red")):$("div.shipping-state-form-group span.select2-selection").css("border","1px solid #aaa"),ub.data.uploading)$.smkAlert({text:"Please wait for uploading to finish.",type:"warning",time:3,marginTop:"80px"});else{var t=ub.utilities.buildTemplateString("#m-order-form-error",{errors:e});$(".error-container").html(t),0<_.size(e)?$(".error-container").addClass("has-error"):($(".error-container").removeClass("has-error"),ub.funcs.validateOrderForm())}}),$("div.order-tab-button").on("click",function(){if("rejected"!==ub.config.orderArtworkStatus){var e=$(this).data("name");$("div.order-tab-button").removeClass("active-tab"),$(this).addClass("active-tab"),$("div.order-tab").removeClass("active-tab"),$('div.order-tab[data-name="'+e+'"]').addClass("active-tab")}}),$("#client-name, #athletic-director, #client-email, #phone, #fax, #shipping-checkbox, #billing-checkbox").on("change",function(){ub.funcs.duplicateClientInfo()}),void 0!==ub.data.orderInfo&&void 0!==ub.data.orderInfo.items[0].notes&&$("textarea#additional-notes").val(e.items[0].notes),ub.funcs.thumbnailsUploaded()&&($("span.processing").fadeOut(),$("span.submit-order").fadeIn())},ub.funcs.getOrderQty=function(){var i=0;return $('input[name="quantity"]').each(function(e,t){i+=parseInt($(t).val())}),i},ub.funcs.proceedToPreview=function(e){var t=ub.funcs.rosterValid();t.valid?(ub.current_material.settings.roster=t.roster,ub.funcs.showOrderForm(e)):ub.showModal(t.messages)},ub.funcs.displayOrderFormErrors=function(e){0<_.size(e)?$(".error-container").addClass("has-error"):$(".error-container").removeClass("has-error");var t=ub.utilities.buildTemplateString("#m-order-form-error",{errors:e});return $(".error-container").html(t),e},ub.funcs.billingShippingStateAreRequired=function(e){return 0==$("select#billing-state").val()&&(e.push({message:"State in Billing Info is required!",id:"billing-state"}),$("div.billing-state-form-group span.select2-selection").css("border","1px solid red")),0==$("select#shipping-state").val()&&(e.push({message:"State in Shipping Info is required!",id:"shipping-state"}),$("div.shipping-state-form-group span.select2-selection").css("border","1px solid red")),e},ub.funcs.clientNameShippingStateAreRequired=function(e){return""===$("input#client-name").val().trim()&&(e.unshift({message:"Client name is required!",id:"client-name"}),$("input#client-name").addClass("is-invalid")),0==$("select#shipping-state").val()&&e.push({message:"State in Shipping Info is required!",id:"shipping-state"}),e},ub.funcs.clientNameBillingStateAreRequired=function(e){return""===$("input#client-name").val().trim()&&(e.unshift({message:"Client name is required!",id:"client-name"}),$("input#client-name").addClass("is-invalid")),0==$("select#billing-state").val()&&e.push({message:"State in Billing Info is required!",id:"billing-state"}),e},ub.funcs.gotoField=function(e){_.isEqual(e,"#client-name")?$(window).scrollTop(300):$(window).scrollTop(900),_.isEqual(e,"#client-name")?($("div.order-tab-buttons").find("div.active-tab").removeClass("active-tab"),$("div.order-tabs").find("div.active-tab").removeClass("active-tab"),$("div.order-tab-button[data-name=client-info]").addClass("active-tab"),$("div.order-tab[data-name=client-info]").addClass("active-tab")):_.isEqual(e,"#billing-state")?($("div.order-tab-buttons").find("div.active-tab").removeClass("active-tab"),$("div.order-tabs").find("div.active-tab").removeClass("active-tab"),$("div.order-tab-button[data-name=billing-info]").addClass("active-tab"),$("div.order-tab[data-name=billing-info]").addClass("active-tab")):($("div.order-tab-buttons").find("div.active-tab").removeClass("active-tab"),$("div.order-tabs").find("div.active-tab").removeClass("active-tab"),$("div.order-tab-button[data-name=shipping-info]").addClass("active-tab"),$("div.order-tab[data-name=shipping-info]").addClass("active-tab"))},ub.funcs.prepareState=function(){var e=ub.utilities.buildTemplateString("#m-us-states",{states:ub.data.usStates.items});$("select.billing-state-dropdown").html(e),$("select.shipping-state-dropdown").html(e),$(".billing-state-dropdown").select2(),$(".shipping-state").select2()},ub.funcs.perUniformValidation=function(e){$("span.submit-order").hide(),ub.funcs.prepareState(),"rejected"===ub.config.orderArtworkStatus&&($("span.back-to-roster-form-button").hide(),$("input.form-control").attr("disabled","disabled"),$("textarea").attr("disabled","disabled"),$("input#additional-attachment").attr("disabled","disabled")),ub.funcs.proceedToPreview(e)},ub.funcs.submitUniform=function(e){0!==$("tr.roster-row").length?ub.funcs.perUniformValidation(e):ub.funcs.noRosterMessage()},ub.funcs.initRosterCalled=!1,ub.funcs.AddRosterRow=function(e){$("tr.roster-row").length;var t=$('table.roster-table[data-size="'+e+'"] > tbody'),i=t.find("tr").length;data={index:i+1,size:e,number:[]},template=$("#m-roster-table-field").html(),markup=Mustache.render(template,data),t.append(markup),ub.funcs.hideColumns(),$('span.clear-row[data-size="'+e+'"]').unbind("click"),$('span.clear-row[data-size="'+e+'"]').on("click",function(){var e=$(this).data("index"),t=$(this).data("size"),i=($('table.roster-table[data-size="'+t+'"] > tbody'),$('tr[data-size="'+t+'"][data-index="'+e+'"]'));i.find('input[name="number"]').val();i.remove(),$('table.roster-table[data-size="'+t+'"] > tbody').find("tr.roster-row").each(function(e){var t=e+1;$(this).find("td").first().html(t),$(this).find("span.clear-row").attr("data-index",t),$(this).attr("data-index",t)})})},ub.funcs.addPlayerToRoster=function(e){var t=$('table.roster-table[data-size="'+e.Size+'"] > tbody'),i=t.find("tr").length;data={index:i,size:e.Size,number:e.Number,name:e.Name},template=$("#m-roster-table-field").html(),markup=Mustache.render(template,data),$.when(t.append(markup)).then(function(){ub.funcs.updateSelect(e.Size,i)}),i+=1},ub.funcs.prepopulateRoster=function(e){var n,t=e.roster;_.each(t,function(e){var t=e.Size,i=$('span.size[data-size="'+t+'"]');"off"===i.attr("data-status")&&ub.funcs.addSizesTabs(t,!0),i.addClass("active"),ub.funcs.addPlayerToRoster(e),n=e.Size,ub.funcs.isFootball()&&(_.find(ub.data.playerNumbers,{number:e.Number}).status="used")}),$("span.clear-row").unbind("click"),$("span.clear-row").on("click",function(){var e=$(this).data("index"),t=$(this).data("size");ub.funcs.bindRemoveRosterItemButton(e,t)}),setTimeout(function(){$('span.tabButton[data-size="'+n+'"]').trigger("click")},1e3)},ub.funcs.modifyOrderFormUIBySport=function(){ub.funcs.isSocks()&&($("span.adult-sizes").html("ADULT SHOE SIZES: "),$("span.adult-header").html("Adult Shoe Sizes: "),$("span.youth-sizes").html("YOUTH SHOE SIZES: "),$("span.youth-header").html("Youth Shoe Sizes: "))},ub.funcs.initUniformSizesAndPrices=function(){var t=[],i=[],e=void 0;if(ub.current_material.material.parsedPricingTable,ub.utilities.info(""),ub.utilities.info("----- Valid Size / Price -----"),void 0!==ub.current_material.material.parsedPricingTable.properties){ub.utilities.info("Youth: "),_.each(ub.current_material.material.parsedPricingTable.properties.youth,function(e){ub.utilities.info(e.size.lpad(" ",7)+" / "+e.msrp),t.push(e.size)}),void 0!==(e=ub.current_material.material.parsedPricingTable.properties.youth)&&0!==typeof e||ub.utilities.info("No Youth Prices defined.");var n=_.find(ub.data.sizes.items,{sport:ub.config.sport,type:"youth",gender:ub.config.gender});void 0===n&&(n={sport:ub.config.sport,type:"youth",gender:ub.config.gender},ub.data.sizes.items.push(n)),n.sizes=t,ub.utilities.info(""),ub.utilities.info("Adult: "),_.each(ub.current_material.material.parsedPricingTable.properties.adult,function(e){ub.utilities.info(e.size.lpad(" ",7)+" / "+e.msrp),i.push(e.size)}),_adultPrices=ub.current_material.material.parsedPricingTable.properties.adult,"undefined"!=typeof _adultPrices&&0!==typeof _adultPrices||(ub.utilities.info("No Adult Prices defined."),_adultPrices=[]);var a=_.find(ub.data.sizes.items,{sport:ub.config.sport,type:"adult",gender:ub.config.gender});void 0===a&&(a={sport:ub.config.sport,type:"adult",gender:ub.config.gender},ub.data.sizes.items.push(a)),a.sizes=i}else ub.utilities.info("No Pricing Table Detected."),$('a[data-view="team-info"]').addClass("disabled");ub.utilities.info("-----------------------------"),ub.utilities.info("")},ub.funcs.prepareUniformSizes=function(){var e=ub.current_material.material.uniform_category,t=ub.current_material.material.gender,i=ub.data.sizes.getSizes(e,t,"youth"),n=ub.data.sizes.getSizes(e,t,"adult"),a=_.union(i.sizes,n.sizes),o={},r="",s="";o={adult:n.sizes,youth:i.sizes},r=$("#m-circle-sizes").html(),s=Mustache.render(r,o),$("div#sizes").append(s),0===n.sizes.length&&$("span.adult-sizes").hide(),0===i.sizes.length&&$("span.youth-sizes").hide(),o={adult:n.sizes,youth:i.sizes},r=$("#m-tabButtons-sizes").html(),s=Mustache.render(r,o),$("div.tabButtonsContainer").append(s),o={tabs:a},r=$("#m-roster-table").html(),s=Mustache.render(r,o),$("div.tabsContainer").append(s),ub.funcs.modifyOrderFormUIBySport()},ub.funcs.uiPrepBeforeOrderForm=function(){$("div#left-side-toolbar").fadeOut(),ub.funcs.deactivateMoveTool(),ub.funcs.turnLocationsOff(),ub.funcs.resetHighlights(),$("div#right-pane-column").fadeOut(),$("div#left-pane-column").fadeOut(),TeamStoreToolBox.close()},ub.data.rosterInitialized=!1,ub.funcs.initRoster=function(e){void 0!==e&&(e.items[0].roster=JSON.parse(e.items[0].roster)),ub.data.rosterInitialized=!0,ub.funcs.initRosterCalled||void 0!==ub.user.id&&(ub.funcs.uiPrepBeforeOrderForm(),ub.data.orderFormInitialized=!0,ub.funcs.pushState({data:"roster-form",title:"Enter Roster",url:"?roster-form"}),ub.funcs.initRosterCalled=!0,ub.current_material.settings.thumbnails={front_view:"",back_view:"",left_view:"",right_view:""},ub.uploadThumbnail("front_view"),ub.uploadThumbnail("back_view"),ub.uploadThumbnail("left_view"),ub.uploadThumbnail("right_view"),ub.funcs.prepareUniformSizes(),ub.funcs.hideColumns(),!ub.funcs.isFootball()||ub.funcs.isFootball()&&"BLB"===ub.current_material.material.factory_code||"FBMJ"===ub.current_material.material.price_item_code||ub.data.numberPopupExcemptions.isValid(ub.config.sport,ub.config.type)?$("div.defaultTypes").hide():$("div.defaultTypes").show(),$("div#roster-input").fadeIn(),console.log("AFTER FADE IN ROSTER INPUT CONTAINER=======>"),"rejected"===ub.config.orderArtworkStatus||ub.data.updateOrderFromCustomArtworkRequest||($("button.change-all").unbind("click"),$("button.change-all").on("click",function(){$("select.sleeve-type").val($("select.default-sleeve-type").val()),$("select.lastname-application").val($("select.default-lastname-application").val())}),$("span.add-player").on("click",function(){console.log("ON CLICK ADD PLAYER=======>");var e;e=$(this).data("size"),ub.funcs.isCurrentSport("Wrestling")||"Apparel"===ub.current_material.material.uniform_group||ub.data.numberPopupExcemptions.isValid(ub.config.sport,ub.config.type)?ub.funcs.AddRosterRow(e):ub.funcs.createNumbersSelectionPopup(e)}),$("span.size").on("click",function(){if(!$("div#numbersPopup").is(":visible")){var e=$(this).data("status"),t=$(this).data("size");"off"===e?($(this).addClass("active"),$(this).data("status","on"),ub.funcs.addSizesTabs(t)):($(this).removeClass("active"),$(this).data("status","off"),ub.funcs.removeSizesTabs(t))}}),$("span.back-to-customizer-button").on("click",function(){ub.funcs.fadeInCustomizer()})),$("span.add-item-to-order").unbind("click"),$("span.add-item-to-order").on("click",function(){0!==$('span.size[data-status="on"]').length?ub.funcs.submitUniform(ub.data.orderInfo):ub.funcs.noRosterMessage()}),$("span.tabButton").on("click",function(){var e=$(this).data("size");$("span.tabButton").removeClass("active"),$(this).addClass("active"),$("div.tabsContainer > div.tab").hide(),$('div.tab[data-size="'+e+'"]').fadeIn()}),void 0!==e&&(ub.funcs.prepopulateRoster(e.items[0]),$("textarea#additional-notes").val(e.items[0].notes)),ub.funcs.hideColumns(),ub.funcs.reInitHover(),"rejected"!==ub.config.orderArtworkStatus&&!ub.data.updateOrderFromCustomArtworkRequest||($("select.default-sleeve-type").attr("disabled","disabled"),$("select.default-lastname-application").attr("disabled","disabled"),$('input[name="lastname"]').attr("disabled","disabled"),$('input[name="number"]').attr("disabled","disabled"),$('input[name="quantity"]').attr("disabled","disabled"),$("select.sleeve-type").attr("disabled","disabled"),$("select.lastname-application").attr("disabled","disabled"),$("span.clear-row").hide(),$("span.add-player").hide()))},ub.funcs.noRosterMessage=function(){$.smkAlert({text:"Please add Sizes and Roster before proceeding.",type:"warning",permanent:!1,time:5,marginTop:"90px"})},ub.funcs.goto=function(e){var t=e;switch(t){case"home":window.onbeforeunload=null,window.location.href="/";break;case"my-saved-designs":window.onbeforeunload=null,window.location.href="/my-saved-designs";break;default:console.warning("Invalid Location: "+t)}},ub.funcs.checkEmailPopup=function(){var e=$("input.design-name").val();$("div.save-design").fadeOut();var t=$("#m-save-design-guest").html(),i={title:"Save Design",designName:e},n=Mustache.render(t,i),a=bootbox.dialog({title:"Success!",message:n});a.init(function(){$("button.close").unbind("click"),$("button.close").on("click",function(){a.modal("hide")})})},ub.funcs.updatePopup=function(){var e=$("input.design-name").val();$("div.save-design").fadeOut();var t=$("#m-save-design-ok").html(),i={title:"Save Design",designName:e},n=Mustache.render(t,i),a=bootbox.dialog({title:"What do you want to do next?",message:n});a.init(function(){$("button.stay").unbind("click"),$("button.stay").on("click",function(){a.modal("hide")}),$("button.my-saved-designs").unbind("click"),$("button.my-saved-designs").on("click",function(){a.modal("hide");bootbox.dialog({message:"Loading My Saved Design..."});ub.funcs.goto("my-saved-designs")}),$("button.select-another-uniform").unbind("click"),$("button.select-another-uniform").on("click",function(){a.modal("hide");bootbox.dialog({message:"Loading the Uniform Pickers..."});ub.funcs.goto("home")})})},ub.funcs.uploadThumbnailSaveDesign=function(t){var e=ub.getThumbnailImage(t);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({data:JSON.stringify({dataUrl:e}),url:ub.config.host+"/saveLogo",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?(ub.current_material.settings.thumbnails[t]=e.filename,$("img."+t).attr("src",e.filename),ub.funcs.thumbnailsUploaded()&&($("em.uploading").fadeOut(),ub.data.updateSaveDesignFromCustomArtworkRequest?ub.funcs.saveDesign():$("div.save-design-footer").fadeIn())):(console.log("Error generating thumbnail for "+t),console.log(e.message))}})},ub.funcs.postDesign=function(e){var t=window.ub.config.api_host+"/api/saved_design";ub.data.updateSaveDesignFromCustomArtworkRequest&&(t=window.ub.config.api_host+"/api/saved_design/update"),"local"===ub.config.app_env&&(e.test_data="1"),delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({url:t,dataType:"json",type:"POST",data:JSON.stringify(e),crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){if(e.success){void 0!==window.ub.user.type?ub.funcs.checkEmailPopup():ub.funcs.updatePopup();var t=!1;void 0===$("#is_add_to_team_store").val()?t=!1:$("#is_add_to_team_store:checked").length&&(t=!0),t&&(ub.team_stores_material_id=e.team_stores_material_id,TeamStoreToolBox.add_to_team_store(ub.current_material.material.id))}else console.log("Error Saving Design."),console.log(e.message),$(".save-design").fadeOut()}})},ub.funcs.saveDesign=function(){$("div.ok-footer").hide(),$("div.saving-please-wait").show();var e=ub.user.id,t=$("input.design-name").val(),i=ub.current_material.material.id,n=ub.current_material.settings,a=ub.current_material.material.uniform_category,o=ub.current_material.settings.thumbnails.front_view,r=ub.current_material.settings.thumbnails.back_view,s=ub.current_material.settings.thumbnails.left_view,l=ub.current_material.settings.thumbnails.right_view,c=$("#design-notes").val(),u={user_id:e.toString(),name:t,material_id:i,material_name:ub.current_material.material.name,user:ub.user.fullname,builder_customizations:n,sport:a,front_thumbnail:o,back_thumbnail:r,left_thumbnail:s,right_thumbnail:l,notes:c};ub.data.updateSaveDesignFromCustomArtworkRequest&&(u.id=ub.config.savedDesignInfo.savedDesignID,u.builder_customizations=u.builder_customizations,delete u.user,delete u.material_name),void 0!==$("#is_add_to_team_store").val()&&(u.is_add_to_team_store=$("#is_add_to_team_store:checked").length),ub.store_code&&(u.store_code=ub.store_code),ub.funcs.postDesign(u)},ub.funcs.cleanupsBeforeSave=function(){},ub.funcs.initSaveDesign=function(){ub.front_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0,ub.back_view.visible=!0,ub.funcs.showSaveDialogBox(),ub.funcs.turnLocationsOff(),ub.funcs.cleanupsBeforeSave(),$("img.front_view").attr("src",""),$("img.back_view").attr("src",""),$("img.left_view").attr("src",""),$("img.right_view").attr("src",""),ub.current_material.settings.thumbnails={front_view:"",back_view:"",left_view:"",right_view:""},ub.funcs.removeLocations(),$(this).removeClass("zoom_on"),ub.funcs.uploadThumbnailSaveDesign("front_view"),ub.funcs.uploadThumbnailSaveDesign("back_view"),ub.funcs.uploadThumbnailSaveDesign("left_view"),ub.funcs.uploadThumbnailSaveDesign("right_view")},ub.funcs.showSaveDialogBox=function(){$("div.save-design").remove();var e=$("#m-save-design").html(),t=Mustache.render(e,{title:"Save Design"});$("body").append(t),ub.funcs.centerPatternPopup(),$("div.save-design").fadeIn(),$("div.save-design span.cancel-btn").on("click",function(){$("div.save-design").remove()}),$("div.save-design span.ok-btn").on("click",function(){ub.funcs.saveDesign()}),ub.data.updateSaveDesignFromCustomArtworkRequest?($("div.save-design > h3").html('<i class="fa fa-floppy-o" aria-hidden="true"></i> Updating Design'),$('input[name="design-name"]').attr("disabled","disabled"),$("textarea#design-notes").attr("disabled","disabled"),$('input[name="design-name"]').val(ub.config.savedDesignInfo.name)):($('input[name="design-name"]').removeAttr("disabled"),$("textarea#design-notes").removeAttr("disabled"))},ub.funcs.checkDefaultRepID=function(){_.contains(ub.fontGuideIDs,window.ub.valid)||void 0!==ub.user.defaultRepID&&"-1"!==ub.user.defaultRepID&&"0"!==ub.user.defaultRepID||$.smkAlert({text:"You don't have a Rep selected, you can go to your profile to select one.",type:"warning",time:10,marginTop:"10px"})},ub.funcs.lRest=function(e,t,a,o){0!==e.trim().length&&0!==t.trim().length&&($.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({data:JSON.stringify({email:e,password:t}),url:ub.config.host+"/lrest",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){if(e.success){window.ub.user={id:parseInt(e.userId),fullname:e.fullname,firstName:e.firstName,lastName:e.lastName,email:e.email,state:e.state,zip:e.zip,defaultRepID:e.default_rep_id,headerValue:e.accessToken};var t=$("#m-loggedInNavbar").html(),i={firstName:e.firstName},n=Mustache.render(t,i);$("div.user-profile.pull-right").html(n),$.smkAlert({text:e.message+"!",type:"success",time:3,marginTop:"80px"}),ub.funcs.updateMessageCount(),$('a.change-view[data-view="save"]').removeClass("disabled"),$('a.change-view[data-view="open-design"]').removeClass("disabled"),void 0!==a?($("div#primaryQuickRegistrationPopup").remove(),"order"===o?ub.funcs.initRoster():"save"===o&&ub.funcs.initSaveDesign()):void 0===ub.current_material.material?window.location.href="/":(ub.funcs.ok(),ub.funcs.checkDefaultRepID()),ub.id=e.userID,ub.funcs.afterLogin()}else if(void 0!==a){$("em.message").html(e.message+',  <a href="/forgot-password" target="_new">did you forget your password?</a>')}else $.smkAlert({text:e.message,type:"warning",time:3,marginTop:"260px"})}}))},$("input#login-email").on("keypress",function(e){13==(e.keyCode?e.keyCode:e.which)&&($("input#login-password").focus(),e.preventDefault())}),$("form.loginRest").submit(function(e){e.preventDefault()}),$("button.loginRest").unbind("click"),$("button.loginRest").on("click",function(){var e=$('input[type="email"]').val(),t=$('input[type="password"]').val();ub.funcs.lRest(e,t)})}),$(document).ready(function(){ub.status.mascotPopupVisible=!1,ub.funcs.createMascotPopupUpload=function(e,t,s){var i,n=s=void 0;n=_.find(ub.data.mascots_categories,{name:(void 0).category}),i=_.find(ub.data.mascots_groups_categories,{name:n.group_name}),ub.status.mascotPopupVisible=!0;var a={label:"Choose Mascot: ",mascots:_.filter(ub.data.mascots,{active:"1",category:"Bulldogs"}),categories:_.sortBy(ub.data.mascots_categories,"name"),groups_categories:_.sortBy(ub.data.mascots_groups_categories,"name"),paddingTop:"40px"},o=$("#m-new-mascot-popup").html(),r=Mustache.render(o,a);$("body").append(r),$popup=$("div#primaryMascotPopup"),$popup.fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")});var l=_.pluck(ub.data.mascots,"name");$("input.mascot_search").typeahead({hint:!0,highlight:!0,minLength:1},{name:"Mascots",source:ub.funcs.substringMatcher(l)}),$(".patternPopupResults").isotope({itemSelector:".item",layoutMode:"fitRows"}),$(".patternPopupResults").isotope({filter:".all"}),$("input.mascot_search").on("change",function(){var t=$(this).val().toLowerCase(),e={category:"",mascot_category_id:"",mascots:_.filter(ub.data.mascots,function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())})},i=$("#m-new-mascot-items").html(),n=Mustache.render(i,e);$("div.main-content").scrollTo(0),$("div.patternPopupResults").html(n),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,s)})}),$("span.category_item").on("click",function(){var e=$(this).data("category");$(".patternPopupResults").isotope({filter:"."+e}),$("span.category_item").removeClass("active_category"),$(this).addClass("active_category"),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")})}),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("span.groups_category_item").on("click",function(){var e=$(this).data("category").toString(),r=$(this).data("category-name"),t=_.filter(ub.data.mascots_categories,{mascots_group_category_id:e});if("all"!==e){var i={categories:_.sortBy(t,"name")},n=$("#m-new-mascot-popup-categories").html(),a=Mustache.render(n,i);$("div.popup_header").html("Mascots: "+r),$("div.categories").html(a),$("div.groups_categories").hide(),$("div.categories").fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("span.category_item").on("click",function(){var e=$(this).data("category"),t=$(this).data("category-name");$("div.popup_header").html();if($("span.category_item").removeClass("active"),$(this).addClass("active"),$("div.popup_header").html("MASCOTS: "+r+", "+t),"back"===e)return $("div.categories").hide(),$("div.groups_categories").fadeIn(),void $("div.popup_header").html("MASCOTS");var i=_.filter(ub.data.mascots,{category:t}),n={category:t,mascot_category_id:e,mascots:_.sortBy(i,"name")},a=$("#m-new-mascot-items").html(),o=Mustache.render(a,n);$("div.main-content").scrollTo(0),$("div.patternPopupResults").html(o),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,s)})})}else $("div.popup_header").html("Mascots: All")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,s),$("div#primaryMascotPopup").remove(),ub.status.mascotPopupVisible=!1}),$("span.mascot-tab").on("click",function(){$(this).data("button");$("span.mascot-tab").removeClass("active"),$(this).addClass("active")}),ub.funcs.centerPatternPopup(),$("div.close-popup, span.close-popup").on("click",function(){$popup.remove(),ub.status.mascotPopupVisible=!1}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove(),ub.status.mascotPopupVisible=!1):$(this).data("status","visible")}),$('span[data-button="browse"]').on("click",function(){$("div.upload").fadeOut()}),$('span[data-button="upload"]').on("click",function(){$("div.upload").fadeIn()}),$("input#custom-artwork").change(function(){if(this.files&&this.files[0])ub.funcs.fileUpload(this.files[0],s,function(e){})}),$("span.ok_btn").on("click",function(){if("ok"===$(this).attr("data-status")){ub.current_material.settings.custom_artwork=window.uploaded_filename;var e=$('textarea[name="custom-artwork-additional-notes"]').val();s.customLogo=!0,s.customFilename=window.uploaded_filename,s.additionalNotes=e,$popup=$("div#primaryMascotPopup"),$popup.remove(),ub.funcs.changeMascotByID("1038",s,window.uploaded_filename,e)}}),$('span.groups_category_item[data-category-name="'+i.name+'"]').click(),$('span.category_item[data-category-name="'+n.name+'"]').click(),$('div.item[data-mascot-id="'+(void 0).id+'"]').addClass("active"),void 0!==s.customFilename&&0<s.customFilename.length&&($('textarea[name="custom-artwork-additional-notes"]').val(s.additionalNotes),$("img#preview").attr("src",s.customFilename),$('span[data-button="upload"]').trigger("click"))}}),$(document).ready(function(){function u(e,t,i,n){var a=(n-90)*Math.PI/180;return{x:e+i*Math.cos(a),y:t+i*Math.sin(a)}}ub.patterns={},ub.patterns.patternOffset={items:[{patternCode:"line_fade_body",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1e3,max:1100,min:890},{patternCode:"line_fade_body",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1e3,max:1e3,min:850},{patternCode:"line_fade_sleeve",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:900,max:1e3,min:800},{patternCode:"line_fade_sleeve",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1e3,max:1100,min:850},{patternCode:"halftone_fade_chest",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1100,max:1200,min:1e3},{patternCode:"halftone_fade_chest",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1100,max:1300,min:1e3},{patternCode:"halftone_fade_sleeve",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1100,max:1200,min:1e3},{patternCode:"halftone_fade_sleeve",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1100,max:1300,min:1e3},{patternCode:"line_fade_body",partCodes:["hood_panel"],blockPatterns:["Hoodie"],offSet:325,max:485,min:250},{patternCode:"nk_stripe",partCodes:["pocket_insert"],blockPatterns:["Hoodie"],offSet:1100,max:1250,min:1e3},{patternCode:"nk_stripe",partCodes:["pocket"],blockPatterns:["Hoodie"],offSet:1100,max:1250,min:1e3}],getOffset:function(t,i,n){var e=_.find(this.items,function(e){return e.patternCode===t&&_.contains(e.blockPatterns,i)&&_.contains(e.partCodes,n)});return void 0!==e?e:void 0}},ub.funcs.getPatternList=function(){var e=ub.current_material.material.brand,t=_.filter(ub.data.patterns.items,{active:"1",brand:e});return ub.data.smallerPatterns.usesSmallerPattern(ub.sport,ub.neckOption)&&(t=_.filter(t,function(e){return _.contains(e.blockPatternOptions,ub.neckOption)||"Blank"===e.name})),_.sortBy(t,"sortID")},ub.funcs.setMaterialOptionPatternColor=function(e,o,r,t){var i=o,n=r,a=t,s=_.find(a.layers,{layer_no:r.toString()}),l=ub.funcs.hexCodeToTintColor(i.hex_code),c=ub.funcs.getModifierByIndex(ub.current_part),u=ub.funcs.ui.getAllNames(c.name),p=ub.data.previewCanvas,d=ub.data.previewContainer[n];s.color=l,s.color_code=o.color_code,s.default_color=o.hex_code,delete d.filters[0],d.filters.push(new fabric.Image.filters.Tint({color:"#"+i.hex_code,opacity:1})),d.applyFilters(p.renderAll.bind(p)),p.renderAll(),setTimeout(function(){var t=p.toDataURL();_.each(a.layers,function(e){$("svg#svg_pcw"+e.layer_no+" > defs > pattern > image").attr("xlink:href",t)})},50),_.each(u,function(e){var t=e.toTitleCase(),i=ub.funcs.getMaterialOptionSettingsObject(t),n=_.find(i.pattern.pattern_obj.layers,{layer_no:r.toString()});n.color=l,n.color_code=o.color_code;var a=ub.funcs.getMaterialOptions(t);_.each(a,function(e){var t=e.name,i=ub.current_material.material.type,n=(ub.current_material.containers[i][t].containers,ub.current_material.containers[i][t].containers);_.each(["front","back","left","right"],function(e){n[e].container.children[r-1].tint=l})})})},ub.funcs.deActivatePatterns=function(){ub.funcs.clearPatternUI()},ub.funcs.updateColorLabel=function(e){$("div.patternColorNavigator > div.label").html(e)},ub.funcs.moveToNextPatternColor=function(e){var t=_.size(e.layers);if(ub.data.currentPatternLayer+=1,ub.data.currentPatternLayer>t&&(ub.data.currentPatternLayer=t),0<ub.data.currentPatternLayer){var i=$("div.pattern-color-wheel").first().width(),n=(ub.data.currentPatternLayer-1)*i;$("div.pattern-color-wheel-container").css("margin-left","-"+n+"px"),$("div.patternPreviewContainer").hide(),$("div.pattern-color-wheel-container").fadeIn()}var a=ub.funcs.getBaseColors(),o=_.find(e.layers,{layer_no:ub.data.currentPatternLayer.toString()}),r=util.padHex(o.color.toString(16),6),s=_.find(a,{hex_code:r});ub.funcs.updateColorLabel("COLOR "+ub.data.currentPatternLayer+" of "+e.layers.length),$("svg#svg_pcw"+ub.data.currentPatternLayer+' > path[data-color-id="'+s.id+'"]').trigger("click"),$("span.irs").hide()},ub.funcs.moveToPreviousPatternColor=function(e){_.size(e.layers);ub.data.currentPatternLayer-=1;var t=$("div.pattern-color-wheel").first().width(),i=(ub.data.currentPatternLayer-1)*t;$("div.pattern-color-wheel-container").css("margin-left","-"+i+"px"),ub.funcs.updateColorLabel("COLOR "+ub.data.currentPatternLayer+" of "+e.layers.length),ub.data.currentPatternLayer<1&&(ub.data.currentPatternLayer=0,$("div.pattern-color-wheel-container").hide(),$("div.patternPreviewContainer").fadeIn(),ub.funcs.updateColorLabel("EDIT COLORS"),$("span.irs").show())},ub.funcs.changePatternPosition=function(e,n){parseInt(n);var a,o,r="pattern_"+e,s="",t=ub.funcs.getApplicationViewObjects(e),l=_.find(ub.current_material.settings.applications,{code:e.toString()}),c=0;_.contains(ub.uiData.patternSliderRange.forCalibration,l.pattern_obj.name)&&(c=ub.uiData.patternSliderRange.adjustedStart),_.each(t,function(e){s=e.perspective+"_view";var t=ub.objects[s][r],i=0+parseInt(n);t.position.y=0+parseInt(n)+c,l.pattern_settings.position={x:0,y:i}}),void 0!==(a=ub.data.matchingIDs.getMatchingID(e))&&(_applicationSettings=ub.current_material.settings.applications[a],_applicationViewObjects=ub.funcs.getApplicationViewObjects(a),o=_.find(ub.current_material.settings.applications,{code:a.toString()}),_.each(_applicationViewObjects,function(e){var t=ub.objects[s][r],i=0+parseInt(n);s=e.perspective+"_view",r="pattern_"+a,t.position.y=0+parseInt(n)+c,o.pattern_settings.position={x:0,y:i}}))},ub.funcs.setupPatternsAndSmallColorPickerEvents=function(r){if($("span.patternThumb, span.pattern").unbind("click"),$("span.patternThumb, span.pattern").on("click",function(){ub.funcs.createPatternPopupApplications(r)}),void 0!==r.pattern_obj){if("Blank"===r.pattern_obj.name)$("input#pattern-slider").hide();else{var e,t=ub.uiData.patternSliderRange.starts;ub.uiData.patternSliderRange.adjustedStart;e=_.contains(ub.uiData.patternSliderRange.forCalibration,r.pattern_obj.name),void 0!==r.pattern_settings&&0<r.pattern_settings.length?(t=r.pattern_settings.position.y,e&&(t-=e)):t=r.pattern_settings.position.y,$("input#pattern-slider").show(),"function"==typeof $("#pattern-slider").destroy&&$("#pattern-slider").destroy(),$("#pattern-slider").ionRangeSlider({min:ub.uiData.patternSliderRange.min,max:ub.uiData.patternSliderRange.max,from:t,force_edges:!0,hide_min_max:!0,hide_from_to:!0,onChange:function(e){ub.funcs.changePatternPosition(r.code,e.from)}}),$("div#applicationUI span.irs").first().append('<span class="irs-min">Up</span><span class="irs-max">Down</span>')}var i=$('div.column1.applications.patterns > div.colorContainer > div.smallPickerContainer > span.colorItem[data-object-type="text-patterns"]'),s=ub.funcs.getPrimaryView(ub.current_material.settings.applications[r.code].application);ub.objects[s+"_view"]["pattern_"+r.application.id];i.unbind("click"),i.on("click",function(){$(this).data("object-type"),$(this).data("color-code");var e,t,i=$(this).data("layer-no"),n=$(this).data("color-code"),a=($(this).data("layer-name"),ub.funcs.getColorByColorCode(n)),o=_.find(r.pattern_obj.layers,{layer_no:i});o.default_color=a.hex_code,o.color_code=n,ub.funcs.changeActiveColorSmallColorPicker(i,n,a,"text-patterns"),_applicationSettings=ub.current_material.settings.applications[r.application.id],_applicationViewObjects=ub.funcs.getApplicationViewObjects(r.application.id),_.each(_applicationViewObjects,function(e){s=e.perspective,_primaryViewStr=s+"_view",_patternIDStr="pattern_"+r.application.id,_sprites=ub.objects[_primaryViewStr][_patternIDStr],(o=_sprites.children[i-1]).tint=parseInt(a.hex_code,16)}),void 0!==(e=ub.data.matchingIDs.getMatchingID(r.code))&&(_applicationSettings=ub.current_material.settings.applications[e],_applicationViewObjects=ub.funcs.getApplicationViewObjects(e),t=_.find(ub.current_material.settings.applications,{code:e.toString()}),_.each(_applicationViewObjects,function(e){s=e.perspective,_primaryViewStr=s+"_view",_patternIDStr="pattern_"+t.application.id,_sprites=ub.objects[_primaryViewStr][_patternIDStr],(o=_sprites.children[i-1]).tint=parseInt(a.hex_code,16)}))})}else $("input#pattern-slider").hide()},ub.funcs.updateTextPatternPanel=function(e){var i=e,t="/images/patterns/Blank/1.png",n="Blank",a="";return void 0!==i&&(n=i.name,t=i.icon,_.each(i.layers,function(e){var t=ub.funcs.getColorObjByHexCode(e.default_color);a+=ub.funcs.createSmallColorPickers(t.color_code,e.layer_no,e.layer_no,e.default_color,"text-patterns"),"Blank"===i.name&&(a="")})),ub.utilities.buildTemplateString("#m-patterns-panel",{thumbnail:t,name:n,colorString:a})},ub.funcs.updateManipulatorsPanel=function(e){return ub.utilities.buildTemplateString("#m-manipulator-panel",{x:"1",y:"2"})},ub.funcs.changePatternFromPopupApplications=function(e,t){e.code;var i=t.toString(),n=_.find(ub.data.patterns.items,{id:i.toString()}),a=ub.current_material.material.type,o=(ub.current_material.containers[a].application_containers,ub.funcs.getPrimaryView(e.application)),r=ub.objects[o+"_view"]["objects_"+e.code];_.each(n.layers,function(e){var t=ub.funcs.getTeamColorObjByIndex(e.team_color_id);void 0!==t&&(e.default_color=t.hex_code,e.color_code=t.color_code)});var s=_.find(ub.data.patterns.items,{id:t.toString()});if(e.pattern_obj=s,"object"==typeof e.pattern_obj){var l,c=$("div.column1.applications.patterns");void 0===e.pattern_settings&&(e.pattern_settings={rotation:0,scale:{x:1,y:1},position:{x:0,y:0},opacity:1}),$.ub.mvChangePattern(e.application,e.application.id,s,r),l=ub.funcs.updateTextPatternPanel(n),$.when(c.html(l)).then(ub.funcs.setupPatternsAndSmallColorPickerEvents(e))}},ub.funcs.prepBackendPatternSettings=function(t){return _.each(t.application.views,function(e){""!==e.application.appDefPattern&&void 0!==e.application.appDefPattern?(e.application.patternDefinition={id:e.application.appDefPattern,layers:JSON.parse(e.application.appPatternProperties)},""!==e.application.appDefPatternPosition&&void 0!==e.application.appDefPatternPosition?e.application.patternDefinition.position={x:0,y:parseInt(e.application.appDefPatternPosition)}:e.application.patternDefinition.position={x:0,y:0},t.withPattern=!0,t.patternID=e.application.patternDefinition.id,t.patternConfigFromBackend=e.application.patternDefinition):t.withPattern=!1}),t},ub.funcs.changePatternFromBackend=function(e,t,a){e.code;var i=t.toString(),n=_.find(ub.data.patterns.items,{id:i.toString()}),o=ub.current_material.material.type;ub.current_material.containers[o].application_containers;n=JSON.parse(JSON.stringify(n));var r=ub.funcs.getPrimaryView(e.application);ub.objects[r+"_view"]["objects_"+e.code];if(_.each(n.layers,function(e){var t=_.find(a.layers,{layer:e.layer_no.toString()});if(void 0!==t){var i=ub.funcs.getColorByColorCode(t.default_color);if(void 0!==i)e.default_color=i.hex_code,e.color_code=t.default_color;else{var n=ub.funcs.getTeamColorObjByIndex(e.team_color_id);void 0!==n&&(e.default_color=n.hex_code,e.color_code=n.color_code)}}}),e.pattern_obj=n,"object"==typeof e.pattern_obj){$("div.column1.applications.patterns");void 0===e.pattern_settings&&(e.pattern_settings={rotation:0,scale:{x:1,y:1},position:a.position,opacity:1})}},ub.funcs.createPatternPopupApplications=function(n){if(0===$("div#primaryPatternPopup").length){var e={label:"Choose Patterns: ",patterns:ub.funcs.getPatternList()},t=$("#m-pattern-popup").html(),i=Mustache.render(t,e);$("body").append(i)}ub.funcs.centerPatternPopup(),$popup=$("div#primaryPatternPopup"),$popup.fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("pattern-id");ub.funcs.changePatternFromPopupApplications(n,e),$popup.remove();var t=void 0;if(void 0!==(t=ub.data.matchingIDs.getMatchingID(n.code))){var i=_.find(ub.current_material.settings.applications,{code:t.toString()});ub.funcs.changePatternFromPopupApplications(i,e)}}),$("div.close-popup").on("click",function(){$popup.remove()}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove()):$(this).data("status","visible")})},ub.funcs.changePatternFromPopup=function(t,i){var n=i.toString(),a=_.find(ub.data.patterns.items,{id:n.toString()});_.each(a.layers,function(e){var t=ub.funcs.getTeamColorObjByIndex(e.team_color_id);void 0!==t&&(e.default_color=t.hex_code)});var o=ub.funcs.getModifierByIndex(ub.current_part),r=ub.funcs.ui.getAllNames(o.name);r[0].toTitleCase();_.each(r,function(t){var i=ub.funcs.getMaterialOptionSettingsObject(t.toTitleCase()),n=ub.funcs.getMaterialOptions(t.toTitleCase());materialOption=n[0],outputPatternObject=ub.funcs.convertPatternObjectForMaterialOption(a,materialOption),i.pattern=outputPatternObject,e=i,ub.generate_pattern(e.code,e.pattern.pattern_obj,e.pattern.opacity,e.pattern.position,e.pattern.rotation,e.pattern.scale)}),ub.funcs.clearPatternUI(),ub.funcs.activatePatterns()},ub.funcs.createPatternPopup=function(){if(0===$("div#primaryPatternPopup").length){var e={label:"Choose Patterns: ",patterns:ub.funcs.getPatternList()},t=$("#m-pattern-popup").html(),i=Mustache.render(t,e);$("body").append(i)}ub.funcs.centerPatternPopup(),$popup=$("div#primaryPatternPopup"),$popup.fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("pattern-id");ub.funcs.changePatternFromPopup(ub.current_part,e),$popup.remove()}),$("div.close-popup").on("click",function(){$popup.remove()}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove()):$(this).data("status","visible")})},ub.data.currentPatternLayer=0,ub.funcs.createPatternUI=function(e,s){var t=e,l=e.pattern_obj,n="<div id='patternUI'>",i=l.name,a=(l.icon,ub.current_material.settings.team_colors),c=ub.funcs.getBaseColors();n+="<div class='patternName'><glabel>Pattern Name: </label> <span class='value'>"+i+"</span></div>",n+='<div class="patternPreviewContainer"><canvas id="patternPreview" class="patternPreview"></canvas></div>',n+='<div class="pattern-color-wheel-container">',_.each(l.layers,function(e){var i=e.layer_no;n+='<div class="color-wheel pattern-color-wheel" id="pcw_'+i+'">',n+='<svg id="svg_pcw'+i+'" class="svg-color-wheel">',1,n+='<defs><pattern id="image" x="50" y="-50" patternUnits="userSpaceOnUse" height="300" width="300"><image x="0" y="0" width="300" height="350" xlink:href=""></image></pattern></defs>',n+='<circle class="preview" cx="250" cy="170" r="80"  fill="url(#image)" />',_.each(a,function(e,t){n+='<path class="growStroke arc-'+i+'" id="arc'+t+"-"+i+'" data-color-id="'+e.id+'" fill="none" stroke="#'+e.hex_code+'" stroke-width="50" />'}),n+="</svg>",n+="</div>"}),n+="</div>","none"===t.pattern_id&&"blank"===t.pattern_id||(n+="<div class='patternColorNavigator'><div class='left'><i class='fa fa-chevron-left' aria-hidden='true'></i></div><div class='label'>EDIT COLORS</div><div class='right'><i class='fa fa-chevron-right' aria-hidden='true'></i></div></div>"),n+="<br /><br />",n+='<input type="text" id="part-pattern-slider" value="" />',n+="</div>",$("div#randomFeedsUI").hide(),$(".modifier_main_container").append(n),ub.funcs.setupPartPatternSlider(e,s),_.each(l.layers,function(e){var o=e.layer_no,r=360/a.length;_.each(a,function(e,t){var i=t*r,n=i+r,a="arc"+t+"-"+o;document.getElementById(a).setAttribute("d",function(e,t,i,n,a){var o=u(e,t,i,a),r=u(e,t,i,n),s=a-n<=180?"0":"1";return["M",o.x,o.y,"A",i,i,0,s,0,r.x,r.y].join(" ")}(250,170,125,i,n)),$("path#arc"+t+"-"+o).on("click",function(){$("path.arc-"+o).attr("class","growStroke arc-"+o),$(this).attr("class","selectedStroke growStroke arc-"+o);var e=$(this).data("color-id"),t=_.find(c,{id:e.toString()});ub.funcs.setMaterialOptionPatternColor(s,t,o,l)})})});var o=_.size(l.layers),r=$("div.pattern-color-wheel").first().width();$("div.pattern-color-wheel-container").css("width",o*r+"px"),$("#patternUI").fadeIn(),ub.funcs.createPatternPreview(t)},ub.funcs.setupPartPatternSlider=function(e,t){var i=ub.funcs.getMaterialOptionSettingsObject(t.name);if("blank"===e.pattern_id)$("input#part-pattern-slider").hide();else{var n,a=ub.uiData.patternSliderRange.starts,o=(ub.uiData.patternSliderRange.adjustedStart,void 0),r=void 0,s=ub.uiData.patternOffset.getOffset(e.pattern_id,ub.config.blockPattern,i.code);n=_.contains(ub.uiData.patternSliderRange.forCalibration,e.name),void 0!==i.pattern&&0<i.pattern.length?(a=i.pattern.position.y,n&&(a-=n)):a=i.pattern.position.y,$("input#part-pattern-slider").show(),"function"==typeof $("#part-pattern-slider").destroy&&$("#part-pattern-slider").destroy(),void 0!==s&&void 0===i.pattern.dirty&&(a=s.offSet,ub.funcs.changePartPatternPosition(t.name,a,!0),r=s.max,o=s.min);ub.funcs.getBoundariesCurrentView(t.name);$("#part-pattern-slider").ionRangeSlider({min:void 0!==o?o:325,max:void 0!==r?r:760,from:a,force_edges:!1,hide_min_max:!0,hide_from_to:!0,onChange:function(e){ub.funcs.changePartPatternPosition(t.name,e.from)}}),$("div#patternUI span.irs").first().append('<span class="irs-min">Up</span><span class="irs-max">Down</span>')}},ub.data.previewContainer={},ub.data.previewCanvas={},ub.data.patternToolTip={},ub.funcs.getMaterialOptionPatternViewObjects=function(i){var n=[];return _.each(ub.views,function(e){var t=ub.objects[e+"_view"]["pattern_"+i.toCodeCase()];void 0!==t&&n.push(t)}),n},ub.funcs.getMaterialOptionViewObjects=function(i){var n=[];return _.each(ub.views,function(e){var t=ub.objects[e+"_view"][i];void 0!==t&&n.push(t)}),n},ub.funcs.changeMatchingPartPatternPosition=function(e,n,a,o){var t=void 0,r=void 0,i=void 0,s=!1;e.includes("Left")?(i=e.replace("Left ","Right "),s=!0):e.includes("Right")&&(i=e.replace("Right ","Left "),s=!0),s&&(t=ub.funcs.getMaterialOptionPatternViewObjects(i),r=ub.funcs.getMaterialOptionSettingsObject(i.toTitleCase()),void 0!==t&&void 0!==r&&_.each(t,function(e){var t=e,i=0+parseInt(n);t.position.y=0+parseInt(n)+o,r.pattern.position={x:r.pattern.position.x,y:i},void 0!==a&&(r.pattern.dirty=!0)}))},ub.funcs.changePartPatternPosition=function(e,n,a){parseInt(n);var t=ub.funcs.getMaterialOptionPatternViewObjects(e),o=ub.funcs.getMaterialOptionSettingsObject(e.toTitleCase());(e.includes("Left")||e.includes("Right"))&&ub.funcs.changeMatchingPartPatternPosition(e,n,a,0),_.each(t,function(e){var t=e,i=0+parseInt(n);t.position.y=0+parseInt(n)+0,o.pattern.position={x:o.pattern.position.x,y:i},void 0!==a&&(o.pattern.dirty=!0)})},ub.funcs.createPatternPreview=function(e){var o=e,t=e.pattern_obj,r=t.name,s=($("canvas#patternPreview"),new fabric.Canvas("patternPreview"));s.getContext("2d");(ub.data.previewCanvas=s).setHeight(250),s.setWidth(300),_.each(t.layers,function(e){var t=e.layer_no,i=(e.filename,e.color),n="#"+util.padHex(i.toString(16),6),a="/images/patterns/"+r+"/"+t+".png";fabric.Image.fromURL(a,function(e){(ub.data.previewContainer[t]=e).selectable=!0,e.lockMovementX=!0,e.lockMovementY=!0,e.hasControls=!1,s.add(e),"none"!==o.pattern_id&&"blank"!==o.pattern_id&&(e.filters.push(new fabric.Image.filters.Tint({color:n,opacity:1})),e.applyFilters(s.renderAll.bind(s))),e.hoverCursor="pointer",s.renderAll(),e.on("mousedown",function(){ub.funcs.createPatternPopup()}),e.on("mousemove",function(e){ub.data.patternToolTip.opacity=1,ub.data.patternToolTip.bringToFront()})})});var i=new fabric.Rect({fill:"#333333",scaleY:.5,originX:"center",originY:"center",rx:5,ry:5,width:250,height:60,opacity:.5}),n=new fabric.Text("Click to Change Pattern",{originX:"center",originY:"center",fontFamily:"Roboto",left:0,top:0,fontSize:16,fill:"#ffffff",padding:10}),a=new fabric.Group([n,i],{left:28,top:200});a.selectable=!0,a.hasControls=!1,a.lockMovementX=!0,a.lockMovementY=!0,a.hasBorders=!1,a.hoverCursor="pointer",a.on("mousedown",function(){ub.funcs.createPatternPopup()}),n.bringToFront(),ub.data.patternToolTip=a,s.add(ub.data.patternToolTip),ub.data.patternToolTip.bringToFront(),ub.data.currentPatternLayer=0,$("div.patternColorNavigator > div.left").on("click",function(){_.isEqual(t.name,"Blank")||_.isEqual(t.pattern_id,33)?ub.funcs.activateColorPickers():ub.funcs.moveToPreviousPatternColor(t)}),$("div.patternColorNavigator > div.right").on("click",function(){_.isEqual(t.name,"Blank")||_.isEqual(t.pattern_id,33)?ub.funcs.activateColorPickers():ub.funcs.moveToNextPatternColor(t)}),$("canvas.upper-canvas").hover(function(){},function(){ub.data.patternToolTip.opacity=0,ub.data.patternToolTip.sendToBack()})},ub.funcs.clearPatternUI=function(){$("div#patternUI").remove()},ub.funcs.activatePatterns=function(){var e=ub.funcs.getModifierByIndex(ub.current_part);if(void 0===e)return!1;ub.funcs.deactivateMoveTool();var t=ub.funcs.ui.getAllNames(e.name)[0].toTitleCase(),i=ub.funcs.getMaterialOptionSettingsObject(t),n=ub.funcs.getMaterialOptions(t);if(1!==i.has_pattern)return!1;ub.funcs.deActivateColorPickers(),ub.funcs.deActivateApplications(),ub.funcs.activeStyle("patterns");var a=n[0],o=i.pattern;return void 0===o?!1:(ub.funcs.createPatternUI(o,a),"blank"!==o.pattern_id&&"none"!==o.pattern_id)},ub.funcs.cleanPatternProperties=function(e){var t=e;return'"'===t.substring(0,1)&&(t=t.substring(1,t.length)),'"'===t.substring(t.length-1,t.length)&&(t=t.substring(0,t.length-1)),t},ub.funcs.translateAngle=function(e){var t=e/360;return t*=619,t/=100},ub.funcs.getPatternObjectFromMaterialOption=function(e){var t=ub.funcs.cleanPatternProperties(e.pattern_properties),i=JSON.parse(t);ub.funcs.translateAngle(e.angle);if(null!==e.pattern_id){if("33"===e.pattern_id)return ub.funcs.getPatternObjectFromMaterialOptionBlank(e);if(void 0!==(a=ub.funcs.getPatternByID(e.pattern_id))){var n=e,a={pattern_id:a.code,scale:0,rotation:ub.funcs.translateAngle(n.angle),opacity:0,position:{x:0+ub.offset.x,y:0+ub.offset.y},pattern_obj:{pattern_id:a.id,active:a.active,name:a.name,code:a.code,icon:a.icon,layers:[],scale:0,rotation:0,opacity:0,position:{x:0+ub.offset.x,y:0+ub.offset.y}}};return _.each(i,function(e){var t=ub.funcs.getColorByColorCode(e.default_color),i={default_color:t.hex_code,color_code:ub.funcs.getColorObjByHexCode(t.hex_code).color_code,layer_no:e.layer,team_color_id:e.team_color_id,filename:e.file_path,color:parseInt(t.hex_code,16),container_position:{x:248+.9*ub.offset.x,y:308+3.3*ub.offset.y},container_opacity:1,container_rotation:ub.funcs.translateAngle(n.angle),container_scale:{x:1,y:1}};a.pattern_obj.layers.push(i)}),a}}},ub.funcs.getPatternObjectFromMaterialOptionBlank=function(e){ub.funcs.translateAngle(e.angle);e.pattern_id="33","team_stores"===ub.config.asset_target&&(e.pattern_id="286");var t=ub.funcs.getPatternByID(e.pattern_id);void 0===t&&ub.utilities.error("Pattern Object with id: "+e.pattern_id+" not found!");var i=e,n={pattern_id:t.code,scale:0,rotation:ub.funcs.translateAngle(i.angle),opacity:0,position:{x:0+ub.offset.x,y:0+ub.offset.y},pattern_obj:{pattern_id:t.id,active:t.active,name:t.name,code:t.code,icon:t.icon,layers:[],scale:0,rotation:0,opacity:0,position:{x:0+ub.offset.x,y:0+ub.offset.y}}},a=ub.funcs.getColorByColorCode("W"),o={default_color:a.hex_code,color_code:ub.funcs.getColorObjByHexCode(a.hex_code).color_code,layer_no:"1",team_color_id:"1",filename:t.layers[0].filename,color:parseInt(a.hex_code,16),container_position:{x:248+.9*ub.offset.x,y:308+3.3*ub.offset.y},container_opacity:1,container_rotation:ub.funcs.translateAngle(i.angle),container_scale:{x:1,y:1}};return n.pattern_obj.layers.push(o),n},ub.funcs.convertPatternObjectForMaterialOption=function(e,t){ub.funcs.translateAngle(t.angle);if(null!==t.pattern_id){var n=t,a={pattern_id:e.code,scale:0,rotation:ub.funcs.translateAngle(n.angle),opacity:0,position:{x:0+ub.offset.x,y:0+ub.offset.y},pattern_obj:{pattern_id:e.id,active:e.active,name:e.name,code:e.code,icon:e.icon,layers:[],scale:0,rotation:0,opacity:0,position:{x:0+ub.offset.x,y:0+ub.offset.y}}};return _.each(e.layers,function(e){var t=e.default_color,i={default_color:t,color_code:ub.funcs.getColorObjByHexCode(t).color_code,layer_no:e.layer_no.toString(),filename:e.filename,team_color_id:e.team_color_id,color:parseInt(t,16),container_position:{x:248+.9*ub.offset.x,y:308+3.3*ub.offset.y},container_opacity:1,container_rotation:ub.funcs.translateAngle(n.angle),container_scale:{x:1,y:1}};a.pattern_obj.layers.push(i)}),a}},ub.funcs.getPatternByID=function(e){return _.find(ub.data.patterns.items,{id:e.toString()})},ub.funcs.centerPatternPopup=function(){if($popup=$("div#primaryPatternPopup, div#primaryMascotPopup, div.feedback-form, div.free-feedback-form, div.save-design, div#primaryFontPopup, div#primaryAccentPopup, div#primaryQuickRegistrationPopup, div#primaryMessagePopup, div#primaryTailSweepPopup, div#primaryEmbellishmentPopup"),$popup.fadeIn(),0!==$popup.length){var e=window.innerWidth,t=window.innerHeight,i=(e-$popup.width())/2,n=(t-$popup.height())/2;$popup.css({top:n,left:i});var a=$popup;a.unbind("mousedown"),a.mousedown(ub.funcs.handle_mousedown)}}}),$(document).ready(function(){ub.funcs.isSocks=function(){return void 0!==ub.current_material.material&&(ub.funcs.isCurrentSport("Crew Socks (Apparel)")||ub.funcs.isCurrentSport("Socks (Apparel)"))},ub.funcs.isCurrentOption=function(e){return ub.current_material.material.neck_option===e},ub.funcs.isCurrentSport=function(e){return ub.current_material.material.uniform_category===e},ub.funcs.isCurrentType=function(e){return ub.current_material.material.type===e},ub.funcs.usesCustomScaleValid=function(){return"sublimated"===ub.config.uniform_application_type||"knitted"===ub.config.uniform_application_type},ub.funcs.setupHiddenBody=function(e){return ub.config.hiddenBody=e},ub.funcs.update_mascot_list=function(){var e=$("div.mascot-container"),o=ub.data.mascots.items;_.each(e,function(e){var t=$(e),i=$("#mascot-list").html(),n={element_id:t.data("id"),mascot_set:o},a=Mustache.render(i,n);t.html(a),$("a.mascot_picker").on("click",function(e){$link=$(e.target);var t=$link.data("application-id"),i=$link.data("id");ub.ui.drops[t].close();var n=_.find(o,{id:i}),a=_.find(ub.data.applications_transformed_one_dimensional,{id:t.toString()});ub.funcs.removeUIHandles(),ub.funcs.update_mascots_picker(a.id,n),ub.funcs.update_application_mascot(a,n)})})},ub.funcs.createLocationSprite=function(e){var t,i=ub.pixi.new_sprite("/images/main-ui/outer-circle.png"),n=ub.pixi.new_sprite("/images/main-ui/inner-circle.png"),a=new PIXI.Container;ub.current_material.settings.team_colors[0];return i.anchor.set(.5,.5),i.ubName="Marker",i.alpha=.5,a.addChild(i),n.anchor.set(.5,.5),n.ubName="Circle",a.addChild(n),(t=new PIXI.Text(e.toString(),{font:"bold 30px Arial",fill:parseInt("ffffff",16),align:"center"})).ubName="Code Sprite",t.anchor.set(.5,.5),a.addChild(t),a},ub.funcs.update_mascots_picker=function(n,e){var t=$('div.mascot-controls[data-id="'+n+'"]'),i=$("#mascot-controls").html(),a={application_id:n},o=Mustache.render(i,a);t.html(o);var r=_.find(ub.data.applications_transformed_one_dimensional,{id:n});$('input[type=radio][name=mascot_sizes][data-id="'+n+'"]').change(function(){var i=_.find(ub.data.mascotSizes.items,{size:this.value});_.each(r.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+n];t.scale={x:i.scale,y:i.scale},ub.current_material.settings.applications[n].scale=t.scale})})},ub.funcs.lineDistance=function(e,t){var i=0,n=0;return 0<(i=t.x-e.x)?i*=i:i=1,0<(n=t.y-e.y)?n*=n:n=1,Math.sqrt(i+n)},ub.funcs.angleRadians=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},ub.funcs.objectFocusRotation=function(e){var t=e.worldTransform.tx-ub[ub.active_view+"_view"].x,i=ub.mouse.x-ub[ub.active_view+"_view"].x,n=e.worldTransform.ty-ub[ub.active_view+"_view"].y,a=i-t,o=ub.mouse.y-ub[ub.active_view+"_view"].y-n,r=(Math.atan2(o,a),vec2.create());r[0]=t,r[1]=n;var s=vec2.create();return s[0]=a,s[1]=o,v1=vec2.normalize(vec2.create(),r),v2=vec2.normalize(vec2.create(),s),vAngle=Math.atan2(v2[1],v2[0])-Math.atan2(v1[1],v1[0]),vAngle},ub.funcs.removeUIHandles=function(){_.each(ub.data.views,function(e){var t=ub.objects[e+"_view"];e=ub[e+"_view"];if("object"==typeof t.ui_handles){var i=t.ui_handles.applicationID;$('button[data-action="identify"][data-id='+i+"]").click(),e.removeChild(t.ui_handles),delete t.ui_handles}})},ub.funcs.update_application_mascot=function(e,t,i){var n=ub.current_material.settings;e.id,t.id;if(void 0!==n.applications[e.id])n.applications[e.id].scale;var a=n.applications[e.id],o=(a.mascot,ub[e.perspective+"_view"],ub.objects[e.perspective+"_view"],{application:e,mascot:t,fromChangeColor:void 0!==i}),r=ub.funcs.renderApplication($.ub.create_mascot,o,e.id),s=ub.current_material.material.type,l=ub.current_material.containers[s].application_containers;l[e.id]={},l[e.id].object={sprite:r};var c=a.status;void 0===a.status&&(c="on"),ub.funcs.toggleApplication(e.id,c)},ub.funcs.updateScaleViaSlider=function(n,e){var t=100;"mascot"!==n.application_type&&(t=10),scaleSetting={x:3*e/t,y:3*e/t};var i=(e/100).toString().substr(0,4);"1"!==i&&"0"!==i||(i+=".00"),$("span.custom_text.scale").html(i);var a=n;_.each(n.application.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+a.code],i=1;void 0!==e.application.flip&&(i=1===e.application.flip?-1:1),t.scale={x:scaleSetting.x*i,y:scaleSetting.y},e.application.scale={x:scaleSetting.x*i,y:scaleSetting.y},"mascot"!==n.application_type&&(a.actualPixelSize=t.children[0].height*scaleSetting.x,a.estimatedMeasure=(a.actualPixelSize-49)/16,a.estimatedMeasure=a.estimatedMeasure/2+1)}),ub.funcs.activateMoveTool(a.code)},ub.funcs.updatePositionViaSlider=function(e,t,i){var n=ub.dimensions.width;"y"===i&&(n=ub.dimensions.height);var a,o,r=t/100*n,s=e,l=ub.funcs.getPrimaryViewObject(e.application);o=ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand)?(a=ub.objects[ub.active_view+"_view"]["objects_"+s.code].position[i]-r,ub.objects[ub.active_view+"_view"]["objects_"+s.code].position[i]-r):(a=l.application.center[i]-r,l.application.pivot[i]-r),_.each(e.application.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+s.code];t.position[i]-=a,e.application.center[i]-=a,e.application.pivot[i]-=o,ub.objects[e.perspective+"_view"]["locations_"+s.code].position=t.position}),ub.funcs.updateCoordinates(e),ub.funcs.activateMoveTool(s.code)},ub.dragNonce={applicationID:"",state:!1},ub.funcs.createDraggable=function(m,r,a,e){var b=r,g=ub.config.features.isOn("uniforms","tackeTwillCustomSizes");ub.config.isFeatureOn("ui","draggable_applications")&&void 0!==m&&(m.draggable({manager:ub.dragAndDropManager}),m.mouseup=m.touchend=function(e){ub.dragNonce={applicationID:r.code,state:!0},m.snapped||$("#chkSnap").is(":checked"),ub.status.manipulatorDown=!1,this.data=e,m.dragging=void 0,_.each(b.application.views,function(e){if(1!==e.application.isPrimary){if("Move Tool"===m.ubName){var t=m.downX-m.x,i=m.downY-m.y;e.application.center.x-=parseFloat(t)-parseFloat(0),e.application.center.y-=parseFloat(i)-parseFloat(0);var n=ub.objects[e.perspective+"_view"]["objects_"+b.code];n.position.x-=t,n.position.y-=i,ub.objects[e.perspective+"_view"]["locations_"+b.code].position=n.position}if("Rotate Tool"===m.ubName){ub.objects[e.perspective+"_view"].move_tool,ub.objects[e.perspective+"_view"].rotate_tool;(a=ub.objects[e.perspective+"_view"]["objects_"+r.code]).rotation=m.angleRadians,e.application.rotation=m.angleRadians/Math.PI*180}if("Scale Tool"===m.ubName){var a=ub.objects[e.perspective+"_view"]["objects_"+r.code],o=1;void 0!==e.application.flip&&(o=1===e.application.flip?-1:1),a.scale={x:m.scaleSetting.x*o,y:m.scaleSetting.y},e.application.scale={x:m.scaleSetting.x*o,y:m.scaleSetting.y},g&&(ub.funcs.activateBestFitOption(),b.custom_size_type="bestfit")}}}),ub.funcs.activateMoveTool(r.code),setTimeout(function(){ub.dragNonce={applicationID:"",state:!1}},500)},m.mousedown=m.touchstart=function(e){if(m.oldX=m.x,m.oldY=m.y,m.downX=m.x,m.downY=m.y,m.snapped=!1,m.dragging=!0,ub.status.manipulatorDown=!0,"Delete Tool"!==m.ubName)if("Reset Tool"!==m.ubName){var i=[];_.each(b.application.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+b.code];t.oldScaleX=t.scale.x,t.oldScaleY=t.scale.y,t.oldPositionX=t.position.x,t.oldPositionY=t.position.y,t.oldRotation=t.rotation,i.push({perspective:e.perspective,applicationCode:b.code,scale:{x:t.oldScaleX,y:t.oldScaleY},position:{x:t.oldPositionX,y:t.oldPositionY},rotation:t.oldRotation})}),ub.funcs.pushOldState("position, scale, rotation change","application",b,i)}else"Reset Tool"===m.ubName&&_.each(b.application.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+b.code];void 0!==t.oldPositionX&&(void 0===e.application.scale&&(e.application.scale={x:1,y:1}),e.application.scale.x=t.scale.x=t.oldScaleX,e.application.scale.y=t.scale.y=t.oldScaleY,e.application.center.x=t.position.x=t.oldPositionX,e.application.center.y=t.position.y=t.oldPositionY,e.application.rotation=t.rotation=t.oldRotation)}),ub.funcs.activateMoveTool(r.code);else ub.funcs.deleteLocation(b.code)},m.mousemove=m.mousemove=function(e){this.interactionData=e;(t=this.interactionData.data).global.x,t.global.y;m.dragging&&(m.oldX=m.x,m.oldY=m.y,_.each(b.application.views,function(e){if(0!==e.application.isPrimary){var t=ub.objects[e.perspective+"_view"].move_tool,i=ub.objects[e.perspective+"_view"].rotate_tool,n=ub.objects[e.perspective+"_view"].scale_tool,a=ub.objects[e.perspective+"_view"].reset_tool,o=ub.objects[e.perspective+"_view"].center_tool,r=ub.objects[e.perspective+"_view"].delete_tool;if("Move Tool"===m.ubName){void(i.alpha=0)!==n&&(n.alpha=0),"sublimated"!==ub.config.uniform_application_type&&"knitted"!==ub.config.uniform_application_type||(r.alpha=0),a.alpha=0,b.dirty=!0;var s=ub.objects[e.perspective+"_view"]["objects_"+b.code];s.position.x=m.x,s.position.y=m.y,e.application.center.x=parseFloat(s.position.x)-parseFloat(0),e.application.center.y=parseFloat(s.position.y)-parseFloat(0),ub.objects[e.perspective+"_view"].rotate_tool.position.x=m.x,ub.objects[e.perspective+"_view"].rotate_tool.position.y=m.y,"sublimated"===ub.config.uniform_application_type&&(ub.objects[e.perspective+"_view"].scale_tool.position.x=m.x,ub.objects[e.perspective+"_view"].scale_tool.position.y=m.y);var l=ub.objects[e.perspective+"_view"].manipulatorTool;void 0!==l&&(l.position.x=m.x,l.position.y=m.y),ub.objects[e.perspective+"_view"]["locations_"+b.code].position=s.position,ub.funcs.updateCoordinates(b),"tackle_twill"===ub.config.uniform_application_type&&ub.updateDebugPanelInfo("The Move Tool / Rotate Tool for Tackle Twill uniforms is enabled so that you can make minute adjustments and corrections to the uniforms application, if you want a full customized design please use a sublimated style."),ub.updateApplicationSpecsPanel(b.code)}if("Rotate Tool"===m.ubName){void(t.alpha=0)!==n&&(n.alpha=0),"sublimated"!==ub.config.uniform_application_type&&"knitted"!==ub.config.uniform_application_type||(r.alpha=0),a.alpha=0;var c=ub.objects[e.perspective+"_view"]["objects_"+b.code],u=ub.funcs.objectFocusRotation(c);c.rotation=u,m.angleRadians=u,e.application.rotation=u/Math.PI*180,t.rotation=u,"sublimated"===ub.config.uniform_application_type&&(n.rotation=u),ub.objects[e.perspective+"_view"].manipulatorTool.rotation=u,"tackle_twill"===ub.config.uniform_application_type&&ub.updateDebugPanelInfo("The Move Tool / Rotate Tool for Tackle Twill uniforms is enabled so that you can make minute adjustments and corrections to the uniforms application, if you want a full customized design please use a sublimated style."),ub.updateApplicationSpecsPanel(b.code)}if("Scale Tool"===m.ubName){i.alpha=0,t.alpha=0,a.alpha=0,"sublimated"!==ub.config.uniform_application_type&&"knitted"!==ub.config.uniform_application_type||(r.alpha=0);c=ub.objects[e.perspective+"_view"]["objects_"+b.code],u=ub.funcs.angleRadians(t.position,i.position);var p=b.application_type,d=ub.funcs.lineDistance(o.position,n.position);percentage=d/100,ub.mascotPreviousSize=percentage;var f,h=1;void 0!==e.application.flip&&(h=1===e.application.flip?-1:1),c.scale={x:percentage*h,y:percentage},e.application.scale={x:c.scale.x*h,y:c.scale.y},m.scaleSetting={x:c.scale.x*h,y:c.scale.y},ub.appObj=c,ub.appObjSettings=e.application,ub.updateApplicationSpecsPanel(b.code),"mascot"!==p?(f=10*c.scale.x/3,f/=100):(f=10*c.scale.x/3,f/=10),"1"!==(f=f.toString().substr(0,4))&&"0"!==f||(f+=".00"),$("span.custom_text.scale").html(f),ub.updateApplicationSpecsPanel(b.code),g&&(ub.funcs.activateBestFitOption(),b.custom_size_type="bestfit")}}}));var t=this.interactionData.data;window.sprite=m;var i,n={x:t.global.x,y:t.global.y};ub.config.isFeatureOn("ui","hotspot_applications")&&("Move Tool"!==m.ubName&&"Rotate Tool"!==m.ubName&&"Scale Tool"!==m.ubName&&"Reset Tool"!==m.ubName&&"Delete Tool"!==m.ubName||"function"==typeof(i=0===m.children.length?m:_.last(m.children)).containsPoint&&(i.containsPoint(n)?(m.zIndex=-500,ub.updateLayersOrder(a),m.tint=parseInt("ffffff",16),ub.activeApplication=r.code,"Move Tool"===m.ubName&&(ub.tools.activeTool.moveTool=!0),"Rotate Tool"===m.ubName&&(ub.tools.activeTool.rotateTool=!0),"Scale Tool"===m.ubName&&(ub.tools.activeTool.scaleTool=!0),"Reset Tool"===m.ubName&&(ub.tools.activeTool.resetTool=!0),"Delete Tool"===m.ubName&&(ub.tools.activeTool.deleteTool=!0)):(ub.updateLayersOrder(a),m.tint=parseInt("888888",16),ub.activeApplication=void 0,"Move Tool"===m.ubName&&(ub.tools.activeTool.moveTool=!1),"Rotate Tool"===m.ubName&&(ub.tools.activeTool.rotateTool=!1),"Scale Tool"===m.ubName&&(ub.tools.activeTool.scaleTool=!1),"Reset Tool"===m.ubName&&(ub.tools.activeTool.resetTool=!1),"Delete Tool"===m.ubName&&(ub.tools.activeTool.deleteTool=!1))))})},ub.funcs.getViewsOfID=function(e){return ub.data.applications_transformed.Body[e].views},ub.funcs.getSpritesOfID=function(i){var e=ub.funcs.getViewsOfID(i),n=[];return _.each(e,function(e){var t=e.perspective+"_view";void 0!==ub.objects[t]["objects_"+i]&&n.push(ub.objects[t]["objects_"+i])}),n},ub.funcs.createInteractiveUI=function(b,g,v,e){var y=_.find(e.children,{ubName:"rotation_point"}),w=_.find(e.children,{ubName:"move_point"});b.draggable({manager:ub.dragAndDropManager}),b.mouseover=function(e){var t="";"move"===v&&(t="url("+ub.config.host+"/images/sidebar/move.png) 8 8, move",w.tint=16711680),"rotate"===v&&(t="url("+ub.config.host+"/images/sidebar/rotate.png) 8 8,auto",y.tint=16711680),$("body").css("cursor",t)},b.mouseout=function(e){"move"===v&&(w.tint=16777215),"rotate"===v&&(y.tint=16777215),$("body").css("cursor","auto")},b.mouseup=b.touchend=function(e){!b.snapped&&$("#chkSnap").is(":checked")&&(b.position=new PIXI.Point(b.oldX,b.oldY)),this.data=e,this.dragging=!0},b.mousedown=b.touchstart=function(e){this.data=e,b.oldX=b.x,b.oldY=b.y,b.snapped=!1,this.dragging=!0},b.mousemove=b.mousemove=function(e){if(this.interactionData=e,this.dragging){var t=g.position.x*ub.dimensions.width,i=g.position.y*ub.dimensions.height,n=new PIXI.Point(t,i),a=new PIXI.Point(b.x,b.y),o=ub.funcs.lineDistance(n,a),r=ub.objects[g.perspective+"_view"]["objects_"+g.id];if(void 0===r)return;var s=ub.current_material.settings.applications[g.id];if("move"===v){original_x=ub.dimensions.width*g.position.x,original_y=ub.dimensions.height*g.position.y;var l=new PIXI.Point(original_x,original_y),c=Math.abs(ub.funcs.lineDistance(l,b.position)),u=500;if(ub.config.isFeatureOn("ui","drag_limits")&&(u=30),u<=c)return void(w.position=b.position);var p=ub.funcs.getSpritesOfID(g.id);_.each(p,function(e){}),r.position=b.position,s.position=b.position;var d=y.x+(b.x-b.oldX),f=y.y+(b.y-b.oldY);y.position=new PIXI.Point(d,f),b.oldX=b.x,b.oldY=b.y}if("rotate"===v){var h=ub.funcs.angleRadians(w.position,y.position);r.rotation=h,s.rotation=r.rotation;o=ub.funcs.lineDistance(w.position,y.position);percentage=o/100;var m=s.type;"logo"!==m&&"mascot"!==m&&"image"!==m&&!ub.config.isFeatureOn("ui","scale_text")||(r.scale.set(percentage,percentage),s.scale=r.scale)}if($("#chkSnap").is(":checked")){if(o<50)return b.position=new PIXI.Point(t,i),b.oldX=t,b.oldY=i,b.snapped=!0,this.dragging=!1;b.snapped=!1}}}},ub.funcs.createInteractable=function(b,g,v){b.mouseover=function(e){var t="";"move"===v&&(t="url("+ub.config.host+"/images/sidebar/move.png) 8 8,move",move_point.tint=16711680),"rotate"===v&&(t="url("+ub.config.host+"/images/sidebar/rotate.png) 8 8,auto",rotation_point.tint=16711680),$("body").css("cursor",t)},b.mouseout=function(e){"move"===v&&(move_point.tint=16777215),"rotate"===v&&(rotation_point.tint=16777215),$("body").css("cursor","auto")},b.mouseup=b.touchend=function(e){!b.snapped&&$("#chkSnap").is(":checked")&&(b.position=new PIXI.Point(b.oldX,b.oldY)),this.data=e,this.dragging=!0},b.mousedown=b.touchstart=function(e){this.data=e,b.oldX=b.x,b.oldY=b.y,b.snapped=!1,this.dragging=!0},b.mousemove=b.mousemove=function(e){if(this.interactionData=e,this.dragging){var t=g.position.x*ub.dimensions.width,i=g.position.y*ub.dimensions.height,n=new PIXI.Point(t,i),a=new PIXI.Point(b.x,b.y),o=ub.funcs.lineDistance(n,a),r=ub.objects[g.perspective+"_view"]["objects_"+g.id];if(void 0===r)return;var s=ub.current_material.settings.applications[g.id];if("move"===v){original_x=ub.dimensions.width*g.position.x,original_y=ub.dimensions.height*g.position.y;var l=new PIXI.Point(original_x,original_y),c=Math.abs(ub.funcs.lineDistance(l,b.position)),u=500;if(ub.config.isFeatureOn("ui","drag_limits")&&(u=30),u<=c)return void(move_point.position=b.position);var p=ub.funcs.getSpritesOfID(g.id);_.each(p,function(e){}),r.position=b.position,s.position=b.position;var d=rotation_point.x+(b.x-b.oldX),f=rotation_point.y+(b.y-b.oldY);rotation_point.position=new PIXI.Point(d,f),b.oldX=b.x,b.oldY=b.y}if("rotate"===v){var h=ub.funcs.angleRadians(move_point.position,rotation_point.position);r.rotation=h,s.rotation=r.rotation;o=ub.funcs.lineDistance(move_point.position,rotation_point.position);percentage=o/100;var m=s.type;"logo"!==m&&"mascot"!==m&&"image"!==m&&!ub.config.isFeatureOn("ui","scale_text")||(r.scale.set(percentage,percentage),s.scale=r.scale)}if($("#chkSnap").is(":checked")){if(o<50)return b.position=new PIXI.Point(t,i),b.oldX=t,b.oldY=i,b.snapped=!0,this.dragging=!1;b.snapped=!1}}}},ub.data.applicationAccumulator=0,ub.funcs.setPointer=function(){0<ub.data.applicationAccumulator?icon="pointer":icon="auto",$("body").css("cursor",icon)},ub.funcs.getBaseSprite=function(e){return _.find(e.children,{ubName:"Base Color"})},ub.funcs.createClickable=function(o,t,e,i){ub.config.isFeatureOn("ui","hotspots")&&("mascot"!==t.type&&"logo"!==t.type?baseSprite=ub.funcs.getBaseSprite(o):(baseSprite=o.children[0],baseSprite.oldTint=baseSprite.tint),o.spriteType=i,o.draggable({manager:ub.dragAndDropManager}),o.mouseup=o.touchend=function(e){},$("body").mouseup(function(){if(!ub.funcs.popupTest()&&!ub.status.fullView.getStatus()&&!(ub.showLocation||ub.dragNonce.state&&ub.dragNonce.applicationID!==e)){if(o.ubHover){var e=o.name.replace("objects_","");o.ubHover=!1,"mascot"!==t.type&&"logo"!==t.type?ub.funcs.activateApplications(e):ub.funcs.activateMascots(e)}o.ubHover=!1}}),o.mousedown=o.touchstart=function(e){if(!ub.funcs.popupTest()&&!ub.status.fullView.getStatus()&&!ub.showLocation&&void 0!==this.interactionData){var t=this.interactionData.data;t.global.x,t.global.y}},o.mousemove=o.mousemove=function(e){if(!ub.funcs.popupTest()&&!ub.status.fullView.getStatus()&&!ub.zoom){var t=e.data;window.sprite=o;var i,n={x:t.global.x,y:t.global.y};if("function"==typeof(i=0===o.children.length?o:_.last(o.children)).containsPoint){var a=_.size(ub.current_material.settings.applications);if(i.containsPoint(n)){if("object"!=typeof baseSprite)return;if(ub.zoom)return;o.ubHover=!0,ub.data.applicationAccumulator=a,ub.funcs.setPointer()}else{if("object"!=typeof baseSprite)return;o.ubHover=!1,ub.data.applicationAccumulator-=1,ub.funcs.setPointer()}}}})},ub.funcs.create_sprite=function(e){return ub.pixi.new_sprite("/images/misc/swoosh.png")},ub.funcs.getApplicationMatOption=function(i){var n=void 0;_.each(ub.data.applications_transformed,function(t){_.each(t,function(e){i===e.id&&(n=t.name)})});var e=ub.funcs.getSettingsObject(i);return void 0===(n=e.application.layer)&&(70<parseInt(i)?n="Body":util.error("Material Option for Application ID "+i+" Not Found!")),n},ub.funcs.getApplicationSettingsByView=function(e,t){var i=ub.funcs.getApplicationSettings(e);return _.find(i.application.views,{perspective:t})},ub.funcs.setProperties=function(e,t,i,n,a,o){if(void 0!==ub.objects[t+"_view"]["objects_"+e]){var r=ub.objects[t+"_view"]["objects_"+e];if(r.position.x=a,r.position.y=o,r.scale.x=i,r.scale.y=n,"32"===e||"10"===e){var s=ub.objects[t+"_view"].objects_33;s.position.x=a,s.position.y=o;var l=ub.funcs.getApplicationSettingsByView(e,t);if(void 0!==l){l.application.center;var c,u,p=parseFloat(a)-l.application.center.x,d=parseFloat(o)-l.application.center.y;"32"===e?c="33":"9"===e&&(c="10"),u="left"===t?"right":t;var f=ub.funcs.getApplicationSettingsByView(c,u).application.center;s.position.x=f.x,s.position.y=f.y,0<p?s.position.x+=-1*p:a<0&&(s.position.x+=p*p),s.position.y+=d}s.scale.x=i,s.scale.y=n}}},ub.funcs.getProperties=function(e,t){var i=void 0;return void 0!==ub.objects[t+"_view"]["objects_"+e]&&(i=ub.objects[t+"_view"]["objects_"+e]),void 0===i&&console.warn("Location "+e+" in perspective "+t+" not found."),i},ub.funcs.getSettingsObject=function(e){return ub.current_material.settings.applications[e]},ub.funcs.pullUp=function(e,t,i){void 0!==t&&(e.position.y=t.y+i)},ub.funcs.oneInchPushDownMascotsPant=function(i){var e,t,n=ub.current_material.material.uniform_category,a=(ub.current_material.material.pant,ub.current_material.material.neck_option),o=parseInt(i),r=void 0;t=ub.current_material.settings.applications[o],"Football"!==n&&"Wrestling"!==n&&"mascot"===t.type&&void 0!==(e=ub.data.mascotOffsetsPant.getSize("baseball",a,o,parseInt(t.size)))&&(r=e.yAdjustment,_.each(ub.views,function(e){var t=ub.objects[e+"_view"]["objects_"+i];void 0!==t&&(t.position.y+=r)}))},ub.funcs.oneInchPullUpMascots=function(i){var n,e,t=ub.current_material.material.uniform_category,a=ub.data.sportAliases.getAlias(t),o=parseInt(i);"tech-tee"!==a.alias&&"compression"!==a.alias||_.contains([1,5,6],o)&&"mascot"===(e=ub.current_material.settings.applications[o]).application_type&&void 0!==e&&void 0!==(n=ub.data.mascotOffsets.getSize(a.alias,o,e.size))&&_.each(ub.views,function(e){var t=ub.objects[e+"_view"]["objects_"+i];void 0!==t&&(t.position.y+=n.yAdjustment)})},ub.funcs.isDirty=function(e){var t=!1;return void 0!==e&&e.dirty&&(t=!0),t},ub.funcs.oneInchPullUp=function(u){var p=ub.current_material.material.uniform_category;if("Football"!==p&&"Wrestling"!==p&&_.includes(["1","2","6","5","26","27"],u)){var d=ub.current_material.settings.applications[1],f=ub.current_material.settings.applications[26],h=ub.current_material.settings.applications[27],m=ub.current_material.settings.applications[2],b=ub.current_material.settings.applications[6],g=ub.current_material.settings.applications[5];_.each(ub.views,function(e){ub.objects[e+"_view"].objects_1;var t=ub.objects[e+"_view"].objects_2,i=ub.objects[e+"_view"].objects_5,n=ub.objects[e+"_view"].objects_27,a=ub.objects[e+"_view"].objects_26;if("1"===u||"2"===u||"26"===u||"27"===u){if(ub.funcs.isDirty(d)||ub.funcs.isDirty(m)||ub.funcs.isDirty(f)||ub.funcs.isDirty(h))return;if((void 0!==a||void 0!==t)&&void 0!==d){var o=parseInt(d.font_size),r="26";if(void 0!==f&&(c=f["originalPosition_"+e]),"Baseball"===p||"Fastpitch"===p)var s=(l=ub.data.applicationPullUps.getPullUp(p,o,r)).pullUpHeight;else c=m["originalPosition_"+e],s=0,"free"===d.application_type&&(o=2),1===o&&(null===ub.current_material.material.one_inch_in_px&&ub.utilities.warn("one_inch_in_px not set."),s=-2*parseInt(ub.current_material.material.one_inch_in_px)),2===o&&(null===ub.current_material.material.one_inch_in_px&&ub.utilities.warn("one_inch_in_px not set."),s=-1*parseInt(ub.current_material.material.one_inch_in_px)),4===o&&(null===ub.current_material.material.one_inch_in_px&&ub.utilities.warn("one_inch_in_px not set."),s=parseInt(ub.current_material.material.one_inch_in_px));void 0!==a&&ub.funcs.pullUp(a,c,s),void 0!==n&&ub.funcs.pullUp(n,c,s),void 0!==t&&ub.funcs.pullUp(t,c,s)}}if("5"===u||"6"===u){if(ub.funcs.isDirty(g)||ub.funcs.isDirty(b))return;if(void 0!==i&&void 0!==b){if(2.5===b.font_size)return;if("free"===b.application_type)return;var l;o=parseInt(b.font_size),r="5";void 0!==(l=ub.data.applicationPullUps.getPullUp(p,o,r))&&(s=l.pullUpHeight);var c=g["originalPosition_"+e];ub.data.sportsMain.currentOk()&&(s=0,2===o&&(null===ub.current_material.material.one_inch_in_px&&ub.utilities.warn("one_inch_in_px not set."),s=-1*parseInt(ub.current_material.material.one_inch_in_px))),ub.funcs.pullUp(i,c,s)}}})}},ub.funcs.convertDegreesToRadians=function(e){return e*Math.PI/180},ub.funcs.renderApplication=function(z,P,A){var e,O,j=[],F=ub.funcs.getApplicationMatOption(A),I="objects_"+A;e=ub.current_material.settings.applications[A].application.views,O=ub.current_material.settings.applications[A].application;var E=ub.funcs.getSettingsObject(A);if("object"!=typeof ub.config.savedDesignInfo||void 0===E.mascot||"Volleyball"!==ub.config.sport||"Ace Crew Neck"!==ub.config.blockPattern||"1710"!==E.mascot.id&&1710!==E.mascot.id){_.each(ub.views,function(e){var t=e+"_view";void 0!==ub.objects[t][I]&&ub[t].removeChild(ub.objects[t][I])});var D=["1","2","6","5"];_.each(e,function(e){if(ub.data.withBodyLeftRight.isOk(ub.sport,ub.neckOption)){if("Body Left"===F&&"right"===e.perspective)return;if("Body Right"===F&&"left"===e.perspective)return}P.perspective=e.perspective;var t=z(P);if(t.position=new PIXI.Point(e.application.center.x,e.application.center.y),-1!==_.indexOf(D,A)&&("1"!==A&&"6"!==A||(t.position=new PIXI.Point(e.application.center.x,e.application.center.y)),"2"===A||"5"===A)){var i=e.application.topRight.y;t.height;t.position=new PIXI.Point(e.application.center.x,e.application.center.y)}t.rotation=ub.funcs.convertDegreesToRadians(e.application.rotation);var n=ub.funcs.generateZindex("applications");if(t.zIndex=-(n+E.zIndex),"Wrestling"===ub.funcs.getCurrentUniformCategory()||void 0!==P.applicationObj&&("team_name"!==P.applicationObj.application_type&&1!==parseInt(P.applicationObj.code)||ub.funcs.isCurrentSport("Baseball")),t.ubType="object",t.ubAppID=A,t.ubApplicationType=O.type,void 0===(a=_.find(ub.current_material.material.options,{perspective:e.perspective,name:F})))return errorCode=ub.errorCodes.getCode("maskLayerNotFound"),void ub.utilities.errorWithCode(errorCode,F+" / "+e.perspective);var a=ub.pixi.new_sprite(a.material_option_path);t.mask=a,t.name=I;var o=e.perspective+"_view";if(ub.objects[o][I]=t,ub[o].addChild(t),ub[o].addChild(a),j.push(t),"object"==typeof t.ubFontSizeData){var r=t.ubFontSizeData,s=1,l=1;"0"!==r.xScale&&void 0!==r.xScale&&(s=parseFloat(r.xScale)),"0"!==r.yScale&&void 0!==r.yScale&&(l=parseFloat(r.yScale)),t.scale.set(s,l);var c=0,u=0;"0"!==r._xOffset&&(c=parseFloat(r.xOffset)),"0"!==r._yOffset&&(u=parseFloat(r.yOffset)),!E.dirty&&ub.funcs.isTackleTwill()&&(t.position.x+=c,t.position.y+=u)}if(void 0!==P.overrideOffsetX&&(t.position.x-=c,t.position.x+=parseFloat(P.overrideOffsetX)),void 0!==P.overrideOffsetY&&(t.position.y-=u,t.position.y+=parseFloat(P.overrideOffsetY)),void 0!==P.applicationObj||"mascot"===O.type){var p=e.application.fontSizes.split(",")[1],d=e.application.fontSizes.split(",")[2];if(isNaN(p)?(p=t.scale.x,"mascot"===O.type&&(p=1)):p=parseFloat(p),isNaN(d)?(d=t.scale.y,"mascot"===O.type&&(d=1)):d=parseFloat(d),"mascot"===O.type?(t.scale.x=t.scale.x*p,t.scale.y=t.scale.y*d):(1===p&&(p=t.scale.x),1===d&&(d=t.scale.y),t.scale.set(p,d)),"object"!=typeof ub.config.savedDesignInfo){var f=void 0===e.application.appCustomScale,h=!1;if(f||(h="0"===e.application.appCustomScale.x&&"0"===e.application.appCustomScale.y),!f&&!h&&ub.funcs.usesCustomScaleValid()){var m=t.scale.x,b=t.scale.y;m=parseFloat(e.application.appCustomScale.x),b=parseFloat(e.application.appCustomScale.y),e.application.scale={x:m,y:b},0!==m&&0!==b&&(t.scale={x:m,y:b})}}void 0!==e.application.scale&&0===e.application.scale.x&&0===e.application.scale.y&&(e.application.scale={x:1,y:1});m=t.scale.x,b=t.scale.y;void 0!==P.overrideScaleX&&(m=parseFloat(P.overrideScaleX)),void 0!==P.overrideScaleY&&(b=parseFloat(P.overrideScaleY)),"mascot"!==O.type&&(t.scale={x:m,y:b})}ub.funcs.createClickable(t,e.application,e,"application"),ub.updateLayersOrder(ub[o]);var g=ub.current_material.settings.applications[parseInt(A)].size;"2"===A&&"mascot"===O.type&&8===g&&(t.position.y-=5),"2"===A&&"mascot"===O.type&&10===g&&(t.position.y-=5),"5"===A&&"mascot"===O.type&&10===g&&(t.position.y-=30),"5"===A&&"mascot"===O.type&&12===g&&(t.position.y-=30),"4"===A&&"mascot"===O.type&&.5===g&&(t.position.y+=3),"5"===A&&"mascot"===O.type&&12===g&&(t.position.y+=40),"5"===A&&"mascot"===O.type&&10===g&&(t.position.y+=30),"5"!==A&&"2"!==A||"mascot"!==O.type||3!==g||_.contains(["Hockey Socks"],ub.config.blockPattern)||(t.position.y+=11),"5"!==A&&"2"!==A||"mascot"!==O.type||2!==g||(t.position.y+=13),"5"!==A&&"2"!==A||"mascot"!==O.type||1!==g||(t.position.y+=13),"mascot"===O.type&&8===g&&(t.position.y-=5);ub.data.pantLocations.isValidLocation(parseInt(A));var v="Football"===ub.current_material.material.uniform_category,y="lower"===ub.current_material.material.type,w="mascot"===O.type;if(v&&y&&w){var S=t.scale;4===g&&(S=.4),3===g&&(S=.33),2===g&&(S=.29),1===g&&(S=.2),t.scale={x:S,y:S}}if(ub.funcs.isCurrentSport("Football")||ub.funcs.isCurrentSport("Wrestling")){if(("10"===A||"32"===A)&&"mascot"!==O.type&&"logo"!==O.type){var x=ub.funcs.getFontOffsets(P.font_name,P.fontSize,e.perspective,A);c=parseFloat(r.xOffset),u=parseFloat(r.yOffset),t.position.x+=x.offsetX,t.position.y+=x.offsetY,t.position.x-=c,t.position.y-=u,1!==x.scaleX&&(t.scale.x=x.scaleX),1!==x.scaleY&&(t.scale.y=x.scaleY)}if(!_.includes(ub.data.leftSideOverrides,P.font_name)||"9"!==A&&"33"!==A||"mascot"===O.type||"logo"===O.type){var k,$;if(("9"===A||"33"===A)&&"mascot"!==O.type&&"logo"!==O.type)c=parseFloat(r.xOffset),u=parseFloat(r.yOffset),"9"===A&&(k=10,$="right"===e.perspective?"left":e.perspective),"33"===A&&(k=32,$="right"===e.perspective?"left":e.perspective),0<(x=ub.funcs.getFontOffsets(P.font_name,P.fontSize,$,k)).offsetX?t.position.x+=-1*x.offsetX:x.offsetX<0&&(t.position.x+=x.offsetX*x.offsetX),t.position.y+=x.offsetY,1!==x.scaleX&&(t.scale.x=x.scaleX),1!==x.scaleY&&(t.scale.y=x.scaleY),t.position.x-=c,t.position.y-=u}else{var x=ub.funcs.getFontOffsets(P.font_name,P.fontSize,e.perspective,A);c=parseFloat(r.xOffset),u=parseFloat(r.yOffset),t.position.x+=x.offsetX,t.position.y+=x.offsetY,t.position.x-=c,t.position.y-=u,1!==x.scaleX&&(t.scale.x=x.scaleX),1!==x.scaleY&&(t.scale.y=x.scaleY)}}void 0!==P.applicationObj&&"rotated"===P.applicationObj.angle&&(t.rotation=-.25),"9"!==A&&"33"!==A||"mascot"!==O.type||"0"===P.mascot.typographic&&(t.scale.x=-1*Math.abs(t.scale.x)),void 0!==e.application.scale&&(t.scale=e.application.scale);var C=!1;if(void 0!==P.mascot&&"Football"===ub.config.sport&&(C=ub.data.flippedMascots.getCode(P.mascot.id)&&("10"===A||"9"===A)),void 0!==P.mascot&&"Fastpitch"===ub.config.sport&&(C=ub.data.flippedMascots.getCode(P.mascot.id)&&"9"===A),void 0!==P.mascot&&"Basketball"===ub.config.sport&&ub.data.flippedMascots.getCode(P.mascot.id)&&(C=ub.data.flippedMascots.getCode(P.mascot.id)&&"16"===A),void 0!==P.mascot&&"Basketball"===ub.config.sport&&"1096"===P.mascot.id&&(C="1096"===P.mascot.id&&"17"===A),void 0!==P.mascot&&"Basketball"===ub.config.sport&&"584"===P.mascot.id&&(C="16"===A),void 0!==P.mascot&&"Baseball"===ub.config.sport&&(C=ub.data.flippedMascots.getCode(P.mascot.id)&&"9"===A),void 0!==P.mascot&&ub.funcs.isSocks()&&"1096"===P.mascot.id&&(C="72"===A),void 0!==P.mascot&&ub.funcs.isSocks()&&ub.data.flippedMascots.getCode(P.mascot.id)&&(C="71"===A),C&&(e.application.flip=1),1===e.application.flip?_.each(t.children,function(e){e.scale.x=-1*Math.abs(e.scale.x)}):(e.application.flip=0,_.each(t.children,function(e){e.scale.x=Math.abs(e.scale.x)})),ub.funcs.isCurrentSport("Football")&&"mascot"===O.type&&ub.funcs.adjustMascotPerBlockPattern(A,t,e.perspective),ub.funcs.isCurrentSport("Football")&&"mascot"!==O.type&&ub.funcs.adjustFontPerBlockPattern(A,t,e.perspective),ub.funcs.isMacintosh()&&"Football"===ub.funcs.getCurrentUniformCategory()&&("2"===A||"5"===A)&&"mascot"!==O.type&&"free"!==O.type){if(_.includes(["Yard Line","HAWKS","Spartans"],P.font_name)){var T=ub.data.macFonts.getSettings(P.font_name,P.fontSize);void 0!==T&&P.font_name==P.font_name&&(t.position.y+=T.yOffset,t.scale=T.scale)}}E["originalPosition_"+e.perspective]={x:t.position.x,y:t.position.y}}),ub.funcs.identify(A);var t=void 0;return P.fromChangeColor&&(t=!0),ub.funcs.runAfterUpdate(A,t),ub.funcs.fixAlignments(),ub.funcs.mirrorRotation(),j}delete ub.current_material.settings.applications[E.code]},ub.funcs.adjustFontPerBlockPattern=function(e,t,i){ub.current_material.material.block_pattern},ub.funcs.adjustMascotPerBlockPattern=function(e,t,i){},$("#init_applications").on("click",function(e){ub.funcs.transformedApplications()}),ub.funcs.transformedApplications=function(){ub.data.applications_transformed={};var e=ub.current_material.materials_options,t=_.filter(e,{setting_type:"shape"}),i=ub.data.applications_transformed,n=ub.data.applications_transformed_one_dimensional;_.each(t,function(t){if(null!==t.applications_properties&&""!==t.applications_properties){var e=JSON.parse(t.applications_properties.slice(1,-1));null!==e&&_.each(e,function(e){void 0===i[t.name]&&(i[t.name]={name:t.name}),void 0===i[t.name][e.id]&&(i[t.name][e.id]={id:e.id.toString(),name:e.name,views:[],layer:t.name,type:e.name.toCodeCase()}),i[t.name][e.id].views.push({perspective:t.perspective,application:e}),n.push(i[t.name][e.id])})}}),ub.data.applications_transformed_one_dimensional=_.uniq(ub.data.applications_transformed_one_dimensional)},ub.funcs.pointIsInPoly=function(e,t){for(var i=!1,n=t[0].x,a=t[0].x,o=t[0].y,r=t[0].y,s=1;s<t.length;s++){var l=t[s];n=Math.min(l.x,n),a=Math.max(l.x,a),o=Math.min(l.y,o),r=Math.max(l.y,r)}if(e.x<n||e.x>a||e.y<o||e.y>r)return!1;for(var c=0,u=t.length-1;c<t.length;u=c++)t[c].y>e.y!=t[u].y>e.y&&e.x<(t[u].x-t[c].x)*(e.y-t[c].y)/(t[u].y-t[c].y)+t[c].x&&(i=!i);return i},ub.funcs.isWithin=function(e,t){var i=[];return.5===ub[ub.active_view+"_view"].scale.x?_.each(t,function(e){var t=new PIXI.Point(.5*e.x+ub.offset.x,.5*e.y+ub.offset.y);i.push(t)}):_.each(t,function(e){var t=new PIXI.Point(.7*e.x+ub.offset.x,.7*e.y+ub.offset.y);i.push(t)}),ub.funcs.pointIsInPoly(e,i)},ub.funcs.withinMaterialOption=function(t){var i=[],e=ub.data.boundaries_transformed_one_dimensional[ub.active_view];return _.each(e,function(e){ub.funcs.isWithin(t,e.polygon,ub.active_view)&&i.push(e)}),i},ub.funcs.resetInteracted=function(){ub.interacted={previous:{name:void 0},current:{name:void 0}}},ub.funcs.dim=function(i){var e=ub.data.boundaries_transformed_one_dimensional[ub.active_view];_.each(e,function(e){var t=e.name.toCodeCase(),i=ub.objects[ub.active_view+"_view"][t];i.alpha=.3,ub.funcs.setAlphaOff(i)}),_.each(ub.objects[ub.active_view+"_view"],function(e){if(void 0!==e.name&&null!==e.name&&(-1!==e.name.indexOf("pattern_")||-1!==e.name.indexOf("objects_"))){if(-1!==e.name.indexOf(i))return"body"===i&&"pattern_back_body"===e.name?void ub.funcs.setAlphaOff(e):void ub.funcs.setAlphaOn(e);if(-1!==e.name.indexOf("objects_")&&0!==_.size(ub.current_material.settings.applications)){var t=e.name.replace("objects_","");if(-1!==ub.current_material.settings.applications[t].application.layer.toCodeCase().indexOf(i))return void ub.funcs.setAlphaOn(e)}if((t=e.name.replace("objects_",""))===ub.activeApplication)return void ub.funcs.setAlphaOn(e);void 0!==e.ubName&&console.log(e.ubName),ub.funcs.setAlphaOff(e)}})},ub.funcs.fullResetHighlights=function(){_.each(ub.current_material.materials_options,function(e){var t=e.name.toCodeCase();"guide"!==t&&(ub.objects[e.perspective+"_view"][t].alpha=ub.ALPHA_ON)}),_.each(ub.views,function(e){_.each(ub.objects[e+"_view"],function(e){if(void 0!==e){if(null===e.name)return;if("guide"===e.name)return;(-1!==e.name.indexOf("pattern_")||-1!==e.name.indexOf("objects_")&&-1===e.name.indexOf(ub.active_part))&&(e.alpha=ub.ALPHA_ON)}})})},ub.funcs.resetHighlights=function(){ub.funcs.resetInteracted(),$("#primary_options_header").html("");var e=ub.data.boundaries_transformed_one_dimensional[ub.active_view];_.each(e,function(e){var t=e.name.toCodeCase(),i=ub.objects[ub.active_view+"_view"][t];"guide"!==t&&(ub.funcs.setAlphaOn(i,i.name),ub.active_part=void 0)}),_.each(ub.objects[ub.active_view+"_view"],function(e){null!==e.name&&"guide"!==e.name&&void 0!==e.name&&(-1!==e.name.indexOf("pattern_")||-1!==e.name.indexOf("objects_")&&-1===e.name.indexOf(ub.active_part))&&ub.funcs.setAlphaOn(e)})},ub.funcs.create_plugins=function(e,t,i){if($("#primary_options_colors").html("<input type='text' id='primary_text' style='float: left; margin-top: -2px;'></input>"),$('a.btn_tabs[data-type="smiley"]').click(),"single"===t){'<div class="primary_header">Color </div>',"<input type='text' id='primary_text' style='float: left; margin-top: -2px;'></input>",$("#primary_options_colors").html("<div class=\"primary_header\">Color </div><input type='text' id='primary_text' style='float: left; margin-top: -2px;'></input>"),$("#primary_options_colors_advanced").html("<div></div>"),$("#primary_text").ubColorPickerBasic({target:e.toCodeCase(),type:"single"})}"withMatch"===t&&($("#primary_options_colors").html("<input type='text' id='primary_text' style='float: left; margin-top: -2px;'></input>"),$("#primary_options_colors_advanced").html('<div><input type="text" id="primary_text_left" style="float: left; margin-top: -2px;"></input></div><div><input type="text" id="primary_text_right" style="float: left; margin-top: -2px;"></input></div>'),$("#primary_text").ubColorPickerBasic({target:e.toCodeCase(),type:"withMatch",matchingSide:i}),!0!==$("input#simple_toggle").is(":checked")&&($("#primary_text_left").ubColorPickerBasic({target:e.toCodeCase(),type:"single"}),$("#primary_text_right").ubColorPickerBasic({target:i.toCodeCase(),type:"single"})))},ub.funcs.setAlphaOn=function(t){if(void 0!==t){t.alpha=ub.ALPHA_ON;var e=_.without(ub.views,ub.active_view);_.each(e,function(e){void 0!==ub.objects[e+"_view"][t.name]&&(_complementary_object=ub.objects[e+"_view"][t.name],_complementary_object.alpha=ub.ALPHA_ON)})}},ub.funcs.setAlphaOff=function(t){t.alpha=ub.ALPHA_OFF;var e=_.without(ub.views,ub.active_view);_.each(e,function(e){void 0!==ub.objects[e+"_view"][t.name]&&(_complementary_object=ub.objects[e+"_view"][t.name],_complementary_object.alpha=ub.ALPHA_OFF)})},ub.funcs.match=function(e){ub.funcs.dim(e);var t="";if(ub.interacted={previous:{name:ub.interacted.current.name},current:{name:e}},(-1!==e.indexOf("left_")||-1!==e.indexOf("right_"))&&void 0!==ub.interacted.previous.name&&(ub.interacted.previous.name,1))if(ub.interacted.previous.name.replace("right_","").replace("left_","")===e.replace("right_","").replace("left_","")){if(!ub.same_here_once){ub.funcs.create_plugins(e,"single"),_header_text=ub.active_part.toTitleCase();var i=ub.objects[ub.active_view+"_view"][e];return ub.funcs.setAlphaOn(i),ub.same_here_once=!0,_header_text}}else ub.same_here_once=!1;if(-1!==e.indexOf("left_")){t=e.replace("left_","right_");var n=ub.objects[ub.active_view+"_view"][t];ub.funcs.setAlphaOn(n),ub.funcs.create_plugins(e,"withMatch",t)}else if(-1!==e.indexOf("right_")){t=e.replace("right_","left_");n=ub.objects[ub.active_view+"_view"][t];ub.funcs.setAlphaOn(n),ub.funcs.create_plugins(e,"withMatch",t)}else ub.funcs.create_plugins(e,"single");_header_text=ub.active_part.toTitleCase().replace("Left ","").replace("Right ","");i=ub.objects[ub.active_view+"_view"][e];return ub.funcs.setAlphaOn(i),ub.same_here_once=!1,_header_text},ub.funcs.makeActive=function(e){var t=e,i=e.prepareModifierLabel();_group_id=ub.data.modifierLabels[i].group_id,ub.funcs.match(e),$("span.part_label").html(t.toUpperCase()),$("span.nOf").html(_group_id+" of "+_.size(ub.data.modifierLabels))},ub.funcs.clickOutside=function(){ub.states.canDoubleClick=!1,ub.funcs.resetHighlights(),ub.funcs.deactivateMoveTool()},ub.funcs.hideVisiblePopups=function(){$("div.slider-container").is(":visible")&&$("div.slider-container").hide()},ub.funcs.transformedBoundaries=function(){ub.data.boundaries_transformed={};var e=ub.current_material.materials_options,t=_.filter(e,{setting_type:"shape"}),n=ub.data.boundaries_transformed,a=ub.data.boundaries_transformed_one_dimensional;_.each(t,function(e){var t=JSON.parse(e.boundary_properties.slice(1,-1));if(e.angle=t[0].angle,e.patternOffsetX=t[0].px,e.patternOffsetY=t[0].py,null!==t){void 0===n[e.name]&&(n[e.name]={name:e.name,views:[]});var i={perspective:e.perspective,bounding_box:{topLeft:t.topLeft,topRight:t.topRight,bottomLeft:t.bottomLeft,bottomRight:t.bottomRight}};n[e.name].views.push(i),a[e.perspective].push({name:e.name,alias:e.name.replace("Left ","").replace("Right ",""),boundaries:i,layer_no:e.layer_level,group_id:e.group_id,polygon:t})}}),ub.stage.on("mousedown",function(e){if(!ub.tools.activeTool.active())if(ub.status.fullView.getStatus())if(ub.status.fullViewZoom.getStatus())ub.funcs.resetZoom(),ub.status.fullViewZoom.setStatus(!1,void 0);else{ub.funcs.resetZoom();var t=ub.funcs.getZoomView(e.data.global);void 0!==t&&(ub.funcs.hideViews(),ub.funcs.zoomView(t)),ub.status.fullViewZoom.setStatus(!0,t)}else if(ub.zoom)ub.zoom_off();else if(ub.funcs.hideVisiblePopups(),void 0===ub.activeApplication){var i=_.size(ub.current_material.settings.team_colors);if(i<_.size(ub.data.colorsUsed)||8<i){if(i<2)return void ub.startModal(1);if(!ub.branding.useAllColors&&8<i)return void ub.startModal(2)}0===$("div#cw").html().length&&ub.funcs.drawColorPickers();var n=e.data.global,a=ub.funcs.withinMaterialOption(n);if(0<a.length){ub.states.canDoubleClick=!0;_.first(a).name;var o=_.first(a).name.toCodeCase().replace("right_","left_"),r=(_.find(ub.data.modifierLabels,{fullname:o}),ub.funcs.getIndexByName(o));ub.funcs.activatePartByIndex(r)}else ub.funcs.clickOutside()}}),ub.stage.on("mousemove",function(e){ub.funcs.stageMouseMove(e)})},ub.funcs.stageMouseMove=function(e){var t=e.data.global;if(ub.mouse={x:e.data.global.x,y:e.data.global.y},ub.zoom)t.x<ub.front_view.width/2?ub[ub.active_view+"_view"].position.set(-t.x+ub.offset.x,-t.y+ub.offset.y):ub[ub.active_view+"_view"].position.set(-ub.front_view.width/2+ub.offset.x,-t.y+ub.offset.y);else{if(ub.tools.activeTool.active())return ub.funcs.resetHighlights(),void $("body").css("cursor","pointer");if($("body").css("cursor","auto"),ub.status.render.getRenderStatus()&&!ub.funcs.popupTest())if(ub.status.fullView.getStatus())if(ub.status.fullViewZoom.getStatus()){i=ub.status.fullViewZoom.getView();ub.funcs.setZoomOutPointer(),void 0!==i&&(e.data.global.x,i.width,i.position.set(i.position.x,300-e.data.global.y))}else{var i;ub.funcs.resetZoom(),ub.funcs.getZoomView(e.data.global),void 0!==(i=ub.funcs.getZoomView(e.data.global))&&(ub.funcs.partialZoomOut(),ub.funcs.partialZoomView(i))}else if(ub.data.rosterInitialized)ub.funcs.resetHighlights();else if(void 0!==ub.activeApplication&&$("body").css("cursor","pointer"),!($("div#primaryMascotPopup").is(":visible")||ub.status.manipulatorDown||ub.active_lock||ub.zoom)){var n=ub.funcs.withinMaterialOption(t);if(0<n.length){var a=_.first(n).name.toCodeCase();if(ub.active_part===a)return;var o=ub.active_view+"_view";ub.active_part=a,ub.funcs.dim(a);var r=ub.objects[o][a];ub.funcs.setAlphaOn(r);var s="";if(-1!==a.indexOf("left_")){s=a.replace("left_","right_");var l=ub.objects[o][s];ub.funcs.setAlphaOn(l),void 0!==ub.objects[o]["pattern_"+s]&&ub.funcs.setAlphaOn(ub.objects[o]["pattern_"+s])}else if(-1!==a.indexOf("right_")){s=a.replace("right_","left_");l=ub.objects[o][s];ub.funcs.setAlphaOn(l),void 0!==ub.objects[o]["pattern_"+s]&&ub.funcs.setAlphaOn(ub.objects[o]["pattern_"+s])}r=ub.objects[o][a];ub.funcs.setAlphaOn(r)}else ub.funcs.resetHighlights()}}},ub.funcs.getModifierByIndex=function(e){return _.find(ub.data.modifierLabels,{index:e})},ub.funcs.getIndexByName=function(e){var t="";if(void 0!==(i=_.find(ub.data.modifierLabels,{fullname:e})))t=i.index;else{var i,n="";n=-5!==e.indexOf("Left")?e.replace("left_","right_"):e.replace("right_","left_"),t=(i=_.find(ub.data.modifierLabels,{fullname:n})).index}return t},ub.funcs.getPrimaryViewObject=function(e){var t=void 0;return _.each(e.views,function(e){1===e.application.isPrimary&&(t=e)}),void 0===t&&(console.warn("No Primary View Set for application: "),console.warn(e)),t},ub.funcs.getPrimaryView=function(e){var t=void 0;return _.each(e.views,function(e){1===e.application.isPrimary&&(t=e.perspective)}),void 0===t&&(console.warn("No Primary View Set for application: "),console.warn(e)),t},ub.funcs.get_modifier_labels=function(){var o=ub.data.modifierLabels,r=ub.config.hiddenBody;_.each(ub.current_material.options_distinct_names,function(e){var t=e.modifier_label,i=_.find(ub.current_material.materials_options,{name:t.toTitleCase()});if(void 0!==i&&"static_layer"!==i.setting_type&&"mesh_highlights"!==i.setting_type&&"mesh_shadows"!==i.setting_type&&"Extra"!==i.name&&"Extra Left Cowl"!==i.name&&"Extra Right Cowl"!==i.name&&(!r||"Body"!==i.name)){var n=i.group_id,a=i.team_color_id;t=t.prepareModifierLabel(),o[t]={name:t,group_id:n,team_color_id:a,fullname:e.modifier_label}}}),ub.funcs.drawPartsDrop()},ub.funcs.drawPartsDrop=function(){var e=["neck_tape_2"];ub.data.modifierLabels=ub.data.hideMaterialOptionOnSportModifierLabels.isValid(ub.config.sport,ub.data.modifierLabels,e),ub.funcs.isSocks()&&"Quick Turn"===ub.config.blockPattern&&(e=["arch","ankle_padding","body","heel","padding","toe","top_welt"],ub.data.modifierLabels=ub.data.hideMaterialOptionOnSportModifierLabels.isValid(ub.config.sport,ub.data.modifierLabels,e));var n="",d=_.size(ub.data.modifierLabels);_.each(ub.data.modifierLabels,function(e){e.intGroupID=parseInt(e.group_id)});var f=_.sortBy(ub.data.modifierLabels,"intGroupID");$pd=$("div#parts_dropdown");var a=1;n+='<div class="pd-dropdown-links" data-ctr="0" data-group-id="0" data-fullname="team-colors" data-name="team-colors"><i>Initialize</i> Team Colors</div>',_.each(f,function(e){e.index=a;var t="";_.contains(ub.fontGuideIDs,window.ub.valid)&&(t=" ("+e.group_id+") ");var i=e.name;"Body Left"===i&&(i="Left Body"),"Body Right"===i&&(i="Right Body"),"Neck Tape 1"===i&&(i="Neck Tape"),n+='<div class="pd-dropdown-links" data-ctr="'+a+'" data-group-id="'+e.group_id+'" data-fullname="'+e.fullname+'" data-name="'+i+'"><i>'+a+" of "+d+"</i> "+i+t+"</div>",a++}),ub.current_part=1;var t=_.find(f,{index:2});if(void 0!==t)var i='<div class=\'left_side\'><span class="next_label">Next Part:</span><br /><span class="part_label">'+t.name+'</span></div> <div class="right_side"><i class="fa fa-arrow-right" aria-hidden="true"></i></div>';$("button#next_mo").html(i),$pd.html(n);$("div.pd-dropdown-links").on("click",function(){var e,t=$(this).data("group-id"),i=$(this).data("fullname"),n=$(this).data("name"),a=$(this).data("ctr"),o=n,r=_.size(ub.current_material.settings.team_colors);if(ub.current_part=a,ub.funcs.clearPatternUI(),(e=ub.funcs.activatePatterns())||ub.funcs.activateColorPickers(),"team-colors"===i||r<=1)return _.isEqual(ub.current_material.material.uniform_category,"Socks (Apparel)")&&ub.funcs.isKnitted()&&(!_.isEqual(ub.page,"builder")&&"undefined"!==ub.current_material.settings.threadColors||(ub.current_material.settings.threadColors=!0)),ub.funcs.initTeamColors(),$pd.hide(),void $("div#right-main-window").css("overflow","hidden");ub.funcs.deactivateMoveTool(),0===$("div#cw").html().length&&ub.funcs.drawColorPickers(),ub.funcs.moveToColorPickerByIndex(a-1),e&&$("#color-wheel-container").hide(),ub.active_part=i;var s=o;"Left Body"===o&&(s="Body Left"),"Right Body"===o&&(s="Body Right"),"Neck Tape"===o&&(s="Neck Tape 1"),void 0!==_.find(ub.data.modifierLabels,{name:s})&&(t=t,$("span.part_label").html(o.toUpperCase()),$("span.nOf").html(a+" of "+d),ub.current_group_id=t);var l=_.find(f,{index:a+1});if(void 0!==l)var c='<div class=\'left_side\'><span class="next_label">Next Part:</span><br /><span class="part_label">'+l.name+'</span></div> <div class="right_side"><i class="fa fa-arrow-right" aria-hidden="true"></i></div>';if($("button#next_mo").html(c),$pd.hide(),ub.funcs.match(i),$('div.mTab[data-type="color"]').click(),ub.funcs.isSocks()&&1===ub.data.afterLoadCalled){var u=i.toString().toTitleCase();if(void 0!==ub.current_material.settings.randomFeeds[u]){var p=ub.current_material.settings.randomFeeds[u].enabled;if(1===parseInt(p))return void ub.funcs.activateRandomFeeds(u)}}}),$("div.pd-dropdown-links").hover(function(){$(this).addClass("pdHover")},function(){$(this).removeClass("pdHover")})},ub.funcs.activatePartByIndex=function(e){$('div.pd-dropdown-links[data-ctr="'+e+'"]').click()},ub.funcs.moveToNextMaterialOption=function(){var e=_.size(ub.current_material.settings.team_colors);if(!ub.branding.useAllColors&&8<e)ub.startModal();else{var t=ub.current_part,i=_.size(ub.data.modifierLabels);"Done"!==$("span.next_label").html()?t<i?(ub.current_part+=1,$("div.pd-dropdown-links[data-ctr="+ub.current_part+"]").click(),$("button#next_mo").css("background-color","#3d3d3d")):ub.funcs.initOrderProcess():$("div#main-row").fadeOut()}},ub.funcs.getCurrentUniformCategory=function(){return ub.current_material.material.uniform_category},ub.funcs.moveToPrevMaterialOption=function(){if(!$("div#primaryQuickRegistrationPopup").is(":visible")){var e=ub.current_part;_.size(ub.data.modifierLabels);1<=e&&(ub.current_part-=1,$("div.pd-dropdown-links[data-ctr="+ub.current_part+"]").click(),$("button#next_mo").css("background-color","#3d3d3d")),ub.current_part<0&&(ub.current_part=0)}},$("button#prev_mo").on("click",function(){ub.funcs.moveToPrevMaterialOption()}),$("button#next_mo").on("click",function(){ub.funcs.moveToNextMaterialOption()}),$("div#topPrev").on("click",function(){ub.funcs.moveToPrevMaterialOption()}),$("div#topNext").on("click",function(){ub.funcs.moveToNextMaterialOption()}),ub.funcs.changeApplicationLayerColor=function(e,t,i){},ub.funcs.setGroupColor=function(e,t,i){var n=_.filter(ub.data.modifierLabels,{team_color_id:e});_.each(n,function(e){void 0===ub.data.materialOptionWithLimitedColors.getLimitedColorSet(e.name)&&ub.funcs.ui.setMaterialOptionColor(e.name,i)});var a=ub.current_material.settings.applications;"2"===e&&_.each(a,function(e){"embellishments"!==e.application_type&&"mascot"!==e.application_type&&"logo"!==e.application_type&&"free"!==e.application_type&&2<=e.color_array.length&&(e.color_array[0]=i,_base_color=_.find(e.accent_obj.layers,{name:"Base Color"}),"undefined"!=typeof _base_color&&(_base_color.default_color=i.hex_code),ub.funcs.changeApplicationLayerColor(e,1,i))})},ub.funcs.getPatternByID=function(e){return _.find(ub.data.patterns.items,{id:e.toString()})},ub.funcs.activateColorPickers=function(){ub.funcs.clearPatternUI(),ub.funcs.deActivateApplications(),ub.funcs.deActivateLocations(),ub.funcs.activeStyle("colors"),$("#color-wheel-container").fadeIn()},ub.funcs.deActivateColorPickers=function(){$("#color-wheel-container").hide()},ub.funcs.setMaterialOptionSettingsPatternColor=function(e,t,i){},ub.funcs.hexCodeToTintColor=function(e){return parseInt(e,16)},ub.funcs.getColorUsedByIndex=function(e){var t=parseInt(e),i=_.find(ub.data.colorsUsed,{teamColorID:t});return void 0===i&&(i=void 0),i},ub.funcs.getTeamColorObjByIndex=function(e){var t=parseInt(e),i=ub.current_material.settings.team_colors[t-1];return void 0===i&&(i=void 0),i},ub.funcs.hideOtherPanels=function(){ub.funcs.hidePipingFunctions(),ub.funcs.hiderandomFeedsTool()},ub.funcs.activeStyle=function(e){$('a.change-view[data-view="colors"]').removeClass("active-change-view"),$('a.change-view[data-view="layers"]').removeClass("active-change-view"),$('a.change-view[data-view="randomFeed"]').removeClass("active-change-view"),$('a.change-view[data-view="patterns"]').removeClass("active-change-view"),$('a.change-view[data-view="'+e+'"]').addClass("active-change-view")},ub.funcs.translateAngle=function(e){var t=e/360;return t*=619,t/=100},ub.funcs.deActivateApplications=function(){ub.funcs.removeUnusedElement("div#changeApplicationUI"),$("div#applicationUI").remove()},ub.funcs.centerFontPopup=function(){if($popup=$("div#primaryFontPopup"),$popup.fadeIn(),0!==$popup.length){var e=window.innerWidth,t=window.innerHeight,i=(e-$popup.width())/2,n=(t-$popup.height())/2;$popup.css({top:n,left:i})}},ub.funcs.centerAccentPopup=function(){if($popup=$("div#primaryAccentPopup"),$popup.fadeIn(),0!==$popup.length){ub.funcs.centerPatternPopup();var e=window.innerWidth,t=window.innerHeight,i=(e-$popup.width())/2,n=(t-$popup.height())/2;$popup.css({top:n,left:i})}},ub.funcs.removeApplicationByID=function(n){_.each(ub.data.views,function(e){var t=e+"_view",i=ub.objects[t]["objects_"+n];void 0!==i&&(i.ubHover=!1,i.destroy(),ub[t].removeChild(i))})},ub.funcs.changeFontFromPopup=function(e,t){if("off"!==t.status){var i=_.find(ub.data.fonts,{id:e.toString()}),n=t.code;ub.funcs.removeApplicationByID(n),t.font_obj=i,ub.create_application(t,void 0),$popup=$("div#primaryFontPopup"),$popup.remove(),ub.status.fontPopupVisible=!1}},ub.funcs.changeAccentFromPopup=function(e,o){var t=_.find(ub.data.accents.items,{id:parseInt(e)}),i=o.id;if(ub.funcs.removeApplicationByID(i),_.find(t.layers,{layer_no:1}).default_color=ub.current_material.settings.team_colors[1].hex_code,4<=t.layers.length){var n=_.find(t.layers,{layer_no:1}),a=ub.funcs.getColorByColorCode("B").hex_code;3<=ub.current_material.settings.team_colors.length&&(a=ub.current_material.settings.team_colors[2].hex_code),n.default_color=a}var r=!1,s=[],l=[];_.each(t.layers,function(e){var t=e.default_color,i=ub.funcs.getColorObjByHexCode(t),n=e.layer_no-1;if("Mask"!==e.name&&"Pseudo Shadow"!==e.name){if(void 0===i&&(i=o.color_array[n]),void 0===i||!ub.funcs.isInTeamColor(i.color_code)){var a=r?1:0;r=!r,i=ub.current_material.settings.team_colors[a],o.color_array[n]=i,e.default_color=i.hex_code,void 0===o.colorArrayText?o.colorArrayText=[i.color_code]:o.colorArrayText[n]=i.color_code}s.push(i),l.push(i.color_code)}}),o.color_array=s,o.colorArrayText=l;t.layers.length;ub.accentObj=t,_matchingCode=ub.data.matchingIDs.getMatchingID(o.code),"undefined"!=typeof _matchingCode&&(_matchingSettingsObject=ub.funcs.getApplicationSettings(_matchingCode.toString()),"undefined"!=typeof _matchingSettingsObject&&(_matchingSettingsObject.color_array=o.color_array,_matchingSettingsObject.colorArrayText=o.colorArrayText)),o.accent_obj=t,ub.create_application(o,void 0),$popup=$("div#primaryAccentPopup"),$popup.remove(),ub.status.accentPopupVisible=!1},ub.funcs.changeSize=function(e,t){var i=t.id;ub.funcs.removeApplicationByID(i),t.font_size=parseFloat(e),t.size=parseFloat(e),ub.create_application(t,void 0)},ub.status.fontPopupVisible=!1,ub.funcs.createFontPopup=function(e,t,n){ub.status.fontPopupVisible=!0;var i="1.9em",a="40px";"Player Number"===e&&(i="3.3em",a="30px");var o={label:"Choose Font: ",fonts:ub.data.fonts,sampleText:t,applicationType:e,sampleSize:i,paddingTop:a},r=$("#m-font-popup").html(),s=Mustache.render(r,o);$("body").append(s),$popup=$("div#primaryFontPopup"),$popup.fadeIn(),ub.funcs.centerPatternPopup(),$("div.fontPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.fontPopupResults > div.item").on("click",function(){var t=$(this).data("font-id");if(ub.funcs.changeFontFromPopup(t,n),$popup.remove(),ub.funcs.activateApplications(n.code),"front_number"===n.type||"back_number"===n.type){_.find(ub.data.fonts,{id:t});_.each(ub.current_material.settings.applications,function(e){e.type!==n.application_type&&"logo"!==e.type&&"mascot"!==e.type&&-1!==n.type.indexOf("number")&&-1!==e.type.indexOf("number")&&ub.funcs.changeFontFromPopup(t,e)})}var e=void 0;if(void 0!==(e=ub.data.matchingIDs.getMatchingID(n.code))){var i=_.find(ub.current_material.settings.applications,{code:e.toString()});ub.funcs.changeFontFromPopup(t,i)}}),ub.funcs.centerFontPopup(),$("div.close-popup").on("click",function(){$popup.remove(),ub.status.fontPopupVisible=!1}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove(),ub.status.fontPopupVisible=!1):$(this).data("status","visible")})},ub.status.accentPopupVisible=!1,ub.funcs.createAccentPopup=function(n){var e={accents:ub.data.accents.items};"FBBJ"!==ub.current_material.material.price_item_code&&"FBDJ"!==ub.current_material.material.price_item_code||(e.accents=_.filter(e.accents,function(e){return"Three Color with Drop Shadow"!==e.title&&"Three Color"!==e.title})),ub.current_material.material.price_item_code,ub.status.accentPopupVisible=!0;var t=$("#m-accent-popup").html(),i=Mustache.render(t,e);$("body").append(i),$popup=$("div#primaryAccentPopup"),$popup.fadeIn(),$("div.accentPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.accentPopupResults > div.item").on("click",function(){var e=$(this).data("accent-id");ub.funcs.changeAccentFromPopup(e,n),$popup.remove(),ub.funcs.activateApplications(n.code);var t=void 0;if(void 0!==(t=ub.data.matchingIDs.getMatchingID(n.code))){var i=_.find(ub.current_material.settings.applications,{code:t.toString()});ub.funcs.changeAccentFromPopup(e,i)}}),ub.funcs.centerAccentPopup(),$("div.close-popup").on("click",function(){$popup.remove(),ub.status.accentPopupVisible=!1}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove(),ub.status.accentPopupVisible=!1):$(this).data("status","visible")})},ub.funcs.changeTailSweepFromPopup=function(e,t,i){t.tailsweep.length=i,ub.funcs.removeApplicationByID(t.code),ub.create_application(t,void 0),$popup=$("div#primaryTailSweepPopup"),$popup.remove(),ub.status.tailSweepPopupVisible=!1},ub.funcs.changeAngleFromPopup=function(e,t,i){t.angle=i,ub.funcs.removeApplicationByID(e),ub.create_application(t,void 0),$popup=$("div#primaryTailSweepPopup"),$popup.remove(),ub.status.tailSweepPopupVisible=!1},ub.status.tailsweepPopupVisible=!1,ub.funcs.createTailSweepPopup=function(n){var e,t=$('input[name="sampleText"]').val(),i=_.filter(ub.data.tailSweeps,function(e){return"twins"===e.code||"blank"===e.code});if(e=t.length<=12?t.length:12,"1"===n.font_obj.script){var a=["twins","none"];i=_.reject(ub.data.tailSweeps,function(e){return _.contains(a,e.code)})}var o={tailsweeps:i,sampleText:t};ub.status.tailsweepPopupVisible=!0;var r=$("#m-tailsweep-popup-with-preview").html(),s=Mustache.render(r,o);$("body").append(s),$popup=$("div#primaryTailSweepPopup"),$popup.fadeIn();var l=$("span.font_name").text();$("div.text-preview").css("font-family",l);var c=$("span.sizeButton");c.unbind("click"),c.on("click",function(){var r=$(this).data("size");c.removeClass("active defaultShadow"),$(this).addClass("active defaultShadow");var e=$("div.text-preview");$.each(e,function(e,t){var i=$(t),n=(i.data(r),i.data("sampleText")),a=i.data("tailsweep-code"),o=ub.data.tailsweepCharacters.getCharacter(a,parseInt(r));void 0!==o?i.html(n+o):i.html(n)})}),$("div.tailSweepPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.tailSweepPopupResults > div.item").on("click",function(){var e,t=$(this).data("tailsweep-id"),i=$(this).data("tailsweep-code");e=$("span.sizeButton.active").data("size"),n.tailsweep={id:t,code:i,thumbnail:i+".png",length:e},ub.funcs.changeTailSweepFromPopup(t,n,e),$popup.remove(),ub.funcs.activateApplications(n.code),$('span.tab[data-item="tailsweeps"]').click(),$("span.sizeItem").removeClass("active defaultShadow"),$('span.sizeItem[data-size="'+n.tailsweep.length+'"]').addClass("active defaultShadow")}),ub.funcs.centerPatternPopup(),$("div.close-popup").on("click",function(){$popup.remove(),ub.status.tailsweepPopupVisible=!1}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove(),ub.status.tailSweepPopupVisible=!1):$(this).data("status","visible")}),$('span.sizeButton[data-size="'+e+'"]').click()},ub.funcs.createAssistants=function(e,t){},ub.funcs.activateColorPickerForApplication=function(e,t,i){$("#applicationUI").css("margin-left","-500px"),$(".colorItem").hide()},ub.funcs.getFontAtIndex=function(i){var e=_.filter(_.sortBy(ub.data.fonts,"name"),{active:"1"}),n=void 0;return _.each(e,function(e,t){if(t===i)return n=e}),n},ub.funcs.getFontObj=function(e,t){var i=_.filter(ub.data.fonts,{active:"1"}),n=_.findIndex(_.sortBy(i,"name"),{name:t.name});return void 0===n?_.first(ub.data.fonts):"next"===e?ub.funcs.getFontAtIndex(n+1):ub.funcs.getFontAtIndex(n-1)},ub.funcs.createSmallColorPickers=function(o,r,s,e,t){var l="",i=(ub.funcs.getColorByColorCode(o),ub.current_material.settings.team_colors),c=t;return void 0===t&&(c="not-set"),l='<div class="smallPickerContainer" data-layer-no="'+r+'">',l+='<label class="smallColorPickerLabel" >'+s+" </label>",i=_.sortBy(i,"order"),_.each(i,function(e){var t,i="&nbsp;",n="25px",a="";o===e.color_code&&(i='<i class="fa fa-check" aria-hidden="true"></i>',n="40px",a="activeColorItem"),t=ub.funcs.getColorByColorCode(e.color_code),l+='<span style="width: '+n+";background-color: #"+t.hex_code+"; color: #"+t.forecolor+';" class="colorItem '+a+'" data-layer-name="'+s+'" data-color-code="'+e.color_code+'" data-layer-no="'+r+'" data-object-type='+c+">"+i+"</span>"}),l+="</div>"},ub.funcs.changeMascotSize=function(e,t,i){var n=t.id;if(ub.funcs.removeApplicationByID(n),void 0===i){var a=void 0;void 0!==t.oldScale&&(a=t.oldScale),ub.funcs.pushOldState("change mascot size","application",t,{size:t.size,oldScale:a})}t.size=parseFloat(e),t.font_size=parseFloat(e),t.dirty=!0,ub.funcs.update_application_mascot(t.application,t.mascot)},ub.funcs.changeMascotColor=function(e,t,i){var n=i.id;ub.funcs.removeApplicationByID(n);var a=_.find(i.mascot.layers_properties,{layer_number:t.toString()});"undefined"!=typeof _laye&&(a.default_color=e.color_code),i.color_array[t-1]=e,ub.funcs.update_application_mascot(i.application,i.mascot,{fromChangeColor:!0})},ub.funcs.substringMatcher=function(n){return function(e,t){var i;i=[],substrRegex=new RegExp(e,"i"),$.each(n,function(e,t){substrRegex.test(t)&&i.push(t)}),t(i)}},ub.funcs.changeMascotByID=function(e,t,i,n){var a=e;ub.funcs.changeMascotFromPopup(a,t),$popup.remove(),ub.funcs.activateMascots(t.code);var o=!1,r="",s="";void 0!==i&&(o=!0,r=i,s=n),t.customLogo=o,t.customFilename=r,t.additionalNotes=s;var l=void 0,c=!0;if(void 0!==(l=ub.data.matchingIDs.getMatchingID(t.code))){var u=_.find(ub.current_material.settings.applications,{code:l.toString()});"free"!==u.type&&ub.funcs.isSocks()&&(c=!1),"object"==typeof t.mascot&&"object"==typeof u.mascot&&t.mascot.id===u.mascot.id&&(c=!0),c&&(ub.funcs.changeMascotFromPopup(a,u),u.customLogo=o,u.customFilename=r,u.additionalNotes=s)}ub.funcs.activateMascots(t.code)},ub.status.mascotPopupVisible=!1,ub.funcs.createMascotPopup=function(e,t,l){var i,n;i=_.find(ub.data.mascots_categories,{name:t.category}),n=_.find(ub.data.mascots_groups_categories,{name:i.group_name}),ub.status.mascotPopupVisible=!0;var a={label:"Choose Mascot: ",mascots:_.filter(ub.data.mascots,{active:"1",category:"Bulldogs"}),categories:_.sortBy(ub.data.mascots_categories,"name"),groups_categories:_.sortBy(ub.data.mascots_groups_categories,"name"),paddingTop:"40px"},o=$("#m-new-mascot-popup").html(),r=Mustache.render(o,a);$("body").append(r),$popup=$("div#primaryMascotPopup"),$popup.fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")});var s=$('span.groups_category_item[data-category-name="My Mascots"]');if("number"!=typeof ub.user.id)s.hide();else{s.append("<br /><em>Mascots that went through custom artwork requests will appear on the [My Mascots] category after we have processed it, so that you can use it on your other designs.</em>")}var c=_.pluck(ub.data.mascots,"name");$("input.mascot_search").typeahead({hint:!0,highlight:!0,minLength:1},{name:"Mascots",source:ub.funcs.substringMatcher(c)}),$(".patternPopupResults").isotope({itemSelector:".item",layoutMode:"fitRows"}),$(".patternPopupResults").isotope({filter:".all"}),$("input.mascot_search").on("change",function(){var t=$(this).val().toLowerCase(),e={category:"",mascot_category_id:"",mascots:_.filter(ub.data.mascots,function(e){return-1!==e.name.toLowerCase().indexOf(t.toLowerCase())})},i=$("#m-new-mascot-items").html(),n=Mustache.render(i,e);$("div.main-content").scrollTo(0),$("div.patternPopupResults").html(n),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,l)})}),$("span.category_item").on("click",function(){var e=$(this).data("category");$(".patternPopupResults").isotope({filter:"."+e}),$("span.category_item").removeClass("active_category"),$(this).addClass("active_category"),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")})}),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("span.groups_category_item").on("click",function(){var e=parseInt($(this).data("category")),s=$(this).data("category-name");ub.config.toString&&(e=e.toString()),console.log("Category ID: "+e),console.log(typeof e);var t=_.filter(ub.data.mascots_categories,{mascots_group_category_id:e});if(console.log("Categories: "),console.log(t),"all"!==e){var i={categories:_.sortBy(t,"name")},n=$("#m-new-mascot-popup-categories").html(),a=Mustache.render(n,i);$("div.popup_header").html("Mascots: "+s),$("div.categories").html(a),$("div.groups_categories").hide(),$("div.categories").fadeIn(),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("span.category_item").unbind("click"),$("span.category_item").on("click",function(){var e=$(this).data("category"),t=$(this).data("category-name");$("div.popup_header").html();if($("span.category_item").removeClass("active"),$(this).addClass("active"),$("div.popup_header").html("MASCOTS: "+s+", "+t),"back"===e)return $("div.categories").hide(),$("div.groups_categories").fadeIn(),void $("div.popup_header").html("MASCOTS");var i=_.filter(ub.data.mascots,{category:t});if("My Mascots"===t){var n=ub.user.id;i="number"==typeof ub.user.id?_.filter(i,function(e){return e.user_id.toString()===n.toString()||_.contains(ub.fontGuideIDs,n)}):_.filter(i,function(e){return"string"!=typeof e.user_id})}var a={category:t,mascot_category_id:e,mascots:_.sortBy(i,"name")},o=$("#m-new-mascot-items").html(),r=Mustache.render(o,a);$("div.patternPopupResults").html(r),$("div.main-content").scrollTo(0),$("div.patternPopupResults > div.item").hover(function(){$(this).find("div.name").addClass("pullUp")},function(){$(this).find("div.name").removeClass("pullUp")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,l)})}),"My Mascots"===s&&$('span.category_item[data-category-name="My Mascots"]').trigger("click")}else $("div.popup_header").html("Mascots: All")}),$("div.patternPopupResults > div.item").on("click",function(){var e=$(this).data("mascot-id");ub.funcs.changeMascotByID(e,l),$("div#primaryMascotPopup").remove(),ub.status.mascotPopupVisible=!1}),$("span.mascot-tab").on("click",function(){$(this).data("button");$("span.mascot-tab").removeClass("active"),$(this).addClass("active")}),ub.funcs.centerPatternPopup(),$("div.close-popup, span.close-popup").on("click",function(){$popup.remove(),ub.status.mascotPopupVisible=!1}),$popup.bind("clickoutside",function(){"hidden"!==$(this).data("status")?($(this).data("status","hidden"),$(this).hide(),$(this).remove(),ub.status.mascotPopupVisible=!1):$(this).data("status","visible")}),$('span[data-button="browse"]').on("click",function(){$("div.upload").fadeOut()}),$('span[data-button="upload"]').on("click",function(){$("div.upload").fadeIn()}),$("input#custom-artwork").change(function(){if(this.files&&this.files[0])ub.funcs.fileUpload(this.files[0],l,function(e){})}),$("span.ok_btn").on("click",function(){if("ok"===$(this).attr("data-status")){ub.current_material.settings.custom_artwork=window.uploaded_filename;var e=$('textarea[name="custom-artwork-additional-notes"]').val();l.customLogo=!0,l.customFilename=window.uploaded_filename,l.additionalNotes=e,$popup=$("div#primaryMascotPopup"),$popup.remove(),ub.funcs.changeMascotByID("1038",l,window.uploaded_filename,e)}}),$('span.groups_category_item[data-category-name="'+n.name+'"]').click(),$('span.category_item[data-category-name="'+i.name+'"]').click(),$('div.item[data-mascot-id="'+t.id+'"]').addClass("active"),void 0!==l.customFilename&&0<l.customFilename.length&&void 0===l.preview&&($('textarea[name="custom-artwork-additional-notes"]').val(l.additionalNotes),$("img#preview").attr("src",l.customFilename),$('span[data-button="upload"]').trigger("click"))},ub.funcs.changeMascotFromPopup=function(e,t,i){void 0===i&&ub.funcs.pushOldState("change mascot","application",t,{mascotID:t.mascot.id});var n=e.toString(),a=_.find(ub.data.mascots,{id:n}),o=t.id,r=_.size(a.layers_properties);ub.funcs.removeApplicationByID(o),t.mascot=a,"1039"!==n?(t.color_array=ub.funcs.getDefaultColors(),1===r&&(t.color_array=[t.color_array[0]])):(t.color_array=[],t.color_array.push(ub.funcs.getColorByColorCode("W")),t.color_array.push(ub.funcs.getColorByColorCode("RB")),t.color_array.push(ub.funcs.getColorByColorCode("R"))),_.each(t.application.views,function(e){e.application.flip=0}),ub.funcs.update_application_mascot(t.application,t.mascot),$popup=$("div#primaryPatternPopup, div#primaryMascotPopup"),$popup.remove(),ub.status.mascotPopupVisible=!1},ub.funcs.getApplicationSettings=function(e){var t=parseInt(e);return ub.current_material.settings.applications[t]},ub.funcs.getThumbnailImageMascot=function(e,t){var i=new PIXI.RenderTexture(ub.renderer,512,512);return i.render(e,null,!0),i.getImage().src},ub.funcs.getDefaultColors=function(){var e,t=[];return t.push(ub.current_material.settings.team_colors[1]),e=2<ub.current_material.settings.team_colors.length?ub.current_material.settings.team_colors[2]:ub.current_material.settings.team_colors[0],t.push(e),t},ub.funcs.resetFlipStatus=function(e){_.each(e.application.views,function(e){e.application.flip=0})},ub.funcs.flipMascot=function(i){var n;_.each(i.application.views,function(e){n=void 0===e.application.flip?e.application.flip=1:0===e.application.flip?e.application.flip=1:e.application.flip=0;var t=ub.objects[e.perspective+"_view"]["objects_"+i.code];void 0!==t&&(1===e.application.flip?($("span.flipButton").addClass("active"),_.each(t.children,function(e){e.scale.x*=-1})):($("span.flipButton").removeClass("active"),_.each(t.children,function(e){e.scale.x=Math.abs(e.scale.x)})))}),ub.funcs.pushOldState("flip","application",i,{flip:1===n?0:1})},ub.funcs.verticalText=function(t){_.each(t.application.views,function(e){void 0===t.verticalText||0===t.verticalText?t.verticalText=1:t.verticalText=void 0,void 0!==ub.objects[e.perspective+"_view"]["objects_"+t.code]&&(1===t.verticalText?$("span.flipButton").addClass("active"):$("span.flipButton").removeClass("active"),ub.funcs.changeFontFromPopup(t.font_obj.id,t))})},ub.funcs.clearScale=function(e){var t;return _.each(e.application.views,function(e){t=e.application.scale,e.application.scale=void 0}),t},ub.funcs.hidePanelHandler=function(){},ub.funcs.initializeScalePanel=function(n,e){var t=100;"mascot"!==e&&(t=10);var i=ub.funcs.getPrimaryView(n.application),a=t*ub.objects[i+"_view"]["objects_"+n.code].scale.x/3,o=document.getElementById("scale-slider");"object"!=typeof o.noUiSlider?(noUiSlider.create(o,{start:a,range:{min:1,max:100},pips:{mode:"values",values:[0,25,50,75,100],density:4}}),o.noUiSlider.on("update",function(e,t){var i=e[0];ub.funcs.updateScaleViaSlider(n,i)})):o.noUiSlider.set(a)},ub.funcs.initializeMovePanel=function(n,e){"mascot"!==e&&(_multiplier=10);var t=ub.funcs.getPrimaryView(n.application),i=ub.objects[t+"_view"]["objects_"+n.code].position.x;i=i/ub.dimensions.width*100;var a=document.getElementById("move-slider-x");if("object"!=typeof a.noUiSlider){noUiSlider.create(a,{start:i,range:{min:0,max:100},pips:{mode:"values",values:[0,25,50,75,100],density:4}}),a.noUiSlider.on("update",function(e,t){var i=e[0];ub.funcs.updatePositionViaSlider(n,i,"x")});var o=ub.objects[t+"_view"]["objects_"+n.code].position.y;o=o/ub.dimensions.height*100;var r=document.getElementById("move-slider-y");"object"!=typeof r.noUiSlider?(noUiSlider.create(r,{start:o,range:{min:0,max:100},pips:{mode:"values",values:[0,25,50,75,100],density:4}}),r.noUiSlider.on("update",function(e,t){var i=e[0];ub.funcs.updatePositionViaSlider(n,i,"y")})):r.noUiSlider.set(o)}else a.noUiSlider.set(i)},ub.funcs.initializeRotatePanel=function(t,e){var i=ub.funcs.getPrimaryView(t.application),n=ub.objects[i+"_view"]["objects_"+t.code].rotation;$("#rotate-slider").roundSlider({sliderType:"min-range",handleShape:"round",width:15,radius:85,value:n,startAngle:90,drag:function(e){ub.funcs.updateRotationViaSlider(t,e.value)}})},ub.funcs.updateRotationViaSlider=function(e,t){var i=t/100*360,n=t/100*6.28;$("span.custom_text.rotate").html(i.toString().substring(0,5));var a=e;_.each(e.application.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+a.code],i=n;t.rotation=i,e.application.rotation=i/Math.PI*180}),ub.funcs.activateMoveTool(a.code)},ub.funcs.generateSizes=function(e,t,i,n){var a="",o="",r=["Hockey Socks"],s=!1,l=ub.config.features.isOn("uniforms","tackeTwillCustomSizes");if(!ub.funcs.isFreeFormToolEnabled(n)&&l)t=t.slice(0,2);if(_.each(t,function(e){e.size.toString()===i.font_size.toString()||"4"===n&&"Football 2017"!==ub.config.sport&&!_.contains(r,ub.config.blockPattern)?(o="active",s=!0):o="",ub.funcs.isFreeFormToolEnabled(n)||ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand)?"active"===o&&(a+='<span class="applicationLabels font_size '+o+'" data-size="'+e.size+'" style="display: none">'+e.size+'"</span>'):a+='<span class="applicationLabels font_size '+o+'" data-size="'+e.size+'">'+e.size+'"</span>'}),!ub.funcs.isFreeFormToolEnabled(n)&&l){var c=_.size(t);a+='<span style="color:white;">OR</span> &nbsp',a+='<select class="customSize" style="width: '+(1<c?155:205)+'px">',a+='<option value="0">CUSTOM SIZE</option>',_.each(ub.data.customSizes,function(e){var t="";(e===i.font_size.toString()||"4"===n&&"Football 2017"!==ub.config.sport)&&(t="selected",void 0!==i.custom_obj&&ub.funcs.isTackleTwill()&&(t=_.isEqual(i.custom_obj.active,!0)?"":"selected")),s&&(t=""),a+="<option value='"+e+"' "+t+">"+e+'"</option>'}),a+="</select>"}var u=10,p=ub.funcs.getPrimaryView(i.application);if(void 0!==p){var d=ub.objects[p+"_view"]["objects_"+i.code];if("mascot"!==e&&(u=100),(ub.funcs.isFreeFormToolEnabled(n)||ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand))&&void 0!==d){"1"!==(f=(f=f=d.rotation).toString().substr(0,5))&&"0"!==f||(f+=".00"),a+='<span class="applicationLabels font_size custom rotate '+(o="")+'" data-size="5"><img class=\'scale-caption\' src=\'/images/builder-ui/rotate-caption.png\'><span class="custom_text rotate">'+f+"</span>°</span>",a+='<div class="slider-container rotate"><div id="rotate-slider-old"></div></div>';var f=10*ub.objects[p+"_view"]["objects_"+i.code].scale.x/3;"1"!==(f="")&&"0"!==f||(f+=".00");var h=ub.objects[p+"_view"]["objects_"+i.code].position;f=parseInt(h.x)+", "+parseInt(h.y),a+='<span class="applicationLabels font_size custom move'+(o="")+'" data-size="5"><img class=\'scale-caption\' src=\'/images/builder-ui/move-caption.png\'><span class="custom_text move">'+f+"</span></span>",a+='<div class="slider-container move"><div id="move-slider-x-old" class="move x"></div><div id="move-slider-y-old" class="move y"></div></div>';f=10*ub.objects[p+"_view"]["objects_"+i.code].scale.x/3;"1"!==(f=(f/=u).toString().substr(0,4))&&"0"!==f||(f+=".00"),a+='<span class="applicationLabels font_size custom scale '+(o="")+'" data-size="5"><img class=\'scale-caption\' src=\'/images/builder-ui/scale-caption.png\'>+<span class="custom_text scale">'+f+"</span>%</span>",a+='<div class="slider-container scale"><div id="scale-slider-old"></div></div>'}return a}},ub.funcs.getRotatedValue=function(e,t){return t-(Math.ceil(t/e)-1)*e},ub.funcs.activateColors=function(e){var t=ub.current_material.settings.applications[e],n=_.size(t.mascot.layers_properties),a=ub.current_material.settings.applications[e].color_array.length;if(_.each(t.color_array,function(e,t){if(void 0!==e){var i=t+1;n<i||($layer=$('span.colorItem[data-layer-no="'+i+'"][data-color-code="'+e.color_code+'"]'),$layer.click())}}),a<n){var o=n-a;for(i=a+1;i<=a+o;i++){var r=_.find(t.mascot.layers_properties,{layer_number:i.toString()}).team_color_id,s=ub.funcs.getTeamColorObjByIndex(parseInt(r));void 0!==s||(ub.utilities.warn("Team Color "+r+" not found, using first team color for mascot"),s=ub.funcs.getTeamColorObjByIndex(1)),$layer=$('span.colorItem[data-layer-no="'+i+'"][data-color-code="'+s.color_code+'"]'),$layer.click()}}},ub.funcs.beforeActivateMascots=function(e){},ub.funcs.afterActivateMascots=function(e){var t=ub.funcs.getApplicationSettings(e);void 0!==ub.current_material.settings.applications[e]&&"on"===t.status&&ub.funcs.activateColors(e),ub.funcs.activateDisableMoveTool(e)},ub.funcs.isTackleTwill=function(){return"tackle_twill"===ub.config.uniform_application_type},ub.funcs.isSublimated=function(){return"sublimated"===ub.config.uniform_application_type},ub.funcs.isKnitted=function(){return"knitted"===ub.config.uniform_application_type},ub.funcs.changeMascotOpacity=function(i,n){parseInt(n);var a,o="",e=ub.funcs.getApplicationViewObjects(i),r=_.find(ub.current_material.settings.applications,{code:i.toString()}),s=0;_.each(e,function(e){o=e.perspective+"_view",s=parseInt(n),e.alpha=parseInt(s)/100;var t=ub.objects[o]["objects_"+i];t.alpha=parseInt(s)/100,t.opacity=parseInt(s)/100,_.each(t.children,function(e){e.alpha=parseInt(s)/100}),r.alpha=parseInt(s)/100}),void 0!==(a=ub.data.matchingIDs.getMatchingID(i))&&(_applicationSettings=ub.current_material.settings.applications[a],_applicationViewObjects=ub.funcs.getApplicationViewObjects(a),_.find(ub.current_material.settings.applications,{code:a.toString()}),_.each(_applicationViewObjects,function(e){var t=ub.objects[o][_patternStr];o=e.perspective+"_view";var i=ub.objects[o]["objects_"+a];_.each(i.children,function(e){e.alpha=parseInt(s)/100}),t.alpha=parseInt(n)/100}))},ub.funcs.prepareBackendOpacitySettings=function(t){return"mascot"===t.application_type&&"sublimated"===ub.config.uniform_application_type&&_.each(t.application.views,function(e){""!==e.application.appOpacity&&void 0!==e.application.appOpacity?(t.withOpacity=!0,t.opacityConfig=e.application.appOpacity):t.withOpacity=!1}),t},ub.funcs.changeMascotOpacityFromBackend=function(e,t){var i=parseInt(t);e.alpha=parseInt(i)/100},ub.funcs.activateMascots=function(e){if(!ub.funcs.popupsVisible()&&ub.funcs.okToStart()){ub.funcs.activatePanelGuard();var t=ub.funcs.getApplicationSettings(e);if(ub.funcs.activateMoveTool(e),"mascot"===t.application_type){if(ub.funcs.isBitFieldOn())if(_.find(ub.data.markerBitField,{value:!0}).code.toString()!==e.toString())return;$("div#changeApplicationUI").remove();var l=e.toString(),c=_.find(ub.current_material.settings.applications,{code:l}),o=c.application_type,i=ub.current_material.material.uniform_category,n=ub.data.sportAliases.getAlias(i),a=ub.funcs.getApplicationSizes(o,n.alias),r=ub.funcs.isFreeFormToolEnabled(l);ub.funcs.isCurrentSport("Football")?("2"===l&&"mascot"===o&&(a=ub.funcs.getApplicationSizes("mascot_2")),"5"===l&&"mascot"===o&&(a=ub.funcs.getApplicationSizes("mascot_5"))):a="Wrestling"===ub.current_material.material.uniform_category?ub.funcs.getApplicationSizes("mascot_wrestling"):ub.funcs.isCurrentSport("Football")||"Wrestling"===i||void 0===n?(console.warn("no sizes setting defaulting to generic"),ub.funcs.getApplicationSizes(o)):ub.funcs.isCurrentType("upper")?ub.data.applicationSizes.getSizes(n.alias,"mascot",parseInt(e)):ub.funcs.isCurrentType("lower")&&ub.funcs.isSocks()?ub.funcs.getApplicationSizes(o,n.alias,l):ub.funcs.getApplicationSizesPant(o,n.alias,l);var s=ub.data.applicationSizes.getConfiguration(o,l);ub.data.consumeApplicationSizes.isValid(ub.config.sport)?(ub.utilities.info("===>Using sizes from backend: "),console.log("Default Sizes: "),console.log(a),console.log("Application #: "),console.log(l),ub.data.mascotSizesFromBackend.isValid(ub.config.sport)&&void 0!==s&&(console.log("SIZE FROM CONFIG===>",s),console.log(s.sizes),console.log(_.pluck(s.sizes,"size")),a=s)):ub.data.consumeApplicationSizes.isValid(ub.config.sport)&&(ub.utilities.info("Application Type: "+o),ub.utilities.info("alias: "+n.alias),ub.utilities.error(ub.config.sport+" - "+o+" - "+l+" don't have application sizes settings on the backend."));var u=c.mascot,p=(c.size,c.color_array,u.name),d=u.icon,f=o.toTitleCase(),h="";ub.funcs.deactivatePanels(),ub.funcs.preProcessApplication(e),-1!==c.type.indexOf("number")&&2;var m="on";if(void 0!==c.status)m=c.status;h='<div id="applicationUI" data-application-id="'+l+'">',h+='<div class="header">',h+='<div class="toggle" data-status="'+m+'"><div class="valueContainer"><div class="toggleOption on">ON</div><div class="toggleOption off">OFF</div></div></div>',h+='<div class="applicationType"> ['+l+'] Stock Mascot<span class="changeApplicationType"><i class="fa fa-caret-down" aria-hidden="true"></i></span></div><span class="cog"><i class="fa fa-cog" aria-hidden="true"></i></span></div>',h+='<div class="body">',h+='<div class="cover"></div>',h+='<div class="ui-row">',h+='<label class="applicationLabels font_name">Stock Mascot</label>',h+='<span class="fontLeft" data-direction="previous" style="opacity: 0;"><i class="fa fa-chevron-left" aria-hidden="true"></i></span>',h+='<span class="font_name" style="font-size: 1.2em; font-family: '+p+';">'+p+"</span>",h+='<span class="fontRight" data-direction="next"  style="opacity: 0;"><i class="fa fa-chevron-right" aria-hidden="true"></i></span>',h+="</div>",h+='<div class="ui-row">';var b,g=ub.config.features.isOn("uniforms","tackeTwillCustomSizes"),v="Size",y="";(r||ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand))&&(v="Measurements",y="custom"),h+='<label class="applicationLabels font_size '+y+'">'+v+"</label>";b="4"!==l||"Football 2017"===ub.config.sport||_.contains(["Hockey Socks"],ub.config.blockPattern)?_.sortBy(a.sizes,function(e){return parseFloat(e.size)}):[{size:"0.5"}],void 0===c.size&&(c.size=2!==e||5!==e?4:10,4===e&&(c.size=.5)),h+=ub.funcs.generateSizes(o,b,c,l),h+="</div>",!r&&g&&(h+='<div class="ui-row" style="color: white;">',h+='<label class="applicationLabels font_name"></label>',h+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="tall" style="margin-left: 30px;"><label style="width: 17%;">&nbspTall</label></option>',h+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="wide"><label style="width: 17%;">&nbspWide</label></option>',h+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="bestfit"><label>&nbspBest Fit</label></option>',h+="</div>"),h+='<div class="clearfix"></div>',h+='<div class="color-pattern-tabs">',h+='<span class="tab active" data-item="colors">Colors</span>',h+='<span class="tab" data-item="manipulators"></span>',h+="</div>",h+='<div class="ui-row">',h+='<div class="column1 applications colors">',h+='<div class="sub1">',h+="<br />",h+='<span class="accentThumb"><img src="'+d+'"/></span><br />',h+='<span class="accent">Change Mascot</span>',h+="<br />","Custom Logo"===c.mascot.name&&(h+='<a class="view-file" data-file="'+c.customFilename+'" target="_new">View File</a>',h+="<br /><br />"),h+='<span class="flipButton">Flip</span>',h+="</div>",h+='<div class="colorContainer">',"1039"!==ub.current_material.settings.applications[e].mascot.id&&_.each(c.mascot.layers_properties,function(e){var t=e.default_color,i=ub.funcs.getColorByColorCode(t);_.find(ub.current_material.settings.team_colors,{color_code:i.color_code});void 0!==i?h+=ub.funcs.createSmallColorPickers(i.color_code,e.layer_number,"Color "+e.layer_number,e.default_color,"mascots"):util.error("Hex Code: "+t+" not found!")}),"sublimated"===ub.config.uniform_application_type&&(h+='<br/><span class="watermark-intensity">Watermark Intensity:</span>',h+='<input type="text" id="opacity-slider" value="" />'),h+="</div>",h+="</div>",_templateStrManipulators=ub.funcs.updateManipulatorsPanel(c),h+='<div class="column1 applications manipulators">',h+=_templateStrManipulators,h+="</div>",h+="</div>",h+="</div>",h+="</div>",$(".modifier_main_container").append(h),$("a.view-file").unbind("click"),$("a.view-file").on("click",function(){var e=$(this).data("file"),t=util.getExtension(e),i="";i+="pdf"===t||"ai"===t?"Open File ("+t+") on a new window<br />":"<img style='width: 100%;' src ='"+e+"' /> <br />",i+="<a class='displayFilename' target='_new' href = '"+e+"'>"+e+"</a>",ub.showModalTool(i)});if($("input#opacity-slider").show(),"function"==typeof $("#opacity-slider").destroy&&$("#opacity-slider").destroy(),$("#opacity-slider").ionRangeSlider({min:0,max:100,from:"number"==typeof c.alpha?100*c.alpha:100,onChange:function(e){ub.funcs.changeMascotOpacity(c.code,e.from)}}),"Custom Logo"===c.mascot.name&&void 0!==c.customFilename){var w=c.customFilename,S=w.split(".").pop();$prevImage=$("span.accentThumb > img"),"gif"===S||"jpg"===S||"bmp"===S||"png"===S||"jpeg"===S?$prevImage.attr("src",w):"pdf"===S?$prevImage.attr("src","/images/uiV1/pdf.png"):"ai"===S&&$prevImage.attr("src","/images/uiV1/ai.png")}ub.funcs.setupManipulatorEvents(c,o),$("div.color-pattern-tabs > span.tab").unbind("click"),$("div.color-pattern-tabs > span.tab").on("click",function(){var e=$(this).data("item");$("div.color-pattern-tabs > span.tab").removeClass("active"),$(this).addClass("active"),$("div.column1").hide(),$("div.column1."+e).fadeIn(),"manipulators"===e&&$('ul.tab-navs > li.tab[data-action="move"]').trigger("click")}),$("span.inPlacePreviewButton").unbind("click"),$("span.inPlacePreviewButton").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),ub.funcs.updateCoordinates(c);ub.funcs.getPrimaryView(c.application);var x=ub.funcs.getPrimaryViewObject(c.application);void 0!==x.application.flip&&1===x.application.flip?$("span.flipButton").addClass("active"):$("span.flipButton").removeClass("active"),$("span.flipButton").unbind("click"),$("span.flipButton").on("click",function(){var e=_.find(ub.current_material.settings.applications,{code:l});ub.funcs.flipMascot(e)}),$("div.applicationType").on("click",function(){if("off"!==$("div.toggle").data("status"))if(0<$("div#changeApplicationUI").length){"visible"===$("div#changeApplicationUI").data("status")?($("div#changeApplicationUI").hide().data("status","hidden"),$("div.applicationType").removeClass("toggledApplicationType")):($("div#changeApplicationUI").fadeIn().data("status","visible"),$("div.applicationType").addClass("toggledApplicationType"))}else{var t=_.find(ub.current_material.settings.applications,{code:l}),e=t.validApplicationTypes;h='<div id="changeApplicationUI" data-status="hidden" data-application-id="'+l+'">',h+='<div class="header">',h+='<div class="">Select Application Type for Location <strong>#'+l+"</strong></div>",h+='<div class="close-popup closeApplicationChanger"><i class="fa fa-times" aria-hidden="true"></i></div>',h+='<div class="body">';var i="",n="",a="";_.contains(e,"number")||(i="deactivatedOptionButton"),"front_number"!==o&&"back_number"!==o||(n="currentlySelectedType",a="(current)"),h+='<div data-type="player_number" class="optionButton '+i+" "+n+'">',h+='<div class="icon"><img src="/images/main-ui/icon-number-large.png"></div>',h+='<div class="caption">Player Number '+a+"</div>",h+="</div>",a=n=i="",_.contains(e,"team_name")||(i="deactivatedOptionButton"),"team_name"===o&&(n="currentlySelectedType",a="(current)"),h+='<div data-type="team_name" class="optionButton '+i+" "+n+'">',h+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',h+='<div class="caption">Team Name '+a+"</div>",h+="</div>",h+="<br />",a=n=i="",_.contains(e,"player_name")||(i="deactivatedOptionButton"),"player_name"===o&&(n="currentlySelectedType",a="(current)"),h+='<div data-type="player_name" class="optionButton '+i+" "+n+'">',h+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',h+='<div class="caption">Player Name '+a+"</div>",h+="</div>",a=n=i="",_.contains(e,"logo")||(i="deactivatedOptionButton"),"mascot"===o&&(n="currentlySelectedType",a="(current)"),h+='<div data-type="mascot" class="optionButton '+i+" "+n+'">',h+='<div class="icon"><img src="/images/main-ui/icon-mascot-large.png"></div>',h+='<div class="caption">Stock Mascot '+a+"</div>",h+="</div>",_.contains(e,"embellishments")||(i="deactivatedOptionButton"),h+='<div class="optionButton '+i+'" data-type="embellishments">',h+='<div class="icon"><img src="/images/main-ui/icon-embellishments-large.png"></div>',h+='<div class="caption">Custom Mascot</div>',h+="</div>",h+="</div>",h+="</div>",a=n=i="",$(".modifier_main_container").append(h),$("div#changeApplicationUI").hide().fadeIn().data("status","visible"),$("div.applicationType").addClass("toggledApplicationType"),$("div.optionButton").on("click",function(){if(!$(this).hasClass("deactivatedOptionButton")){ub.funcs.resetFlipStatus(t);var e=$(this).data("type");ub.funcs.changeApplicationType(t,e),$("div#changeApplicationUI").remove()}}),$("div.closeApplicationChanger").on("click",function(){$("div#changeApplicationUI").hide().data("status","hidden"),$("div.applicationType").removeClass("toggledApplicationType")})}});var k=void 0;void 0!==(k=ub.data.matchingIDs.getMatchingID(l))&&ub.funcs.toggleApplication(k.toString(),m),$("span.font_size").on("click",function(){var e=$(this).data("size");$(".font_size").removeClass("active"),$(this).addClass("active");var t=$(this).hasClass("custom"),i=$(this).hasClass("scale"),n=$(this).hasClass("rotate"),a=$(this).hasClass("move");if(t&&i)return $("div.color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.scale").trigger("click");if(t&&a)return $("color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.move").trigger("click");if(t&&n)return $("color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.rotate").trigger("click");var o=ub.funcs.clearScale(c);c.oldScale=o,ub.funcs.changeMascotSize(e,c);var r=void 0;if(void 0!==(r=ub.data.matchingIDs.getMatchingID(l))){var s=_.find(ub.current_material.settings.applications,{code:r.toString()});ub.funcs.changeMascotSize(e,s)}$("select.customSize option:first").prop("selected",!0),$("input.custom-size-type").prop("checked",!1),$("input.custom-size-type").attr("disabled",!1),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0)}),$("span.font_name").on("click",function(){ub.funcs.createMascotPopup(f,u,c)}),$("span.accentThumb, span.accent").on("click",function(){ub.funcs.createMascotPopup(f,u,c)}),$("span.colorItem").on("click",function(){var e=$(this).data("layer-no"),t=$(this).data("color-code"),i=($(this).data("layer-name"),$(this).data("temp")),n=ub.funcs.getColorByColorCode(t),a={layerNo:e,color:c.color_array[e-1],applicationCode:c.code};"undo"!==i&&ub.funcs.pushOldState("color change","application",c,a),ub.funcs.changeMascotColor(n,e,c),ub.funcs.changeActiveColorSmallColorPicker(e,t,n);var o=!0,r=void 0,s=void 0;void 0!==(r=ub.data.matchingIDs.getMatchingID(l))&&(s=_.find(ub.current_material.settings.applications,{code:r.toString()})),void 0!==s&&("free"!==s.type&&ub.funcs.isSocks()&&(o=!1),"object"==typeof c.mascot&&"object"==typeof s.mascot&&c.mascot.id===s.mascot.id&&(o=!0)),void 0!==r&&o&&ub.funcs.changeMascotColor(n,e,s)}),$("select.customSize").on("change",function(){var e=$(this).find(":selected").val(),t=ub.funcs.clearScale(c);c.oldScale=t,ub.funcs.changeMascotSize(e,c);var i=void 0;if(void 0!==(i=ub.data.matchingIDs.getMatchingID(l))){var n=_.find(ub.current_material.settings.applications,{code:i.toString()});ub.funcs.changeMascotSize(e,n)}$("input.custom-size-type").prop("checked",!1),$("input.custom-size-type").attr("disabled",!1),$("span.font_size").removeClass("active"),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0)}),$("input.custom-size-type").on("click",function(){var e=$(this).data("type");c.custom_size_type=e}),$("div.toggleOption").unbind("click"),$("div.toggleOption").on("click",function(){var e;"on"===$("div.toggle").data("status")?(e="off",ub.funcs.deactivateMoveTool(),ub.funcs.removeUnusedElement("div#changeApplicationUI")):(e="on",ub.funcs.activateMoveTool(l)),"on"===e&&ub.funcs.LSRSBSFS(parseInt(l)),ub.funcs.toggleApplication(l,e);var t=void 0,i=!0,n=void 0;void 0!==(t=ub.data.matchingIDs.getMatchingID(l))&&(n=_.find(ub.current_material.settings.applications,{code:t.toString()})),void 0!==n&&"object"==typeof c.mascot&&"object"==typeof n.mascot&&(i=c.mascot.id===n.mascot.id),void 0!==t&&i&&ub.funcs.toggleApplication(t,e)}),$("div#applicationUI").fadeIn(),ub.funcs.activateLayer(e),ub.funcs.toggleApplication(l,m),ub.funcs.afterActivateMascots(l),ub.funcs.activateCustomSizeType(c),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0)}else ub.funcs.activateApplications(e)}},ub.funcs.turnOffApplicationsBySide=function(t){_.each(ub.current_material.settings.applications,function(e){ub.funcs.getPrimaryView(e.application)===t&&"on"===e.status&&ub.funcs.toggleApplication(parseInt(e.code),"off")})},ub.funcs.turnOnApplicationsBySide=function(t){_.each(ub.current_material.settings.applications,function(e){ub.funcs.getPrimaryView(e.application)===t&&"off"===e.status&&"free"!==e.application_type&&ub.funcs.toggleApplication(parseInt(e.code),"on")})},ub.funcs.LSRSBSFS=function(e){var t,i=ub.funcs.getApplicationSettings(e);52!==e&&53!==e||(ub.funcs.toggleApplication(54,"off"),ub.funcs.toggleApplication(55,"off")),54!==e&&55!==e||(ub.funcs.toggleApplication(52,"off"),ub.funcs.toggleApplication(53,"off")),70<parseInt(e)&&ub.funcs.isSocks()&&"Hockey Sock"!==ub.config.blockPattern&&void 0!==i&&"free"!==i.application_type&&("left"!==(t=ub.funcs.getPrimaryView(i.application))&&"right"!==t||(ub.funcs.turnOffApplicationsBySide("back"),ub.funcs.turnOffApplicationsBySide("front"),ub.funcs.turnOnApplicationsBySide("left"),ub.funcs.turnOnApplicationsBySide("right")),"front"!==t&&"back"!==t||(ub.funcs.turnOffApplicationsBySide("left"),ub.funcs.turnOffApplicationsBySide("right"),ub.funcs.turnOnApplicationsBySide("front"),ub.funcs.turnOnApplicationsBySide("back")))},ub.funcs.changeActiveColorSmallColorPicker=function(e,t,i,n){var a=$('div.smallPickerContainer[data-layer-no="'+e+'"]'),o=n;o=void 0===n?"":'[data-object-type="'+n+'"]';var r=a.find("span.colorItem"+o).not(".turnOff").not('[data-color-code="none"]');r.html("&nbsp;"),r.css("width","25px"),r.removeClass("activeColorItem");var s=a.find("span.colorItem"+o+'[data-color-code="'+t+'"]').not(".turnOff");s.addClass("activeColorItem"),s.css("width","40px"),"none"===t?(s.html('<i class="fa fa-ban" aria-hidden="true"></i>'),s.css("color","#000")):(s.css("color","#fff"),s.html('<i class="fa fa-check" aria-hidden="true"></i>'),a.find("span.colorItem"+o+'[data-color-code="none"]').css("color","#eee").css("width","25px"))},ub.data.markerBitField={},ub.funcs.highlightMarker=function(e,t){t===ub.active_view&&void 0!==ub.objects[t+"_view"]["locations_"+e]&&(_.find(ub.objects[t+"_view"]["locations_"+e].children,{ubName:"Marker"}).alpha=1,ub.data.markerBitField[e]={value:!0,code:e},$("body").css("cursor","pointer"),ub.showLocation||(ub.objects[t+"_view"]["locations_"+e].alpha=1))},ub.funcs.unHighlightMarker=function(e,t){void 0!==ub.objects[t+"_view"]["locations_"+e]&&(ub.objects[t+"_view"]["locations_"+e].children[0].alpha=.5,ub.data.markerBitField[e]={value:!1,code:e},ub.funcs.isBitFieldOn()||$("body").css("cursor","auto"),ub.showLocation||(ub.objects[t+"_view"]["locations_"+e].alpha=0))},ub.funcs.isBitFieldOn=function(){var t=!1;return _.each(ub.data.markerBitField,function(e){e.value&&(t=!0)}),t},ub.funcs.toggleApplication=function(n,e){var a=ub.funcs.getApplicationSettings(parseInt(n));if(void 0!==a){var t=a.application.views,o=e;if("off"===o){if(ub.activeApplication===n)return;$("div.toggle").data("status","off"),$("div.valueContainer").css("margin-left","-100px"),$("div.cover").fadeIn("fast"),$("div.toggle").removeClass("defaultShadow"),$("div.applicationType").css({color:"#acacac","text-decoration":"line-through",opacity:"0.2"}),$("span.cog").hide()}else $("div.toggle").data("status","on"),$("div.valueContainer").css("margin-left","0px"),$("div.cover").hide(),$("div.toggle").addClass("defaultShadow"),$("div.applicationType").css({color:"#3d3d3d","text-decoration":"initial",opacity:"1"}),$("span.cog").fadeIn(),ub.funcs.hideGAFontTool();_.each(t,function(e){var t=e.perspective+"_view",i=ub.objects[t]["objects_"+n];void 0!==i&&("on"===o?(i.zIndex=-(ub.funcs.generateZindex("applications")+a.zIndex),a.status="on","mascot"!==a.application_type&&"embellishments"!==a.application_type&&ub.funcs.changeFontFromPopup(a.font_obj.id,a),ub.updateLayersOrder(ub[t])):(i.oldZIndex=i.zIndex,i.zIndex=0,ub.updateLayersOrder(ub[t]),a.status="off"))})}},ub.funcs.deActivateLocations=function(){ub.showLocation&&(ub.funcs.removeLocations(),$('.change-view[data-view="locations"]').removeClass("zoom_on"))},ub.funcs.deActivateZoom=function(){ub.zoom&&(ub.zoom_off(),$('.change-view[data-view="zoom"]').removeClass("zoom_on"))},ub.funcs.preProcessApplication=function(e){parseInt(e)},ub.funcs.getMascotObj=function(){},ub.funcs.getAccentByName=function(e){return _.find(ub.data.accents.items,{name:e})},ub.funcs.getFontByName=function(e){return _.find(ub.data.fonts,{name:e})},ub.funcs.getFontByID=function(e){return _.find(ub.data.fonts,{id:e})},ub.funcs.getSampleAccent=function(){return ub.funcs.getAccentByName("Default")},ub.funcs.getSampleTeamName=function(){var e="Mustangs";return"Wrestling"===ub.funcs.getCurrentUniformCategory()&&(e="Tigers"),e},ub.funcs.getSamplePlayerName=function(){var e="Grizzlies";return"Wrestling"===ub.funcs.getCurrentUniformCategory()&&(e="Tiger"),e},ub.funcs.getSampleNumber=function(){return"85"},ub.funcs.clearInksoftID=function(e){_.each(e.application.views,function(e){e.application.inksoftDesignID=void 0})},ub.funcs.changeApplicationType=function(e,t){delete e.custom_obj,delete e.scale_type,delete e.custom_size_type,delete e.application.views[0].application.scale;var i=e,n=t,a=parseInt(i.code);if("mascot"===n){var o="mascot",r="181";"richardson"===ub.current_material.material.brand&&(r="1584"),ub.funcs.deActivateApplications(),i.application_type=o,i.type=o,i.object_type=o,i.mascot=_.find(ub.data.mascots,{id:r}),i.color_array=ub.funcs.getDefaultColors(),i.application.name=o.toTitleCase(),i.application.type=o,1===a&&(c=2),2===a&&(c=8),5===a&&(c=10),4===a&&(c=.5),c=2===a||5===a||70<a?8:9===a||10===a||32===a||33===a?3:2,ub.funcs.isCurrentSport("Wrestling")&&"upper"===ub.current_material.material.type&&(c=5),ub.funcs.isCurrentSport("Wrestling")&&"Fight Short"===ub.current_material.material.neck_option&&(c=5),ub.funcs.isCurrentSport("Football")||ub.funcs.isCurrentSport("Wrestling")||(c=4),!ub.funcs.isCurrentSport("Football 2017")||4!==a&&7!==a||(c=1),ub.funcs.isCurrentSport("Baseball")&&15===a&&(c=1.75),!ub.funcs.isCurrentSport("Baseball")||7!==a&&6!==a||(c=2),ub.funcs.isCurrentSport("Fastpitch")&&15===a&&(c=1.75),!ub.funcs.isCurrentSport("Fastpitch")||7!==a&&6!==a||(c=2),ub.funcs.isSocks()&&(c=2.5),ub.funcs.isCurrentSport("Baseball")&&_.contains([37,38],a)&&(c=3),ub.funcs.isCurrentSport("Baseball")&&_.contains([39,40],a)&&(c=2),ub.funcs.isCurrentSport("Fastpitch")&&_.contains([37,38],a)&&(c=3),ub.funcs.isCurrentSport("Fastpitch")&&_.contains([39,40],a)&&(c=2),ub.funcs.isCurrentSport("Volleyball")&&"lower"===ub.current_material.material.type&&(c=1),ub.funcs.isCurrentSport("Volleyball")&&"upper"===ub.current_material.material.type&&(c=2),ub.funcs.isCurrentSport("Hockey")&&!_.isEqual(ub.config.blockPattern,"Hockey Socks")&&_.contains([2,5],a)&&(c=6),ub.funcs.isCurrentSport("2017 Team Short with Pockets (Apparel)")&&(c=4),ub.funcs.isCurrentSport("Signature Coaches Short (Apparel)")&&(c=4),ub.funcs.isCurrentSport("Football")&&"lower"===ub.current_material.material.type&&"sublimated"===ub.config.uniform_application_type&&(c=4),ub.funcs.setAppSize(a,c),ub.funcs.clearInksoftID(i);var s=void 0,l=!0;s=ub.data.matchingIDs.getMatchingID(a),_.contains(ub.data.matchingApplications,a)&&void 0!==s&&("free"!==(u=ub.current_material.settings.applications[s]).type&&ub.funcs.isSocks()&&(l=!1),l&&(u.application_type=o,u.type=o,u.object_type=o,u.color_array=ub.funcs.getDefaultColors(),1<i.color_array.length&&(i.color_array=[i.color_array[0]]),u.mascot=_.find(ub.data.mascots,{id:r}),void 0===u.color_array&&(u.color_array=[ub.current_material.settings.team_colors[1]]),u.application.name=o.toTitleCase(),u.application.type=o,ub.funcs.setAppSize(s,c),ub.funcs.update_application_mascot(u.application,u.mascot))),ub.funcs.update_application_mascot(i.application,i.mascot),ub.current_material.settings.applications[a]=i,ub.funcs.LSRSBSFS(parseInt(a)),ub.funcs.activateMascots(i.code)}if("player_name"===n){ub.funcs.deActivateApplications();o="player_name";var c=2.5;ub.funcs.isFreeFormToolEnabled(a)&&(c=4),ub.funcs.isCurrentSport("Baseball")&&(c=5),ub.funcs.isCurrentSport("Fastpitch")&&(c=2),ub.funcs.setAppSize(a,c),i.accent_obj=ub.funcs.getSampleAccent(),i.text=ub.funcs.getSamplePlayerName(),i.application_type=o,i.type=o,i.object_type="text object",i.font_obj=ub.funcs.getSampleFont(),i.color_array=ub.funcs.getDefaultColors(),1<i.color_array.length&&(i.color_array=[i.color_array[0]]),i.application.name=o.toTitleCase(),i.application.type=o,ub.create_application(i,void 0),ub.funcs.activateApplications(i.code),ub.current_material.settings.applications[a]=i,delete ub.current_material.settings.applications[a].application.views[0].application.appCustomScale}if("player_number"===n){ub.funcs.deActivateApplications();o="";var u,p=void 0,d=["Hockey Socks"];if(_.contains(d,ub.current_material.material.block_pattern)?"lower"===ub.config.type&&_.contains(d,ub.current_material.material.block_pattern)&&(p=ub.data.initialSizesLower.getSize(n,a,ub.current_material.material.uniform_category,ub.current_material.material.block_pattern)):p=ub.data.initialSizes.getSize(n,a,ub.current_material.material.uniform_category),void 0!==p){o=p.resultApplicationType,i.size=p.size,i.font_size=p.font_size;var f=-1!==i.application.layer.indexOf("Shoulder")||-1!==i.application.layer.indexOf("Cowl"),h=-1!==i.application.layer.indexOf("Sleeve");f&&(o="shoulder_number"),h&&(o="sleeve_number");var m=ub.funcs.getPrimaryView(i.application);"front"!==m||f||h||(o="front_number"),"back"!==m||f||h||(o="back_number")}i.accent_obj=ub.funcs.getSampleAccent(),i.text=ub.funcs.getSampleNumber(),i.application_type=o,i.type=o,i.object_type="text object",i.font_obj=ub.funcs.getSampleFont(),i.color_array=ub.funcs.getDefaultColors(),void 0===i.color_array&&(i.color_array=[ub.current_material.settings.team_colors[1]]),1<i.color_array.length&&(i.color_array=[i.color_array[0]]),i.application.name=o.toTitleCase(),i.application.type=o,void 0!==(s=ub.data.matchingIDs.getMatchingID(i.code))&&_.contains(ub.data.matchingApplications,a)&&((u=ub.current_material.settings.applications[s]).accent_obj=ub.funcs.getSampleAccent(),u.text=ub.funcs.getSampleNumber(),u.application_type=o,u.type=o,u.object_type="text object",u.font_obj=ub.funcs.getSampleFont(),u.color_array=ub.funcs.getDefaultColors(),1<u.color_array.length&&(u.color_array=[u.color_array[0]]),u.application.name=o.toTitleCase(),u.application.type=o,ub.funcs.setAppSize(s,p.size),ub.create_application(u,void 0)),ub.create_application(i,void 0),ub.funcs.activateApplications(i.code),ub.current_material.settings.applications[a]=i,delete ub.current_material.settings.applications[a].application.views[0].application.appCustomScale}if("team_name"===n){ub.funcs.deActivateApplications();o="team_name",c=2;ub.funcs.isCurrentSport("Wrestling")&&(c=4),ub.funcs.isCurrentSport("Baseball")&&(c=5),_.isEqual(ub.config.blockPattern,"Hockey Twill Set-in")&&(c=2.5),ub.funcs.setAppSize(a,c),i.text=ub.funcs.getSampleTeamName(),i.accent_obj=ub.funcs.getSampleAccent(),i.application_type=o,i.type=o,i.object_type="text object",i.font_obj=ub.funcs.getSampleFont(),i.color_array=ub.funcs.getDefaultColors(),1<i.color_array.length&&(i.color_array=[i.color_array[0]]),i.application.name=o.toTitleCase(),i.application.type=o,ub.create_application(i,void 0),ub.funcs.activateApplications(i.code),ub.current_material.settings.applications[a]=i,ub.funcs.LSRSBSFS(parseInt(a)),delete ub.current_material.settings.applications[a].application.views[0].application.appCustomScale}if("embellishments"===n){o="embellishments",c=4;ub.funcs.deActivateApplications(),i.font_obj=ub.funcs.getSampleFont(),i.application_type=o,i.type=o,i.object_type=o,i.embellishment=window.is.embellishments.getDefaultEmbellishment(i),i.color_array=ub.funcs.getDefaultColors(),i.application.name=o.toTitleCase(),i.application.type=o,ub.funcs.setAppSize(a,c),ub.funcs.update_application_embellishments(i.application,i.embellishment),ub.current_material.settings.applications[a]=i,ub.funcs.LSRSBSFS(parseInt(a)),ub.funcs.activateEmbellishments(i.code)}ub.funcs.runAfterUpdate(a)},ub.funcs.postData=function(e,t){var i=e,n=t;$.ajax({url:n,type:"POST",data:JSON.stringify(i),dataType:"json",crossDomain:!0,contentType:"application/json",success:function(e){ub.showModal(e.message),ub.loader(ub.current_material.fonts_url,"fonts",ub.callback_update)}})},ub.funcs.saveFontData=function(e,t,i,n){var a=[],o=e,r=t,s=ub.funcs.getFontByID(o),l=JSON.parse(s.font_size_table.slice(1,-1)),c=ub.data.getPixelFontSize(o,r),u=$('input[name="font-size"]').val(),p=$('input[name="offsetX"]').val(),d=$('input[name="offsetY"]').val(),f=$('input[name="scaleX"]').val(),h=$('input[name="scaleY"]').val();c.outputSize=u,c.xOffset=p,c.yOffset=d,c.xScale=f,c.yScale=h,_.each(l,function(e){e.inputSize!==c.inputSize?a.push(e):a.push(c)});var m=ub.config.api_host+"/api/font/dupdate",b={name:s.name,id:e,font_size_table:a};ub.funcs.postData(b,m)},ub.funcs.hideGAFontTool=function(){$("span.cog").hide()},ub.funcs.runBeforeUpdate=function(e){},ub.funcs.runAfterUpdate=function(e,t){if(!ub.funcs.getSettingsObject(e).dirty&&"richardson"!==ub.current_material.material.brand){var i=ub.current_material.material.uniform_category,n=ub.current_material.material.block_pattern;ub.data.oneInchPullUpExemptions.isExempted(i,n)||ub.funcs.oneInchPullUp(e)}ub.funcs.updateCaption(e),ub.funcs.isCurrentType("upper")?ub.funcs.oneInchPullUpMascots(e):void 0===t&&ub.funcs.oneInchPushDownMascotsPant(e)},ub.funcs.okToStart=function(){var e=!0,t=_.size(ub.current_material.settings.team_colors);return(t<_.size(ub.data.colorsUsed)||8<t)&&(t<2&&(ub.startModal(1),e=!1),ub.branding.useAllColors||8<t&&(ub.startModal(2),e=!1)),e},ub.funcs.updateCoordinates=function(e){var t=ub.funcs.getPrimaryViewObject(e.application),i=Math.round(t.application.center.x),n=Math.round(t.application.center.y);$("span.custom_text.move").html(i.toString().substr(0,4)+", "+n.toString().substr(0,4))},ub.funcs.activatePanelGuard=function(){($("div#parts_dropdown").is(":visible")||$("div#single_team-color-picker").is(":visible"))&&ub.funcs.activateBody()},ub.funcs.deactivatePipings=function(){$("div#pipingsUI").remove()},ub.funcs.deActivateRandomFeeds=function(){$("div#randomFeedsUI").remove()},ub.funcs.deactivatePanels=function(){ub.funcs.deActivateApplications(),ub.funcs.deActivateColorPickers(),ub.funcs.deActivatePatterns(),ub.funcs.deActivateLocations(),ub.funcs.deactivatePipings(),ub.funcs.deactivatePipings(),ub.funcs.deActivateRandomFeeds()},ub.funcs.popupsVisible=function(){return $("div#primaryMascotPopup").is(":visible")||$("div#primaryPatternPopup").is(":visible")},ub.funcs.beforeActivateApplication=function(){$("div#changeApplicationUI").remove()},ub.funcs.afterActivateApplication=function(e){ub.funcs.isCurrentSport("Football")||$("input.sampleText").addClass("disableUpperCaseRequirement"),_.contains(ub.fontGuideIDs,window.ub.valid)&&$("span.cog").fadeIn(),ub.funcs.activateDisableMoveTool(e)},ub.funcs.isFreeFormToolEnabled=function(e){return ub.data.freeFormToolEnabledSports.isValid(ub.current_material.material.uniform_category)&&70<parseInt(e)},ub.funcs.setAUIActiveSize=function(e){$("span.font_size").removeClass("active"),$('span.font_size[data-size="'+e+'"]').addClass("active")},ub.funcs.setupManipulatorEvents=function(t,i){$("ul.tab-navs > li.tab").unbind("click"),$("ul.tab-navs > li.tab").on("click",function(){var e=$(this).data("action");$("ul.tab-navs > li.tab").removeClass("active"),$(this).addClass("active"),$("div.manipulator-type-container").hide(),$('div.manipulator-type-container[data-type="'+e+'"]').show(),"move"===e&&($("div.color-pattern-tabs").hide(),ub.funcs.initializeMovePanel(t,i)),"rotate"===e&&($("div.color-pattern-tabs").hide(),ub.funcs.initializeRotatePanel(t,i)),"scale"===e&&($("div.color-pattern-tabs").hide(),ub.funcs.initializeScalePanel(t,i)),"close"===e&&($(".colorContainer.embellishment-buttons-container").show(),$("span.font_size").removeClass("active"),$("div.color-pattern-tabs").show(),$('span.tab[data-item="colors"]').trigger("click"))})},ub.funcs.setupTextSmallColorPickerEvents=function(r){$('span.colorItem[data-object-type="accent"]').unbind("click"),$('span.colorItem[data-object-type="accent"]').on("click",function(){var e,t=$(this).data("layer-no"),i=$(this).data("color-code"),n=$(this).data("layer-name"),a=ub.funcs.getColorByColorCode(i);if(_.find(r.accent_obj.layers,{name:n}).default_color=a.hex_code,r.color_array[t-1]=a,ub.funcs.changeFontFromPopup(r.font_obj.id,r),ub.funcs.changeActiveColorSmallColorPicker(t,i,a,"accent"),void 0!==(e=ub.data.matchingIDs.getMatchingID(r.code))){var o=_.find(ub.current_material.settings.applications,{code:e.toString()});_.find(o.accent_obj.layers,{name:n}).default_color=a.hex_code,o.color_array[t-1]=a,ub.funcs.changeFontFromPopup(o.font_obj.id,o)}})},ub.funcs.updateManipulatorsPanel=function(e){return ub.utilities.buildTemplateString("#m-manipulator-panel",{})},ub.funcs.activateApplications=function(a){if(ub.funcs.beforeActivateApplication(),!$("div#primaryPatternPopup").is(":visible")&&!$("div#primaryMascotPopup").is(":visible")&&(ub.funcs.beforeActivateApplication(),ub.funcs.okToStart())){if(ub.funcs.activatePanelGuard(),ub.funcs.isBitFieldOn())if(_.find(ub.data.markerBitField,{value:!0}).code.toString()!==a.toString())return;$("div#changeApplicationUI").remove();var o=a.toString(),l=_.find(ub.current_material.settings.applications,{code:o});if(void 0!==l){ub.funcs.deactivatePanels(),ub.funcs.preProcessApplication(a);var e,t=l.text,r=l.application_type,i=r.toTitleCase(),n=(t=l.text,ub.current_material.material.uniform_category),s=ub.data.sportAliases.getAlias(n),c=ub.funcs.isFreeFormToolEnabled(o);e="Football"===n?ub.funcs.getApplicationSizes(r):"Baseball"===ub.current_material.material.uniform_category?ub.funcs.getApplicationSizes(r,"baseball"):"Football"!==n&&"Wrestling"!==n&&void 0!==s?ub.funcs.getApplicationSizes(r,s.alias):(ub.utilities.warn("no sizes setting defaulting to generic"),ub.funcs.getApplicationSizes(r));var u=ub.data.applicationSizes.getConfiguration(r,o);if(void 0!==u?ub.data.consumeApplicationSizes.isValid(ub.config.sport)&&(console.log("Default Sizes: "),console.log(e),console.log("Application #: "),console.log(o),ub.utilities.info("Using sizes from backend: "),console.log(u),console.log(u.sizes),_sizesSorted=_.sortBy(u.sizes,function(e){return parseFloat(e.size)}),u.sizes=_sizesSorted,e=u):ub.data.consumeApplicationSizes.isValid(ub.config.sport)&&(ub.utilities.info("Application Type: "+r),ub.utilities.info("alias: "+s.alias),ub.utilities.error(ub.config.sport+" - "+r+" - "+o+" don't have application sizes settings on the backend.")),"mascot"!==r)if("embellishments"!==r){var p=l.font_obj,d=p.name,f=p.caption,h=l.accent_obj,m=h.title,b=h.thumbnail,g=l.color_array,v="";ub.updateApplicationSpecsPanel(o),_.each(g,function(e){void 0!==e&&(v+='<span style="color: #'+e.hex_code+'" class="color-string">'+e.color_code+"</span>, ")});var y=v.lastIndexOf(","),w=(v=v.substring(0,y),""),S=ub.data.maxLength;-1!==l.type.indexOf("number")&&(S=ub.data.maxLengthNumbers),"sublimated"===ub.config.uniform_application_type&&(S=ub.data.maxLengthSublimated);var x="on";if(void 0!==l.status)x=l.status;w='<div id="applicationUI" data-application-id="'+o+'">',w+='<div class="header">',w+='<div class="toggle" data-status="'+x+'-Here"><div class="valueContainer"><div class="toggleOption on">ON</div><div class="toggleOption off">OFF</div></div></div>',w+='<div class="applicationType" data-type="'+r+'"> ['+o+"] "+i.replace("Number","# ")+'<span class="changeApplicationType"><i class="fa fa-caret-down" aria-hidden="true"></i></span></div><span class="cog"><i class="fa fa-cog" aria-hidden="true"></i></span></div>',w+='<div class="body">',w+='<div class="cover"></div>',w+='<div class="ui-row">',w+='<label class="applicationLabels font_name">Sample Text</label>',"sleeve_number"===l.application_type||"back_number"===l.application_type||"front_number"===l.application_type?w+='<input type="number" name="sampleText" class="sampleText" value="'+t+'" min="0" max="999" oninput="ub.funcs.maxLengthCheck(this)" onkeypress="return (event.charCode == 8 || event.charCode == 0) ? null : event.charCode >= 48 && event.charCode <= 57">':w+='<input type="text" name="sampleText" class="sampleText" value="'+t+'" maxlength="'+S+'">',w+="</div>",w+='<div class="ui-row">',w+='<label class="applicationLabels font_name">Font</label>',w+='<span class="fontLeft" data-direction="previous"><i class="fa fa-chevron-left" aria-hidden="true"></i></span>',w+='<span class="font_name" style="font-size: 1.2em; font-family: '+d+';">'+f+"</span>",w+='<span class="fontRight" data-direction="next"><i class="fa fa-chevron-right" aria-hidden="true"></i></span>',w+="</div>",w+='<div class="ui-row">';var k=ub.config.features.isOn("uniforms","tackeTwillCustomSizes"),C="Size",T="";(c||ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand))&&(C="Measurements",T="custom"),w+='<label class="applicationLabels font_size '+T+'">'+C+"</label>",void 0===l.font_size&&(l.font_size=2!==a||5!==a?4:10),w+=ub.funcs.generateSizes(r,e.sizes,l,a),w+="</div>",!c&&k&&(w+='<div class="ui-row" style="color: white;">',w+='<label class="applicationLabels font_name"></label>',w+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="tall" style="margin-left: 30px;"><label style="width: 17%;">&nbspTall</label></option>',w+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="wide"><label style="width: 17%;">&nbspWide</label></option>',w+='<input type="radio" class="custom-size-type" name="customSizeType" data-type="bestfit"><label>&nbspBest Fit</label></option>',w+="</div>"),w+='<div class="ui-row angleItems">',w+='<label class="applicationLabels font_size">Angle</label>',w+='<span class="angleItem" data-angle="straight">Straight</span>',w+='<span class="angleItem" data-angle="rotated">Rotated</span>',w+="</div>",w+='<div class="clearfix"></div>',w+='<div class="color-pattern-tabs">',w+='<span class="tab active" data-item="colors">Colors</span>',w+='<span class="tab" data-item="patterns">Patterns</span>',w+='<span class="tab" data-item="manipulators"></span>',ub.funcs.isCurrentSport("Baseball")&&(w+='<span class="tab" data-item="tailsweeps">Tail Sweeps</span>'),w+="</div>",w+='<div class="ui-row">',w+='<div class="column1 applications colors">',w+='<div class="sub1"><br />',w+='<span class="accentThumb"><img src="/images/sidebar/'+b+'"/></span><br />',w+='<span class="accent">'+m+"</span>",w+='<span class="flipButton">Vertical</span>',w+="</div>",w+='<div class="colorContainer">',_.each(l.accent_obj.layers,function(e){var t=e.default_color,i=ub.funcs.getColorObjByHexCode(t),n=e.layer_no-1;"Mask"!==e.name&&"Pseudo Shadow"!==e.name&&(void 0===(i=l.color_array[n])&&(t=e.default_color,i=ub.funcs.getColorObjByHexCode(t),ub.utilities.error("Undefined color found here!!!")),void 0!==i?w+=ub.funcs.createSmallColorPickers(i.color_code,e.layer_no,e.name,e.default_color,"accent"):util.error("Hex Code: "+t+" not found!"))});var z=l.tailsweep;void 0!==z&&"none"!==z.code||(z={code:"none",thumbnail:"none.png"}),w+="</div>",w+="</div>",(ub.funcs.isCurrentSport("Baseball")||ub.funcs.isCurrentSport("Fastpitch"))&&(w+='<div class="column1 applications tailsweeps">',w+='<div class="sub1 tailSweepThumb"><br />',w+='<span class="tailSweepThumb"><img src="/images/tailsweeps/thumbnails/'+z.thumbnail+'"/></span><br />',w+='<span class="tailsweep">'+z.code+"</span>",w+='<span class="flipButton">Vertical</span>',w+="</div>",w+='<div class="sizeContainer">',w+='<span class="sizeLabel">LENGTH 2</span>',w+='<span class="sizeItem sizeItem2" data-size="1">1</span>',w+='<span class="sizeItem sizeItem2" data-size="2">2</span>',w+='<span class="sizeItem sizeItem2" data-size="3">3</span>',w+='<span class="sizeItem sizeItem2" data-size="4">4</span>',w+='<span class="sizeItem sizeItem2" data-size="5">5</span>',w+='<span class="sizeItem sizeItem2" data-size="6">6</span>',w+="<br />",w+='<span class="sizeItem sizeItem2" data-size="7">7</span>',w+='<span class="sizeItem sizeItem2" data-size="8">8</span>',w+='<span class="sizeItem sizeItem2" data-size="9">9</span>',w+='<span class="sizeItem sizeItem2" data-size="10">10</span>',w+='<span class="sizeItem sizeItem2" data-size="11">11</span>',w+='<span class="sizeItem sizeItem2" data-size="12">12</span>',w+='<label class="applicationLabels">Rotated</label>',w+='<span class="angleItem" data-angle="straight">Straight</span>',w+='<span class="angleItem" data-angle="rotated">Rotated</span>',w+="</div>",w+="</div>");var P,A=l.pattern_obj;if(P=ub.funcs.updateTextPatternPanel(A),_templateStrManipulators=ub.funcs.updateManipulatorsPanel(l),w+='<div class="column1 applications patterns">',w+=P,w+="</div>",w+='<div class="column1 applications manipulators">',w+=_templateStrManipulators,w+="</div>",w+="</div>",w+="</div>",w+="</div>",$(".modifier_main_container").append(w),ub.funcs.setupTextSmallColorPickerEvents(l),ub.funcs.setupPatternsAndSmallColorPickerEvents(l),ub.funcs.setupManipulatorEvents(l,r),$("span.sizeItem").unbind("click"),$("span.sizeItem").on("click",function(){var e=$(this).data("size");$("span.sizeItem").removeClass("active"),ub.funcs.changeTailSweepFromPopup(o,l,e),$(this).addClass("active")}),$("span.angleItem").unbind("click"),$("span.angleItem").on("click",function(){var e=$(this).data("angle");$("span.angleItem").removeClass("active"),ub.funcs.changeAngleFromPopup(o,l,e),$(this).addClass("active")}),$("div.color-pattern-tabs > span.tab").unbind("click"),$("div.color-pattern-tabs > span.tab").on("click",function(){var e=$(this).data("item");$("div.color-pattern-tabs > span.tab").removeClass("active"),$(this).addClass("active"),$("div.column1").hide(),$("div.column1."+e).fadeIn(),"patterns"===e&&void 0!==l.pattern&&$('span.sizeItem[data-size="'+l.tailsweep.length+'"]').addClass("active"),"manipulators"===e&&$('ul.tab-navs > li.tab[data-action="move"]').trigger("click")}),$("span.apply-pattern").unbind("click"),$("span.apply-pattern").on("click",function(){ub.funcs.createPatternPopupApplications(ub.current_material.settings.applications[o])}),"Wrestling"!==ub.current_material.material.uniform_category)$("span.flipButton").hide();else{ub.funcs.updateCoordinates(l);ub.funcs.getPrimaryView(l.application),ub.funcs.getPrimaryViewObject(l.application);void 0!==l.verticalText&&0!==l.verticalText?$("span.flipButton").addClass("active"):$("span.flipButton").removeClass("active")}$("span.flipButton").on("click",function(){var e=_.find(ub.current_material.settings.applications,{code:o});ub.funcs.pushOldState("vertical text","application",e,{verticalText:e.verticalText}),ub.funcs.verticalText(e),ub.funcs.activateMoveTool(a)}),$("div.applicationType").on("click",function(){if("off"!==$("div.toggle").data("status"))if(0<$("div#changeApplicationUI").length){"visible"===$("div#changeApplicationUI").data("status")?($("div#changeApplicationUI").hide().data("status","hidden"),$("div.applicationType").removeClass("toggledApplicationType")):($("div#changeApplicationUI").fadeIn().data("status","visible"),$("div.applicationType").addClass("toggledApplicationType"))}else{var t=_.find(ub.current_material.settings.applications,{code:o}),e=t.validApplicationTypes;w='<div id="changeApplicationUI" data-status="hidden" data-application-id="'+o+'">',w+='<div class="header">',w+='<div class="">Select Application Type for Location <strong>#'+o+"</strong></div>",w+='<div class="close-popup closeApplicationChanger"><i class="fa fa-times" aria-hidden="true"></i></div>',w+='<div class="body">';var i="",n="",a="";_.contains(e,"number")||(i="deactivatedOptionButton"),"front_number"!==r&&"back_number"!==r||(n="currentlySelectedType",a="(current)"),w+='<div data-type="player_number" class="optionButton '+i+" "+n+'">',w+='<div class="icon"><img src="/images/main-ui/icon-number-large.png"></div>',w+='<div class="caption">Player Number '+a+"</div>",w+="</div>",a=n=i="",_.contains(e,"team_name")||(i="deactivatedOptionButton"),"team_name"===r&&(n="currentlySelectedType",a="(current)"),w+='<div data-type="team_name" class="optionButton '+i+" "+n+'">',w+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',w+='<div class="caption">Team Name '+a+"</div>",w+="</div>",w+="<br />",a=n=i="",_.contains(e,"player_name")||(i="deactivatedOptionButton"),"player_name"===r&&(n="currentlySelectedType",a="(current)"),w+='<div data-type="player_name" class="optionButton '+i+" "+n+'">',w+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',w+='<div class="caption">Player Name '+a+"</div>",w+="</div>",a=n=i="",_.contains(e,"logo")||(i="deactivatedOptionButton"),"mascot"===r&&(n="currentlySelectedType",a="(current)"),w+='<div data-type="mascot" class="optionButton '+i+" "+n+'">',w+='<div class="icon"><img src="/images/main-ui/icon-mascot-large.png"></div>',w+='<div class="caption">Stock Mascot '+a+"</div>",w+="</div>",_.contains(e,"embellishments")||(i="deactivatedOptionButton"),w+='<div class="optionButton '+i+'" data-type="embellishments">',w+='<div class="icon"><img src="/images/main-ui/icon-embellishments-large.png"></div>',w+='<div class="caption">Custom Mascot</div>',w+="</div>",w+="</div>",w+="</div>",a=n=i="",$(".modifier_main_container").append(w),$("div#changeApplicationUI").hide().fadeIn().data("status","visible"),$("div.applicationType").addClass("toggledApplicationType"),$("div.optionButton").on("click",function(){if(!$(this).hasClass("deactivatedOptionButton")){ub.funcs.resetFlipStatus(t);var e=$(this).data("type");ub.funcs.changeApplicationType(t,e),$("div#changeApplicationUI").remove(),ub.funcs.activateMascots(o)}}),$("div.closeApplicationChanger").on("click",function(){$("div#changeApplicationUI").hide().data("status","hidden"),$("div.applicationType").removeClass("toggledApplicationType")})}});var O=void 0;if(void 0!==(O=ub.data.matchingIDs.getMatchingID(o))&&ub.funcs.toggleApplication(O.toString(),x),$("span.fontLeft, span.fontRight").on("click",function(e){var t=$(this).data("direction"),i=ub.funcs.getFontObj(t,l.font_obj);if(void 0!==i){ub.funcs.changeFontFromPopup(i.id,l),ub.funcs.activateApplications(l.code),"front_number"!==l.type&&"back_number"!==l.type||_.each(ub.current_material.settings.applications,function(e){e.type!==l.application_type&&"logo"!==e.type&&"mascot"!==e.type&&-1!==l.type.indexOf("number")&&-1!==e.type.indexOf("number")&&ub.funcs.changeFontFromPopup(i.id,e)});var n=void 0;if(void 0!==(n=ub.data.matchingIDs.getMatchingID(o))){var a=_.find(ub.current_material.settings.applications,{code:n.toString()});ub.funcs.changeFontFromPopup(i.id,a)}}}),$("span.font_size").on("click",function(){if((ub.funcs.isSublimated()||ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand))&&$(this).hasClass("active"))$("ul.tab-navs > li.tab.close").trigger("click");else{var e=$(this).data("size"),t=$(this).hasClass("custom"),i=$(this).hasClass("scale"),n=$(this).hasClass("rotate"),a=$(this).hasClass("move");if($(".font_size").removeClass("active"),$(this).addClass("active"),t&&i)return $("color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.scale").trigger("click");if(t&&a)return $("color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.move").trigger("click");if(t&&n)return $("color-pattern-tabs").hide(),$('span.tab[data-item="manipulators"]').trigger("click"),void $("li.tab.rotate").trigger("click");var o=ub.funcs.clearScale(l);l.oldScale=o,ub.funcs.changeSize(e,l);var r=void 0;if(void 0!==(r=ub.data.matchingIDs.getMatchingID(l.code))){var s=_.find(ub.current_material.settings.applications,{code:r.toString()});ub.funcs.changeSize(e,s)}$("select.customSize option:first").prop("selected",!0),$("input.custom-size-type").prop("checked",!1),$("input.custom-size-type").attr("disabled",!1),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0)}}),$("select.customSize").on("change",function(){var e=$(this).find(":selected").val(),t=ub.funcs.clearScale(l);l.oldScale=t,ub.funcs.changeSize(e,l);var i=void 0;if(void 0!==(i=ub.data.matchingIDs.getMatchingID(o))){var n=_.find(ub.current_material.settings.applications,{code:i.toString()});ub.funcs.changeSize(e,n)}$("input.custom-size-type").prop("checked",!1),$("input.custom-size-type").attr("disabled",!1),$("span.font_size").removeClass("active"),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0)}),$("input.custom-size-type").on("click",function(){var e=$(this).data("type");l.custom_size_type=e}),$("span.font_name").on("click",function(){ub.funcs.createFontPopup(i,t,l)}),$("span.accentThumb, span.accent").on("click",function(){ub.funcs.createAccentPopup(l)}),$("span.patternThumb, span.pattern").unbind("click"),$("span.patternThumb, span.pattern").on("click",function(){ub.funcs.createPatternPopupApplications(l)}),$("span.tailSweepThumb, span.tailsweep").on("click",function(){ub.funcs.createTailSweepPopup(l)}),ub.status.onText=!1,$("input.sampleText").on("focus",function(){var e=$(this).val();0!==e.length&&(ub.status.onText=!0,l.text=e,ub.funcs.changeFontFromPopup(l.font_obj.id,l))}),$("input.sampleText").on("blur",function(){var t=$(this).val();if(0!==t.length){if(ub.status.onText=!1,l.text=t,ub.funcs.changeFontFromPopup(l.font_obj.id,l),c)return;_.each(ub.current_material.settings.applications,function(e){"logo"!==e.type&&"mascot"!==e.type&&-1!==l.type.indexOf("number")&&-1!==e.type.indexOf("number")&&(e.text=t,ub.funcs.changeFontFromPopup(e.font_obj.id,e))})}}),$("input.sampleText").on("keypress",function(e){var t=$(this).val();if(0!==t.length&&13===e.keyCode){if(l.text=t,void 0!==l.tailsweep&&(_length=l.text.length<=12?l.text.length:12,l.tailsweep.length=_length,$("span.sizeItem").removeClass("active"),$('span.sizeItem[data-size="'+l.tailsweep.length+'"]').addClass("active")),1===parseInt(a)&&(ub.funcs.isCurrentSport("Baseball")||ub.funcs.isCurrentSport("Fastpitch"))&&"team_name"===l.application_type){var i=t.length,n=l.font_size;i<=4?n=4:5<=i&&i<=7?n=3:8<=i&&(n=2),ub.funcs.setAppSize(a,n),ub.funcs.setAUIActiveSize(n)}if(ub.funcs.changeFontFromPopup(l.font_obj.id,l),c)return;_.each(ub.current_material.settings.applications,function(e){"logo"!==e.type&&"mascot"!==e.type&&-1!==l.type.indexOf("number")&&-1!==e.type.indexOf("number")&&(e.text=t,ub.funcs.changeFontFromPopup(e.font_obj.id,e))})}}),ub.funcs.hideGAFontTool(),$("span.cog").on("click",function(){var t=l.font_obj.id,i=l.font_size,e=ub.data.getPixelFontSize(l.font_obj.id,i,ub.active_view,{id:l.code}),n=ub.objects[ub.active_view+"_view"]["objects_"+l.code].ubFontSizeData,a=e.pixelFontSize,o={pixelFontSize:a,offSetX:e.xOffset,offSetY:e.yOffset,scaleX:e.xScale,scaleY:e.yScale,strokeInner:n.strokeInner,strokeOuter:n.strokeOuter},r="";$("#cogPopupContainer").remove(),r+='<div id="cogPopupContainer">',r+='<div id="cogPopup">',r+='<div class="popupHeader">GA Font Tool <i class="fa fa-floppy-o save-font-data" aria-hidden="true"></i></div>',r+='<div class="popup-row-top">',r+="<label>Inch: </label>",r+='<span class="popupValue"> '+i+'</span>"',r+="</div>",r+='<div class="popup-row">',r+='<div class="inputContainer">',r+='<div class="inputX">',r+='<span class="inputLabel">Font Size: </span><input class="pixelFontSize gaFontInput" name="font-size" value="'+a+'" /> px',r+="</div>",r+='<div class="inputY">',r+='<div class="notes" style="margin-left: 35px; margin-top: 25px;">Keyboard Shortcuts:<br /><br />Increase Value: <strong>ctrl + > </strong><br />Decrease Value: <strong>ctrl + < </strong><br /><br /></div>',r+="</div>",r+="</div>",r+="</div>",r+='<div class="popup-row">',r+='<div class="inputContainer">',r+='<div class="inputX">',r+='<span class="inputLabel">Offset X: </span><input class="offsetX gaFontInput" name="offsetX" value="'+e.xOffset+'" />',r+="</div>",r+='<div class="inputY">',r+='<span class="inputLabel">Offset Y: </span><input class="offsetY gaFontInput" name="offsetY" value="'+e.yOffset+'" />',r+="</div>",r+="</div>",r+="</div>",r+='<div class="popup-row">',r+='<div class="inputContainer">',r+='<div class="inputX">',r+='<span class="inputLabel">Scale X: </span><input class="scaleX gaFontInput" name="scaleX" value="'+e.xScale+'" />',r+="</div>",r+='<div class="inputY">',r+='<span class="inputLabel">Scale Y: </span><input class="scaleY gaFontInput" name="scaleY" value="'+e.yScale+'" />',r+="</div>",r+="</div>",r+="</div>",r+='<div class="popup-row">',r+='<div class="inputContainer">',r+='<div class="inputX">',r+='<span class="inputLabel">Inner Stroke: </span><input class="strokeInner gaFontInput" name="scaleX" value="'+n.strokeInner+'" />',r+="</div>",r+='<div class="inputY">',r+='<span class="inputLabel">Outer Stroke: </span><input class="strokeOuter gaFontInput" name="scaleY" value="'+n.strokeOuter+'" />',r+="</div>",r+="</div>",r+="</div>",r+='<div class="notes">* It is important to start with the font size closest to the size you will end up using. Starting with a small font and scaling it too far will affect the quality of the font. (e.g. jagged / pixelated edges)</div>',r+='<div class="button-row">',r+='<span class="resetButton">',r+="Reset",r+="</span>",r+='<span class="showFontGuide" data-status="hidden">',r+="Font Guide",r+="</span>",r+='<span class="cancelButton">',r+="Close",r+="</span>",r+='<span class="applyButton">',r+="Apply",r+="</span>",r+="</div>",r+="</div>",r+='</div">',$("body").append(r),$("i.save-font-data").on("click",function(e){e.altKey&&ub.funcs.saveFontData(t,i,applicationID,perspective)}),$("span.showFontGuide").on("click",function(){"hidden"===$(this).data("status")?(ub.showFontGuides(),$(this).data("status","visible"),$(this).addClass("guideActive")):(ub.hideFontGuides(),$(this).data("status","hidden"),$(this).removeClass("guideActive"))}),$("span.cancelButton").on("click",function(){$("#cogPopupContainer").remove()}),$("span.resetButton").on("click",function(){$("input.pixelFontSize").val(o.pixelFontSize),$("input.offsetX").val(o.offSetX),$("input.offsetY").val(o.offSetY),$("input.scaleX").val(o.scaleX),$("input.scaleY").val(o.scaleY),$("input.strokeInner").val(o.strokeInner),$("input.strokeOuter").val(o.strokeOuter)}),$("span.applyButton").on("click",function(){var e=$("input.pixelFontSize").val(),t=$("input.offsetX").val(),i=$("input.offsetY").val(),n=$("input.scaleX").val(),a=$("input.scaleY").val(),o=$("input.strokeInner").val(),r=$("input.strokeOuter").val();ub.create_application(l,e,t,i,n,a,o,r)}),$("input.gaFontInput").on("keypress",function(e){if(e.ctrlKey&&(46===e.which||44===e.which)){var t=$(this),i=t.attr("name"),n=t.val();if("font-size"===i||"offsetX"===i||"offsetY"===i){var a=parseInt(n);44===e.which&&(a-=5),46===e.which&&(a+=5),t.val(a),$("span.applyButton").trigger("click"),$(this).focus()}if("scaleX"===i||"scaleY"===i){a=parseFloat(n);44===e.keyCode&&(a-=.05),46===e.keyCode&&(a+=.05),t.val(parseFloat(a).toFixed(2)),$("span.applyButton").trigger("click"),$(this).focus()}}13===e.keyCode&&($("span.applyButton").trigger("click"),$(this).focus())}),$("#cogPopupContainer").fadeIn(),ub.funcs.positionGaFontTool(),$("input.pixelFontSize").focus(),$("input.gaFontInput").focus(function(){var e=$(this).attr("name");ub.funcs.createAssistants(l,e)})}),$("div#applicationUI").fadeIn(),ub.funcs.activateMoveTool(a),ub.funcs.activateLayer(a),ub.funcs.activateCustomSizeType(l),$('input.custom-size-type[data-type="bestfit"]').attr("disabled",!0),$("div.toggleOption").unbind("click"),$("div.toggleOption").on("click",function(){var e;console.log("toggle Option"),"on"===$("div.toggle").data("status")?(e="off",ub.funcs.deactivateMoveTool(),ub.funcs.removeUnusedElement("div#changeApplicationUI")):(ub.funcs.activateMoveTool(a),e="on"),"on"===e&&ub.funcs.LSRSBSFS(parseInt(o)),ub.funcs.toggleApplication(o,e);var t=void 0;void 0!==(t=ub.data.matchingIDs.getMatchingID(o))&&ub.funcs.toggleApplication(t.toString(),e)}),ub.funcs.toggleApplication(o,x),394!==parseInt(ub.current_material.material.id)&&1143!==parseInt(ub.current_material.material.id)&&($("div.column1.tailsweeps").hide(),$('span.tab[data-item="tailsweeps"]').hide()),"1"!==o&&($("div.column1.tailsweeps").hide(),$('span.tab[data-item="tailsweeps"]').hide()),"1"===o&&(ub.funcs.isCurrentSport("Baseball")||ub.funcs.isCurrentSport("Fastpitch"))){var j=ub.current_material.settings.applications[parseInt(o)].tailsweep;void 0!==j&&("rotated"===j.angle?($("span.angleItem").removeClass("active"),$('span.angleItem[data-angle="rotated"]').addClass("active")):($("span.angleItem").removeClass("active"),$('span.angleItem[data-angle="straight"]').addClass("active")));var F=l.angle;$("span.angleItem").removeClass("active"),"rotated"===F?$('span.angleItem[data-angle="rotated"]').addClass("active"):$('span.angleItem[data-angle="straight"]').addClass("active")}else $("div.ui-row.angleItems").hide();ub.funcs.afterActivateApplication(a),ub.funcs.activateCustomSizeType(l)}else ub.funcs.activateEmbellishments(o);else ub.funcs.activateMascots(o)}}},ub.funcs.activateMoveTool=function(e){if(!($("div#primaryMascotPopup").is(":visible")||$("div#primaryPatternPopup").is(":visible")||"tackle_twill"===ub.config.uniform_application_type&&"Football"===ub.config.sport)){var t=ub.current_material.settings.applications[e];if(void 0!==t){var i=ub.funcs.getPrimaryView(t.application),n=i+"_view";if(void 0!==i){var a=ub.objects[n]["objects_"+e];ub.focusObject=ub.objects[n]["locations_"+e],ub.targetObj=ub.objects[n]["objects_"+e],ub.funcs.deactivateMoveTool();t.verticalText&&(a.height/2,a.width/2);var o=-3;"mascot"!==t.application_type&&(t.verticalText||(o=-5));var r=ub.pixi.new_sprite("/images/builder-ui/move-icon-on.png");n=i+"_view";ub.objects[n].move_tool=r,ub[n].addChild(r);var s=_.find(t.application.views,{perspective:i});if(r.position.x=s.application.center.x,r.position.y=s.application.center.y,r.ubName="Move Tool",r.anchor.set(o,0),r.zIndex=-1e3,ub.funcs.createDraggable(r,t,ub[n],n),ub.funcs.unHighlightMarker(e,i),ub.data.applicationAccumulator-=1,void 0!==a){var l=a.width/2,c=a.height/2,u=new PIXI.Container;l+=.01*l,c+=.01*c;s.application.center.x,s.application.center.y;ub.objects[n].manipulatorTool=u,ub[n].addChild(u),u.position.x=s.application.center.x,u.position.y=s.application.center.y,u.rotation=s.application.rotation,u.zIndex=-1e3,u.ubName="Manipulator Tool",ub.tools.manipulator.tools=u;var p=ub.pixi.new_sprite("/images/builder-ui/center-point.png");ub.objects[n].center_tool=p,ub[n].addChild(p);s=_.find(t.application.views,{perspective:i});p.position.x=s.application.center.x,p.position.y=s.application.center.y,p.ubName="Center Tool",p.anchor.set(0,0),p.zIndex=-1e3,p.alpha=0,p.position.x-=a.width/4,p.position.y-=a.height/4,ub.updateLayersOrder(ub[n]),ub.funcs.createDraggable(p,t,ub[n],n);var d=ub.pixi.new_sprite("/images/builder-ui/rotate-icon-on.png");ub.objects[n].rotate_tool=d,ub[n].addChild(d);s=_.find(t.application.views,{perspective:i});d.position.x=s.application.center.x,d.position.y=s.application.center.y,d.ubName="Rotate Tool",d.anchor.set(o,2),d.zIndex=-1e3,ub.funcs.createDraggable(d,t,ub[n],n);var f=ub.config.features.isOn("uniforms","tackeTwillCustomSizes");if("sublimated"===ub.config.uniform_application_type||"knitted"===ub.config.uniform_application_type||f||ub.config.ignoreScaleRulesOnSublimatedAndTwill(ub.config.brand)){var h=ub.pixi.new_sprite("/images/builder-ui/scale-icon-on.png");ub.objects[n].scale_tool=h,ub[n].addChild(h);s=_.find(t.application.views,{perspective:i});h.position.x=s.application.center.x,h.position.y=s.application.center.y,h.ubName="Scale Tool";var m=o;h.anchor.set(m,-2),h.zIndex=-1e3,ub.funcs.createDraggable(h,t,ub[n],n)}var b=ub.pixi.new_sprite("/images/builder-ui/reset-icon-on.png");ub.objects[n].reset_tool=b,ub[n].addChild(b);s=_.find(t.application.views,{perspective:i});if(b.position.x=s.application.center.x,b.position.y=s.application.center.y,b.ubName="Reset Tool",b.anchor.set(-1e3,-4),b.zIndex=-1e3,ub.funcs.createDraggable(b,t,ub[n],n),"sublimated"===ub.config.uniform_application_type||"knitted"===ub.config.uniform_application_type){var g=ub.pixi.new_sprite("/images/builder-ui/delete-icon-on.png");ub.objects[n].delete_tool=g,ub[n].addChild(g);s=_.find(t.application.views,{perspective:i});g.position.x=s.application.center.x,g.position.y=s.application.center.y,g.ubName="Delete Tool",g.anchor.set(o,4),g.zIndex=-1e3}ub.funcs.createDraggable(g,t,ub[n],n)}}}}},ub.funcs.deactivateMoveTool=function(){ub.status.manipulatorDown=!1,ub.funcs.isLayersPanelVisible()&&$("span.layer").removeClass("active"),_.each(ub.views,function(e){var t=e+"_view";void 0!==ub.objects[t].move_tool&&(ub[t].removeChild(ub.objects[t].move_tool),delete ub.objects[t].move_tool),void 0!==ub.objects[t].rotate_tool&&(ub[t].removeChild(ub.objects[t].rotate_tool),delete ub.objects[t].rotate_tool),void 0!==ub.objects[t].scale_tool&&(ub[t].removeChild(ub.objects[t].scale_tool),delete ub.objects[t].scale_tool),void 0!==ub.objects[t].scale_x_tool&&(ub[t].removeChild(ub.objects[t].scale_x_tool),delete ub.objects[t].scale_tool),void 0!==ub.objects[t].scale_y_tool&&(ub[t].removeChild(ub.objects[t].scale_y_tool),delete ub.objects[t].scale_tool),void 0!==ub.objects[t].reset_tool&&(ub[t].removeChild(ub.objects[t].reset_tool),delete ub.objects[t].reset_tool),void 0!==ub.objects[t].center_tool&&(ub[t].removeChild(ub.objects[t].center_tool),delete ub.objects[t].center_tool),void 0!==ub.objects[t].delete_tool&&(ub[t].removeChild(ub.objects[t].delete_tool),delete ub.objects[t].delete_tool),void 0!==ub.objects[t].manipulatorTool&&(ub[t].removeChild(ub.objects[t].manipulatorTool),delete ub.objects[t].manipulatorTool)}),$("div.debug-panel").hide()},ub.funcs.positionGaFontTool=function(){var e=window.innerWidth-($("#cogPopupContainer").width()+110);$("#cogPopupContainer").css("left",e+"px")},ub.funcs.getApplicationSizesPant=function(e,t,i){var n=void 0;return ub.funcs.isCurrentSport("Football")||ub.funcs.isCurrentSport("Wrestling")||(n=ub.data.applicationSizesPant.getSize(e,t,parseInt(i))),void 0===n&&ub.utilities.warn("Application Sizes for "+e+" is not found!"),n},ub.funcs.getApplicationSizes=function(e,t){var i=ub.current_material.material.factory_code,n=void 0;return n="team_name"===e?_.find(ub.data.applicationSizes.items,{factory:i,name:"team_name"}):_.find(ub.data.applicationSizes.items,{name:e}),"mascot_wrestling"===e&&(n=_.find(ub.data.applicationSizes.items,{name:"mascot_wrestling"})),"text_wrestling"===e&&(n=_.find(ub.data.applicationSizes.items,{name:"text_wrestling"})),ub.funcs.isCurrentSport("Football")||ub.funcs.isCurrentSport("Wrestling")||(n=_.find(ub.data.applicationSizes.items,{name:e,sport:t}),"Lacrosse"===ub.config.sport&&"lower"===ub.config.type&&(n=ub.funcs.getApplicationSizesPant(e,t)),"Basketball"===ub.config.sport&&"lower"===ub.config.type&&(n=ub.funcs.getApplicationSizesPant(e,t)),"Tennis"===ub.config.sport&&"lower"===ub.config.type&&(n=ub.funcs.getApplicationSizesPant(e,t))),"team_name"===e&&ub.funcs.isCurrentSport("Wrestling")&&(n=_.find(ub.data.applicationSizes.items,{name:"team_name",sport:"wrestling"})),void 0===n&&(ub.utilities.warn("Application Sizes for "+e+" is not found! Using default"),n=ub.data.applicationSizes.getSizes("default",e)),n},ub.funcs.popupTest=function(){return $("div#primaryTailSweepPopup").is(":visible")||$("div#primaryFontPopup").is(":visible")||$("div#primaryAccentPopup").is(":visible")||$("div#primaryMascotPopup").is(":visible")||$("div.bootbox").is(":visible")},ub.data.locationSprites=[],ub.funcs.createClickableMarkers=function(o,e,r,s){ub.config.isFeatureOn("ui","hotspots")&&(baseSprite=_.first(o.children),baseSprite.oldTint=baseSprite.tint,o.spriteType="Marker",o.draggable({manager:ub.dragAndDropManager,disabled:!0}),o.mouseup=o.touchend=function(e){},$("body").mouseup(function(){if(s===ub.active_view&&!ub.status.fullView.getStatus()&&!ub.funcs.popupTest()&&o.ubHover){var e=r,t=_.find(ub.current_material.settings.applications,{code:e});ub.funcs.deActivateLocations(),ub.showLocation=!1,"free"===t.application_type?ub.funcs.activateFreeApplication(r):"mascot"===t.application_type?ub.funcs.activateMascots(r):ub.funcs.activateApplications(r),o.ubHover=!1}}),o.mousedown=o.touchstart=function(e){if(!ub.status.fullView.getStatus()&&s===ub.active_view&&!ub.status.fontPopupVisible&&!ub.funcs.popupTest()&&void 0!==this.interactionData){var t=this.interactionData.data;t.global.x,t.global.y}},o.mousemove=o.mousemove=function(e){if(!ub.funcs.popupTest()&&s===ub.active_view&&!ub.status.fullView.getStatus()){var t=e.data;window.sprite=o;var i,n={x:t.global.x,y:t.global.y};if("function"==typeof(i=0===o.children.length?o:_.first(o.children)).containsPoint){var a=_.size(ub.current_material.settings.applications);if(i.containsPoint(n)){if(ub.zoom)return;if("object"==typeof ub.objects[s+"_view"].rotate_tool)return;void 0===_.find(ub.data.placeHolderApplications,{id:parseInt(r)})&&(o.ubHover=!0,ub.funcs.highlightMarker(r,s),ub.data.applicationAccumulator=a)}else ub.funcs.unHighlightMarker(r,s),o.ubHover=!1,ub.data.applicationAccumulator-=1}}})},ub.funcs.removeLocations=function(){var e=ub.current_material.settings.applications;_.each(e,function(a){_.each(a.application.views,function(e,t){var i=e.perspective+"_view",n=ub.objects[i]["locations_"+a.code];void 0!==n&&(n.alpha=0)})}),ub.showLocation=!1},ub.funcs.renderLocations=function(e){var t=ub.current_material.settings.applications;_.each(t,function(s){"object"!=typeof ub.config.savedDesignInfo||void 0===s.mascot||"Volleyball"!==ub.config.sport||"Ace Crew Neck"!==ub.config.blockPattern||"1710"!==s.mascot.id&&1710!==s.mascot.id?(s.type,_.each(s.application.views,function(e,t){var i=e.perspective+"_view",n=ub.objects[i];if("object"!=typeof n["locations_"+s.code]){var a=e.application.center.x,o=e.application.center.y,r=ub.funcs.createLocationSprite(s.code);(n["locations_"+s.code]=r).position.x=a,r.position.y=o,r.zIndex=-ub.funcs.generateZindex("locations")+-1*t,ub[i].addChild(r),ub.updateLayersOrder(ub[i]),ub.funcs.createClickableMarkers(r,n,s.code,e.perspective)}})):delete ub.current_material.settings.applications[s.code]}),void 0!==e&&ub.funcs.activateFreeApplication(e)},ub.funcs.locationMarkersExist=function(){ub.current_material.settings.applications;var e=_.first(_.pluck(ub.current_material.settings.applications,"code")),t=ub.funcs.getPrimaryView(ub.current_material.settings.applications[e].application);return void 0!==ub.objects[t+"_view"]&&void 0!==ub.objects[t+"_view"]["locations_"+e]},ub.funcs.showLocations=function(o){var e=ub.current_material.settings.applications;ub.showLocation=!0;var t=_.first(_.pluck(ub.current_material.settings.applications,"code"));if(void 0!==t){ub.funcs.getPrimaryView(ub.current_material.settings.applications[t].application);ub.funcs.locationMarkersExist()||ub.funcs.renderLocations(),_.each(e,function(a){_.each(a.application.views,function(e,t){var i=e.perspective+"_view",n=ub.objects[i]["locations_"+a.code];void 0!==o?n.alpha=0:void 0===_.find(ub.data.placeHolderApplications,{id:parseInt(a.code)})&&(n.alpha=1)})})}else ub.utilities.info("This uniform has no Applications.")},ub.funcs.getNewCustomID=function(){var e=70,t=_.last(_.filter(ub.current_material.settings.applications,function(e){return 70<parseInt(e.code)}));return void 0!==t&&(e=parseInt(t.code)),e+1},ub.funcs.deleteLocation=function(n){ub.funcs.activateBody();var e=ub.current_material.settings.applications[n];_.each(e.application.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+n];ub[e.perspective+"_view"].removeChild(t);var i=ub.objects[e.perspective+"_view"]["locations_"+n];ub[e.perspective+"_view"].removeChild(i),delete ub.objects[e.perspective+"_view"]["objects_"+n],delete ub.objects[e.perspective+"_view"]["locations_"+n],ub.activeApplication=void 0}),delete ub.current_material.settings.applications[n],void 0!==ub.data.applications_transformed.Body?delete ub.data.applications_transformed.Body[n]:void 0!==ub.data.applications_transformed["Body Panel Color"]&&delete ub.data.applications_transformed["Body Panel Color"][n],delete ub.data.applications_transformed_one_dimensional[n],ub.funcs.deactivateMoveTool(n),ub.tools.activeTool.deactivate(),ub.funcs.updateLayerTool(),ub.funcs.gotoFirstMaterialOption(),$("body").css("cursor","auto")},ub.funcs.activateBody=function(){$('div.pd-dropdown-links[data-ctr="1"]').trigger("click")},ub.funcs.getNewZIndex=function(){return _.size(ub.current_material.settings.applications)+1},ub.funcs.isUniformFullSublimation=function(){return"sublimated"===ub.current_material.material.uniform_application_type||"knitted"===ub.current_material.material.uniform_application_type},ub.funcs.getFreeFormLayers=function(){var e=[];return ub.funcs.isUniformFullSublimation()&&(e=_.sortBy(ub.data.modifierLabels,function(e){var t=100;return Number.isNaN(e.intGroupID)&&(e.intGroupID=t++),e.intGroupID}),e=_.reject(e,function(e){return-1<e.name.indexOf("Trim")||-1<e.name.indexOf("Piping")||-1<e.name.indexOf("Stripe")||-1<e.name.indexOf("Front Insert")||-1<e.name.indexOf("Zipper")||-1<e.name.indexOf("Sleeve Cuff")||-1<e.name.indexOf("Hood Cuff")||-1<e.name.indexOf("Pocket Cuff")||-1<e.name.indexOf("Arm Cuff")||-1<e.name.indexOf("Prolook")||-1<e.name.indexOf("Pro-Dry")||-1<e.name.indexOf("Warp Speed 1")||-1<e.name.indexOf("Warp Speed 2")||-1<e.name.indexOf("Warp Speed 3")||-1<e.name.indexOf("Front Body Pattern")||-1<e.name.indexOf("Back Body Pattern")||-1<e.name.indexOf("Belt Loop")}),ub.funcs.isSocks()&&(e=_.reject(e,function(e){return-1===e.name.indexOf("Sublimated")&&-1===e.name.indexOf("Body")&&"Socks (Apparel)"===ub.current_material.material.uniform_category}),"Baseball Home Run Sublimated"===ub.config.option&&(e=_.reject(e,function(e){return-1===e.name.indexOf("Sublimated")&&"Socks (Apparel)"===ub.current_material.material.uniform_category})),"Baseball Home Run"===ub.config.option&&(e=_.reject(e,function(e){return-1===e.name.indexOf("Body")&&"Socks (Apparel)"===ub.current_material.material.uniform_category})),"Home Run Sublimated"===ub.config.option&&(e=_.reject(e,function(e){return-1===e.name.indexOf("Sublimated")&&"Socks (Apparel)"===ub.current_material.material.uniform_category}))),ub.funcs.isCurrentSport("Wrestling")&&(e=_.reject(e,function(e){return-1===e.name.indexOf("Body")&&-1===e.name.indexOf("Buckle")}))),_.each(e,function(e){(e.name.includes("Body Left")||e.name.includes("Front Body"))&&(e.position=1),(e.name.includes("Body Right")||e.name.includes("Back Body"))&&(e.position=2)}),_.sortBy(e,"position")},ub.funcs.getCentoid=function(e,t){var i=_.find(ub.data.boundaries_transformed_one_dimensional[e],{name:t}),n=[],a=void 0,o=new ub.Contour;if(void 0!==i)return void 0===n&&ub.utilities.warn("No Bounding Box Defined for "+t),void 0!==n&&(o.pts=i.polygon,a=o.centroid().x),a},ub.funcs.newApplication=function(e,t,i,n){var a=_.find(ub.data.placeHolderApplications,{perspective:e}),o=ub.utilities.cloneObject(ub.data.placeholderApplicationSettings[a.id]),r=t,s=ub.current_material.material.uniform_category,l=ub.current_material.material.block_pattern,c=ub.funcs.getPrimaryView(o.application),u=ub.funcs.getPrimaryViewObject(o.application),p=!1,d=void 0;if(ub.data.sportsWithExtraLayer.isValid(ub.current_material.materials_options)){var f=ub.objects[e+"_view"].extra;if(void 0===f&&ub.utilities.error("Extra Layer not detected!"),void 0!==f){_.contains(["Body","Front Body","Back Body","Body Left","Body Right"],r)&&(r="Extra")}}var h=ub.data.applicationProjectionExemptions.isExempted(e,t,ub.config.sport);if(h.isExempted){var m=_.find(o.application.views,{perspective:h.result.primary});void 0!==m&&(m.application.isPrimary=1,u=m,o.application.views=_.filter(o.application.views,function(e){return"left"!==e.perspective&&"right"!==e.perspective&&"front"===c?"back"===e.perspective:"front"===e.perspective})),ub.funcs.setActiveView("front")}void 0!==n&&"na"!==n&&(r=n.toTitleCase()+" "+r),o.validApplicationTypes=ub.data.freeFormValidTypes.getItem(ub.current_material.material.uniform_category,r).validTypes,_.each(o.application.views,function(e){var t=e.perspective,i=ub.funcs.getCentoid(t,r);if(void 0!==i&&(e.application.center=i,e.application.pivot=i),void 0!==e){var n=ub.data.placeHolderOverrides.getOverrides(s,r,e.perspective,l);void 0!==n?(p=!0,e.application.rotation=n.rotation,e.application.center=n.position,e.application.pivot=n.position):p&&(d=e.perspective)}}),void 0!==d&&(o.application.views=_.filter(o.application.views,function(e){return e.perspective!==d})),_.each(o.application.views,function(e){var t=ub.funcs.getCentoid(e.perspective,r),i=ub.data.placeHolderOverrides.getOverrides(s,r,e.perspective,l);if(void 0!==t&&void 0===i&&(e.application.center=t,e.application.pivot=t),void 0!==e&&void 0===i&&1!==parseInt(e.application.isPrimary)){var n=ub.funcs.getBoundaries(e.perspective,r,!1),a=void 0;"front"===c&&void 0!==n&&("left"===e.perspective&&(a=n.minMax.minX),"right"===e.perspective&&(a=n.minMax.maxX)),"back"===c&&void 0!==n&&("left"===e.perspective&&(a=n.minMax.maxX),"right"===e.perspective&&(a=n.minMax.minX)),"right"===c&&void 0!==n&&("front"===e.perspective&&(a=n.minMax.minX),"back"===e.perspective&&(a=n.minMax.maxX)),"left"===c&&void 0!==n&&("front"===e.perspective&&(a=n.minMax.maxX),"back"===e.perspective&&(a=n.minMax.minX)),e.application.position={x:a,y:u.application.center.x},e.application.center={x:a,y:u.application.center.y}}});var b=ub.funcs.getNewCustomID(),g=JSON.parse(JSON.stringify(o));if(_newIDStr=(b=b).toString(),g.code=_newIDStr,g.application.id=_newIDStr,g.configurationSource="Added",g.zIndex=ub.funcs.getNewZIndex(),ub.data.placeHolderOverrideSports.isValid(ub.sport)){var v=[];_.each(g.application.views,function(e){e.application.id=_newIDStr,ub.funcs.isSocks()?1===e.application.isPrimary&&v.push(e):v.push(e)}),g.application.views=v}ub.data.withBodyLeftRight.isOk(ub.sport,ub.neckOption)&&("Body Left"===r&&(g.application.views=_.filter(g.application.views,function(e){return"right"!==e.perspective})),"Body Right"===r&&(g.application.views=_.filter(g.application.views,function(e){return"left"!==e.perspective}))),"Cinch Sack (Apparel)"===ub.sport&&(g.application.views=_.filter(g.application.views,function(e){return"left"!==e.perspective&&"right"!==e.perspective})),ub.data.categoriesWithSingleViewApplications.getItem(ub.config.sport,ub.config.type,ub.config.blockPattern,ub.config.option)&&(g.application.views=_.filter(g.application.views,function(e){return 1===e.application.isPrimary})),(ub.current_material.settings.applications[_newIDStr]=g).application.layer=r,void 0!==ub.data.applications_transformed[r]?(ub.data.applications_transformed[r][_newIDStr]=g.application,g.application.layer=r):void 0!==ub.data.applications_transformed["Body Panel Color"]&&(g.application.layer="Body Panel Color",ub.data.applications_transformed["Body Panel Color"][_newIDStr]=g.application),ub.data.applications_transformed_one_dimensional[_newIDStr]=g.application,ub.funcs.renderLocations(_newIDStr),ub.funcs.pushOldState("add location","application",g,{applicationID:_newIDStr}),ub.funcs.updateLayerTool(),$('div.optionButton[data-type="'+i+'"]').trigger("click"),$.smkAlert({text:"Added ["+i.toTitleCase()+"] on ["+t.toTitleCase()+"] layer",type:"success",time:10,marginTop:"90px"}),"embellishments"===i&&(g.font_size=g.size,void 0===ub.user.id||void 0===is.embellishments.userItems||0===is.embellishments.userItems.length?is.loadDesigner(void 0,_newIDStr):ub.funcs.createEmbellishmentSelectionPopup(g))},ub.funcs.addLocation=function(n){var e=$("#m-add-free-form-application").html(),t={parts:ub.funcs.getFreeFormLayers()},i=Mustache.render(e,t),o=bootbox.dialog({title:"Add a new Free Form Application",message:i});o.init(function(){$("div.perspective-container > span.perspective").unbind("click"),$("div.perspective-container > span.perspective").on("click",function(){var e=$(this).data("id");if($("div.perspective-container > span.perspective").removeClass("active"),$(this).addClass("active"),ub.funcs.setActiveView(e),ub.data.sportsWithExtraLayer.isValid(ub.current_material.materials_options)){var i="";if($("span.part").removeClass("active"),"back"===e||"front"===e){if(ub.data.freeFormToolFirstPartSelection.activateOnLowerUniform(ub.current_material.material.uniform_category))$("span.part").first().addClass("active");else{i=e.toTitleCase();var t=0;$("div.part-container span").each(function(){var e=$(this).text();-1!==e.indexOf(i)&&t<1&&(t++,i=e,$("span.part").removeClass("active"),$('span.part[data-id="'+i+'"]').addClass("active"))})}$("label.leftrightPart, div.side-container").hide(),$("span.side").removeClass("active")}else{$("span.part").first().addClass("active"),$("span.part").first().trigger("click");var n=$("span.side.active").data("id");i=e.toTitleCase();$("div.part-container span").each(function(){var e=$(this).text(),t="";-1!==e.indexOf(i)&&(t=e,$("span.part").removeClass("active"),$('span.part[data-id="'+t+'"]').addClass("active"))}),$("span.side").hasClass("active")&&(n=n.toTitleCase()+" ",n=$("span.side.active").text().replace(n,""),$("span.part.active").removeClass("active"),$('span.part[data-id="'+n+'"]').addClass("active"),$("span.side.active").removeClass("active"),$('span.side[data-id="'+e+'"]').addClass("active"),void 0===$("span.part.active").data("id")&&($("span.part").first().addClass("active"),$("span.side.active").removeClass("active")))}ub.funcs.isSocks()&&(a="Sublimated",void 0!==ub.data.modifierLabels.Body&&(a="Body"),$('span.part[data-id="'+a+'"]').addClass("active"))}}),$("div.part-container > span.part").unbind("click"),$("div.part-container > span.part").on("click",function(){var t=$(this).data("id");$("div.part-container > span.part").removeClass("active"),$(this).addClass("active");var i=$("div.perspective-container > span.perspective.active").data("id");if($("div.perspective-container > span.perspective").each(function(){var e=$(this).text();"front"!==i&&"back"!==i||-1!==t.indexOf(e)&&($("span.perspective").removeClass("active"),$('span.perspective[data-id="'+e.toLowerCase()+'"]').addClass("active"))}),void 0!==_.find(ub.current_material.materials_options,{name:"Left "+t})){$("span.partName").html(t),$('span.side[data-id="na"]').hide(),$("label.leftrightPart, div.side-container").fadeIn(),$("span.side").removeClass("active"),$('span.side[data-id="left"]').addClass("active"),$('span.side[data-id="left"]').html("Left "+t),$('span.side[data-id="right"]').html("Right "+t);var e=$("span.perspective.active").data("id");"front"!==e&&"back"!==e||(e="left",$("span.perspective").removeClass("active"),$('span.perspective[data-id="'+e+'"]').addClass("active")),$("span.side").removeClass("active"),$('span.side[data-id="'+e+'"]').addClass("active")}else $("label.leftrightPart, div.side-container").hide(),$("span.side").removeClass("active"),$('span.side[data-id="na"]').addClass("active"),$('span.side[data-id="na"]').show()}),$("div.side-container > span.side").unbind("click"),$("div.side-container > span.side").on("click",function(){var t=$(this).data("id"),e=$("span.part.active").data("id");ub.data.applicationProjectionExemptions.isExempted(t,e,ub.config.sport);$("div.perspective-container > span.perspective").each(function(){var e=$(this).text().toLowerCase();-1!==t.indexOf(e)&&($("span.perspective").removeClass("active"),$('span.perspective[data-id="'+e.toLowerCase()+'"]').addClass("active"))}),$("div.side-container > span.side").removeClass("active"),$(this).addClass("active")}),$("div.application-container > span.optionButton").unbind("click"),$("div.application-container > span.optionButton").on("click",function(){$(this).data("id");$("div.application-container > span.optionButton").removeClass("active"),$(this).addClass("active")}),ub.funcs.isSocks()&&"Hockey Sock"!==ub.config.blockPattern&&$('span.optionButton[data-type="player_number"]').hide(),$('div.perspective-container > span.perspective[data-id="'+ub.active_view+'"]').addClass("active");var a="Body";if(ub.funcs.isSocks()&&(a="Sublimated"),ub.funcs.isCurrentSport("Wrestling")&&"Fight Short"===ub.current_material.material.neck_option&&(a="Body Left"),ub.data.sportsWithExtraLayer.isValid(ub.current_material.materials_options)){var i="";$("span.part").removeClass("active"),"back"!==ub.active_view&&"front"!==ub.active_view&&!ub.funcs.isSocks()||(i=ub.active_view.toTitleCase()+" Body",$('span.part[data-id="'+i+'"]').addClass("active"))}else $('div.part-container > span.part[data-id="'+a+'"]').addClass("active");if(!$("span.part").hasClass("active")){var e=$("div.perspective-container").find("span.perspective.active");if("Back"===e.text()||"Front"===e.text())if(ub.data.freeFormToolFirstPartSelection.activateOnLowerUniform(ub.current_material.material.uniform_category))$("span.part").first().addClass("active");else{i=e.text().toTitleCase();var t=0;$("div.part-container span").each(function(){var e=$(this).text();-1!==e.indexOf(i)&&t<1&&(t++,i=e)}),$('span.part[data-id="'+i+'"]').addClass("active")}else{$("span.part").first().addClass("active");$("span.side.active").data("id"),i=e.text().toTitleCase();$("div.part-container span").each(function(){var e=$(this).text(),t="";-1!==e.indexOf(i)&&(t=e,$("span.part").removeClass("active"),$('span.part[data-id="'+t+'"]').addClass("active"))})}}$("div.application-container").find('span.optionButton[data-type="mascot"]').addClass("active"),$("span.cancelButton").unbind("click"),$("span.cancelButton").on("click",function(){o.modal("hide")}),$("span.okButton").unbind("click"),$("span.okButton").on("click",function(){var e=$("span.perspective.active").data("id"),t=$("span.part.active").data("id"),i=$("span.optionButton.active").data("type"),n=$("span.side.active").data("id");ub.funcs.newApplication(e,t,i,n),o.modal("hide")}),ub.funcs.isCurrentSport("Cinch Sack (Apparel)")&&$('span.perspective[data-id="left"], span.perspective[data-id="right"]').hide(),void 0!==n&&n&&($("span.optionButton").not('[data-type="embellishments"]').hide(),$('span.optionButton[data-type="mascot"]').removeClass("active"),$('span.optionButton[data-type="embellishments"]').addClass("active"),$("span.okButton").text("Next")),$("div.perspective-container > span.perspective.active").trigger("click")}),ub.funcs.updateLabels()},ub.sort=void 0,ub.funcs.getSampleCaption=function(e){var t="";switch(e.application_type){case"free":t="(UNUSED)";break;case"shoulder_number":case"sleeve_number":case"front_number":case"back_number":case"player_name":t=e.text;break;case"mascot":t=e.mascot.name;break;case"team_name":t=e.text;break;case"embellishments":t=e.embellishment.name.toString();break;default:util.error("app type not detected: "+e.application_type)}return t=t.toUpperCase()},ub.funcs.updateCaption=function(e){if($("div#layers-order").is(":visible")){var t=$('span.layer[data-location-id="'+e+'"]'),i=ub.funcs.getSettingsObject(e),n=ub.funcs.getSampleCaption(i),a=i.application_type.toUpperCase().replace("_"," "),o=a;"EMBELLISHMENTS"===a&&(o="C. MASCOT"),"MASCOT"===a&&(o="S. MASCOT"),t.find("span.caption").html(n),t.find("span.application_type").html(o)}},ub.funcs.activateManipulator=function(e){var t=e;"free"===ub.funcs.getSettingsObject(t).application_type?ub.funcs.activateFreeApplication(t):ub.funcs.activateApplications(t)},ub.funcs.isLayersPanelVisible=function(){return $("div#layers-order").is(":visible")},ub.funcs.activateLayer=function(e){ub.funcs.getPrimaryView(ub.current_material.settings.applications[e].application);ub.funcs.isLayersPanelVisible()&&($("span.layer").removeClass("active"),$('span.layer[data-location-id="'+e+'"]').addClass("active"))},ub.funcs.setActiveView=function(e){$('a.change-view[data-view="'+e+'"]').trigger("click")},ub.funcs.updateLayerTool=function(){var c="",e=_.sortBy(ub.current_material.settings.applications,"zIndex").reverse();_.each(e,function(e){e.zIndex;var t=e.application_type.toUpperCase().replace("_"," "),i=(e.code,ub.funcs.getSampleCaption(e)),n=ub.funcs.getPrimaryView(e.application);if(void 0!==n){var a='<span class="perspective">('+n.substring(0,1).toUpperCase()+")</span>",o=t;"EMBELLISHMENTS"===t&&(o="C. MASCOT"),"MASCOT"===t&&(o="S. MASCOT");var r=' <span class="application_type">'+o+"</span>",s='<span class="caption">'+window.util.truncate(i)+"</span>",l='<span class="code"> #'+e.code+"</span>";c+='<span class="layer unselectable" data-location-id="'+e.code+'" data-zIndex="'+e.zIndex+'">'+l+s+a+r+"</span>"}}),$("div.layers-container").html(""),$("div.layers-container").html(c),$("span.layer").unbind("click"),$("span.layer").on("click",function(){if($(this).hasClass("active"))return ub.funcs.deactivateMoveTool(),void ub.funcs.activateBody();var e=$(this).data("location-id");ub.funcs.activateManipulator(e)}),ub.data.freeFormToolEnabledSports.isValid(ub.current_material.material.uniform_category)&&(ub.data.sorting=!1,ub.sort=$("div.layers-container").sortable({handle:".layer",animation:150,onStart:function(e){ub.data.sorting=!0,ub.data.justSorted=!0},onEnd:function(e){ub.data.sorting=!1,ub.data.justSorted=!0},onUpdate:function(e){$.each($("span.layer"),function(e,t){var i=_.size(ub.current_material.settings.applications)-(e+1),n=$(t).data("location-id"),a=ub.current_material.settings.applications[n];a.zIndex=i,$(this).find("span.zIndex").html(1+i),"free"!==a.application_type&&_.each(a.application.views,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+n];0!==t.zIndex&&(t.zIndex=-(ub.funcs.generateZindex("applications")+i))})}),ub.updateLayersOrder(ub.front_view),ub.updateLayersOrder(ub.back_view),ub.updateLayersOrder(ub.left_view),ub.updateLayersOrder(ub.right_view);var t=$(e.item).data("location-id");ub.funcs.activateManipulator(t)}}))},ub.funcs.hideLayerTool=function(){$("div#layers-order").is(":visible")&&($("div#layers-order").removeClass("on").addClass("off"),$('a.change-view[data-view="layers"]').removeClass("active-change-view"))},ub.funcs.hiderandomFeedsTool=function(){$("div#randomFeeds-panel").removeClass("on").addClass("off"),$('a.change-view[data-view="randomFeed"]').removeClass("active-change-view"),$("div#randomFeedsUI").remove()},ub.is.wrestling=function(){return"Wrestling"===ub.funcs.getCurrentUniformCategory()},ub.funcs.showLayerTool=function(){ub.funcs.activateBody(),$("div#layers-order").is(":visible")?($("div#layers-order").removeClass("on").addClass("off"),$('a.change-view[data-view="layers"]').removeClass("active-change-view"),$('a.change-view[data-view="locations"]').click()):($("div#layers-order").removeClass("off").addClass("on"),$('a.change-view[data-view="layers"]').addClass("active-change-view"));var e=$("div#layers-order");e.unbind("mousedown"),e.mousedown(ub.funcs.handle_mousedown),ub.funcs.updateLayerTool(),$("div.layers-header > span.close").on("click",function(){ub.funcs.hideLayerTool(),ub.showLocation&&(ub.funcs.removeLocations(),$("span.show-locations").find("span.caption").html("Show Location Markers"),$("span.show-locations").removeClass("active"))}),ub.funcs.isTackleTwill()&&($("span.add-application").addClass("inactive"),$("em.dragMessage").remove(),$("div.layers-container").addClass("notSublimated")),$("span.add-application").unbind("click"),$("span.add-application").on("click",function(){ub.funcs.isTackleTwill()||$('a.change-view[data-view="locations-add"]').click()}),$("span.show-locations").unbind("click"),$("span.show-locations").on("click",function(){"Show Location Markers"===$(this).find("span.caption").html()?($(this).find("span.caption").html("Hide Location Markers"),$(this).addClass("active"),ub.funcs.showLocations()):($(this).find("span.caption").html("Show Location Markers"),$(this).removeClass("active"),ub.funcs.removeLocations())}),$("div#layers-order > span.close").unbind("click"),$("div#layers-order > span.layers-close").on("click",function(){ub.funcs.showLayerTool()}),ub.funcs.gotoFirstApplication(),ub.funcs.activeStyle("layers")},ub.funcs.activateFreeApplication=function(e){if(ub.funcs.popupsVisible())return!0;if(ub.funcs.okToStart()){ub.funcs.activatePanelGuard();var t,i=e.toString(),n=_.find(ub.current_material.settings.applications,{code:i}),a=n.validApplicationTypes;ub.funcs.deactivatePanels(),ub.funcs.preProcessApplication(e),t='<div id="applicationUI" data-application-id="'+i+'">',t+='<div class="header">',t+='<div class="applicationType">Select Application Type for Location (#'+i+")</div>",t+='<div class="body">';var o="";_.contains(a,"number")||(o="deactivatedOptionButton"),t+='<div class="optionButton '+o+'" data-type="player_number">',t+='<div class="icon"><img src="/images/main-ui/icon-number-large.png"></div>',t+='<div class="caption">Player Number</div>',t+="</div>",o="",_.contains(a,"team_name")||(o="deactivatedOptionButton"),t+='<div class="optionButton '+o+'" data-type="team_name">',t+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',t+='<div class="caption">Team Name</div>',t+="</div>",t+="<br />",o="",_.contains(a,"player_name")||(o="deactivatedOptionButton"),t+='<div class="optionButton '+o+'" data-type="player_name">',t+='<div class="icon"><img src="/images/main-ui/icon-text-large.png"></div>',t+='<div class="caption">Player Name</div>',t+="</div>",o="",_.contains(a,"logo")||(o="deactivatedOptionButton"),t+='<div class="optionButton '+o+'" data-type="mascot">',t+='<div class="icon"><img src="/images/main-ui/icon-mascot-large.png"></div>',t+='<div class="caption">Mascot</div>',t+="</div>","sublimated"!==ub.config.uniform_application_type&&(_.contains(a,"embellishments")||(o="deactivatedOptionButton")),t+='<div class="optionButton '+o+'" data-type="embellishments">',t+='<div class="icon"><img src="/images/main-ui/icon-embellishments-large.png"></div>',t+='<div class="caption">Custom Mascot</div>',t+="</div>",t+="</div>",t+="</div>",o="",$(".modifier_main_container").append(t),$("div#applicationUI").fadeIn(),$("div.optionButton").on("click",function(){if(!$(this).hasClass("deactivatedOptionButton")){ub.funcs.resetFlipStatus(n);var e=$(this).data("type");n.status="on",ub.funcs.changeApplicationType(n,e),$("div#changeApplicationUI").remove()}}),ub.funcs.activateLayer(e)}},ub.funcs.gotoFirstApplication=function(){0<$("span.layer").length&&$("span.layer").first().trigger("click")},ub.funcs.gotoFirstMaterialOption=function(){var e=$($("div.pd-dropdown-links")[1]).data("fullname");$('div.pd-dropdown-links[data-fullname="'+e+'"]').trigger("click")},ub.funcs.showCrossHair=function(e,t){ub.funcs.removeCrossHair();var i=ub.pixi.new_sprite("/images/main-ui/ch.png");(ub.ch=i).anchor.set(.5,.5),i.position.x=e,i.position.y=t,i.zIndex=-1e3,ub[ub.active_view+"_view"].addChild(i),ub.objects[ub.active_view+"_view"].ch=i,ub.updateLayersOrder(ub[ub.active_view+"_view"])},ub.funcs.printFontData=function(e,t){var i=ub.funcs.getApplicationSettingsByView(e,t).application.center,n=i.x,a=i.y;return console.log("{"),console.log("    location: '"+e+"',"),console.log("    fontName: 'Badgers',"),console.log("    perspective: '"+t+"',"),console.log("    size: '4',"),console.log("    origY: "+a+","),console.log("    origX: "+n+","),console.log("    adjustmentY: "+a+","),console.log("    adjustmentX: "+n+","),console.log("    scaleY: 1,"),console.log("    scaleX: 1,"),console.log("},{"),console.log("    location: '"+e+"',"),console.log("    fontName: 'Badgers',"),console.log("    perspective: '"+t+"',"),console.log("    size: '3',"),console.log("    origY: "+a+","),console.log("    origX: "+n+","),console.log("    adjustmentY: "+a+","),console.log("    adjustmentX: "+n+","),console.log("    scaleY: 1,"),console.log("    scaleX: 1,"),console.log("}"),"ok"},ub.funcs.removeCrossHair=function(){ub[ub.active_view+"_view"].removeChild(ub.ch)},ub.uploadThumbnail=function(t){ub[t].visible=!0,ub.funcs.fullResetHighlights();var e=ub.getThumbnailImage(t);$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({data:JSON.stringify({dataUrl:e}),url:ub.config.host+"/saveLogo",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?(ub.current_material.settings.thumbnails[t]=e.filename,ub.funcs.thumbnailsUploaded()&&($("span.processing").fadeOut(),$("span.submit-order").fadeIn())):(console.log("Error generating thumbnail for "+t),console.log(e.message))}})},ub.funcs.fileUpload=function(e,t,i){$("span.ok_btn").attr("data-status","processing"),$("em.unsupported-file").html("");var n=new FormData;n.append("file",e),void 0!==$.ajaxSettings.headers&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({data:n,url:ub.config.api_host+"/api/fileUpload",type:"POST",processData:!1,contentType:!1,crossDomain:!0,headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){if(e.success){var t=e.filename.split(".").pop();if(window.uploaded_filename=e.filename,i(e.filename),"gif"===t||"jpg"===t||"bmp"===t||"png"===t||"jpeg"===t)$("img#preview").attr("src",e.filename);else if("pdf"===t)$("img#preview").attr("src","/images/uiV1/pdf.png");else{if("ai"!==t)return $("em.unsupported-file").html("Unsupported File Type: ("+t+")!"),void $("span.ok_btn").css("display","none");$("img#preview").attr("src","/images/uiV1/ai.png")}$("em.unsupported-file").html("Uploaded File is ok! ("+t+")"),$("span.ok_btn").html("Submit Logo ("+t+")"),$("span.ok_btn").attr("data-status","ok"),$("span.ok_btn").css("display","inline-block")}else console.log("Error Uploading Custom Artwork"),console.log(e.message)}})},ub.funcs.fileUploadAttachment=function(e,i){$("span.ok_btn").attr("data-status","processing"),$("em.unsupported-file").html("");var t=new FormData;t.append("file",e),console.log("huhu===>",e),void 0!==$.ajaxSettings.headers&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({data:t,url:ub.config.api_host+"/api/fileUpload",type:"POST",processData:!1,contentType:!1,crossDomain:!0,headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){if(e.success){var t=e.filename.split(".").pop();ub.data.validDocumentTypesForUpload.isValidDocument(t)?i(e.filename,t,!0):i(e.filename,t,!1)}else i(void 0,void 0,void 0)}})},ub.uploadLogo=function(e){$("span.ok_btn").css("color","#3d3d3d"),$("span.ok_btn").html('Processing...  <img src="/images/loading.gif" />'),$("span.ok_btn").hide(),$("span.ok_btn").fadeIn(),$("span.ok_btn").attr("data-status","processing"),$("span.ok_btn").css("border","none");var t=e;$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({data:JSON.stringify({dataUrl:t}),url:ub.config.host+"/saveLogo",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?(window.uploaded_filename=e.filename,$("span.ok_btn").css("background-color","#acacac"),$("span.ok_btn").html("Submit Logo"),$("span.ok_btn").attr("data-status","ok"),$("span.ok_btn").css("display","inline-block"),$("span.ok_btn").css("border","1px solid #3d3d3d"),$("span.ok_btn:hover").css({"background-color":"#3d3d3d",color:"white"})):(console.log("Error Uploading Custom Artwork"),console.log(e.message))}})},ub.funcs.turnLocationsOff=function(){ub.funcs.removeLocations(),ub.funcs.deactivateMoveTool(),$('a[data-view="locations"]').removeClass("zoom_on")},ub.funcs.removePatternMasks=function(){_.each(ub.views,function(e){var t=e+"_view";_.each(ub.objects[t],function(e){var t=e.name;null!==t&&-1<t.indexOf("pattern")&&(e.oldMask=e.mask,e.mask=void 0)})})},ub.funcs.restorePatternMasks=function(){_.each(ub.views,function(e){var t=e+"_view";_.each(ub.objects[t],function(e){var t=e.name;null!==t&&-1<t.indexOf("pattern")&&(e.mask=e.oldMask)})})},ub.funcs.generateZindex=function(e){var t=0;switch(e){case"locations":t=ub.maxLayers*ub.zIndexMultiplier+200;break;case"applications":t=ub.maxLayers*ub.zIndexMultiplier+150;break;case"randomFeeds":case"pipings":t=ub.maxLayers*ub.zIndexMultiplier+50;break;case"namedrops":t=ub.maxLayers*ub.zIndexMultiplier+55;break;default:t=0}return t},ub.funcs.removePolygon=function(){_.each(ub.views,function(e){void 0!==ub.objects[e+"_view"].activePolygon&&ub[e+"_view"].removeChild(ub.objects[e+"_view"].activePolygon)})},ub.funcs.createEllipse=function(e,t){e.beginFill(0),e.drawEllipse(t.x,t.y,7,7),e.endFill()},ub.funcs.createPolygon=function(e,t,i){var n=new PIXI.Graphics;ub.funcs.removePolygon(),n.lineStyle(2,0,1),n.drawPolygon(t),ub.activePolygon=n,ub.funcs.createEllipse(n,i.minXCoor),ub.funcs.createEllipse(n,i.minYCoor),ub.funcs.createEllipse(n,i.maxXCoor),ub.funcs.createEllipse(n,i.maxYCoor),ub.funcs.createEllipse(n,{x:i.centoid.x,y:i.centoid.y}),ub.objects[e+"_view"].activePolygon=ub.activePolygon,ub[e+"_view"].addChild(ub.activePolygon)},ub.funcs.getBoundariesCurrentView=function(e){return ub.funcs.getBoundaries(ub.active_view,e)},ub.funcs.getBoundarySettings=function(e,t){return _.find(ub.data.boundaries_transformed_one_dimensional[e],{name:t.toTitleCase()})},ub.funcs.getMaterialOptionAngle=function(e,t){var i=0,n=ub.funcs.getBoundarySettings(e,t);return void 0===n&&ub.utilties.info("No boundary settings for "+e+" / "+t),void 0!==n&&(void 0!==n.polygon[0].angle?i=n.polygon[0].angle:ub.utilties.info("No angle field detected from "+e+" / "+t)),i},ub.funcs.getBoundaries=function(e,t,i){var n=ub.funcs.getBoundarySettings(e,t),a=void 0,o=[];void 0!==n&&(a=n.polygon);var r={minX:ub.dimensions.width,minY:ub.dimensions.height,maxX:0,maxY:0,minXCoor:{x:0,y:0},minYCoor:{x:0,y:0},maxXCoor:{x:0,y:0},maxYCoor:{x:0,y:0}};return _.each(a,function(e){r.minX=Math.min(e.x,r.minX),r.minY=Math.min(e.y,r.minY),r.maxX=Math.max(e.x,r.maxX),r.maxY=Math.max(e.y,r.maxY),r.minX===e.x&&(r.minXCoor={x:e.x,y:e.y}),r.minY===e.y&&(r.minYCoor={x:e.x,y:e.y}),r.maxX===e.x&&(r.maxXCoor={x:e.x,y:e.y}),r.maxY===e.y&&(r.maxYCoor={x:e.x,y:e.y}),r.centoid={x:(r.maxXCoor.x-r.minXCoor.x)/2+r.minXCoor.x,y:(r.maxYCoor.y-r.minYCoor.y)/2+r.minYCoor.y},o.push(e.x),o.push(e.y)}),i&&ub.funcs.createPolygon(e,o,r),{boundaries:o,minMax:r}},ub.funcs.setSocksPatternScale=function(e){ub.funcs.setPatternScale("sublimated",e)},ub.funcs.setPatternScale=function(t,i){_.each(ub.views,function(e){void 0!==ub.objects[e+"_view"]["pattern_"+t]&&(ub.objects[e+"_view"]["pattern_"+t].scale={x:i,y:i})})},ub.funcs.changeActiveView=function(e){$('a.change-view[data-view="'+e+'"]').trigger("click")},ub.funcs.getMascotByID=function(e){return _.find(ub.data.mascots,{id:e.toString()})},ub.funcs.activateDisableMoveTool=function(e){var t=ub.funcs.getApplicationSettings(e);"off"===t.status?ub.funcs.deactivateMoveTool():ub.funcs.activateMoveTool(t.code)},ub.funcs.removeUnusedElement=function(e){0<$(e).length&&$(e).remove()},ub.funcs.maxLengthCheck=function(e){e.value.length>e.max.length&&(e.value=e.value.slice(0,e.max.length))}}),$(document).ready(function(){ub.funcs.getAppSize=function(e){var t=ub.funcs.getSettingsObject(e);return void 0===t?void ub.utilities.warn("Application #"+e+" is undefined"):t.font_size},ub.funcs.setAppSize=function(e,t){var i=ub.funcs.getSettingsObject(e);return void 0===i?(ub.utilities.warn("Application #"+e+" is undefined"),!1):(ub.utilities.actionLog("Application #"+e+" set size from "+i.size+" to "+t),i.size=t,i.font_size=t,!0)}}),$(document).ready(function(){ub.funcs.getPipingSets=function(){return _.chain(ub.data.pipings).pluck("set").uniq().reject(function(e){return 0===e.indexOf("Right")}).value()},ub.funcs.hidePipingFunctions=function(){$("div#pipingsUI").hide(),$('a.change-view[data-view="pipings"]').removeClass("active-change-view")},ub.funcs.showPipingsPanel=function(){ub.funcs.activateBody(),$("div#pipings-panel").is(":visible")?($("div#pipings-panel").removeClass("on").addClass("off"),$('a.change-view[data-view="pipings"]').removeClass("active-change-view"),$('a.change-view[data-view="locations"]').click()):($("div#pipings-panel").removeClass("off").addClass("on"),$('a.change-view[data-view="pipings"]').addClass("active-change-view"));var e=$("div#pipings-panel");e.unbind("mousedown"),e.mousedown(ub.funcs.handle_mousedown),ub.funcs.updatePipingsPanel(),$("div.pipings-header > span.close").on("click",function(){ub.funcs.hidePipingsPanel(),ub.showLocation&&(ub.funcs.removeLocations(),$("span.show-locations").find("span.caption").html("Show Location Markers"),$("span.show-locations").removeClass("active"))}),$("span.add-application").unbind("click"),$("span.add-application").on("click",function(){$('a.change-view[data-view="locations-add"]').click()}),$("span.show-locations").unbind("click"),$("span.show-locations").on("click",function(){"Show Location Markers"===$(this).find("span.caption").html()?($(this).find("span.caption").html("Hide Location Markers"),$(this).addClass("active"),ub.funcs.showLocations()):($(this).find("span.caption").html("Show Location Markers"),$(this).removeClass("active"),ub.funcs.removeLocations())}),$("div#pipings-panel > span.close").unbind("click"),$("div#pipings-panel > span.pipings-close").on("click",function(){ub.funcs.showPipingsPanel()}),$("span.piping").first().trigger("click")},ub.funcs.hidePipingsPanel=function(){$("div#pipings-panel").is(":visible")&&($("div#pipings-panel").removeClass("on").addClass("off"),$('a.change-view[data-view="pipings"]').removeClass("active-change-view"))},ub.funcs.updatePipingsPanel=function(){var t="",e=ub.funcs.getPipingSets();_.each(e,function(e){t+='<span class="piping unselectable" data-piping-name="'+e+'">'+('<span class="caption">'+e+"</span>")+"</span>"}),$("div.pipings-container").html(""),$("div.pipings-container").html(t),$("span.piping").unbind("click"),$("span.piping").on("click",function(){var e=$(this).data("piping-name");$("span.piping").removeClass("active"),$(this).addClass("active"),ub.funcs.activatePipings(e)}),$("span.piping > span.caption").each(function(e){if("object"==typeof $(this)[0]){var t=$(this)[0].innerHTML;-1<t.indexOf("Left")&&$('span.piping[data-piping-name="'+t+'"]').find("span.caption").html(t.replace("Left ",""))}})},ub.funcs.getPipingSettingsObject=function(e){return void 0===ub.current_material.settings.pipings[e]&&(ub.current_material.settings.pipings[e]={size:"",enabled:0,numberOfColors:0,layers:[{layer:1,status:!1,colorCode:""},{layer:2,status:!1,colorCode:""},{layer:3,status:!1,colorCode:""}]}),ub.current_material.settings.pipings[e]},ub.funcs.changePipingSize=function(e,t,i){var n=e;n.size=i,n.enabled=1},ub.funcs.changePipingColor=function(n,a,o){_.each(ub.views,function(e){var t=ub.objects[e+"_view"][o.set],i=_.find(t.children,{ubName:"Layer "+a});i.tint=parseInt(n.hex_code,16),"none"===n.color_code?i.alpha=0:i.alpha=1})},ub.funcs.createSmallColorPickersPiping=function(o,r,s,e){var l="";ub.funcs.getColorByColorCode(o);l='<div class="smallPickerContainer" data-layer-no="'+r+'">',l+='<label class="smallColorPickerLabel" >'+s+" </label>";var t="&nbsp;",i="25px";return"none"===o?(t='<i class="fa fa-ban" aria-hidden="true"></i>',i="40px","activeColorItem"):t='<i class="fa fa-ban" aria-hidden="true"></i>',l+='<span style="margin-right: 10px; width: '+i+';background-color: #fff; color: #eee;" class="colorItem" data-layer-name="'+s+'" data-color-code="none" data-layer-no="'+r+'">'+t+"</span>",_.each(ub.current_material.settings.team_colors,function(e){var t="&nbsp;",i="25px",n="";o===e.color_code&&(t='<i class="fa fa-check" aria-hidden="true"></i>',i="40px",n="activeColorItem");var a=ub.funcs.getColorByColorCode(e.color_code);l+='<span style="width: '+i+";background-color: #"+a.hex_code+"; color: #"+a.forecolor+';" class="colorItem '+n+'" data-layer-name="'+s+'" data-color-code="'+e.color_code+'" data-layer-no="'+r+'">'+t+"</span>"}),l+="</div>"},ub.funcs.drawPipingColorPickers=function(e,t,i){var n="",a=i,o=ub.current_material.settings.team_colors[0];a.numberOfColors=t;for(var r=1;r<=t;r++)n+=ub.funcs.createSmallColorPickersPiping(o.color_code,r,"Color "+r,o);return n},ub.funcs.togglePiping=function(e,t){"off"===t?($("div.toggle").data("status","off"),$("div.valueContainer").css("margin-left","-100px"),$("div.cover").fadeIn("fast"),$("div.toggle").removeClass("defaultShadow"),$("span.cog").hide()):($("div.toggle").data("status","on"),$("div.valueContainer").css("margin-left","0px"),$("div.cover").hide(),$("div.toggle").addClass("defaultShadow"),$("span.cog").fadeIn())},ub.funcs.getPipingSet=function(e){return _.filter(ub.data.pipings,{set:e})},ub.funcs.sortPipingSizes=function(e){return _.each(e.items,function(e){"1/8"===e.size&&(e.sort=0),"1/4"===e.size&&(e.sort=1),"1/2"===e.size&&(e.sort=2)}),e.items=_.sortBy(e.items,"sort"),e},ub.funcs.getPipingSizes=function(e){var t=$("#m-piping-sizes").html(),i=ub.funcs.sortPipingSizes({items:e});return Mustache.render(t,i)},ub.funcs.getPipingColorArray=function(e){var t=[];return void 0!==e&&(e.color1&&t.push({name:"color 1",val:1}),e.color2&&t.push({name:"color 2",val:2}),e.color3&&t.push({name:"color 3",val:3})),e.color1||e.color2||e.color3||console.warn("No Color Enabled for "+e.name),t},ub.funcs.getPipingColors=function(e){var t=$("#m-piping-colors").html(),i={items:ub.funcs.getPipingColorArray(e)};return Mustache.render(t,i)},ub.funcs.changeActiveColorSmallColorPickerPiping=function(){},ub.funcs.setupSmallColorPickerEvents=function(e,t,o,r){var s=e,l=t;$("span.colorItem").unbind("click"),$("span.colorItem").on("click",function(){if(!$(this).hasClass("turnOff")){var e=$(this).data("layer-no"),t=$(this).data("color-code"),i=($(this).data("layer-name"),$(this).data("temp"),ub.funcs.getColorByColorCode(t));ub.funcs.changePipingColor(i,e,s),ub.funcs.changeActiveColorSmallColorPicker(e,t,i);var n=_.find(l.layers,{layer:parseInt(e)});if(void 0!==n&&(n.colorCode=t,n.colorObj=i),void 0!==o){ub.funcs.changePipingColor(i,e,o);var a=_.find(r.layers,{layer:parseInt(e)});void 0!==a&&(a.colorCode=t,a.colorObj=i)}}})},ub.funcs.renderPipings=function(n,a){var o=ub.funcs.getPipingSettingsObject(n.set);_.each(ub.views,function(e){var t=e+"_view",i=$.ub.create_piping(n,a,e,o);void 0!==ub.objects[t]&&void 0!==ub.objects[t][n.set]&&ub[t].removeChild(ub.objects[t][n.set]),ub[t].addChild(i),ub.objects[t][n.set]=i,ub.updateLayersOrder(ub[t])})},ub.funcs.removePiping=function(i){_.each(ub.views,function(e){var t=e+"_view";void 0!==ub.objects[t][i]&&ub[t].removeChild(ub.objects[t][i]),delete ub.objects[t][i]}),ub.current_material.settings.pipings[i].enabled=0,ub.current_material.settings.pipings[i].numberOfColors=0},ub.funcs.getMatchingSide=function(e){var t="";return 0===e.indexOf("Left")&&(t=e.replace("Left","Right")),0===e.indexOf("Right")&&(t=e.replace("Right","Left")),""===t&&console.warn("Result for Matching Side is Blank."),t},ub.funcs.initPipingColors=function(e,t){var i=ub.funcs.getPipingSettingsObject(e.set);_.each(i.layers,function(e){void 0===e.colorObj&&(e.colorCode=t.color_code,e.colorObj=t)})},ub.funcs.activatePipings=function(i){if(!ub.funcs.popupsVisible()&&ub.funcs.okToStart()){ub.funcs.activatePanelGuard(),ub.funcs.deactivatePanels();var e,n=i,p="";e=void 0!==(p=ub.current_material.settings.pipings[i])&&1===p.enabled?"on":"off",p=("undefined"===p||(n=ub.funcs.getPipingSet(i)),_.first(n)),$("div#pipingsUI").remove();var t=$("#m-piping-sidebar").html(),a={status:e,type:i},o=Mustache.render(t,a);$(".modifier_main_container").append(o);var r=$("span.piping-type").html();0===r.indexOf("Left")&&(r=r.replace("Left",""),$("span.piping-type").html(r));var s=ub.funcs.getPipingSizes(n,p),l=ub.funcs.getPipingColors(p);$("div.ui-row.size-row").html(s),$("div.ui-row.colors-row").html(l);var d=$("span.piping-sizes-buttons");d.on("click",function(){var e=$(this).data("type"),t=$(this).data("size"),n=_.find(ub.data.pipings,{name:e}),i=ub.funcs.getPipingColors(n),a=_.first(ub.funcs.getPipingColorArray(n)),o=ub.funcs.getPipingSettingsObject(p.set),r=void 0,s=void 0,l=n.name,c="";ub.funcs.changePipingSize(o,n,t),-1<l.indexOf("Left")&&(c=ub.funcs.getMatchingSide(l),r=_.find(ub.data.pipings,{name:c})),-1<l.indexOf("Right")&&(c=ub.funcs.getMatchingSide(l),r=_.find(ub.data.pipings,{name:c})),void 0!==r&&(s=ub.funcs.getPipingSettingsObject(r.set),ub.funcs.changePipingSize(s,r,t)),$("div.ui-row.colors-row").html(i);var u=$("span.piping-colors-buttons");u.unbind("click"),u.on("click",function(){$(this).data("type");var e=$(this).data("value"),t=ub.funcs.drawPipingColorPickers(n,e,o),i=ub.current_material.settings.team_colors;$("div.colorContainer").html(t),ub.funcs.setupSmallColorPickerEvents(n,o,r,s),ub.funcs.initPipingColors(n,i[0]),ub.funcs.renderPipings(n,e),void 0!==r&&(s.numberOfColors=e,ub.funcs.initPipingColors(r,i[0]),ub.funcs.renderPipings(r,e)),_.each(o.layers,function(e){""!==e.colorCode&&$('span.colorItem[data-layer-no="'+e.layer+'"][data-color-code="'+e.colorCode+'"]').trigger("click")}),u.removeClass("active"),$(this).addClass("active")}),d.removeClass("active"),$(this).addClass("active"),0===o.numberOfColors?$('span.piping-colors-buttons[data-type="'+a.name+'"]').trigger("click"):$('span.piping-colors-buttons[data-value="'+o.numberOfColors+'"]').trigger("click"),"Neck Piping 1/2"===e&&$('span.piping-colors-buttons[data-value="1"]').click()}),$("div.toggleOption").unbind("click"),$("div.toggleOption").on("click",function(){var e;if("on"===$("div.toggle").data("status")){if(e="off",ub.funcs.removePiping(i),0===i.indexOf("Left")){var t=ub.funcs.getMatchingSide(i);ub.funcs.removePiping(t)}}else{e="on";_.first(ub.funcs.getPipingColorArray(p));$('span.piping-sizes-buttons[data-type="'+p.name+'"]').trigger("click")}ub.funcs.togglePiping(n,e)}),$("div#pipingsUI").fadeIn();var c=ub.funcs.getPipingSettingsObject(p.set),u=c.size;void 0!==c&&1===c.enabled&&""!==c.size&&$('span.piping-sizes-buttons[data-size="'+u+'"]').trigger("click"),ub.funcs.togglePiping(n,e)}},ub.funcs.deactivatePipings=function(){$("div#pipingsUI").remove()},ub.funcs.processSavedPipings=function(){_.each(ub.current_material.settings.pipings,function(e,t){var i=_.find(ub.data.pipings,{name:t+" "+e.size});""!==e.size&&ub.funcs.renderPipings(i,e.numberOfColors)})},ub.funcs.processPipings=function(){if(ub.funcs.isCurrentSport("Baseball")||ub.funcs.isCurrentSport("Fastpitch")||ub.funcs.isSocks())if(util.isNullOrUndefined(ub.current_material.material.pipings))ub.utilities.info("This uniform has no Pipings.");else{var e=ub.current_material.material.pipings.replace(new RegExp("\\\\","g"),"");e=e.slice(1,-1),e=JSON.parse(e),ub.data.pipings=e,_.each(ub.data.pipings,function(a){var o=[],r=[];_.each(a.perspectives,function(e){_.each(e.layers,function(e){e.position=e.position})}),void 0!==a.colors_array?_.each(a.colors_array,function(e,t){var i=ub.funcs.getColorByColorCode(e);o.push(i),r.push({colorCode:e,colorObj:i,layer:t+1,status:!1});var n=a.team_color_id_array[t];1===a.enabled&&"none"!==i.color_code&&(ub.data.colorsUsed[i.hex_code]={hexCode:i.hex_code,parsedValue:i.hex_code,teamColorID:n})}):console.warn("No Color Array for "+a.name);var e=0;a.color1&&(e+=1),a.color2&&(e+=1),a.color3&&(e+=1);var t=void 0!==ub.current_material.settings.pipings[a.set];if(!t&&!t&&1===a.enabled){ub.current_material.settings.pipings[a.set]={set:a.set,layers:r,numberOfColors:e,size:a.size},ub.current_material.settings.pipings[a.set].enabled=1,ub.current_material.settings.pipings[a.set].size=a.size,ub.current_material.settings.pipings[a.set].numberOfColors=e;var i=a,n=ub.funcs.getPipingSettingsObject(a.set),s=ub.current_material.settings.team_colors;ub.funcs.initPipingColors(a,s[0]),ub.funcs.renderPipings(a,e),ub.funcs.changePipingSize(n,i,a.size)}})}},ub.funcs.removePipingsPanel=function(){$("div#pipings-panel").is(":visible")&&$("div.pipings-header > span.close").trigger("click")}}),$(document).ready(function(){ub.funcs.getRandomFeedSets=function(){return _.chain(ub.data.randomFeeds).pluck("set").uniq().reject(function(e){return 0===e.indexOf("Right")}).value()},ub.funcs.hideRandomFeedsFunctions=function(){$("div#randomFeedsUI").hide(),$("div#randomFeeds-panel").hide(),$('a.change-view[data-view="randomFeeds"]').removeClass("active-change-view")},ub.funcs.showRandomFeedPanel=function(){ub.funcs.activateBody(),$("div#randomFeeds-panel").is(":visible")?($("div#randomFeeds-panel").removeClass("on").addClass("off"),$('a.change-view[data-view="randomFeed"]').removeClass("active-change-view")):($("div#randomFeeds-panel").removeClass("off").addClass("on"),$('a.change-view[data-view="randomFeed"]').addClass("active-change-view"));var e=$("div#randomFeeds-panel");e.unbind("mousedown"),e.mousedown(ub.funcs.handle_mousedown),ub.funcs.updateRandomFeedsPanel(),$("div.randomFeeds-header > span.close").on("click",function(){ub.funcs.hideRandomFeedsPanel()}),$("div#randomFeeds-panel > span.close").unbind("click"),$("div#randomFeeds-panel > span.randomFeeds-close").on("click",function(){ub.funcs.showRandoFeedPanel()}),$("span.randomFeed").first().trigger("click")},ub.funcs.hideRandomFeedsPanel=function(){$("div#randomFeeds-panel").is(":visible")&&($("div#randomFeeds-panel").removeClass("on").addClass("off"),$('a.change-view[data-view="randomFeeds"]').removeClass("active-change-view"))},ub.funcs.updateRandomFeedsPanel=function(){var t="",e=ub.funcs.getRandomFeedSets();_.each(e,function(e){t+='<span class="randomFeed unselectable" data-random-feed-name="'+e+'">'+('<span class="caption">'+e+"</span>")+"</span>"}),$("div.randomFeeds-container").html(""),$("div.randomFeeds-container").html(t),$("span.randomFeed").unbind("click"),$("span.randomFeed").on("click",function(){var e=$(this).data("random-feed-name");$("span.randomFeed").removeClass("active"),$(this).addClass("active"),ub.funcs.activateRandomFeeds(e)}),$("span.randomFeed > span.caption").each(function(e){var t=$(this).context.innerHTML;-1<t.indexOf("Left")&&$('span.randomFeed[data-randomFeed-name="'+t+'"]').find("span.caption").html(t.replace("Left ",""))})},ub.funcs.getRandomFeedSettingsObject=function(e){return void 0===ub.current_material.settings.randomFeeds[e]&&(ub.current_material.settings.randomFeeds[e]={size:"",enabled:0,numberOfColors:0,layers:[{layer:1,status:!1,colorCode:""},{layer:2,status:!1,colorCode:""},{layer:3,status:!1,colorCode:""}]}),ub.current_material.settings.randomFeeds[e]},ub.funcs.changeRandomFeedSize=function(e,t,i){var n=e;n.size=i,n.enabled=1},ub.funcs.changeRandomFeedColor=function(n,a,o){_.each(ub.views,function(e){var t=ub.objects[e+"_view"][o.set],i=_.find(t.children,{ubName:"Layer "+a});i.tint=parseInt(n.hex_code,16),"none"===n.color_code?i.alpha=0:i.alpha=1})},ub.funcs.createSmallColorPickersRandomFeed=function(o,r,s,e){var l="";ub.funcs.getColorByColorCode(o);l='<div class="smallPickerContainer" data-layer-no="'+r+'">',l+='<label class="smallColorPickerLabel" >'+s+" </label>";var t="&nbsp;",i="25px";return"none"===o?(t='<i class="fa fa-ban" aria-hidden="true"></i>',i="40px","activeColorItem"):t='<i class="fa fa-ban" aria-hidden="true"></i>',l+='<span style="margin-right: 10px; width: '+i+';background-color: #fff; color: #eee;" class="colorItem" data-layer-name="'+s+'" data-color-code="none" data-layer-no="'+r+'">'+t+"</span>",_.each(ub.current_material.settings.team_colors,function(e){var t="&nbsp;",i="25px",n="";o===e.color_code&&(t='<i class="fa fa-check" aria-hidden="true"></i>',i="40px",n="activeColorItem");var a=ub.funcs.getColorByColorCode(e.color_code);l+='<span style="width: '+i+";background-color: #"+a.hex_code+"; color: #"+a.forecolor+';" class="colorItem '+n+'" data-layer-name="'+s+'" data-color-code="'+e.color_code+'" data-layer-no="'+r+'">'+t+"</span>"}),l+="</div>"},ub.funcs.drawRandomFeedColorPickers=function(e,t,i){var n="",a=i,o=ub.current_material.settings.team_colors[0];a.numberOfColors=t;for(var r=1;r<=t;r++)n+=ub.funcs.createSmallColorPickersRandomFeed(o.color_code,r,"Color "+r,o);return n},ub.funcs.toggleRandomFeed=function(e,t){var i=t;"off"===i?($("div.toggle").data("status","off"),$("div.valueContainer").css("margin-left","-100px"),$("div.cover").fadeIn("fast"),$("div.toggle").removeClass("defaultShadow"),$("span.cog").hide()):($("div.toggle").data("status","on"),$("div.valueContainer").css("margin-left","0px"),$("div.cover").hide(),$("div.toggle").addClass("defaultShadow"),$("span.cog").fadeIn(),$('span.randomFeed-colors-buttons[data-value="2"]').click()),"on"===i?$("span.header-type").hide():$("span.header-type").show()},ub.funcs.getRandomFeedSet=function(e){return _.filter(ub.data.randomFeeds,{set:e})},ub.funcs.sortRandomFeedSizes=function(e){return _.each(e.items,function(e){"1/8"===e.size&&(e.sort=0),"1/4"===e.size&&(e.sort=1),"1/2"===e.size&&(e.sort=2)}),e.items=_.sortBy(e.items,"sort"),e},ub.funcs.getRandomFeedSizes=function(e){var t=$("#m-randomFeed-sizes").html(),i=ub.funcs.sortRandomFeedSizes({items:e});return Mustache.render(t,i)},ub.funcs.getRandomFeedColorArray=function(e){var t=[];return void 0!==e&&(e.color1&&t.push({name:"color 1",val:1}),e.color2&&t.push({name:"color 2",val:2}),e.color3&&t.push({name:"color 3",val:3})),e.color1||e.color2||e.color3||console.warn("No Color Enabled for "+e.name),t},ub.funcs.getRandomFeedColors=function(e){var t=$("#m-randomFeed-colors").html(),i={items:ub.funcs.getRandomFeedColorArray(e)};return Mustache.render(t,i)},ub.funcs.changeActiveColorSmallColorPickerRandomFeed=function(){},ub.funcs.setupSmallColorPickerEvents=function(e,t,o,r){var s=e,l=t;$("span.colorItem").unbind("click"),$("span.colorItem").on("click",function(){if(!$(this).hasClass("turnOff")){var e=$(this).data("layer-no"),t=$(this).data("color-code"),i=($(this).data("layer-name"),$(this).data("temp"),ub.funcs.getColorByColorCode(t));ub.funcs.changeRandomFeedColor(i,e,s),ub.funcs.changeActiveColorSmallColorPicker(e,t,i);var n=_.find(l.layers,{layer:parseInt(e)});if(void 0!==n&&(n.colorCode=t,n.colorObj=i),void 0!==o){ub.funcs.changeRandomFeedColor(i,e,o);var a=_.find(r.layers,{layer:parseInt(e)});void 0!==a&&(a.colorCode=t,a.colorObj=i)}}})},ub.funcs.renderRandomFeed=function(n,a){var o=ub.funcs.getRandomFeedSettingsObject(n.set);_.each(ub.views,function(e){var t=e+"_view",i=$.ub.create_randomFeed(n,a,e,o);void 0!==ub.objects[t]&&void 0!==ub.objects[t][n.set]&&ub[t].removeChild(ub.objects[t][n.set]),ub[t].addChild(i),ub.objects[t][n.set]=i,ub.updateLayersOrder(ub[t])})},ub.funcs.removeRandomFeed=function(i){_.each(ub.views,function(e){var t=e+"_view";void 0!==ub.objects[t][i]&&ub[t].removeChild(ub.objects[t][i]),delete ub.objects[t][i]}),ub.current_material.settings.randomFeeds[i].enabled=0,ub.current_material.settings.randomFeeds[i].numberOfColors=0},ub.funcs.getMatchingSide=function(e){var t="";return 0===e.indexOf("Left")&&(t=e.replace("Left","Right")),0===e.indexOf("Right")&&(t=e.replace("Right","Left")),""===t&&console.warn("Result for Matching Side is Blank."),t},ub.funcs.initRandomFeedColors=function(e,t){var i=ub.funcs.getRandomFeedSettingsObject(e.set);_.each(i.layers,function(e){void 0===e.colorObj&&(e.colorCode=t.color_code,e.colorObj=t)})},ub.funcs.activateRandomFeeds=function(i){if(!ub.funcs.popupsVisible()&&ub.funcs.okToStart()){ub.funcs.deactivatePanels(),ub.funcs.activeStyle("randomFeed");var e,n=i,p="";e=void 0!==(p=ub.current_material.settings.randomFeeds[i])&&1===p.enabled?"on":"off",p=("undefined"===p||(n=ub.funcs.getRandomFeedSet(i)),_.first(n)),$("div#randomFeedsUI").remove();var t=$("#m-randomFeed-sidebar").html(),a={status:e,type:i},o=Mustache.render(t,a);$(".modifier_main_container").append(o),"on"==e&&$("span.header-type").hide();var r=$("span.randomFeed-type").html();0===r.indexOf("Left")&&(r=r.replace("Left",""),$("span.randomFeed-type").html(r));var s=ub.funcs.getRandomFeedSizes(n,p),l=ub.funcs.getRandomFeedColors(p);$("div.ui-row.size-row").html(s),$("div.ui-row.colors-row").html(l);var d=$("span.randomFeed-sizes-buttons");d.on("click",function(){var e=$(this).data("type"),t=$(this).data("size"),n=_.find(ub.data.randomFeeds,{name:e}),i=ub.funcs.getRandomFeedColors(n),a=_.first(ub.funcs.getRandomFeedColorArray(n)),o=ub.funcs.getRandomFeedSettingsObject(p.set),r=void 0,s=void 0,l=n.name,c="";ub.funcs.changeRandomFeedSize(o,n,t),-1<l.indexOf("Left")&&(c=ub.funcs.getMatchingSide(l),r=_.find(ub.data.randomFeeds,{name:c})),-1<l.indexOf("Right")&&(c=ub.funcs.getMatchingSide(l),r=_.find(ub.data.randomFeeds,{name:c})),void 0!==r&&(s=ub.funcs.getRandomFeedSettingsObject(r.set),ub.funcs.changeRandomFeedSize(s,r,t)),$("div.ui-row.colors-row").html(i);var u=$("span.randomFeed-colors-buttons");u.unbind("click"),u.on("click",function(){$(this).data("type");var e=$(this).data("value"),t=ub.funcs.drawRandomFeedColorPickers(n,e,o),i=ub.current_material.settings.team_colors;$("div.colorContainer").html(t),ub.funcs.setupSmallColorPickerEvents(n,o,r,s),ub.funcs.initRandomFeedColors(n,i[0]),ub.funcs.renderRandomFeed(n,e),void 0!==r&&(s.numberOfColors=e,ub.funcs.initRandomFeedColors(r,i[0]),ub.funcs.renderRandomFeed(r,e)),_.each(o.layers,function(e){""!==e.colorCode&&$('span.colorItem[data-layer-no="'+e.layer+'"][data-color-code="'+e.colorCode+'"]').trigger("click")}),u.removeClass("active"),$(this).addClass("active")}),d.removeClass("active"),$(this).addClass("active"),0===o.numberOfColors?$('span.randomFeed-colors-buttons[data-type="'+a.name+'"]').trigger("click"):$('span.randomFeed-colors-buttons[data-value="'+o.numberOfColors+'"]').trigger("click")}),$("div.toggleOption").unbind("click"),$("div.toggleOption").on("click",function(){var e;if("on"===$("div.toggle").data("status")){if(e="off",ub.funcs.removeRandomFeed(i),0===i.indexOf("Left")){var t=ub.funcs.getMatchingSide(i);ub.funcs.removeRandomFeed(t)}}else{e="on";_.first(ub.funcs.getRandomFeedColorArray(p));$('span.randomFeed-sizes-buttons[data-type="'+p.name+'"]').trigger("click")}ub.funcs.toggleRandomFeed(n,e)}),$("div#randomFeedsUI").fadeIn();var c=ub.funcs.getRandomFeedSettingsObject(p.set),u=c.size;void 0!==c&&1===c.enabled&&""!==c.size&&$('span.randomFeed-sizes-buttons[data-size="'+u+'"]').trigger("click"),ub.funcs.toggleRandomFeed(n,e),$("div.ui-row.size-row").hide(),$("div.ui-row.colors-row").hide()}},ub.funcs.deactivateRandomFeeds=function(){$("div#randomFeedsUI").remove()},ub.funcs.processSavedRandomFeeds=function(){_.each(ub.current_material.settings.randomFeeds,function(e,t){var i=_.find(ub.data.randomFeeds,{name:t+" "+e.size});""!==e.size&&ub.funcs.renderRandomFeed(i,e.numberOfColors)})},ub.funcs.processRandomFeeds=function(){if(ub.funcs.isSocks())if(util.isNullOrUndefined(ub.current_material.material.random_feed))ub.utilities.info("This uniform has no Random Feeds.");else{var e=ub.current_material.material.random_feed.replace(new RegExp("\\\\","g"),"");e=e.slice(1,-1),e=JSON.parse(e),ub.data.randomFeeds=e,_.each(ub.data.randomFeeds,function(a){var o=[],r=[];_.each(a.perspectives,function(e){_.each(e.layers,function(e){e.position=e.position})}),void 0!==a.colors_array?_.each(a.colors_array,function(e,t){var i=ub.funcs.getColorByColorCode(e);o.push(i),r.push({colorCode:e,colorObj:i,layer:t+1,status:!1});var n=a.team_color_id_array[t];1===a.enabled&&"none"!==i.color_code&&(ub.data.colorsUsed[i.hex_code]={hexCode:i.hex_code,parsedValue:i.hex_code,teamColorID:n})}):console.warn("No Color Array for "+a.name);var e=0;a.color1&&(e+=1),a.color2&&(e+=1),a.color3&&(e+=1),a.sortID=ub.data.randomFeedArrangement.getSortID(a.set).order;var t=void 0!==ub.current_material.settings.randomFeeds[a.set];if(!t&&!ub.dataPatches.forRandomFeedPatching()&&!t&&1===a.enabled){ub.current_material.settings.randomFeeds[a.set]={set:a.set,layers:r,numberOfColors:e,size:a.size},ub.current_material.settings.randomFeeds[a.set].enabled=1,ub.current_material.settings.randomFeeds[a.set].size=a.size,ub.current_material.settings.randomFeeds[a.set].numberOfColors=e;var i=a,n=ub.funcs.getRandomFeedSettingsObject(a.set),s=ub.current_material.settings.team_colors;ub.funcs.initRandomFeedColors(a,s[0]),ub.funcs.renderRandomFeed(a,e),ub.funcs.changeRandomFeedSize(n,i,a.size)}}),ub.data.randomFeeds=_.sortBy(ub.data.randomFeeds,"sortID"),ub.dataPatches.forRandomFeedPatching()}},ub.funcs.removeRandomFeedsPanel=function(){$("div#randomFeeds-panel").is(":visible")&&($("div.randomFeeds-header > span.close").trigger("click"),ub.funcs.hiderandomFeedsTool())}}),function(C){C.fn.ubTeamColorPicker=function(e){var g=C.extend({target:"target"},e);return this.each(function(){var e,t=window.util.toTitleCase(g.target);t="string"==typeof g.target_name?g.target_name:g.target.toTitleCase(),e=g.colorSet;var i=C(this),n=i.parent(),a=n.find("input").val(),o=n.find("input").data("index"),r=g.type+"_"+g.target,s=t,l=t.toTitleCase(),c='<div class="options_panel_section ubColorPicker" data-index="'+o+'" data-type="'+g.type+'" data-option="'+s+'" data-group="colors"><div class="color_panel_container color_panel_container_ub_picker">',u="",p="35px",d="35px",f="";ub.funcs.isSublimated()&&(d="25px",p="38px",f="sublimated",C("div#right-main-window").css("height","530px")),n.hide(),_.each(e,function(e){var t=e,i=t.hex_code;"White"===t.name&&(i="ffffff");var n="";if("W"===t.color_code&&(n="whitebtn"),void 0!==t){var a='<div class="color_element '+f+'">';a=(a=a+'<button class=" grow btn change-color '+n+'" data-status="unselected" data-elid="'+r+'" data-index="'+o+'" data-panel="'+s+'" data-target="'+s+'" data-color="#'+t.hex_code+'" data-color-id="'+t.id+'" data-color-label="'+t.color_code+'" data-color-code="'+t.hex_code+'"  data-type="'+g.type+'" style="background-color: #'+i+"; width: "+p+"; height: "+d+'; border-radius: 0px; border-width: thin; padding: 0px;" data-layer="none" data-placement="bottom" title="'+t.name+'" data-selection="none"></button>')+'<span class="label">'+ub.funcs.tennGuardTemp(t.name)+"</span>",u+=a+="</div>"}else util.error("Color Not Found: "+e+", Material Option: "+l)}),c+=u,c+="</div></div>";var h="<div id='"+r+"' class='btn drop-target drop-theme-hubspot-popovers' title='Color Stop: "+o+"' rel='popover' tabindex='0' data-placement='bottom' data-popover-content='#"+g.type+"_"+g.target+"' data-type='"+g.type+"' data-target='"+g.target+"'><span data-target='"+g.target+"' data-index='"+o+"' data-type='"+g.type+"' style='background-color: "+a+"'></span></div>",m="<div id='"+g.type+"_"+g.target+"' class='popup_picker'>"+c+"</div>";n.addClass("ubColorPicker"),i.data("target"),i.data("target",g.target),i.data("type"),i.data("type",g.type),n.append(h),n.append(m);var b=util.dataSelector(".btn",{elid:r});b.on("click",function(){C(this).data("color"),C(this).data("color-id");var e=C(this).data("status"),t=(C(this).data("color-code"),C(this).data("color-label")),i=_.find(g.colorSet,{color_code:t});if("unselected"===e){if(9<=ub.current_material.settings.team_colors.length+1)return;var n=ub.current_material.settings.team_colors.length+1;C(this).first().data("status","selected"),C(this).first().html('<i class="fa fa-check" aria-hidden="true"></i>'),C(this).first().html(n),"W"!==t&&"Y"!==t&&"CR"!==t&&"S"!==t&&"PK"!==t&&"OP"!==t&&"SG"!==t||(C(this).first().css("color","#3d3d3d"),C(this).first().css("text-shadow","1px 1px #d7d7d7")),ub.funcs.addColorToTeamColors(i)}else{n=ub.current_material.settings.team_colors.length;C(this).first().data("status","unselected"),C(this).first().html(""),ub.funcs.removeColorFromTeamColors(i);var a=void 0;b.each(function(){if("selected"===C(this).data("status")){var e=C(this).data("color-id"),t=ub.funcs.getTeamColorIndexByColorID(e);void 0!==t?(a=t+1,C(this).first().html(a)):console.warn("Cannot find color id "+e+"  in team color")}})}});util.dataSelector("div.options_panel_section.ubColorPicker",{option:t}),util.dataSelector("span",{target:g.target,type:g.type,index:o});n.show()})},C.fn.ubColorPickerBasic=function(e){var m=C.extend({target:"target"},e);return this.each(function(){var e,t=window.util.toTitleCase(m.target);t="string"==typeof m.target_name?m.target_name:m.target.toTitleCase(),e=_.find(ub.current_material.material.options,{name:t});var i=C(this),n=i.parent(),a=n.find("input").val(),o=n.find("input").data("index"),r=m.type+"_"+m.target+"_"+o,s=t,l=t.toTitleCase(),c='<div class="options_panel_section ubColorPicker" data-index="'+o+'" data-type="'+m.type+'" data-option="'+s+'" data-group="colors"><div class="color_panel_container color_panel_container_ub_picker">',u="";n.hide(),_.each(JSON.parse(e.colors),function(e){var t=_.find(ub.data.colors,{color_code:e}),i=t.hex_code;"White"===t.name&&(i="ffffff");var n="";if("W"===t.color_code&&(n="whitebtn"),void 0!==t){var a='<div class="color_element">';a=a+'<button class="btn change-color '+n+'" data-elid="'+r+'" data-index="'+o+'" data-panel="'+s+'" data-target="'+s+'" data-color="#'+t.hex_code+'" data-color-code="'+t.hex_code+'"  data-type="'+m.type+'" style="background-color: #'+i+'; width: 35px; height: 35px; border-radius: 4px; border: 1px solid #eeeeee; border-width: thin; padding: 0px;" data-layer="none" data-placement="bottom" title="'+t.name+'" data-selection="none">'+t.color_code+"</button>",u+=a+="</div>"}else util.error("Color Not Found: "+e+", Material Option: "+l)}),c+=u,c+="</div></div>";var p="<div id='"+r+"' class='btn drop-target drop-theme-hubspot-popovers' title='Color Stop: "+o+"' rel='popover' tabindex='0' data-placement='bottom' data-popover-content='#"+m.type+"_"+m.target+"' data-type='"+m.type+"' data-target='"+m.target+"'><span data-target='"+m.target+"' data-index='"+o+"' data-type='"+m.type+"' style='background-color: "+a+"'></span></div>",d="<div id='"+m.type+"_"+m.target+"' class='popup_picker'>"+c+"</div>";n.addClass("ubColorPicker"),i.data("target"),i.data("target",m.target),i.data("type"),i.data("type",m.type),n.append(p),n.append(d),util.dataSelector(".btn",{elid:r}).on("click",function(){var e=C(this).data("color");C("input#primary_text").val(e),n.find("span").css("background-color",e),n.find("span").html(C(this).html()),n.find("span").css("font-size","10px"),n.find("span").css("padding-top","2px"),n.find("span").css("color","#eeeeee"),"W"===C(this).html()&&(n.find("span").css("background-color","#ffffff"),n.find("span").css("color","#eeeeee")),"CR"===C(this).html()&&n.find("span").css("color","#000000"),"single"===m.type&&C('button.btn.change-color[data-target="'+m.target+'"][data-color="'+e+'"]').click(),"withMatch"===m.type&&(C('button.btn.change-color[data-target="'+m.target+'"][data-color="'+e+'"]').click(),C('button.btn.change-color[data-target="'+m.matchingSide+'"][data-color="'+e+'"]').click())});var f="div.options_panel_section.ubColorPicker",h=util.dataSelector(f,{option:t});util.dataSelector("span",{target:m.target,type:m.type,index:o}).on("click",function(){var e=util.dataSelector(f,{type:m.type,option:t,index:o});"none"===e.css("display")?(h.hide(),e.show()):h.hide()}),h.hide(),n.fadeIn()})},C.fn.ubColorPicker=function(e){var m=C.extend({target:"target"},e);return this.each(function(){var e,t=window.util.toTitleCase(m.target);t="string"==typeof m.target_name?m.target_name:m.target.toTitleCase(),e=_.find(ub.current_material.material.options,{name:t});var i=C(this),l=i.parent(),n=l.find("input").val(),o=l.find("input").data("index"),c=m.type+"_"+m.target+"_"+o,r=t,s=t.toTitleCase(),a='<div class="options_panel_section ubColorPicker" data-index="'+o+'" data-type="'+m.type+'" data-option="'+r+'" data-group="colors"><div class="color_panel_container color_panel_container_ub_picker">',u="";_.each(JSON.parse(e.colors),function(e){var t=_.find(ub.data.colors,{color_code:e}),i=t.hex_code;"White"===t.name&&(i="ffffff");var n="";if("W"===t.color_code&&(n="whitebtn"),void 0!==t){var a='<div class="color_element">';a=a+'<button class="btn change-color '+n+'" data-elid="'+c+'" data-index="'+o+'" data-panel="'+r+'" data-target="'+r+'" data-color="#'+t.hex_code+'" data-color-code="'+t.hex_code+'"  data-type="'+m.type+'" style="background-color: #'+i+'; width: 35px; height: 35px; border-radius: 4px; border: 1px solid #eeeeee; border-width: thin; padding: 0px;" data-layer="none" data-placement="bottom" title="'+t.name+'" data-selection="none">'+t.color_code+"</button>",u+=a+="</div>"}else util.error("Color Not Found: "+e+", Material Option: "+s)}),a+=u,a+="</div></div>";var p="<div id='"+c+"' class='btn drop-target drop-theme-hubspot-popovers' title='Color Stop: "+o+"' rel='popover' tabindex='0' data-placement='bottom' data-popover-content='#"+m.type+"_"+m.target+"' data-type='"+m.type+"' data-target='"+m.target+"'><span data-target='"+m.target+"' data-index='"+o+"' data-type='"+m.type+"' style='background-color: "+n+"'></span></div>",d="<div id='"+m.type+"_"+m.target+"' class='popup_picker'>"+a+"</div>";l.addClass("ubColorPicker"),i.data("target"),i.data("target",m.target),i.data("type"),i.data("type",m.type),l.append(p),l.append(d),util.dataSelector(".btn",{elid:c}).on("click",function(){var t=C(this).data("color");if(C('input[data-elid="'+c+'"]').val(t),l.find("span").css("background-color",t),l.find("span").html(C(this).html()),l.find("span").css("font-size","10px"),l.find("span").css("padding-top","2px"),l.find("span").css("color","#eeeeee"),"W"===C(this).html()&&(l.find("span").css("background-color","#ffffff"),l.find("span").css("color","#eeeeee")),"CR"===C(this).html()&&l.find("span").css("color","#000000"),"gradient"===m.type&&C("button#update-gradient-"+m.target).click(),"pattern"===m.type){var i=C(this).data("index"),e=C(this).data("panel"),n=(t=parseInt(C(this).data("color-code"),16),ub.current_material.material.type),a=ub.current_material.containers[n][e].pattern_containers;_.each(["front","back","left","right"],function(e){a[e].container.children[i].tint=t}),ub.refresh_thumbnails();var o=e.toLowerCase().replace(" ","_");ub.save_pattern_color(o,i,t)}if("text_pattern"===m.type){var r=ub.current_material.containers[m.application.id].pattern;i=C(this).data("index"),e=C(this).data("panel"),t=parseInt(C(this).data("color-code"),16);_.each(r,function(e){e.children[i].tint=t}),ub.refresh_thumbnails(),ub.save_text_pattern_color(m.application,i,t)}if("mascot"===m.type){n=ub.current_material.material.type;var s=ub.current_material.containers[n].application_containers[m.application.id].object.sprite;i=C(this).data("index"),e=C(this).data("panel"),t=parseInt(C(this).data("color-code"),16);_.each(s,function(e){e.children[i].tint=t}),ub.current_material.settings.applications[m.application.id].mascot.layers[i].color=t,ub.current_material.settings.applications[m.application.id].mascot.layers[i].default_color=t.toString(16),ub.refresh_thumbnails()}});var f="div.options_panel_section.ubColorPicker",h=util.dataSelector(f,{option:t});util.dataSelector("span",{target:m.target,type:m.type,index:o}).on("click",function(){var e=util.dataSelector(f,{type:m.type,option:t,index:o});"none"===e.css("display")?(h.hide(),e.show()):h.hide()}),h.hide()})},C.fn.ubMascotDialog=function(e){ub.funcs.removeUIHandles();var c=C.extend({application:{}},e),u=c.application;u.perspective;return C("a#view_"+u.perspective).click(),this.each(function(){var e=C(this),t={application_id:u.id},i=C("#mascot-dropdown").html(),n=Mustache.render(i,t);e.html(n);var a='div.mascot_drop[data-id="'+u.id+'"]',o=C("#mascot-upload-dialog").html(),r=Mustache.render(o,t),s=new Drop({target:document.querySelector(a),content:r,classes:"drop-theme-arrows",position:"bottom left",openOn:"click"});ub.ui.drops[u.id]=s;function l(){C(this),u.id;var a=this.files?this.files:[];if(a.length&&window.FileReader&&/^image/.test(a[0].type)){var e=new FileReader;e.readAsDataURL(a[0]),e.onloadend=function(){var e=ub.current_material.settings.files.mascots,t=a[0],i={id:(new Date).getTime(),filename:t.name,dataUrl:this.result};e.push(i);var n=u.id;ub.funcs.update_mascot_list(),C('a.mascot_picker[data-application-id="'+n+'"]').click()}}}s.once("open",function(){var e=C("#file-src-"+c.application.id);e.on("change",l),ub.data.panels={},ub.data.panels.mascot_panel=e,ub.funcs.update_mascot_list()}),s.open()})},C.fn.ubPlayerNameDialog=C.fn.ubTeamNameDialog=C.fn.ubPlayerNumberDialog=function(e){ub.funcs.removeUIHandles();var b=C.extend({application:{}},e),g=b.application,v=g.perspective+"_view";return C("a#view_"+g.perspective).click(),this.each(function(){var e=C(this),t=ub.data.fonts[0],i="",n="",d=C("select.application_type_dropdown[data-id="+g.id+"]").val();"player_name"===d&&(i="Player Name",n=25),"team_name"===d&&(i="Team Name",n=25),"player_number"===d&&(i="23",n=100);var a=g.type,o=C.ub.getApplicationSizes(a),r={sample_text:i,application_id:b.application.id,first_font_name:t.name,first_font_id:t.id,sizes:o},l=C("#text-ui").html(),c=Mustache.render(l,r);e.html(c),C('div.colors_container[data-id="'+g.id+'"]').not('[data-option="colors"]').hide(),C('div.btn.ub[data-id="'+g.id+'"]').on("click",function(e){C('div.btn.ub[data-id="'+g.id+'"]').removeClass("active"),C(this).addClass("active"),C("div.colors_container").hide(),C('div.colors_container[data-option="'+C(this).data("option")+'"]').fadeIn()});ub.objects[b.application.perspective+"_view"],ub[b.application.perspective+"_view"];!function(i){var n,e='div.font_style_drop[data-id="'+i.application.id+'"]',t="";t+="<div data-id='"+i.application.id+"' class='row font-container' id='font-container-"+i.application.id+"'>",t+="</div>",t+="<div class='row'>",t+="<div col-md-12>";var a="";_.each(ub.data.fonts,function(e){a+='<a class="font-selector" style="font-family: '+e.name+'" data-font-id="'+e.id+'" data-font-name="'+e.name+'" data-target="font_style_drop_element" data-id="'+i.application.id+'">'+e.name+"</a><br />"}),t+=a,t+="</div>",t+="</div>",n=new Drop({target:document.querySelector(e),content:t,classes:"drop-theme-arrows",position:"bottom left",openOn:"click"}),(ub.ui.drops[i.application.id]=n).once("open",function(){C('a.font-selector[data-target="font_style_drop_element"][data-id="'+i.application.id+'"]').click(function(e){var t=C('div.font_style_drop[data-id="'+i.application.id+'"]');t.html(C(this).html()),t.data("font-id"),t.data("font-id",C(this).data("font-id")),t.data("font-name",C(this).data("font-name")),t.css("font-family",C(this).html()),n.close(),C('input.applications.player_number[data-application-id="'+i.application.id+'"]').trigger("change")})})}(b),function(c){var u,e='div.color_drop[data-id="'+c.application.id+'"]';color_content="";var i=z(c.application.layer),t="";t+="<div data-id='"+c.application.id+"' class='row color-container' id='color-container-"+c.application.id+"'>",t+="</div>",t+="<div class='row'>",t+="<div col-md-12>";var n="";_.each(i,function(e){var t="white";"ffffff"===e.hex_code&&(t="black"),n+='<a class="color-selector" style="color: '+t+"; background-color: #"+e.hex_code+'" data-color="'+e.hex_code+'" data-target="color_drop_element" data-id="'+c.application.id+'">'+e.name+"</a>"}),t+=n,t+="</div>",t+="</div>",(u=new Drop({target:document.querySelector(e),content:t,classes:"drop-theme-arrows",position:"bottom left",openOn:"click"})).nonce=!0,u.once("open",function(){var e='a.color-selector[data-target="color_drop_element"][data-id="'+c.application.id+'"]';C(e).click(function(e){var t=C('div.font_style_drop[data-id="'+c.application.id+'"]'),i=C("a.font-selector"),n=(C("a.font-selector"),C('div.color_drop[data-id="'+c.application.id+'"]'));n.html(C(this).html());var a="";a="ffffff"===C(this).data("color")?"#000000":"#ffffff",n.data("color"),n.data("color",C(this).data("color")),n.css({"background-color":"#"+C(this).data("color"),color:a,border:"solid 1px #3d3d3d"}),t.css("color","#"+C(this).data("color")),i.css("color","#"+C(this).data("color")),color_code=C(this).data("color");var o=ub.current_material.settings.applications[c.application.id];if(void 0!==o&&("player_number"===o.type||"player_name"===o.type||"team_name"===o.type)){var r=ub.current_material.material.type,l=ub.current_material.containers[r].application_containers;void 0!==l[c.application.id]&&(s=l[c.application.id].object.sprite,P(c.application.id,s,color_code),u.nonce=!1)}u.close(),ub.refresh_thumbnails()});var t=i[0];C(e+"[data-color='"+t.hex_code+"']").click()}),u.open(),u.close()}(b),function(i){var n,e='div.accent_drop[data-id="'+i.application.id+'"]',t="";t+="<div data-id='"+i.application.id+"' class='row accent-container' id='accent-container-"+i.application.id+"'>",t+="</div>",t+="<div class='row'>";ub.data.accents.items[0];var a="";_.each(ub.data.accents.items,function(e){a+='<div class="col-md-3">',a+='<a class="accent-selector" data-accent-id="'+e.id+'" data-accent-name="'+e.name+'" data-target="accent_drop_element" data-id="'+i.application.id+'"><img class="accent_element" src="/images/sidebar/'+e.thumbnail+'"></a><br />',a+="</div>"}),t+=a,t+="</div>",n=new Drop({target:document.querySelector(e),content:t,classes:"drop-theme-arrows",position:"bottom left",openOn:"click"}),(ub.ui.drops[i.application.id]=n).once("open",function(){var e='a.accent-selector[data-target="accent_drop_element"][data-id="'+i.application.id+'"]';C(e).click(function(e){var t=C('div.accent_drop[data-id="'+i.application.id+'"]');t.html(C(this).html()),t.data("accent-id"),t.data("accent-id",C(this).data("accent-id")),t.data("accent-name",C(this).data("accent-name")),C('input.applications.player_number[data-application-id="'+i.application.id+'"]').trigger("change"),n.close()});var t=ub.data.accents.items[0];C(e+"[data-accent-id='"+t.id+"']").click()}),n.open(),n.close()}(b),function(n){var e=C('div.colors_container[data-id="'+n.application.id+'"][data-option="gradients"]'),a='<div class="gradient_panel_container">';_.each(ub.data.gradients.items,function(e){var t='<div class="gradient_element">',i="/images/sidebar/"+e.code+".png";t=t+'<button class="btn change-gradient" data-application-id="'+n.application.id+'" data-gradient="'+e.code+'" style="background-image: url('+i+'); width: 100%; height: 100%; border: 1px solid #acacac; padding: 0px; background-size: cover;" data-layer="none" data-placement="bottom" title="'+e.name+'" data-selection="none"></button>',a+=t+="</div>"}),a+="</div><div class='color_stops_container' data-option='gradients' data-id='"+n.application.id+"'></div>",e.html(a),C('button.change-gradient[data-application-id="'+n.application.id+'"]').on("click",function(e){var t=C(this).data("gradient"),i=_.find(ub.data.gradients.items,{code:t});n.application.id,C('div.color_stops_container[data-id="1"]');y(n.application.id,i,"text",n.application)})}(b),function(n){var e=C('div.colors_container[data-id="'+n.application.id+'"][data-option="patterns"]'),a='<div class="pattern_panel_container">';_.each(ub.data.patterns.items,function(e){var t='<div class="pattern_element">',i="/images/sidebar/"+e.code+".png";t=t+'<button class="btn change-text-pattern" data-application-id="'+n.application.id+'" data-pattern="'+e.code+'" style="background-image: url('+i+'); width: 100%; height: 100%; border: 1px solid #acacac; padding: 0px; background-size: cover;" data-layer="none" data-placement="bottom" title="'+e.name+'" data-selection="none"></button>',a+=t+="</div>"}),a+="</div><div class='color_stops_container' data-option='patterns' data-id='"+n.application.id+"'></div>",e.html(a),C('button.change-text-pattern[data-application-id="'+n.application.id+'"]').on("click",function(e){var t=C(this).data("pattern"),i=_.find(ub.data.patterns.items,{code:t});n.application.id,C('div.color_stops_container[data-id="1"]');!function(n,e,t,i){n=String(n);var a=i.id,o=e,r=_.clone(o),s=C('div.color_stops_container[data-id="'+a+'"][data-option="patterns"]');s.html("");var l="";0<o.layers.length&&(l="<br />Layers<br /><br />");_.each(o.layers,function(e,t){var i=e.default_color,n=e.default_color;e.filename;l+=ub.create_pattern_color_picker(t,i,n,a,o.code)}),l+="<br />",l+="Rotation: <span class='pattern_slider_label' data-target='pattern' data-layer='"+a+"' data-label='rotation' data-id='"+a+"'>100</span>%<br /><br />",l+="<div id='rotation_pattern_slider_"+a+"' class='pattern_slider pattern_rotation_slider'></div>",l+="<br />",l+="Opacity: <span class='pattern_slider_label' data-target='pattern' data-layer='"+a+"' data-label='opacity' data-id='"+a+"'>100</span>%<br />",l+="<div id='opacity_pattern_slider_"+a+"' class='pattern_slider'></div>",l+="<br />",l+="Scale: <span class='pattern_slider_label' data-target='pattern' data-layer='"+a+"' data-label='scale' data-id='"+a+"'>100</span>%<br />",l+="<div id='scale_pattern_slider_"+a+"' class='pattern_slider'></div>",l+="<br />",l+="Position X: <span class='pattern_slider_label' data-target='pattern' data-layer='"+a+"' data-label='position_x' data-id='"+a+"'>100</span>%<br />",l+="<div id='position_x_slider_"+a+"' class='pattern_slider'></div>",l+="<br />",l+="Position Y: <span class='pattern_slider_label' data-target='pattern' data-layer='"+a+"' data-label='position_y' data-id='"+a+"'>100</span>%<br />",l+="<div id='position_y_slider_"+a+"' class='pattern_slider'></div>",l+="<hr />",l+="<div id='angle_pattern_slider_"+a+"' class='pattern_slider_angle'></div>",l+="<hr />",l+="<button style='width: 100%;' id='update-pattern-"+a+"' data-target='"+a+"' data-pattern='"+o.code+"'>Update Pattern</button>",s.html(l),C("input.pattern_"+n).ubColorPicker({target:String(n),type:"text_pattern",application:i,target_name:i.layer});var c=_.pluck(r.color_layers,"value"),u=[];_.each(c,function(e){u.push(100*e)});var p=C("div#rotation_pattern_slider_"+n);p.roundSlider({values:[0],min:0,max:620,gap:0,width:5,handleSize:"+14",startAngle:90,change:function(e,t){var i=parseInt(p.find("span.edit").html());C('span[data-target="pattern"][data-label="rotation"][data-layer="'+n+'"]').text(i),C("button#update-pattern-"+n).click()}});C("#opacity_pattern_slider_"+n).limitslider({values:[100],min:0,max:100,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];C('span[data-target="pattern"][data-label="opacity"][data-id="'+n+'"]').text(i),C("button#update-pattern-"+n).click()}});C("#scale_pattern_slider_"+n).limitslider({values:[100],min:0,max:200,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];C('span[data-target="pattern"][data-label="scale"][data-id="'+n+'"]').text(i),C("button#update-pattern-"+n).click()}});C("#position_x_slider_"+n).limitslider({values:[50],min:0,max:100,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];C('span[data-target="pattern"][data-label="position_x"][data-id="'+n+'"]').text(i),C("button#update-pattern-"+n).click()}});C("#position_y_slider_"+n).limitslider({values:[50],min:0,max:100,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];C('span[data-target="pattern"][data-label="position_y"][data-id="'+n+'"]').text(i),C("button#update-pattern-"+n).click()}}),C("button#update-pattern-"+n).click("click",function(e){C.ub.mvChangePattern(i,n,r)}),C("button#update-pattern-"+n).click()}(n.application.id,i,0,n.application)})}(b);C('div.font_size_slider[data-id="'+g.id+'"]').limitslider({values:[n],min:0,max:300,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];C('input.applications.player_number[data-application-id="'+g.id+'"]').trigger("change"),C('span[data-target="logo"][data-label="font_size"][data-id="'+g.id+'"]').text(i)}});var u=C("input[type=radio][name=text_sizes][data-id="+g.id+"]");u.change(function(){var e,t=C('div.font_style_drop[data-id="'+g.id+'"]').data("font-id");"number"!=typeof t&&(t=1),e=C.ub.getFontSize({size:this.value,type:"Adult",factory:"BLB",applicationType:a,fontID:t}),C(".font_size_slider[data-id="+g.id+"]").limitslider("values",[e])}),u.trigger("change");var p=C('div.rotation_slider[data-id="'+g.id+'"]');p.roundSlider({values:[0],min:0,max:620,gap:0,width:5,handleSize:"+14",startAngle:90,change:function(e,t){var i=parseInt(p.find("span.edit").html());ub.objects[v]["objects_"+g.id].rotation=i/100;$angle_slider_logo=C('div.rotation_slider[data-id="'+g.id+'"]')}});var f=200;C('div.scale_slider_x[data-id="'+g.id+'"]').limitslider({values:[100],min:0,max:f,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0],n=ub.objects[v]["objects_"+g.id],a=C('div.scale_slider_x[data-id="'+g.id+'"]').limitslider("values")[0],o=C('div.scale_slider_y[data-id="'+g.id+'"]').limitslider("values")[0],r=new PIXI.Point(a/100,o/100);n.scale=r,C('span[data-target="logo"][data-label="scale_x"][data-id="'+g.id+'"]').text(i)}});f=200;C('div.scale_slider_y[data-id="'+g.id+'"]').limitslider({values:[100],min:0,max:f,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0],n=ub.objects[v]["objects_"+g.id],a=C('div.scale_slider_x[data-id="'+g.id+'"]').limitslider("values")[0],o=C('div.scale_slider_y[data-id="'+g.id+'"]').limitslider("values")[0],r=new PIXI.Point(a/100,o/100);n.scale=r,C('span[data-target="logo"][data-label="scale_y"][data-id="'+g.id+'"]').text(i)}});C('div.opacity_slider[data-id="'+g.id+'"]').limitslider({values:[100],min:0,max:100,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];ub.objects[v]["objects_"+g.id].alpha=i/100,C('span[data-target="logo"][data-label="opacity"][data-id="'+g.id+'"]').text(i),$angle_slider_logo=C('div.rotation_slider[data-id="'+g.id+'"]');var n=i/100;$angle_slider_logo.find("div.rs-bg-color").css({opacity:n})}});var h=ub.funcs.getPrimaryView(g).application.center;C('div.y_slider[data-id="'+g.id+'"]').limitslider({values:[h.y*ub.dimensions.height],min:0,max:ub.dimensions.height,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];ub.objects[v]["objects_"+g.id].y=i}}),C('div.x_slider[data-id="'+g.id+'"]').limitslider({values:[h.x*ub.dimensions.width],min:0,max:ub.dimensions.width,gap:0,change:function(e,t){var i=C(this).limitslider("values")[0];ub.objects[v]["objects_"+g.id].x=i}});var m=C('input.applications.player_number[data-application-id="'+g.id+'"]');m.on("keyup",function(){_.debounce(500,m.trigger("change"))}),m.on("change",function(){if(0!==m.val().length){ub.dimensions.width,h.x,ub.dimensions.height,h.y;var e=ub.current_material.settings,t=C('div.font_style_drop[data-id="'+g.id+'"]').data("font-id");"local"!==ub.config.app_env&&(t=t.toString());var i=_.find(ub.data.fonts,{id:t});C('div.color_drop[data-id="'+g.id+'"]').data("color");if(void 0!==i){var n="";void 0!==e.applications[g.id]&&(n=e.applications[g.id].color_array);var a=m.val(),o=C('div.accent_drop[data-id="'+g.id+'"]').data("accent-id"),r=_.find(ub.data.accents.items,{id:o}),s=C('div.font_size_slider[data-id="'+g.id+'"]').limitslider("values")[0];e.applications[g.id]={application:g,accent_obj:r,font_size:s,text:a,type:"player_number",color_array:{},object_type:"text object",appliation_type:d,code:g.id,font_obj:i,gradient_obj:void 0,gradient_settings:void 0,pattern_obj:void 0,pattern_settings:void 0,position:void 0,rotation:void 0,scale:void 0};var l={text_input:a,font_name:i.name,application:g,settingsObject:e},c=ub.funcs.renderApplication(C.ub.create_text,l,g.id),u=ub.current_material.material.type,p=ub.current_material.containers[u].application_containers;p[g.id]={},p[g.id].object={sprite:c},""!==n&&(e.applications[g.id].color_array=n)}}}),m.trigger("change")})},C.ub={},C.ub.create_piping=function(e,a,t,o){e=e,ub.current_material.settings,ub[t+"_view"],ub.objects[t+"_view"];var i,r=new PIXI.Container,n=_.find(e.perspectives,{perspective:t});_.each(n.layers,function(e,t){if(!(a<t+1)){var i=_.find(o.layers,{layer:e.position}),n=ub.pixi.new_sprite(e.filename);n.ubName="Layer "+(t+1),n.tint=parseInt(i.colorObj.hex_code,16),void 0===i||"none"===i.colorCode?n.alpha=0:n.alpha=1,r.addChild(n),n.zIndex=e.position}}),i=r,ub.updateLayersOrder(i);var s=_.filter(ub.current_material.settings.pipings,{enabled:1}).length;ub.current_material.containers[e.name]={},ub.current_material.containers[e.name].pipingObject=i;var l=ub.funcs.generateZindex("pipings")+s+1;return i.originalZIndex=-1*l,i.zIndex=-1*l,i},C.ub.create_randomFeed=function(e,a,t,o){e=e,ub.current_material.settings,ub[t+"_view"],ub.objects[t+"_view"];var i,r=new PIXI.Container,n=_.find(e.perspectives,{perspective:t});_.each(n.layers,function(e,t){if(!(a<t+1)){var i=_.find(o.layers,{layer:e.position}),n=ub.pixi.new_sprite(e.filename);n.ubName="Layer "+(t+1),n.tint=parseInt(i.colorObj.hex_code,16),void 0===i||"none"===i.colorCode?n.alpha=0:n.alpha=1,r.addChild(n),n.zIndex=e.position}}),i=r,ub.updateLayersOrder(i);var s=_.filter(ub.current_material.settings.randomFeeds,{enabled:1}).length;ub.current_material.containers[e.name]={},ub.current_material.containers[e.name].pipingObject=i;var l=ub.funcs.generateZindex("randomFeeds")+s+1;return i.originalZIndex=-1*l,i.zIndex=-1*l,i},C.ub.create_mascot=function(e){var t,r=e.application,i=e.mascot,n=ub.current_material.settings,a=(r.id,i.id,void 0),o=(a={x:.15,y:.15},n.applications[r.id]),s=i,l=(ub[r.perspective+"_view"],ub.objects[r.perspective+"_view"],new PIXI.Container),c=ub.current_material.material.uniform_category;if(12===o.size&&(a={x:.87,y:.87}),10===o.size&&(a={x:.74,y:.74}),8===o.size&&(a={x:.63,y:.63}),5===o.size&&(a={x:.42,y:.42}),4===o.size&&(a={x:.24,y:.24}),3===o.size&&(a={x:.19,y:.19}),2===o.size&&(a={x:.14,y:.14}),1===o.size&&(a={x:.08,y:.08}),.5===o.size&&(a={x:.04,y:.04}),ub.styleValues.mascotScales.hasValues()){var u=ub.styleValues.mascotScales.getScale(o.size);if(void 0===u&&!ub.funcs.isCurrentSport("Football")&&!ub.funcs.isCurrentSport("Wrestling")&&ub.funcs.isCurrentType("upper")){var p=ub.data.mascotSizes.getSize(c,o.size);ub.utilities.info("Scale Settings Not Found for "+ub.config.sport+" / "+ub.config.blockPattern+" / "+ub.config.neckOption+" "+o.size+". Using default."),a=p.scale}a=u}_.each(i.layers_properties,function(e,t){var i=ub.pixi.new_sprite(e.filename);i.tint=parseInt(e.default_color,16),s.layers_properties[t].color=i.tint,i.anchor.set(.5,.5),l.addChild(i);e.default_color,e.default_color,e.filename;"number"==typeof o.alpha&&(i.alpha=o.alpha)}),l.scale=new PIXI.Point(.15,.15),t=l,ub.current_material.containers[r.id]={},ub.current_material.containers[r.id].mascot=t;var d=50+r.layer_order;t.originalZIndex=-1*d,t.zIndex=-1*d,o.layer_order=d,t.scale=a;var f=l.children;return void 0!==n.applications[r.id]&&(color_array=n.applications[r.id].color_array),f.reverse(),_.each(f,function(e,t){if(""!==color_array){var i=ub.current_material.settings.applications[r.id].color_array,n=(_.size(i),ub.current_material.settings.applications[r.id].color_array[t]);if(void 0!==n){e.tint=parseInt(n.hex_code,16);var a=e.tint.toString(16),o=util.padHex(a,6);void 0===ub.data.colorsUsed[o]&&(ub.data.colorsUsed[o]={hexCode:o,parsedValue:util.decimalToHex(e.tint,6),teamColorID:ub.funcs.getMaxTeamColorID()+1})}}}),t},C.ub.create_embellishment=function(e){var t,i=e.application,n=e.embellishment,a=ub.current_material.settings,o=(i.id,n.id,void 0),r=(o={x:.15,y:.15},a.applications[i.id]),s=n,l=(ub[i.perspective+"_view"],ub.objects[i.perspective+"_view"],new PIXI.Container);"embellishments"===r.application_type&&ub.funcs.addAppCustomScaleOnEmbellishmentScalesArray(r,i.id);var c;ub.current_material.material.uniform_category;(12===r.size&&(o={x:.87,y:.87}),10===r.size&&(o={x:.74,y:.74}),8===r.size&&(o={x:.63,y:.63}),5===r.size&&(o={x:.42,y:.42}),4===r.size&&(o={x:.24,y:.24}),3===r.size&&(o={x:.19,y:.19}),2===r.size&&(o={x:.14,y:.14}),1===r.size&&(o={x:.08,y:.08}),.5===r.size&&(o={x:.04,y:.04}),ub.styleValues.embellishmentScales.hasValues())?(void 0===(c="object"!=typeof ub.config.savedDesignInfo?ub.funcs.processScale(r):ub.styleValues.embellishmentScales.getScale(r.size))&&(ub.funcs.isCurrentSport("Football")||ub.funcs.isCurrentSport("Wrestling")||!ub.funcs.isCurrentType("upper")||ub.utilities.info("Scale Settings Not Found for "+ub.config.sport+" / "+ub.config.blockPattern+" / "+ub.config.neckOption+" "+r.size+". Using default.")),o=c):o={x:1,y:1};var u=ub.pixi.new_sprite(s.png_filename);u.anchor.set(.5,.5),l.addChild(u),"number"==typeof r.alpha&&(u.alpha=r.alpha),l.scale=new PIXI.Point(1,1),t=l,ub.current_material.containers[i.id]={},ub.current_material.containers[i.id].embellishment=t;var p=50+i.layer_order;return t.originalZIndex=-1*p,t.zIndex=-1*p,r.layer_order=p,t.scale=o,t},C.ub.create_text=function(d){var f=11,h=14;d.fontSize<5&&(f=7,h=14),d.fontSize<=5&&ub.funcs.isCurrentSport("Baseball")&&(f=7,h=14);var e=ub.funcs.getFontOffsetsfromParsedFontTables(d.font_name,d.perspective,d.applicationObj.code,d.fontSize);void 0!==e.inner_stroke&&void 0!==e.outer_stroke&&_.contains([],ub.current_material.material.id)&&(f=parseInt(e.inner_stroke),h=parseInt(e.outer_stroke));var t=ub.data.fontStroke.getStroke(ub.config.brand,ub.current_material.material.uniform_category,ub.current_material.material.block_pattern,parseInt(d.fontSize),d.accentObj.code,ub.current_material.material.neck_option,d.font_name);void 0!==t&&(f=t.strokeInner,h=t.strokeOuter),void 0!==d.innerStroke&&(f=parseInt(d.innerStroke)),void 0!==d.outerStroke&&(h=parseInt(d.outerStroke)),ub.funcs.removeUIHandles(),void 0===d.fontSize&&("2"!==d.application.id||"5"!==d.application.id?d.fontSize="4":d.fontSize="10"),void 0===d.text_input&&(d.text_input=window.ub.funcs.getPlayerNumber()),"number"==typeof d.text_input&&(d.text_input=toString(d.text_input));var m=d.font_name,b=d.application,g=(d.settingsObject,d.accentObj),v=d.overrideSize,y=d.applicationObj.verticalText,w="",i=(d.application.id,ub.funcs.getFontByName(m));void 0===i&&ub.utilities.error("Font "+m+" not found"),i.script,w=1===y?function(e){for(var t="",i=0,n=e.length;i<n;i++)t+=e[i]+"\n";return t}(d.text_input.toUpperCase()):ub.funcs.isCurrentSport("Football")?d.text_input.toUpperCase():d.text_input;var S,x={},k=new PIXI.Container;g="object"===d.typeofWindowTemp?(S=d.accentObj.id,d.accentObj):(S=C('div.accent_drop[data-id="'+b.id+'"]').data("accent-id"),_.find(ub.data.accents.items,{id:S}));var $=C('div.other_color_container[data-id="'+b.id+'"]');$.html("");_.each(g.layers,function(e,t){var i="";x[e.layer_no]={},(i=x[e.layer_no]).no=e.layer_no,i.accent_obj=e,"object"==typeof d.fontObj&&(S=d.applicationObj.accent_obj.id,g=d.applicationObj.accent_obj);var n=C('div.font_size_slider[data-id="'+b.id+'"]').limitslider("values")[0];"number"==typeof d.fontSize&&(n=d.fontSize);var a=ub.data.getPixelFontSize(d.applicationObj.font_obj.id,d.fontSize,d.perspective,b);k.ubFontSizeData=a,void 0!==v&&(a.pixelFontSize=v),"0"===(n=a.pixelFontSize)&&(n=100,ub.utilities.error("No Output Size detected for "+d.fontSize+" / "+d.applicationObj.font_obj.name+" / "+d.perspective+" using 100"));var o,r="",l=n,c=40;r=1===y?("Base Color"!==e.name&&"Mask"!==e.name||(l-=.005*l),{font:n+"px "+m,fill:"white",padding:0,lineJoin:"miter",miterLimit:2,lineHeight:l,align:"center"}):(r={font:n+"px "+m,fill:"white",padding:150,lineJoin:"miter",miterLimit:2},(ub.funcs.isCurrentSport("Baseball")||ub.funcs.isCurrentSport("Fastpitch"))&&(c=150),{font:n+"px "+m,fill:"white",padding:c,lineJoin:"miter",miterLimit:2}),1===e.outline&&(r.stroke="#ffffff",r.strokeThickness=f),2===e.outline&&(r.stroke="#ffffff",r.strokeThickness=h,"string"==typeof e.type&&(r.stroke="#ffffff")),"middle_stroke"===e.type&&1===e.outline&&(r.stroke="#ffffff",r.strokeThickness=f),"outer_stroke"===e.type&&2===e.outline&&(r.stroke="#ffffff",5<d.fontSize&&(r.strokeThickness=h+14)),"outer_stroke"===e.type&&1===e.outline&&(r.stroke="#ffffff",r.strokeThickness=f),"shadow"===e.type&&0<e.outline&&(r.fill="#ffffff",r.stroke="#ffffff"),void 0!==d.applicationObj.tailsweep&&(o=ub.data.tailsweepCharacters.getCharacter(d.applicationObj.tailsweep.code,d.applicationObj.tailsweep.length),d.applicationObj.tailsweep.angle),void 0===o&&(o="","straight"),d.applicationObj.angle,1===y?i.text_sprite=new PIXI.Text(w,r):(i.text_sprite=new PIXI.Text("        "+w+o+"        ",r),void 0!==d.applicationObj.tailsweep?i.text_sprite=new PIXI.Text("        "+w+o+"        ",r):i.text_sprite=new PIXI.Text(" "+w+o+" ",r)),i.text_sprite.ubName=e.name,i.text_sprite.ubDefaultColor=e.default_color,i.text_sprite.ubLayerNo=e.layer_no;var u=new PIXI.Text("A",r);if(i.text_sprite.zIndex=e.zIndex,i.text_sprite.x+=u.width*e.increment_x,i.text_sprite.y+=u.height*e.increment_y,1!==y?i.text_sprite.anchor.set(.5,.5):i.text_sprite.anchor.set(.5,0),k.addChild(i.text_sprite),"Base Color"!==e.name&&"Mask"!==e.name&&"object"!==d.typeofWindowTemp){$.append('<div><div class="ub_label">'+e.name+'</div><div class="other_color_dropdown" data-id="'+b.id+'" data-layer-name="'+e.name+'" data-layer-no="'+e.layer_no+'">0</div></div>');var p='div.other_color_dropdown[data-id="'+b.id+'"][data-layer-no="'+e.layer_no+'"]';!function(o,r,l,i){var c;C(l);color_content="";var n=z(o.layer),e="";e+="<div data-id='"+o.id+"' class='row color-container' id='color-container-"+o.id+"'>",e+="</div>",e+="<div class='row'>",e+="<div col-md-12>";var a="";_.each(n,function(e){var t="white";"ffffff"===e.hex_code&&(t="black"),a+='<a class="other-color-selector" style="color: '+t+"; background-color: #"+e.hex_code+'" data-layer-no="'+i+'" data-color="'+e.hex_code+'" data-target="color_drop_element" data-id="'+o.id+'">'+e.name+"</a>"}),e+=a,e+="</div>",e+="</div>",(c=new Drop({target:document.querySelector(l),content:e,classes:"drop-theme-arrows",position:"bottom left",openOn:"click"})).nonce=!0,(T[o.id+" "+i]=c).once("open",function(){var e='a.other-color-selector[data-target="color_drop_element"][data-id="'+o.id+'"][data-layer-no="'+i+'"]';C(e).click(function(e){var t=C(l);t.html(C(this).html());var i="";if(i="ffffff"===C(this).data("color")?"#000000":"#ffffff",t.data("color"),t.data("color",C(this).data("color")),t.css({"background-color":"#"+C(this).data("color"),color:i,border:"solid 1px #3d3d3d"}),color_code=C(this).data("color"),void 0!==ub.current_material.settings.applications[o.id]){var n=ub.current_material.material.type,a=ub.current_material.containers[n].application_containers;s=a[o.id].object.sprite,P(o.id,s,color_code,r.ubLayerNo),c.nonce=!1}c.close()});var t=n[0];C(e+"[data-color='"+t.hex_code+"']").click()}),c.open(),c.close(),ub.refresh_thumbnails()}(b,i.text_sprite,p,e.layer_no)}"Mask"===e.name&&(i.text_sprite.alpha=1)});var n=_.find(k.children,{ubName:"Mask"});_.find(k.children,{ubName:"Base Color"}).mask=n,ub.updateLayersOrder(k);k.children.length;var a=_.clone(k.children),r=(z(b.layer),[]);return a.reverse(),_.each(a,function(e,t){if(e.tint=parseInt(e.ubDefaultColor,16),""!==r){var i=ub.current_material.settings.applications[b.id].color_array,n=(_.size(i),ub.current_material.settings.applications[b.id].color_array[t]);if(void 0!==n){e.tint=parseInt(n.hex_code,16),e.oldTint=e.tint;var a=e.tint.toString(16),o=util.padHex(a,6);void 0===ub.data.colorsUsed[o]&&(ub.data.colorsUsed[o]={hexCode:o,parsedValue:util.decimalToHex(e.tint,6),teamColorID:ub.funcs.getMaxTeamColorID()+1})}"Pseudo Shadow"===e.ubName&&(e.alpha=0,e.tint=parseInt("000000",16))}}),k.ubFontSizeData.strokeInner=f,k.ubFontSizeData.strokeOuter=h,k};var T={};var y=function(a,o,r,s){var l=o,c={},e=(c=_.clone(l),C('div.color_stops_container[data-id="'+a+'"][data-option="gradients"]'));e.html("");var u="";if(0<l.color_stops.length&&(u="<br />Color Stops<br /><br />"),_.each(l.color_stops,function(e,t){var i=e.value,n=e.color;u+=p(t,i,n,a,l.code)}),"custom"===l.code){u+="<br />",u+="<div class='color_picker_container add_delete_color_stop'><button id='add_gradient_color_stop'><i class='fa fa-plus-circle'></i></button>&nbsp;<button id='delete_gradient_color_stop'><i class='fa fa-minus-circle'></i></button></div>"}u+="<div id='gradient_slider_"+a+"' class='gradient_slider'></div>",u+="<hr />",u+="<div id='angle_gradient_slider_"+a+"' class='gradient_slider_angle'></div>",u+="<hr />",u+="<button style='width: 100%;' id='update-gradient-"+a+"' data-target='"+a+"' data-gradient='"+l.code+"'>Update Gradient</button>",e.html(u),C("input.gradient_"+a).ubColorPicker({target:String(a),type:"gradient",application:"text",target_name:s.layer});var t=_.pluck(c.color_stops,"value"),i=[];_.each(t,function(e){i.push(100*e)}),C("#gradient_slider_"+a).limitslider({values:i,min:0,max:100,gap:0,change:function(e,t){C("button#update-gradient-"+a).click()}}),C("#angle_gradient_slider_"+a).roundSlider({value:l.angle,min:0,max:360,startAngle:90,width:5,handleSize:"+14",change:function(e,t){C("button#update-gradient-"+a).click()}}),C("button#update-gradient-"+a).click("click",function(e){var t=ub.recreate_gradient_obj(c);_.each(t.color_stops,function(e,t){var i=C('[data-index="'+t+'"][data-target="'+a+'"]');C("#gradient_slider_"+a).find("span:eq("+t+")").css("background",i.val()),e.color=i.val();var n=C("#gradient_slider_"+a).limitslider("values")[t];n=Math.floor(n/10),n/=10,e.value=n}),t.angle=parseInt(C("#angle_gradient_slider_"+a).find("span.edit").html());var i=ub.current_material.settings.applications[a],n=ub.current_material.containers.upper.application_containers[s.id].object.sprite;C.ub.mvChangeGradient(i,t,n)}),"custom"===l.code&&(C("#add_gradient_color_stop").on("click",function(){var e=_.find(ub.current_material.material.options,{name:window.util.toTitleCase(a)}),t=JSON.parse(e.colors)[c.color_stops.length+1];color_obj=_.find(ub.data.colors,{color_code:t});var i={id:c.color_stops.length+1,value:0,color:"#"+color_obj.hex_code};c.color_stops.push(i);var n=1/(c.color_stops.length-1);_.each(c.color_stops,function(e,t){e.value=t*n}),y(a,o,r)}),C("#delete_gradient_color_stop").on("click",function(){if(2<c.color_stops.length){c.color_stops.pop();var i=1/(c.color_stops.length-1);_.each(c.color_stops,function(e,t){e.value=t*i}),y(a,o,r)}})),C("button#update-gradient-"+a).click()},p=function(e,t,i,n,a){return"<div class='color_picker_container'><label class='color_stop_label'>"+(e+1)+".</label><input readonly='true' class='gradient_"+n+"' type='text' data-elid='gradient_"+n+"_"+e+"' data-index='"+e+"' data-target='"+n+"' data-value='"+t+"' data-gradient='"+a+"'  value='"+i+"'/></div>"};function z(e){var t=_.find(ub.current_material.materials_options,{name:window.util.toTitleCase(e)}),i=JSON.parse(t.colors);return _.filter(ub.data.colors,function(e){return-1!==_.indexOf(i,e.color_code)})}function P(e,t,i,n){var a=ub.current_material.settings.applications[e];s=t,_.each(s,function(e){var t="";if(void 0!==n){if(void 0===(t=_.find(e.children,{ubLayerNo:n})))return}else t=_.find(e.children,{ubName:"Base Color"});a.color_array[0]=parseInt(i,16),t.tint=parseInt(i,16),a.color_array[t.ubLayerNo]={},a.color_array[t.ubLayerNo].layer_name=t.ubName,a.color_array[t.ubLayerNo].layer_no=_.first(e.children).ubLayerNo,a.color_array[t.ubLayerNo].color_code=i,t.tint=parseInt(i,16)})}C.ub.mvChangePattern=function(i,e,n,a){var t,o=void 0,r=void 0,s=void 0,l=void 0,c=void 0,u=void 0,p="",d="";u=ub.current_material.settings.applications[i.id],t=ub.funcs.getApplicationViewObjects(i.id),_.each(t,function(e){c=e.perspective,p=c+"_view",d="pattern_"+i.id,l=ub.objects[p]["objects_"+i.id],r=_.find(l.children,{ubName:"Base Color"}),(s=_.find(l.children,{ubName:"Mask"})).alpha=1,function(e,t){var i=t+"_view",n="pattern_"+e;"object"==typeof ub.objects[i][n]&&(ub.objects[i][n],ub[i].removeChild(n))}(i.id,c),ub.current_material.containers[i.id]={},ub.objects[p][d]={},(o=new PIXI.Container).sprites={},_.each(n.layers,function(e,t){var i=ub.pixi.new_sprite(e.filename);i.zIndex=-1*e.layer_number,function(e){if(void 0===e.default_color&&void 0!==e.color_code&&(_colorObj=ub.funcs.getColorByColorCode(e.color_code),"undefined"!=typeof _colorObj?(e.default_color=_colorObj.hex_code,e.color_code=_colorObj.color_code):ub.utilities.warn("Color not Found "+e.color_code)),void 0===e.default_color&&void 0===e.color_code&&(_teamColor=ub.funcs.getColorUsedByIndex(e.team_color_id),"undefined"!=typeof _teamColor&&(_colorObj=ub.funcs.getColorObjByHexCode(_teamColor.hexCode),"undefined"!=typeof _colorObj?(e.default_color=_colorObj.hex_code,e.color_code=_colorObj.color_code):ub.utilities.warn("Color Object not found for "+_teamColor.hexCode))),void 0!==e.default_color&&void 0===e.color_code){var t=ub.funcs.getColorObjByHexCode(e.default_color);"undefined"!=typeof _colorObj?(e.default_color=t.hex_code,e.color_code=t.color_code):ub.utilities.warn("Color not found "+e.default_color)}}(e),"Flag"!==n.name&&(i.tint=parseInt(e.default_color,16)),"object"==typeof a&&(val=u.pattern_obj.layers[0].default_color),i.anchor.set(.5,.5),o.addChild(i)}),o.alpha=1,o.scale=new PIXI.Point(1,1),o.mask=s,o.zIndex=-12,"object"==typeof r.pattern_layer&&(r.pattern_layer.removeChildren(),r.removeChild(r.pattern_layer)),r.pattern_layer=o,r.addChild(r.pattern_layer),ub.updateLayersOrder(r);var t=0;_.contains(ub.uiData.patternSliderRange.forCalibration,u.pattern_obj.name)&&(t=ub.uiData.patternSliderRange.adjustedStart),void 0!==u.pattern_settings?o.position.y=u.pattern_settings.position.y:(_position={x:0,y:0},void 0!==u.pattern_settings.position&&(_position=u.pattern_settings.position),_.contains(ub.uiData.patternSliderRange.forCalibration,u.pattern_obj.name)&&(_position.y+=t),pattern_settings={rotation:0,scale:{x:1,y:1},position:_position,opacity:1},o.position.y=_position.y),u.pattern_obj=n,ub.objects[p][d]=o})},C.ub.mvChangeGradient=function(t,i,e){var n=ub.current_material.material.type;ub.current_material.settings.applications[t.id],ub.current_material.containers[n].application_containers;s=e,_.each(s,function(e){!function(e,t,i,n){ub.current_material.settings.applications[n.id].gradient_obj=e;var a=_.find(i.children,{ubName:"Base Color"});"none"===e.code?a.alpha=1:a.alpha=0;var o=_.find(i.children,{ubName:"Mask"});o.alpha=1;ub.current_material.material.type;var r=document.createElement("canvas");r.width=ub.dimensions.width,r.height=ub.dimensions.height;var s,l=r.getContext("2d");if("radial"===e.code){s=l.createRadialGradient(250,250,20,250,250,100)}else s=l.createLinearGradient(0,22,0,410);_.each(e.color_stops,function(e){s.addColorStop(e.value,e.color)}),l.fillStyle=s;var c=e.angle;l.fillRect(0,0,ub.dimensions.height,ub.dimensions.height);var u=r.toDataURL();l.clearRect(0,0,ub.dimensions.height,ub.dimensions.height),l.translate(r.width/2,r.height/2),l.rotate(c*Math.PI/180),l.translate(-r.width/2,-r.height/2),l.fillRect(0,0,ub.dimensions.height,ub.dimensions.height);var p=PIXI.Texture.fromCanvas(r),d={};new PIXI.Sprite(p).zIndex=1;var f=n.perspective;d[f]=new PIXI.Sprite(p),"object"==typeof i.gradient_layer&&i.removeChild(i.gradient_layer),d[f].zIndex=1;var h=o;i.gradient_layer=d[f],d[f].anchor.set(.5,.5),d[f].mask=h,d[f].zIndex=-10,d[f].height=o.height,i.addChild(d[f]),ub.updateLayersOrder(i),ub.refresh_thumbnails();var m="url("+u+")",b=C("#gradient_slider_"+t),g=C("#angle_gradient_slider_"+t);b.find(".range_container").remove(),b.prepend('<div class="range_container"><div class="range"></div></div>').find("div.range").css("background-image",m);parseInt(g.find("span.edit").html());g.find("div.rs-bg-color").css({"background-image":m,"-webkit-transform":"rotate("+c+"deg)"})}(i,t.id,e,t.application)})},C.ub.getApplicationSizes=function(e){ub.current_material.material.factory_code;var t=_.find(ub.data.applicationSizes.items,{name:e});return void 0===t?[100,200]:t.sizes},C.ub.getFontSize=function(e){var t=e.size,i=(e.type,e.factory,e.applicationType,e.fontID),n=_.find(ub.data.fontSizes.items,{fontID:i}),a=_.find(n.fontSizeTable,{inputSize:t});return void 0===a?(util.error("Font Size not found"),100):a.outputSize}}(jQuery),$(document).ready(function(){ub.funcs.transformPatterns=function(e){var t=_.filter(e,function(e){var t=33;"team_stores"===ub.config.asset_target&&(t=286);var i=JSON.parse(e.block_pattern_options),n=JSON.parse(e.sports),a=_.contains(n,ub.config.sport);return(_.contains(i,ub.config.option)||null===i||"object"==typeof i&&""===i[0])&&a&&e.asset_target===ub.config.asset_target||parseInt(e.id)===parseInt(t)}),a=[];_.each(t,function(e,t){var i=t+1;"Blank"===e.name&&(i=0),_newObject={sortID:i,id:e.id,active:e.active,name:e.name,code:e.name.toCodeCase(),icon:e.thumbnail_path,sports:JSON.parse(e.sports),blockPatternOptions:JSON.parse(e.block_pattern_options),layers:[],asset_target:e.asset_target,brand:e.brand};var n=JSON.parse(e.pattern_properties);_.each(n,function(e){var t={default_color:ub.funcs.getHexColorByCode(e.default_color),layer_no:parseInt(e.layer),filename:e.file_path,team_color_id:e.team_color_id};_newObject.layers.push(t)}),a.push(_newObject),ub.data.patterns={items:a}})},ub.funcs.getHexColorByCode=function(e){var t=e;ub.data.colors.length<1&&window.util.error("There's no values loaded on ub.data.colors");var i=_.find(ub.data.colors,{color_code:t});if(void 0!==i)return i.hex_code}}),$(document).ready(function(){ub.funcs.changeMaterialOptionColor=function(t,i){var n=void 0,a=void 0,o=void 0;_.each(ub.views,function(e){n=e+"_view",a=t.toCodeCase(),void 0!==(o=ub.objects[n][a])&&(o.tint=i.colorIntValue)})},ub.funcs.isValidColorObject=function(e){var t=e,i=_.has(t.colorCode),n=_.has(t.colorName),a=_.has(t.colorHexValue),o=_.has(t.colorIntValue);if(i&&n&&a&&o)return!0;var r=void 0;return i||(r="colorObject doesn't have a color code property"),n||(r="colorObject doesn't have a color name property"),_hasColorHexValue||(r="colorObject doesn't have a color hex value property"),_hasColorIntValue||(r="colorObject doesn't have a color intvalue property"),util.error("data",r,e),!1},ub.funcs.materialOptionExists=function(e){var t=ub.current_material.material.type,i=ub.current_material.settings[t];return!!_.has(i,e)},ub.funcs.getMaterialOptions=function(e){return _.filter(ub.current_material.materials_options,{name:e})},ub.funcs.getMaterialOptionSettingsObject=function(e){var t=ub.current_material.material.type,i=ub.current_material.settings[t];return!!_.has(i,e)&&i[e]},ub.funcs.setObjectProperty=function(e){var t=e,i=_.has(t,"materialOption"),n=_.has(t,"propertyType"),a=_.has(t,"value");if(!(i&&n&&a)){return i||"setObjectProperty called without Material Option Key",n||"setObjectProperty called without Property Type",a||"setObjectProperty called without Value",void util.log("progg","setObjectProperty called without Value",e)}if(_exist=ub.funcs.materialOptionExists(t.materialOption),_exist)switch(t.propertyType){case"color":var o,r=ub.funcs.isValidColorObject(t.value),s=void 0,l=t.materialOption;if(!r)return void console.error("Invalid Color Object");o=t.value,(s=ub.funcs.getMaterialOptionSettingsObject("Body")).color=o.colorIntValue,s.colorSettings=o,ub.funcs.changeMaterialOptionColor(l,o);break;case"pattern":break;default:util.log("progg","Invalid Property Type")}else util.log("progg","Material Option "+t.materialOption+" doesn't exist")}}),$(document).ready(function(){ub.funcs.handle_mousedown=function(e){function n(e){if(ub.data.sorting)$("body").off("mousemove",n).off("mouseup",a);else{if(ub.data.justSorted)return ub.data.justSorted=!1,void $("body").off("mousemove",n).off("mouseup",a);var t=my_dragging.offset0.left+(e.pageX-my_dragging.pageX0),i=my_dragging.offset0.top+(e.pageY-my_dragging.pageY0);$(my_dragging.elem).offset({top:i,left:t})}}function a(e){$("body").off("mousemove",n).off("mouseup",a)}window.my_dragging={},my_dragging.pageX0=e.pageX,my_dragging.pageY0=e.pageY,my_dragging.elem=this,my_dragging.offset0=$(this).offset(),$("body").on("mouseup",a).on("mousemove",n).on("mouseup","span.layer",function(e){e.stopPropagation(),$("body").off("mousemove",n).off("mouseup",a)}).on("mousedown","span.layer",function(e){e.stopPropagation(),$("body").off("mousemove",n).off("mouseup",a)})},ub.startModal=function(e){if(1===e){_.size(ub.data.colorsUsed);ub.showModal("At least 2 Team Colors is required to proceed")}else ub.showModal("Max of 8 Team Colors is allowed")},ub.showModal=function(e){alert(e)},ub.showModalTool=function(e){$("div.modal").modal("hide"),$("div#messageModal").html(e),$("button#modalButton").trigger("click")},ub.zoom_off=function(){var e=ub.funcs.getWindowSize(),t=.55,i=.55;800<e.height&&(i=t=.7),_.each(ub.views,function(e){ub[e+"_view"].scale.set(t,i)}),ub[ub.active_view+"_view"].position.set(ub.offset.x,ub.offset.y),ub.zoom=!1,ub.show_all_views(),$('a.change-view[data-view="zoom"]').removeClass("zoom_on")},ub.zoom_on=function(e){if(void 0===e){if(ub.status.onText)return;if(!ub.states.canDoubleClick)return}ub.funcs.resetHighlights();var t=ub.funcs.getWindowSize();_.each(ub.views,function(e){800<t.height?ub[e+"_view"].scale.set(1.4,1.4):ub[e+"_view"].scale.set(1,1)}),ub.hide_all_views(),$('a.change-view[data-view="zoom"]').addClass("zoom_on"),ub.zoom=!0,ub.states.canDoubleClick=!1},ub.hide_all_views=function(){_.each(ub.views,function(e){var t=e+"_view";e!==ub.active_view&&(ub[t].alpha=0)})},ub.show_all_views=function(){_.each(ub.views,function(e){var t=e+"_view";e!==ub.active_view&&(ub[t].alpha=1)})},ub.funcs.getWindowSize=function(){return{width:window.innerWidth,height:window.innerHeight-50}},ub.funcs.resize=function(){if(!ub.status.fullView.getStatus()){var e,t,i=ub.funcs.getWindowSize(),n=i.width,a=i.height,o=n-630,r=ub.funcs.getWindowSize(),s=3;$("div.debugPanel").css("top",a+"px"),ub.renderer.resize(n,a),ub.renderer.view.style.width=n+"px",ub.renderer.view.style.height=a+"px",ub.data.adjustmentX=550,ub.data.divisor=2.3,$(window).width()<=1440&&(ub.data.divisor=2.2),e=($(window).width()-$("#right-pane-column").width()-ub.data.adjustmentX)/ub.data.divisor,800<r.height&&(s=5),t=($(window).height()-580)/s,ub.offset={x:e,y:t},"v1"===ub.uiVersion&&(o-=100),$("#change-views").css("left",o),$('a.change-view[data-view="'+ub.active_view+'"]').click(),ub.zoom_off(),ub.funcs.centerPatternPopup()}},ub.funcs.isMacintosh=function(){return-1<navigator.platform.indexOf("Mac")},$(window).resize(function(){ub.funcs.resize();var e=window.innerWidth,t=window.innerHeight,i=($("#right-pane-column").width(),(window.innerWidth-$("div#main-picker-scroller").innerWidth())/2);$("div#main-picker-scroller").css("margin-left",i+"px"),$("div#main-picker-container").css("height",t-75+"px"),$("div#main-picker-container").css("width","100%")}),$(window).trigger("resize")}),$(document).ready(function(){function l(e,t,i,n){var a=(n-90)*Math.PI/180;return{x:e+i*Math.cos(a),y:t+i*Math.sin(a)}}ub.funcs.ui={},ub.funcs.ui.getAllNames=function(e){var t=[],i=_.find(ub.data.modifierLabels,{name:e}).fullname;return t.push(i),-1<i.indexOf("left")&&-1===i.indexOf("body")&&(_match=i.replace("left","right"),t.push(_match)),-1<i.indexOf("right")&&-1===i.indexOf("body")&&(_match=i.replace("right","left"),t.push(_match)),t},ub.funcs.setMaterialOptionSettingsColor=function(e,t,i){var n=ub.current_material.material.type,a=ub.current_material.settings[n],o=_.find(a,{code:e});if(void 0!==o){if(o.color!==parseInt(t.hex_code,16)){o.color,parseInt(t.hex_code,16);if("from undo"!==i){if(void 0===ub.funcs.pushOldState)return;ub.funcs.pushOldState("color change","material option",o,o.colorObj,t)}}o.color=parseInt(t.hex_code,16),o.colorObj=t}},ub.funcs.ui.setMatchingColor=function(e,t,i){var n=ub.data.coordinatingColors.isCoordinating(e.toTitleCase(),ub.config.sport,ub.config.blockPattern,ub.config.option,t.color_code);if(n.result){var a=ub.funcs.getColorByColorCode(n.matchingPartColor),o=n.matchingPart.toCodeCase();if(ub.funcs.setMaterialOptionSettingsColor(o,a,i),1!==ub.data.afterLoadCalled)return;ub.change_material_option_color16(o,parseInt(a.hex_code,16))}},ub.funcs.ui.setMaterialOptionColor=function(e,t,i){var n=ub.funcs.ui.getAllNames(e);_.each(n,function(e){ub.funcs.setMaterialOptionSettingsColor(e,t,i),ub.funcs.ui.setMatchingColor(e,t,i),1===ub.data.afterLoadCalled&&ub.change_material_option_color16(e,parseInt(t.hex_code,16))})},ub.funcs.setTeamColorByID=function(e,t){var i=(ub.current_material.settings.team_colors[e-1]=t).hex_code.replace("#","");ub.funcs.setGroupColor(e.toString(),i,t)},ub.funcs.sublimationColorSet=function(){return _.pluck(_.filter(ub.data.colors,{sublimation_only:"1"}),"color_code")},ub.funcs.ui.getColorSet=function(e,t){var i,n=void 0;i=_.find(ub.current_material.materials_options,{name:e,perspective:"front"}),n="sublimated"===t?JSON.parse(i.sublimated_colors):JSON.parse(i.colors);var a=[],o=[];return _.each(n,function(e){var t=_.find(ub.data.colors,{color_code:e});void 0===t?o.push(e):a.push(t)}),0<o.length&&ub.utilities.info("Can't find these assigned colors for "+e+": "+o.toString()),a},ub.funcs.restoreTeamColorSelectionsFromInitialUniformColors=function(){ub.front_view.alpha=0,_sorted=_.sortBy(ub.data.colorsUsed,"teamColorID"),_.each(_sorted,function(e){$('button.change-color[data-color-code="'+e.hexCode+'"]').click()}),ub.funcs.drawColorPickers(),ub.front_view.alpha=1},ub.funcs.restoreTeamColorSelections=function(){if("string"!=typeof window.ub.temp){var e=ub.current_material.settings.team_colors;0!==_.size(ub.current_material.settings.team_colors)&&(_.each(e,function(e){var t='button.change-color[data-target="Team-color-picker"][data-color-id="'+e.id+'"]';$(t).click()}),ub.funcs.drawColorPickers())}},ub.funcs.getBaseColors=function(){var e=ub.current_material.material.factory_code;return"pmp"===e?"non-sublimated":"sublimated",_colorSet="PMP"===e?_.filter(ub.data.colors,{sublimation_only:"0"}):ub.data.colors,_colorSet},ub.funcs.tennGuardTemp=function(e){return"Tennessee Orange"===e?"Tenn. Orange":e},ub.funcs.clearTeamColors=function(){ub.current_material.settings.team_colors=[]},ub.funcs.hasPattern=function(e){return void 0!==e.pattern&&(void 0!==e.pattern.pattern_obj&&"blank"!==e.pattern.pattern_id)},ub.funcs.getMaterialOptionsWithPattern=function(){var e=ub.current_material.material.type,t=ub.current_material.settings[e],i=[];return _.each(t,function(e){ub.funcs.hasPattern(e)&&i.push(e)}),i},ub.funcs.updatePatterns=function(){if(1===ub.data.afterLoadCalled){_materialOptionsWithPattern=ub.funcs.getMaterialOptionsWithPattern(),_.each(_materialOptionsWithPattern,function(s){s.code,_.each(s.pattern.pattern_obj.layers,function(t,i){var e=parseInt(t.team_color_id),n=ub.funcs.getTeamColorObjByIndex(e);void 0===n&&(n=ub.funcs.getColorObjByHexCode(t.default_color));var a=ub.current_material.material.type,o=s.code.toTitleCase(),r=ub.current_material.containers[a][o];void 0!==r&&void 0!==r.containers&&(_container=r.containers,_.each(_container,function(e){t.color=parseInt(n.hex_code,16),t.color_code=n.color_code,t.default_color=n.hex_code,e.container.children[i].tint=t.color}))})})}},ub.funcs.addColorToTeamColors=function(e,t){var i=ub.current_material.settings.team_colors;void 0===_.find(i,{color_code:e.color_code})&&(i.push(e),void 0===t&&ub.data.afterLoadCalled&&ub.funcs.drawColorPickers())},ub.funcs.ifColorIsUsedOnPatterns=function(t){var i=!1;if(1===ub.data.afterLoadCalled)return _materialOptionsWithPattern=ub.funcs.getMaterialOptionsWithPattern(),_.each(ub.current_material.settings[ub.config.type],function(e){void 0!==e.pattern&&""!==e.pattern.pattern_id&&"blank"!==e.pattern.pattern_id&&_.each(e.pattern.pattern_obj.layers,function(e){colorItem=ub.funcs.getColorObjByHexCode(e.default_color),colorItem.id===t.id&&(i=!0)})}),i},ub.funcs.removeColorFromTeamColors=function(e){var t=ub.current_material.settings.team_colors,i=void 0,n=_.find(ub.current_material.settings.team_colors,{color_code:e.color_code});-1!==(i=_.indexOf(t,n))&&t.splice(i,1),ub.funcs.drawColorPickers(),ub.funcs.ifColorIsUsedOnPatterns(e)&&ub.funcs.updatePatterns()},ub.funcs.drawColorPickers=function(){var i=ub.current_material.settings.team_colors,n="",e=_.sortBy(ub.data.modifierLabels,"index");ub.funcs.getBaseColors();n+='<div id="color-wheel-container">',_.each(e,function(i){n+='<div class="color-wheel" id="cw_'+i.index+'">',n+='<svg id="svg_cw_'+i.index+'" class="svg-color-wheel">',1,n+='<circle class="preview growCircle" cx="275" cy="215" r="100"  fill="#3d3d3d" />',n+='<text class="previewColorCode growTextCode" x="275" y="215" font-family="Avenir Next LT W04 Thin" font-size="48px" text-anchor="middle" fill="white">RB</text>',n+='<text class="previewColorName growTextName" x="275" y="240" font-family="Avenir Next LT W04 Bold" font-size="18px" text-anchor="middle" fill="white">Royal Blue</text>';var e=void 0,t=ub.data.materialOptionWithLimitedColors.getLimitedColorSet(i.name);void 0!==t&&(_alternateColorSet=[],_.each(t.valid_colors,function(e){_alternateColorSet.push(ub.funcs.getColorByColorCode(e))}),ub.utilities.info("Limited Color Set detected for "+i.name),e=_alternateColorSet),void 0===t&&(e=ub.current_material.settings.team_colors),_.each(e,function(e,t){_.size(ub.current_material.settings.team_colors)<_.size(ub.data.colorsUsed)&&ub.funcs.setGroupColor((t+1).toString(),e.hex_code,e),n+='<path class="growStroke arc-'+i.fullname+'" id="arc'+t+"-"+i.fullname+'" data-color-id="'+e.id+'" fill="none" stroke="#'+e.hex_code+'" stroke-width="50" />'}),n+="</svg>",n+="</div>"}),n+="</div>",$("div#primary_options_container > div#cw").html(n),_.each(e,function(r){var e=i.length,o=360/e,s=void 0,t=ub.data.materialOptionWithLimitedColors.getLimitedColorSet(r.name);void 0!==t&&(_alternateColorSet=[],_.each(t.valid_colors,function(e){_alternateColorSet.push(ub.funcs.getColorByColorCode(e))}),ub.utilities.info("Limited Color Set detected for "+r.name),s=_alternateColorSet,e=_alternateColorSet.length,o=360/e),void 0===t&&(s=ub.current_material.settings.team_colors),_.each(s,function(e,t){var i=t*o,n=i+o,a="arc"+t+"-"+r.fullname;document.getElementById(a).setAttribute("d",function(e,t,i,n,a){var o=l(e,t,i,a),r=l(e,t,i,n),s=a-n<=180?"0":"1";return["M",o.x,o.y,"A",i,i,0,s,0,r.x,r.y].join(" ")}(275,215,150,i,n)),$("path#arc"+t+"-"+r.fullname).parent().find("circle").css("cursor","pointer"),$("path#arc"+t+"-"+r.fullname).parent().find("circle").on("click",function(){$('div.pd-dropdown-links[data-fullname="team-colors"]').trigger("click")}),$("path#arc"+t+"-"+r.fullname).parent().find("text.previewColorName").css("cursor","pointer"),$("path#arc"+t+"-"+r.fullname).parent().find("text.previewColorName").on("click",function(){$('div.pd-dropdown-links[data-fullname="team-colors"]').trigger("click")}),$("path#arc"+t+"-"+r.fullname).parent().find("text.previewColorCode").css("cursor","pointer"),$("path#arc"+t+"-"+r.fullname).parent().find("text.previewColorCode").on("click",function(){$('div.pd-dropdown-links[data-fullname="team-colors"]').trigger("click")}),$("path#arc"+t+"-"+r.fullname).css("cursor","pointer"),$("path#arc"+t+"-"+r.fullname).on("click",function(){$("path.arc-"+r.fullname).attr("class","growStroke arc-"+r.fullname),$(this).attr("class","selectedStroke growStroke arc-"+r.fullname);var e=$(this).data("color-id"),t=_.find(s,{id:e.toString()});ub.funcs.ui.setMaterialOptionColor(r.name,t,"from color picker");var i=$(this).parent().find("circle");i.css("fill","#"+t.hex_code),"W"===t.color_code&&i.css("fill","#ffffff");var n="white";"W"!==t.color_code&&"Y"!==t.color_code&&"CR"!==t.color_code&&"S"!==t.color_code&&"PK"!==t.color_code&&"OP"!==t.color_code&&"SG"!==t.color_code&&"FLG"!==t.color_code||(n="black");var a=$(this).parent().find("text.previewColorCode");a.html(t.color_code),a.css("fill",n);var o=$(this).parent().find("text.previewColorName");o.html(t.name),o.css("fill",n)})})});var t=_.size(ub.data.modifierLabels),a=$("div.color-wheel").first().width();$("#color-wheel-container").css("width",t*a+"px")},ub.funcs.getSettingsByMaterialOptionCode=function(e){var t=ub.current_material.material.type,i=ub.current_material.settings[t];return _.find(i,{code:e})},ub.funcs.getModifierByIndex=function(e){return _.find(ub.data.modifierLabels,{index:e})},ub.funcs.getColorObjByHexCode=function(e){var t=ub.funcs.getBaseColors();return void 0===e?ub.funcs.getBaseColors()[0]:_.find(t,{hex_code:e.lpad("0",6).toString()})},ub.funcs.getColorByColorCode=function(e){var t=_.find(ub.data.colors,{color_code:e});return void 0===t&&("none"!==e&&console.error("Cant find colorCode "+e),t=_.first(ub.data.colors)),"none"==e&&(t={forecolor:"none",color_code:"none",hex_code:"none",name:"None"}),"White"===t.name||"Yellow"===t.name||"Cream"===t.name||"Safety Green"===t.name?t.forecolor="3d3d3d":t.forecolor="ffffff",t},ub.funcs.moveToColorPickerByIndex=function(e){if($("div#single_team-color-picker").hide(),$("div#cw").fadeIn(),-1!==e){var t=e+1,i=ub.funcs.getModifierByIndex(t),n=ub.funcs.getSettingsByMaterialOptionCode(i.fullname),a=n.color.toString(16),o=ub.funcs.getColorObjByHexCode(a);void 0===o&&(o=ub.funcs.getColorByColorCode(n.colorObj.color_code)),void 0===o&&util.log("Can't find color: "+a),$("svg#svg_cw_"+t+' > path[data-color-id="'+o.id+'"]').trigger("click");var r=$("div.color-wheel").first().width()*(t-1);$("#color-wheel-container").css("margin-left","-"+r+"px")}},ub.funcs.showTeamColorPicker=function(e){$("div#single_team-color-picker").fadeIn(),$("div#cw").hide()},ub.data.initialized=!1,ub.funcs.getTeamColorIndexByColorID=function(t){var i=void 0,n=0;return _.each(ub.current_material.settings.team_colors,function(e){parseInt(e.id)===parseInt(t)&&(i=n),n+=1}),i},ub.funcs.initTeamColors=function(){var e="";if(ub.current_material.settings.threadColors)e=_.sortBy(ub.data.threadColors,"order");else if(e=ub.funcs.getBaseColors(),"Flag Football"===ub.config.blockPattern){var t=["FLB","FLG"];e=_.filter(ub.data.colors,function(e){return!_.contains(t,e.color_code)})}if($("span.part_label").html("Team Colors"),$("span.nOf").html("Select the colors you will use"),$("div#primary_options_container").html('<div id="team-color-picker"></div><div id="cw"></div>'),$("#team-color-picker").ubTeamColorPicker({target:"team-color-picker",type:"single",colorSet:e,factory:ub.current_material.material.factory_code}),ub.funcs.showTeamColorPicker(),ub.data.initialized){var i=util.dataSelector(".btn",{elid:"single_team-color-picker"});ub.current_material.settings.team_colors=ub.current_material.settings.team_colors.filter(function(e){return e.brand===ub.config.brand.toLocaleLowerCase()||e.brand==ub.config.brand}),_.each(ub.current_material.settings.team_colors,function(e,t){var i=util.dataSelector(".btn",{elid:"single_team-color-picker","color-label":e.color_code});void 0!==i&&i.attr("data-status","selected")});var n=void 0;i.each(function(){if("selected"===$(this).data("status")){var e=$(this).data("color-id");n=ub.funcs.getTeamColorIndexByColorID(e),n=parseInt(n)+1,$(this).first().html(n)}})}else ub.funcs.restoreTeamColorSelections(),ub.data.initialized=!0},ub.funcs.isInTeamColor=function(e){return void 0!==_.find(ub.current_material.settings.team_colors,{color_code:e})},ub.funcs.addAllColorToTeamColors=function(){var e=ub.funcs.getBaseColors(),t=_.difference(e,ub.current_material.settings.team_colors);_.each(t,function(e){var t=$('button[data-target="Team-color-picker"][data-color-label="'+e.color_code+'"]'),i=(t.data("color"),t.data("color-id"),t.data("status"),t.data("color-code"),t.data("color-label")),n=ub.current_material.settings.team_colors.length+1;t.first().data("status","selected"),t.first().html('<i class="fa fa-check" aria-hidden="true"></i>'),t.first().html(n),"W"!==i&&"Y"!==i&&"CR"!==i&&"S"!==i&&"PK"!==i&&"OP"!==i&&"SG"!==i||(t.first().css("color","#3d3d3d"),t.first().css("text-shadow","1px 1px #d7d7d7")),ub.funcs.addColorToTeamColors(e)})}}),$(document).ready(function(){ub.funcs.undoHandler=function(e){var t=window.event?event:e;90==t.keyCode&&(t.ctrlKey||t.metaKey)&&ub.funcs.undo()},$("span.undo-btn").on("click",function(e){ub.funcs.undo()}),ub.funcs.undo=function(){if(0!==_.size(ub.data.undoHistory)){var t=ub.data.undoHistory.pop();switch(t.operationType){case"vertical text":t.settingsObject.verticalText=void 0===t.oldValue.verticalText||0===t.oldValue.verticalText?1:0,ub.funcs.verticalText(t.settingsObject),ub.funcs.activateMoveTool(t.settingsObject.code);break;case"add location":ub.funcs.deleteLocation(t.oldValue.applicationID);break;case"change mascot size":if(void 0!==t.oldValue.oldScale){var e=t.settingsObject.code,i=t.oldValue.size;if(_.each(t.settingsObject.application.views,function(e){e.application.scale=t.oldValue.oldScale}),ub.funcs.changeMascotSize(i,t.settingsObject,"undo"),"9"===e){var n=_.find(ub.current_material.settings.applications,{code:"10"});ub.funcs.changeMascotSize(i,n)}if("10"===e){n=_.find(ub.current_material.settings.applications,{code:"9"});ub.funcs.changeMascotSize(i,n)}if("32"===e){n=_.find(ub.current_material.settings.applications,{code:"33"});ub.funcs.changeMascotSize(i,n)}if("33"===e){n=_.find(ub.current_material.settings.applications,{code:"32"});ub.funcs.changeMascotSize(i,n)}}break;case"change mascot":ub.funcs.changeMascotFromPopup(t.oldValue.mascotID,t.settingsObject,"undo"),ub.funcs.activateMascots(t.settingsObject.code);break;case"flip":var a=t.oldValue.flip,o=t.settingsObject;_.each(o.application.views,function(e){_flipped=e.application.flip=a;var t=ub.objects[e.perspective+"_view"]["objects_"+o.code];void 0!==t&&(1===e.application.flip?($("span.flipButton").addClass("active"),t.scale.x*=-1):($("span.flipButton").removeClass("active"),t.scale.x=Math.abs(t.scale.x)))});break;case"color change":if("material option"===t.objectType){var r=t.settingsObject.code.replace("left_","").replace("right_","").toTitleCase();ub.funcs.ui.setMaterialOptionColor(r,t.oldValue,"from undo");var s=ub.funcs.getIndexByName(t.settingsObject.code);ub.funcs.activatePartByIndex(s),ub.funcs.resetHighlights()}if("application"===t.objectType){a=t.oldValue;ub.funcs.activateApplications(a.applicationCode);var l=a.color.color_code,c=a.layerNo;$('span.colorItem[data-layer-no="'+c+'"][data-color-code="'+l+'"]').data("temp","undo").click()}break;case"position, scale, rotation change":if("application"===t.objectType){a=t.oldValue,o=ub.funcs.getSettingsObject(t.settingsObject.code);_.each(a,function(e){var t=ub.objects[e.perspective+"_view"]["objects_"+e.applicationCode];view=_.find(o.application.views,{perspective:e.perspective}),void 0===view.application.scale&&(view.application.scale={x:1,y:1}),view.application.scale.x=t.scale.x=e.scale.x,view.application.scale.y=t.scale.y=e.scale.y,view.application.center.x=t.position.x=e.position.x,view.application.center.y=t.position.y=e.position.y,view.application.rotation=t.rotation=e.rotation}),ub.funcs.activateMoveTool(t.settingsObject.code)}break;default:console.error("Unhandled operation type: "+t.operationType+" "+t.objectType)}_.size(ub.data.undoHistory)}},document.onkeydown=ub.funcs.undoHandler,ub.funcs.initUndo=function(){ub.funcs.pushOldState=function(e,t,i,n,a){$("span.undo-btn").fadeIn();var o={operationType:e,objectType:t,settingsObject:i,oldValue:n,newValue:a};ub.data.undoHistory.push(o)}}}),$(document).ready(function(){ub.data.fontStroke={items:[],getStroke:function(e,t,i,n,a,o,r){return _.filter(this.items,{brand:e,sport:t,blockPattern:i,fontSize:n,accentName:a}).find(function(e){return _.contains(e.neckOptions,o)&&_.contains(e.fontNames,r)})}},ub.funcs.getSampleFont=function(){var e=ub.current_material.material.uniform_category,t=ub.data.sampleFonts.getSampleFont(e),i=ub.funcs.getFontByName(t.fontName);return void 0===i&&(0===ub.data.fonts.length&&ub.utilities.warn("There are no fonts loaded!"),void 0!==(i=_.first(ub.data.fonts))&&ub.utilities.warn("No Sample Font Set for "+ub.current_material.material.uniform_category+" using "+i.name)),i},ub.funcs.initFonts=function(r,s,l){ub.data.fonts=_.filter(ub.data.fonts,function(e){var t=JSON.parse(e.sports),i=void 0,n=!0,a=void 0,o=!0;if((null!==e.block_pattern_options&&'""'!==e.block_pattern_options&&""!==(i=JSON.parse(e.block_pattern_options))&&null!==i&&(i=i.split(","),n=_.contains(i,s)),null!==e.block_patterns&&'""'!==e.block_patterns&&""!==l&&(null!==(a=JSON.parse(e.block_patterns))?(a=a.split(","),o=_.contains(a,l)):(console.log(""),ub.utilities.error("Block Pattern Null for "+e.name+"("+e.id+")"))),null!==t)&&(""!==t[0]&&"All"!==t[0]))return _.contains(t,r)&&n&&o}),_.each(ub.data.fonts,function(e){e.caption=e.alias});var e=ub.current_material.material.brand;ub.data.fonts=_.filter(ub.data.fonts,{brand:e})},ub.funcs.processFonts=function(){if(ub.funcs.initFonts(ub.config.sport,ub.config.option,ub.config.blockPattern),ub.data.fonts=_.filter(ub.data.fonts,{active:"1"}),ub.data.fonts=_.sortBy(ub.data.fonts,"name"),_.each(ub.data.fonts,function(e){if(""!==e.name){var t=e.font_size_tables,i=e.sublimated_font_size_tables,n=void 0,a=void 0;null!=t&&""!==t&&(n=JSON.parse(t)),null!=i&&""!==i&&(a=JSON.parse(i)),"sublimated"===ub.config.uniform_application_type&&(n=a),e.parsedFontSizeTables=n,e.sublimatedParsedFontSizeTables=a}}),0<ub.data.fonts.length){console.log(" "),ub.utilities.info("Fonts: "),ub.utilities.info(ub.data.fonts.length+" fonts loaded for "+ub.config.brand.toTitleCase()),ub.utilities.info(ub.config.gender.toTitleCase()+" / "+ub.config.sport+" / "+ub.config.blockPattern+" / "+ub.config.option);var e=ub.current_material.material;"Hockey"===e.uniform_category&&"Hockey Socks"===e.block_pattern&&(ub.data.fonts=_.filter(ub.data.fonts,function(e){var t=JSON.parse(e.block_patterns);if(_.isEqual(t,"Hockey Socks"))return e})),ub.displayDoneAt(ub.data.fonts[0].name+" preloaded."),WebFont.load({custom:{families:[ub.data.fonts[0].name]}}),console.log(" ")}else ub.utilities.error("No fonts loaded for "+ub.config.sport+" / "+ub.config.option+"!")},ub.funcs.getFontByName=function(e){var t=_.find(ub.data.fonts,{name:e});return void 0===t&&console.warn("Font "+name+" not found!"),t},ub.funcs.getFontOffsetsByName=function(e,t,i,n){var a,o,r=ub.funcs.getFontByName(e);if(void 0!==r)if("undefiend"!=typeof(a=_.find(r.parsedFontSizeTables,{perspective:t}))){if(void 0!==(o=_.find(a.sizes,{inputSize:i.toString(),application_number:n.toString()})))return o;console.warn("offset data for "+_fontName+", "+t+", size: "+i+" not found.")}else console.warn("Perspective Data for "+_fontName+", "+t+" is undefined.");else console.warn("Font "+e+" not found.")},ub.funcs.getFontOffsetsfromParsedFontTables=function(e,t,i,n){var a=_.find(ub.data.fonts,{name:e}),o=void 0,r=void 0;return void 0!==a&&(void 0===(o=_.find(a.parsedFontSizeTables,{perspective:t}))&&(console.log("Font Name: "),console.log(e),console.log("Perspective: "),console.log(t),console.log("Location: "),console.log(i),console.log("Font Size"),console.log(n),console.log(a)),ub.data.offSetResult=o,r=_.find(o.sizes,{application_number:i.toString(),inputSize:n.toString()}),ub.config.ignoreFontRulesOnSublimatedAndTwill(ub.config.brand)&&(o=_.find(a.sublimatedParsedFontSizeTables,{perspective:t}),r=_.find(o.sizes,{inputSize:n.toString()}),ub.utilities.info(""),ub.utilities.info(ub.config.brand+" brand is detected. Ignoring font rules between sublimated and twill."),ub.utilities.info("Using sublimated font behavior on application #"+i.toString()+", size: "+n+", perspective: "+t),ub.utilities.info("{ inputSize: "+r.inputSize+", outputSize: "+r.outputSize+", offset: (x:"+r.x_offset+", y: "+r.y_offset+"), scale: (x: "+r.x_scale+", y: "+r.y_scale+") }"))),void 0===r&&(o=_.find(a.sublimatedParsedFontSizeTables,{perspective:t}),r=_.find(o.sizes,{inputSize:n.toString()}),ub.utilities.info(""),ub.utilities.info("No font size record found for location "+i.toString()+", size: "+n+", perspective "+t),ub.utilities.info("Temporary using settings for location #"+r.application_number),ub.utilities.info("{ inputSize: "+r.inputSize+", outputSize: "+r.outputSize+", offset: (x:"+r.x_offset+", y: "+r.y_offset+"), scale: (x: "+r.x_scale+", y: "+r.y_scale+") }")),r},ub.funcs.getFontOffsets=function(e,t,i,n){var a=_.find(ub.funcs.fontOffSets,{fontName:e,size:t.toString(),perspective:i,location:n.toString()}),o={offsetX:0,offsetY:0,scaleX:1,scaleY:1};if(void 0===a&&ub.funcs.isCurrentSport("Football")&&ub.utilities.warn("Football Font ("+e+") should have old settings..."),void 0!==a)return void 0===a?(o.offsetX=0,o.offsetY=0,o.scaleX=1,o.scaleY=1,console.error("Offsets for "+e+" not found, using defaults. please add values to ub.funcs.fontOffsets"),console.error("fontName: "+e),console.error("fontSize: "+t),console.error("perspective: "+i),console.error("location: "+n),console.error("typeof location: "+typeof n)):(o.offsetX=parseFloat(a.adjustmentX)-parseFloat(a.origX),o.offsetY=parseFloat(a.adjustmentY)-parseFloat(a.origY),o.scaleX=parseFloat(a.scaleX),o.scaleY=parseFloat(a.scaleY)),o;var r=ub.funcs.getFontOffsetsfromParsedFontTables(e,i,n.toString());return o.offsetX=parseFloat(r.x_offset),o.offsetY=parseFloat(r.y_offset),o.scaleX=parseFloat(r.x_scale),o.scaleY=parseFloat(r.y_scale),o},ub.funcs.mirrorApp=function(e,t,i,n,a){if("mascot"!==e.application_type&&"free"!==e.application_type){ub.totalWidth,ub.totalWidth;i.rotation=-1*t.rotation,n.rotation=-1*a.rotation,n.position.y=a.position.y,i.position.y=t.position.y}},ub.funcs.mirrorRotation=function(){if(ub.data.sportsMain.currentOk()&&!ub.data.rosterInitialized&&"lower"!==ub.current_material.material.type){var e=void 0,t=void 0,i=void 0,n=void 0,a=void 0;a=ub.current_material.settings.applications[9],e=ub.objects.back_view.objects_10,t=ub.objects.back_view.objects_9,i=ub.objects.front_view.objects_10,n=ub.objects.front_view.objects_9,void 0!==e&&"undefined"!==t&&"undefined"!==n&&"undefined"!==i&&ub.funcs.mirrorApp(a,e,t,i,n),a=n=i=t=e=void 0,a=ub.current_material.settings.applications[43],e=ub.objects.back_view.objects_44,t=ub.objects.back_view.objects_43,i=ub.objects.front_view.objects_44,n=ub.objects.front_view.objects_43,void 0!==e&&"undefined"!==t&&"undefined"!==n&&"undefined"!==i&&ub.funcs.mirrorApp(a,e,t,i,n),a=n=i=t=e=void 0,a=ub.current_material.settings.applications[41],e=ub.objects.back_view.objects_42,t=ub.objects.back_view.objects_41,i=ub.objects.front_view.objects_42,n=ub.objects.front_view.objects_41,void 0!==e&&"undefined"!==t&&"undefined"!==n&&"undefined"!==i&&ub.funcs.mirrorApp(a,e,t,i,n)}},ub.funcs.fixAlignments=function(){if(("Football"===ub.current_material.material.uniform_category||"Wrestling"===ub.current_material.material.uniform_category)&&!ub.data.rosterInitialized&&void 0!==ub.objects.back_view.objects_10&&"undefined"!==ub.objects.back_view.objects_9&&"undefined"!==ub.objects.front_view.objects_9&&"undefined"!==ub.objects.front_view.objects_10){var e=ub.totalWidth,t=ub.totalWidth,i=ub.current_material.settings.applications[9];if("mascot"===i.application_type||"free"===i.application_type)return;if("Buffs Bold"===ub.current_material.settings.applications[9].font_obj.name){var n=ub.data.buffsBoldAdjustment;void 0!==n&&(ub.objects.front_view.objects_9.position.x=n.x)}void 0!==ub.data.blockPatternLength&&(e=ub.data.blockPatternLength.widthFront,t=ub.data.blockPatternLength.widthBack),"ARIZONA"===ub.current_material.material.block_pattern&&(ub.objects.back_view.objects_10.position.x=115,ub.objects.front_view.objects_9.position.x=118),"DELUXE 1"===ub.current_material.material.block_pattern&&(ub.objects.back_view.objects_10.position.x=115,ub.objects.front_view.objects_9.position.x=115),"DELUXE 2"===ub.current_material.material.block_pattern&&(ub.objects.front_view.objects_9.position.x=110),"PRO COMBAT"===ub.current_material.material.block_pattern&&(ub.objects.back_view.objects_10.position.x=115),"TEXAS TECH 14"===ub.current_material.material.block_pattern&&(ub.objects.back_view.objects_10.position.x=115,e=1003,t=1004),ub.current_material.material.block_pattern,"USC"===ub.current_material.material.block_pattern&&(ub.objects.back_view.objects_10.position.x=115),"UTAH"===ub.current_material.material.block_pattern&&(ub.objects.back_view.objects_10.position.x=115),ub.objects.back_view.objects_9.rotation=-1*ub.objects.back_view.objects_10.rotation,ub.objects.front_view.objects_10.rotation=-1*ub.objects.front_view.objects_9.rotation,ub.objects.front_view.objects_10.position.x=e-ub.objects.front_view.objects_9.position.x,ub.objects.back_view.objects_9.position.x=t-ub.objects.back_view.objects_10.position.x,ub.objects.front_view.objects_10.position.y=ub.objects.front_view.objects_9.position.y,ub.objects.back_view.objects_9.position.y=ub.objects.back_view.objects_10.position.y}},ub.funcs.setupRetain=function(){var e=ub.current_material.material.retain_settings_from_saved_design;1!==e&&"1"!==e||(ub.config.retain=!0)},ub.data.getPixelFontSize=function(e,t,i,n){var a,o,r=_.find(ub.data.fonts,{id:e}),s=r.font_size_table,l="0",c=0,u=0,p=0,d=0,f=r.parsedFontSizeTables;null!=f?(a={inputSize:(s=ub.funcs.getFontOffsetsfromParsedFontTables(r.name,i,n.id.toString(),t)).inputSize,pixelFontSize:s.outputSize,xOffset:parseFloat(s.x_offset),yOffset:parseFloat(s.y_offset),xScale:parseFloat(s.x_scale),yScale:parseFloat(s.y_scale)},ub.config.retain&&(a.xOffset=0,a.yOffset=0)):(null===s?_returnFontSize=_.find(ub.data.defaultFontSizes,{size:parseFloat(t)}).outputSize:(s=JSON.parse(s.slice(1,-1)),void 0===(o=_.find(s,{inputSize:t.toString()}))&&ub.utilities.error("Font settings for "+r.name+" / "+t+" not found."),l=o.inputSize,_returnFontSize=o.outputSize,c=o.xOffset,u=o.yOffset,p=o.xScale,d=o.yScale),a={inputSize:l,pixelFontSize:_returnFontSize,xOffset:c,yOffset:u,xScale:p,yScale:d});return ub.data.sportsMain.currentOk()&&(null===ub.current_material.material.one_inch_in_px&&ub.utilities.warn("No one_inch_in_px set for this uniform."),a.pixelFontSize=t*parseInt(ub.current_material.material.one_inch_in_px)),ub.data.sportsMain.currentOk()||"sublimated"!==ub.current_material.material.uniform_application_type&&"knitted"!==ub.current_material.material.uniform_application_type||0!==ub.current_material.material.one_inch_in_px&&"undefined"!==ub.current_material.material.one_inch_in_px&&null!==ub.current_material.material.one_inch_in_px&&(a.pixelFontSize=t*parseInt(ub.current_material.material.one_inch_in_px)),a},ub.funcs.getTailSweepByID=function(e){var t=_.find(ub.data.tailSweeps,{id:e.toString()});return void 0===t&&console.warn("Tailsweep with id "+e+" not found."),t},ub.funcs.getTailSweepByCode=function(e){var t=_.find(ub.data.tailSweeps,{code:e});return void 0===t&&console.warn('Tailsweep with code "'+name+'" not found.'),t}}),$(document).ready(function(){var e=ub.front_view.position,t=ub.back_view.position,i=ub.left_view.position,n=ub.right_view.position,a=ub.front_view.scale,o=ub.back_view.scale,r=ub.left_view.scale,s=ub.right_view.scale;ub.funcs.removePanels=function(){$("div#right-pane-column").hide(),$("div#left-side-toolbar").hide(),$("div#livechat-compact-container").hide(),$("div#main_container").css("margin-top","0px"),$("button#button-return-to-customizer").show(),$("button#button-return-to-customizer").html('<i class="fa fa-arrow-left" aria-hidden="true"></i> Go back to Customizer [ESC]'),""!==ub.savedDesignName&&($("div#saved_design_name").show(),$("div#saved_design_name").html(ub.savedDesignName)),$("nav.navbar").hide()},ub.funcs.removeUI=function(){ub.front_view.visible=!0,ub.back_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0,ub.zoom&&ub.zoom_off(),ub.funcs.removePanels(),ub.funcs.resetZoom(),ub.funcs.deactivateMoveTool(),ub.render&&(ub.funcs.prepareThumbnails(),ub.save_rendered&&setTimeout(function(){ub.funcs.prepareThumbnails(),ub.funcs.savePerspectives()},1e3*ub.save_rendered_timeout)),ub.status.fullView.setStatus(!0)},ub.funcs.prepareThumbnails=function(){ub.utilities.info("Preparing Thumbnails ...");var e=ub.getThumbnailImage2("front_view"),t=ub.getThumbnailImage2("back_view"),i=ub.getThumbnailImage2("left_view"),n=ub.getThumbnailImage2("right_view");ub.utilities.info("Thumbnails Generated!"),ub.front=e,ub.back=t,ub.left=i,ub.right=n},ub.funcs.savePerspectives=function(){var e="/save_uniform_perspectives",t={material_id:ub.config.material_id,product_id:ub.product_id,store_code:ub.store_code,team_colors:ub.team_colors,front:ub.front,back:ub.back,right:ub.right,left:ub.left};0<ub.store_code.length&&(e=TeamStoreAPI.endpoints.save_customized_thumbnails,"TEAMSTORE-DEFAULT-TEMPLATE"==ub.store_code&&(t.settings=JSON.stringify(ub.current_material.settings))),$.ajax({url:e,data:t,method:"POST",success:function(e){e.success&&(ub.utilities.info("Store Code: "+e.store_code),ub.utilities.info("Material ID: "+e.material_id),ub.utilities.info("Product ID: "+e.product_id),ub.utilities.info("Team Colors: "+e.team_colors),ub.utilities.info("Saved as images"),ub.utilities.info("Front: "+e.front),ub.utilities.info("Back: "+e.back),ub.utilities.info("Right: "+e.right),ub.utilities.info("Left: "+e.left))}})},ub.funcs.updateTeamStoreImages=function(){var e=TeamStoreAPI.endpoints.save_customized_thumbnails,t={teamstore_product_id:$("#team-store-toolbox").data("product-id"),material_id:ub.config.material_id,store_code:ub.store_code,team_colors:ub.team_colors,front:ub.front,back:ub.back,right:ub.right,left:ub.left};$("#team-store-toolbox").data("product-id")&&($("#team-store-toolbox").data("product-id"),t.settings=JSON.stringify(ub.current_material.settings)),$.ajax({url:e,data:t,method:"POST",success:function(e){e.success&&(ub.utilities.info("Store Code: "+e.store_code),ub.utilities.info("Material ID: "+e.material_id),ub.utilities.info("Product ID: "+e.teamstore_product_id),ub.utilities.info("Team Colors: "+e.team_colors),ub.utilities.info("Saved as images"),ub.utilities.info("Front: "+e.front),ub.utilities.info("Back: "+e.back),ub.utilities.info("Right: "+e.right),ub.utilities.info("Left: "+e.left),$.smkAlert({text:"Product has been added to your team store.",type:"success",permanent:!1,time:5,marginTop:"90px"}))}})},ub.funcs.restoreUI=function(){$("div#right-pane-column").show(),$("div#livechat-compact-container").show(),$("div#left-side-toolbar").show(),$("div#main_container").css("margin-top","70px"),$("button#button-return-to-customizer").hide(),$("nav.navbar").show(),""!==ub.savedDesignName&&$("div#saved_design_name").hide(),ub.front_view.position=e,ub.back_view.position=t,ub.left_view.position=i,ub.right_view.position=n,ub.front_view.scale=a,ub.back_view.scale=o,ub.left_view.scale=r,ub.right_view.scale=s,$('a.change-view[data-view="front"]').click(),ub.status.fullView.setStatus(!1),ub.status.fullViewZoom.setStatus(!1,void 0),ub.funcs.restorePointer(),ub.funcs.setVisibleView("front"),ub[ub.active_view+"_view"].alpha=1},ub.funcs.resetZoom=function(){var e,t;ub.front_view.scale.set(.4,.4),ub.back_view.scale.set(.4,.4),ub.left_view.scale.set(.4,.4),ub.right_view.scale.set(.4,.4),e=window.innerWidth,t=(e-1600)/2-30,_fx=function(e){return t+400*(e-1)},ub.left_view.position.set(_fx(1),190),ub.front_view.position.set(_fx(2),190),ub.back_view.position.set(_fx(3),190),ub.right_view.position.set(_fx(4),190),ub.funcs.showViews()},ub.funcs.hitTest=function(e,t){return e+50<=t&&t<=e+400-50},ub.funcs.getZoomView=function(e){var t=void 0;if(void 0!==e){var i=e.x;ub.funcs.hitTest(ub.front_view.position.x,i)&&(t=ub.front_view),ub.funcs.hitTest(ub.back_view.position.x,i)&&(t=ub.back_view),ub.funcs.hitTest(ub.left_view.position.x,i)&&(t=ub.left_view),ub.funcs.hitTest(ub.right_view.position.x,i)&&(t=ub.right_view)}return t},ub.funcs.showViews=function(){ub.front_view.alpha=1,ub.back_view.alpha=1,ub.left_view.alpha=1,ub.right_view.alpha=1,ub.funcs.restorePointer(),ub.front_view.visible=!0,ub.back_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0},ub.funcs.hideViews=function(){ub.front_view.alpha=0,ub.back_view.alpha=0,ub.left_view.alpha=0,ub.right_view.alpha=0,ub.front_view.visible=!1,ub.back_view.visible=!1,ub.left_view.visible=!1,ub.right_view.visible=!1},ub.funcs.zoomView=function(e){var t=window.innerWidth-1e3;e.alpha=1,e.scale.set(1,1),e.position.x=t/2,ub.funcs.setZoomOutPointer(),e.visible=!0},ub.funcs.partialZoomOut=function(){ub.funcs.resetZoom(),ub.front_view.alpha=.1,ub.back_view.alpha=.1,ub.left_view.alpha=.1,ub.right_view.alpha=.1},ub.funcs.partialZoomView=function(e){ub.funcs.setZoomInPointer(),e.alpha=1},ub.funcs.restorePointer=function(){$("body").css("cursor","auto")},ub.funcs.setZoomInPointer=function(){$("body").css("cursor","zoom-in")},ub.funcs.setZoomOutPointer=function(){$("body").css("cursor","zoom-out")},$("button#button-return-to-customizer").on("click",function(){$("div.verbiage-container").removeClass("preview-verbiage-container"),$("p.verbiage-text").removeClass("preview-verbiage-text"),$("div#main_view").css("background-color",""),ub.funcs.restoreUI()}),$("span.fullscreen-btn").on("click",function(e){$("div.verbiage-container").addClass("preview-verbiage-container"),$("p.verbiage-text").addClass("preview-verbiage-text"),$("div#main_view").css("background-color","#61605e"),ub.funcs.removeUI()})}),$(document).ready(function(){ub.funcs.getColorObjByPosition=function(e){var t=ub.team_colors[parseInt(e)-1],i=void 0;return void 0!==t&&(i=ub.funcs.getColorByColorCode(t)),i},ub.funcs.getTeamColorReplacementColor=function(e){return _.find(ub.data.teamStoresteamColors,{previousColorCode:e})},ub.prepareForTeamStoresApplications=function(e){return _.each(e,function(e){if("mascot"!==e.type&&"logo"!==e.type&&"free"!==e.type){if(_.contains(["player_name","front_number","team_name","back_number","shoulder_number","tv_number","sleeve_number","numbers_extra"],e.type)){var i=[],n=[];_.each(e.colorArrayText,function(e){var t=ub.funcs.getTeamColorReplacementColor(e);void 0!==t?(i.push(t.newColorCode),n.push(ub.funcs.getColorByColorCode(t.newColorCode))):(i.push(e),n.push(ub.funcs.getColorByColorCode(e)))}),e.colorArrayText=i,e.color_array=n}}if("mascot"===e.type){i=[],n=[];_.each(e.colorArrayText,function(e){var t=ub.funcs.getTeamColorReplacementColor(e);void 0!==t?(i.push(t.newColorCode),n.push(ub.funcs.getColorByColorCode(t.newColorCode))):(i.push(e),n.push(ub.funcs.getColorByColorCode(e)))}),e.colorArrayText=i,e.color_array=n;_.each(e.mascot.layers_properties,function(e){var t=ub.funcs.getTeamColorReplacementColor(e.default_color);void 0!==t&&(e.default_color=t.newColorCode,e.color=parseInt(t.newColorObj.hex_code,16))}),e.colorArrayText=i,e.color_array=n,_.each(e.application.views,function(e){e.application.colors=i})}if(e.type,"team_name"===e.type&&(e.text=ub.team_name),"player_name"===e.type&&(e.text=ub.jersey_name),"front_number"!==e.type&&"back_number"!==e.type&&"shoulder_number"!==e.type&&"sleeve_number"!==e.type||(e.text=ub.jersey_number),"mascot"===e.type){var t=ub.funcs.getMascotByID(ub.mascot_id);void 0!==t?e.mascot=t:ub.utilities.info("Mascot ["+ub.mascot_id+"] not found.")}}),e},ub.data.teamStoresteamColors={},ub.prepareForTeamStoresPatterns=function(e){if(void 0!==e)return"blank"!==e.pattern_id&&"none"!==e.pattern_id&&_.each(e.pattern_obj.layers,function(e){var t=ub.funcs.getTeamColorReplacementColor(e.color_code);void 0!==t&&(e.color_code=t.newColorCode,e.color=parseInt(t.newColorObj.hex_code,16))}),e},ub.prepareForTeamStoresMaterialOptions=function(e){var t=ub.current_material.material.type;return _.each(e[t],function(e){if("highlights"!==e.setting_type&&"shadows"!==e.setting_type&&"static_layer"!==e.setting_type)if(ub.data.skipTeamColorProcessing.shouldSkip(ub.current_material.material.uniform_category,e.code))void 0!==e.code&&ub.utilities.info(e.code.toTitleCase()+" layer detected, skipping add to Team Colors...");else{if(void 0!==e.code){var t=_.find(ub.current_material.materials_options,{name:e.code.toTitleCase()}),i=parseInt(t.team_color_id);if(e.team_color_id=i,isNaN(e.team_color_id))return void console.log("No Team Color ID Detected for "+e.code.toTitleCase());var n=ub.funcs.getColorObjByPosition(e.team_color_id);void 0===n?(console.warn("Color not provided for Team Color ID #"+i+" , using default. "+t.default_color),i.toString()===t.team_color_id&&(n=ub.funcs.getColorByColorCode(t.default_color),console.log(n))):(console.log("Using Color provided via URL: "+n.color_code),console.log(n)),ub.data.teamStoresteamColors[i]={teamColorID:i,previousColorCode:e.colorObj.color_code,previousColorObj:e.colorObj,newColorCode:n.color_code,newColorObj:n},console.log(ub.data.teamStoresteamColors[i]),void 0!==n&&(e.colorObj=n,e.color=parseInt(n.hex_code,16))}void 0===e.pattern||void 0===e.pattern.pattern_obj||e.pattern.pattern_obj.name}}),e}}),$(document).ready(function(){ub.data.threadColors={},ub.data.materialOptionWithLimitedColors={items:[{block_pattern:"Soccer",neck_options:["Goalie (M)","Goalie (W)","Jersey (M)","Jersey (W)","Short (W)","Short (M)"],material_option:"Pro-Dry",valid_colors:["B","W","GR"]},{block_pattern:"Quarter Zip Jacket",neck_options:["Long Sleeve","Short Sleeve"],material_option:"Zipper",valid_colors:["B","W"]},{block_pattern:"Cage Jacket (Apparel)",neck_options:["Long Sleeve","Short Sleeve"],material_option:"Zipper",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"Compression Pant",neck_options:["Full","Quarter"],material_option:"Waistband",valid_colors:["B","CG"]},{block_pattern:"Compression Pant",neck_options:["Full","Quarter"],material_option:"Prolook",valid_colors:["B","CG"]},{block_pattern:"Game Day Jacket",neck_options:["Men's","Women's"],material_option:"Zipper",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"Game Day Jacket",neck_options:["Men's","Women's"],material_option:"Arm Elastic",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"SFN Hoodie",neck_options:["Long Sleeve","Short Sleeve","Sleeveless"],material_option:"Zipper",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"SFN Hoodie",neck_options:["Long Sleeve","Short Sleeve","Sleeveless"],material_option:"Hood Cuff",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"SFN Hoodie",neck_options:["Long Sleeve","Short Sleeve","Sleeveless"],material_option:"Arm Cuff",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"Cage Jacket (Apparel)",neck_options:["Full","Quarter"],material_option:"Zipper",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"Cage Jackets",neck_options:["Long Sleeves","Short Sleeves"],material_option:"Zipper",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"Quarter Zip Jacket",neck_options:["Long Sleeve","Short Sleeve"],material_option:"Zipper",valid_colors:["B","W"]},{block_pattern:"PTS Cage Jacket",neck_options:["Short Sleeve"],material_option:"Zipper",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"PTS Cage Jacket",neck_options:["Short Sleeve"],material_option:"Neck Tape 1",valid_colors:["W","CG"]},{block_pattern:"PTS Cage Jacket",neck_options:["Short Sleeve"],material_option:"Neck Tape 2",valid_colors:["W","CG"]},{block_pattern:"PTS Hoodie",neck_options:["Hoodie"],material_option:"Neck Tape 1",valid_colors:["W","CG"]},{block_pattern:"PTS Hoodie",neck_options:["Hoodie"],material_option:"Neck Tape 2",valid_colors:["W","CG"]},{block_pattern:"SFN Jogger",neck_options:["SFN Jogger"],material_option:"Zipper",valid_colors:["B","W","R","GR","NB","RB"]},{block_pattern:"Flag Football",neck_options:["Flag Jersey"],material_option:"Team Flag",valid_colors:["FLB","FLG"]},{block_pattern:"Match Series",neck_options:["Jersey (M)","Jersey (W)","Short (W)","Short (M)"],material_option:"Pro-Dry",valid_colors:["B","W","GR"]},{block_pattern:"Champion Series",neck_options:["Jersey (M)","Jersey (W)","Short (W)","Short (M)"],material_option:"Pro-Dry",valid_colors:["B","W","GR"]},{block_pattern:"Premier Series",neck_options:["Jersey (M)","Jersey (W)","Short (W)","Short (M)"],material_option:"Pro-Dry",valid_colors:["B","W","GR"]},{block_pattern:"Goalie",neck_options:["Goalie (M)","Goalie (W)"],material_option:"Pro-Dry",valid_colors:["B","W","GR"]}],getLimitedColorSet:function(t){return _.find(this.items,function(e){return e.block_pattern===ub.current_material.material.block_pattern&&_.contains(e.neck_options,ub.current_material.material.neck_option)&&e.material_option===t})}},ub.data.coordinatingColors={items:[{origin:"Prolook",matchingPart:"Waistband",sport:"Compression Pant (Apparel)",blockPattern:"Compression Pant",neckOption:["Full","Quarter"],color1:"CG",color2:"B"},{origin:"Waistband",matchingPart:"Prolook",sport:"Compression Pant (Apparel)",blockPattern:"Compression Pant",neckOption:["Full","Quarter"],color1:"CG",color2:"B"},{origin:"Neck Tape 1",matchingPart:"Neck Tape 2",sport:"PTS Cage Jacket (Apparel)",blockPattern:"PTS Cage Jacket",neckOption:["Short Sleeve"],color1:"CG",color2:"W"},{origin:"Neck Tape 2",matchingPart:"Neck Tape 1",sport:"PTS Cage Jacket (Apparel)",blockPattern:"PTS Cage Jacket",neckOption:["Short Sleeve"],color1:"CG",color2:"W"},{origin:"Neck Tape 1",matchingPart:"Neck Tape 2",sport:"PTS Hoodie (Apparel)",blockPattern:"PTS Hoodie",neckOption:["Hoodie"],color1:"CG",color2:"W"},{origin:"Neck Tape 2",matchingPart:"Neck Tape 1",sport:"PTS Hoodie (Apparel)",blockPattern:"PTS Hoodie",neckOption:["Hoodie"],color1:"CG",color2:"W"}],isCoordinating:function(t,i,n,a,e){var o=_.filter(this.items,function(e){e.origin;return t===e.origin&&i===e.sport&&n===e.blockPattern&&_.contains(e.neckOption,a)}),r=void 0,s=void 0,l=void 0;return 0<o.length&&(r=e===(l=o[0]).color1?l.color2:l.color1,s=l.matchingPart),{result:0<o.length,item:0<o.length?l:void 0,matchingPart:0<o.length?s:void 0,matchingPartColor:0<o.length?r:void 0}}},ub.funcs.prepareColors=function(){if(ub.data.colors=_.filter(ub.data.colors,function(e){if(e.brand.toLowerCase()===ub.config.brand.toLowerCase())return 1===e.active||"1"===e.active}),ub.data.colors=_.filter(ub.data.colors,function(e){return!ub.data.excludedColors.isExcluded(ub.config.sport,ub.config.uniform_application_type,e.color_code)}),ub.data.colors=_.map(ub.data.colors,function(e){return e.order=ub.data.sublimatedColorArrangement.getOrderID(e.name).order,e}),"Flag Football"!==ub.config.blockPattern){var t=["FLB","FLG"];ub.data.colors=_.filter(ub.data.colors,function(e){return!_.contains(t,e.color_code)})}ub.data.colors=_.sortBy(ub.data.colors,"order")},ub.funcs.getColorsSets=function(i){var n=[],e=window.ub.config.api_host+"/api/colors_sets";return ub.loader(e,"colors_sets",function(e){var t=_.find(e,{name:i,active:1});_.map(JSON.parse(t.colors),function(e){n.push(ub.funcs.getColorByColorCode(e))})}),n},ub.funcs.getThreadColors=function(){return ub.data.threadColors=ub.funcs.getColorsSets("Thread"),ub.data.threadColors}}),$(document).ready(function(){ub.qa={},ub.ga={},ub.devtools={},ub.devtools.debugMode=!0,ub.fontGuideIDs=[172,73,87,85,543,547,83,190,1,588,2,948,1979,1625,2109,1909,1454,543,81,89,2210,657],ub.funcs.printUniformInfo=function(e,t){var i;ub.utilities.info(""),ub.utilities.info("----- Base Uniform Info -----"),ub.utilities.info("Brand: "+e.brand),ub.utilities.info("ID: "+e.id),ub.utilities.info("Item ID: "+e.item_id),ub.utilities.info("Uniform: "+e.name),ub.utilities.info("Sport: "+e.uniform_category),ub.utilities.info("Block Pattern: "+e.block_pattern_id+" / "+e.block_pattern),ub.utilities.info("Neck Option: "+e.neck_option),ub.utilities.info("Type: "+e.type),ub.utilities.info("Gender: "+e.gender),ub.utilities.info("Factory Code: "+e.factory_code),ub.utilities.info("Uniform Application Type: "+ub.current_material.material.uniform_application_type),ub.utilities.info("One Inch In px: "+ub.current_material.material.one_inch_in_px),ub.utilities.info("Asset Target: "+ub.config.asset_target),ub.utilities.info("Uniform Group: "+ub.current_material.material.uniform_group),ub.utilities.info("Style Group: "+ub.current_material.material.style_group),ub.utilities.info("Hidden Body: "+ub.config.hiddenBody),ub.utilities.info("Is Setting Retain from Saved Design: "+ub.config.retain),ub.utilities.info("Placeholder Override Items: "+ub.data.placeHolderOverrides.items.length),ub.utilities.info("Customizer Available: "+ub.current_material.material.customizer_available),"object"==typeof ub.config.savedDesignInfo&&(ub.utilities.info("- Save Design Info -"),ub.utilities.info("Created At: "+ub.config.savedDesignInfo.createdAt),ub.utilities.info("Save Design ID: "+ub.config.savedDesignInfo.savedDesignID),ub.utilities.info("Save Design Name: "+ub.config.savedDesignInfo.name)),ub.utilities.info("-----------------------------"),ub.utilities.info(""),ub.utilities.info("-------- Applications -------"),i="Code".rpad(" ",7)+"Type".rpad(" ",15)+" View".rpad(" ",7)+" "+" Size".lpad(" ",5)+" Active".lpad(" ",5)+" Color".lpad(" ",11)+" Opacity".lpad(" ",8)+"Position / Frontend".lpad(" ",45)+"Position / Backend".lpad(" ",45)+" Scale".lpad(" ",46)+" Pattern Position".lpad(" ",35),console.log(i),_.each(t.applications,function(e){var t="#"+e.code.rpad(" ",5)+" "+e.type.rpad(" ",15),i=void 0,n="",a="",o="",r="",s="",l=(void 0!==e.opacity?e.opacity:"100%").lpad(" ",7),c="none";if(void 0!==e.custom_obj)var u=e.custom_obj.active;if(_.each(e.application.views,function(e){if(1===e.application.isPrimary)return _primaryViewObject=e,i=e.perspective,o=e.application.scale,void(s=e.application.center)}),void 0!==o)r="{x: "+o.x+", y: "+o.y+"}";else{var p=ub.objects[i+"_view"]["objects_"+e.code];if(void 0!==p){var d=p.scale;r=void 0!==u||u||"embellishments"===e.type?"{x: "+d.x+",y: "+d.y+"} (custom scale)":"{x: "+d.x+",y: "+d.y+"}"}else r="scale not set."}void 0!==s&&(_positionStrF="{x: "+s.x+", y: "+s.y+"}",_positionStrB="{x: "+(s.x/2-3)+", y: "+s.y/2+"}"),void 0===i&&(i="No Primary View Set!"),a="on".lpad(" ",5),"off"===e.status&&(a="off".lpad(" ",5)),n="".lpad(" ",10),void 0!==e.color_array&&(n=_.pluck(e.color_array,"color_code").toString().lpad(" ",10)),"embellishments"===e.type&&(n=e.embellishment.design_id.toString().lpad(" ",10)),void 0!==e.pattern_settings&&(c=0!==e.pattern_settings.position.y?e.pattern_settings.position.y:"none"),t+=" "+i.rpad(" ",7)+" "+(void 0!==e.font_size?e.font_size+'"':"none").lpad(" ",5)+" "+a+" "+n+" "+l+" "+_positionStrF.lpad(" ",45)+_positionStrB.lpad(" ",45)+" "+r.lpad(" ",45)+" "+c.toString().lpad(" ",32),ub.utilities.info(t)}),0===_.size(ub.current_material.settings.applications)?ub.utilities.info("No Applications set."):(ub.utilities.info(""),ub.utilities.info("Total # of applications: "+_.size(ub.current_material.settings.applications))),ub.utilities.info("-----------------------------"),ub.utilities.info("")},ub.funcs.printNames=function(){var t=[];_.each(ub.current_material.materials_options,function(e){3<e.name.indexOf("_")&&t.push("Underscore character used in Name: "+e.name+" "+e.perspective),0===e.name.indexOf(" ")&&t.push("Space in begining of Name: "+e.name+" "+e.perspective)});var i="";_.each(t,function(e){i+=e+"<br />"}),$("div.ne").html(i),ub.qa.colorTable={},_.each(ub.current_material.materials_options,function(e){var t=ub.funcs.getHexColorByCode(e.default_color);"object"!=typeof ub.qa.colorTable[t]&&(ub.qa.colorTable[t]={color:t,materialOptions:[]}),ub.qa.colorTable[t].materialOptions.push(e.name)});var n="";n+="<table class='color-table'>",_.each(ub.qa.colorTable,function(e,t){n+="<tr>",n+="<td class='color-column' style='color: white; background-color: #"+e.color+"'> #"+e.color+"</td>",n+="<td class='color-material-option-column'>",_.each(e.materialOptions,function(e){n+=e+", "}),n+="</td>",n+="</tr>"}),n+="</table>",$("div.ct").html(n),ub.qa.partNames={},_.each(ub.current_material.materials_options,function(e){var t=ub.funcs.getHexColorByCode(e.default_color),i=e.name;"Highlights"!==e.name&&"Shadows"!==e.name&&("object"!=typeof ub.qa.partNames[i]&&(ub.qa.partNames[i]={name:i,perspectives:{}}),ub.qa.partNames[i].perspectives[e.perspective]={name:i,default_color:t,perspective:e.perspective,group_id:e.group_id,team_color_id:e.team_color_id,allow_pattern:e.allow_pattern,path:e.material_option_path,transformedZIndex:e.layer_level*ub.zIndexMultiplier,layerLevel:e.layer_level})});var a="";a+="<table class='parts-table'>",_.each(ub.qa.partNames,function(n,e){a+="<tr><td colspan='6' class='tCenter tLabel'><strong>"+n.name+"</strong></td></tr>",a+="<tr class='header_row'><td class='tCenter'>Color</td><td class='tCenter'>Layer Level / zIndex</td><td class='tCenter'>Perspective</td><td class='tRight'>Group ID</td><td class='tRight'>Team Color ID</td><td class='tCenter'>Allow Pattern</td><td class='tCenter'></td></tr>",_.each(n.perspectives,function(e,t){1,a+="<tr>",a+="<td class='pattern-material-option-column ucase tCenter'>",a+="<strong style='padding:3px;background-color:#"+e.default_color+"; color: white'>#"+e.default_color+"</strong>",a+="</td>";var i=1===parseInt(e.allow_pattern)?"<strong>Yes</strong>":"No";a+="<td class='pattern-material-option-column tCenter'>"+e.layerLevel+" / "+e.transformedZIndex+"</td>",a+="<td class='pattern-material-option-column tCenter'>"+e.perspective+"</td>",a+="<td class='pattern-material-option-column tRight'>"+e.group_id+"</td>",a+="<td class='pattern-material-option-column tRight'>"+e.team_color_id+"</td>",a+="<td class='pattern-material-option-column tCenter'>"+i+"</td>",a+='<td class=\'pattern-material-option-column\'><img class="img_preview" style="background-color: #'+e.default_color+';" src= "'+e.path+'" /> <button class="btn show-boundaries" data-perspective="'+e.perspective+'" data-name="'+n.name+'">Show Boundaries</button>',a+="</tr>"})}),a+="</table>",$("div.pt").html(a),$("button.show-boundaries").unbind("click"),$("button.show-boundaries").on("click",function(){_perspective=$(this).data("perspective"),_name=$(this).data("name"),ub.funcs.changeActiveView(_perspective),ub.funcs.getBoundaries(_perspective,_name,!0)}),$("div.btn.extract").unbind("click"),$("div.btn.extract").on("click",function(){ub.generators.generatePlaceholderOverrides()})},$("div.activate_qa_tools").on("click",function(){ub.debug.mode&&ub.funcs.printNames(),$("div.qa-tools-tab").modal("show"),$("div.qa-tools-tab").draggable({handle:".modal-content"})}),ub.toggleFullView=function(){$("nav.navbar").is(":visible")?ub.funcs.removeUI():ub.funcs.restoreUI()},ub.toggleFontGuides=function(){var e=!ub.status.gaFontTool.getStatus();e?ub.showFontGuides():ub.hideFontGuides(),ub.status.gaFontTool.setStatus(e)},ub.togglePatternMasks=function(){var e=!ub.status.patternMasks.getStatus();e?ub.funcs.removePatternMasks():ub.funcs.restorePatternMasks(),ub.status.patternMasks.setStatus(e)},ub.funcs.afterLoadChecks=function(){"0.00"===ub.current_material.material.one_inch_in_px&&ub.data.sportsMain.currentOk()&&ub.utilities.errorWithCode(ub.errorCode.zeroOneInchInPX,"")},ub.showFontGuides=function(){_.each(ub.views,function(e){"object"==typeof ub.objects[e+"_view"].guide&&(ub.objects[e+"_view"].guide.alpha=1,ub.objects[e+"_view"].guide.zIndex=-170),ub.updateLayersOrder(ub[e+"_view"])})},ub.hideFontGuides=function(){_.each(ub.views,function(e){"object"==typeof ub.objects[e+"_view"].guide&&(ub.objects[e+"_view"].guide.alpha=0,ub.objects[e+"_view"].guide.zIndex=-29),ub.updateLayersOrder(ub[e+"_view"])})},ub.showMessagesPanel=function(){$("div.messages-panel").fadeIn()},ub.showPreviewPanel=function(){$("div.preview-panel").fadeIn()},ub.updateApplicationSpecsPanel=function(e){if(_.contains(ub.fontGuideIDs,window.ub.valid)){var t=ub.funcs.getApplicationSettings(e),i=ub.funcs.getPrimaryViewObject(t.application);if(void 0!==i){var n=$("div.preview-panel");if(!n.is(":visible")){n.fadeIn();var a=$("div.preview-panel > div.title > span.close");a.unbind("click"),a.on("click",function(){n.hide()}),$("div.preview-panel").draggable()}var o=$("#m-preview-panel-content").html(),r={applicationCode:e,radians:(parseFloat(i.application.rotation)*Math.PI/180).toFixed(4),degrees:parseFloat(i.application.rotation).toFixed(4),positionX:i.application.center.x.toFixed(4),positionY:i.application.center.y.toFixed(4),positionXBackend:(i.application.center.x/2-3).toFixed(4),positionYBackend:(i.application.center.y.toFixed(4)/2).toFixed(4),scaleX:void 0===i.application.scale?1:i.application.scale.x.toFixed(4),scaleY:void 0===i.application.scale?1:i.application.scale.y.toFixed(4)},s=Mustache.render(o,r);$("div.preview-panel > div.body").html(s)}else ub.utilities.error("No Primary view set for "+e)}},ub.showDebugPanel=function(){$("div.debug-panel").fadeIn()},ub.updateDebugPanel=function(e,t,i){var n=$("div.debug-panel"),a=$("div.debug-panel > div.title > span.close");n.is(":visible")||(n.fadeIn(),a.unbind("click"),a.on("click",function(){n.hide()}),$("div.debug-panel").draggable());var o=$("#m-debug-panel-contents").html(),r={materialName:i,title:e,content:t},s=Mustache.render(o,r);$("div.debug-panel > div.body").html(s)},ub.updateDebugPanelInfo=function(e,t,i){$("span.qoute").hide(),ub.updateDebugPanel(e,t,i)}}),$(document).ready(function(){ub.colorUtilities={},ub.colorUtilities.colorCodesToColorObjArray=function(e){var t=!1;return Array.isArray(e)?t=_.map(e,function(e){return ub.funcs.getColorByColorCode(e)}):(ub.utilities.error("colorCode is not an Array"),t)}}),$(document).ready(function(){ub.dataPatches={},ub.data.transferColors=["5882"],ub.dataPatches.patch4874to5728=function(){"object"==typeof ub.config.savedDesignInfo&&_.contains(["4874","4875","4876"],ub.config.savedDesignInfo.savedDesignID)&&(ub.current_material.settings.applications[72].color_array=ub.colorUtilities.colorCodesToColorObjArray(["B","W"]),ub.current_material.settings.applications[73].color_array=ub.colorUtilities.colorCodesToColorObjArray(["B"])),"object"==typeof ub.config.savedDesignInfo&&_.contains(["5728"],ub.config.savedDesignInfo.savedDesignID)&&(ub.current_material.settings.applications[5].color_array=ub.colorUtilities.colorCodesToColorObjArray(["T","B","VG"])),"object"==typeof ub.config.savedDesignInfo&&_.contains(["5225"],ub.config.savedDesignInfo.savedDesignID)&&(ub.current_material.settings.applications[1].color_array=ub.colorUtilities.colorCodesToColorObjArray(["RB","G"]),ub.current_material.settings.applications[26].color_array=ub.colorUtilities.colorCodesToColorObjArray(["RB","G"]),ub.current_material.settings.applications[5].color_array=ub.colorUtilities.colorCodesToColorObjArray(["RB","G"])),"object"==typeof ub.config.savedDesignInfo&&_.contains(["5679"],ub.config.savedDesignInfo.savedDesignID)&&(ub.current_material.settings.applications[72].status="off"),"object"==typeof ub.config.savedDesignInfo&&_.contains(["5880"],ub.config.savedDesignInfo.savedDesignID)&&(ub.current_material.settings.applications[74].color_array=ub.colorUtilities.colorCodesToColorObjArray(["W"])),"object"==typeof ub.config.savedDesignInfo&&_.contains(["5882"],ub.config.savedDesignInfo.savedDesignID)&&(ub.current_material.settings.applications[72].color_array=ub.colorUtilities.colorCodesToColorObjArray(["LG","W"]),ub.current_material.settings.applications[74].color_array=ub.colorUtilities.colorCodesToColorObjArray(["LG","W"]),ub.current_material.settings.applications[75].color_array=ub.colorUtilities.colorCodesToColorObjArray(["LG","W"])),"object"==typeof ub.config.savedDesignInfo&&_.contains(["5924"],ub.config.savedDesignInfo.savedDesignID)&&(ub.current_material.settings.applications[78].application.layer="Left Sleeve",ub.current_material.settings.applications[79].application.layer="Left Sleeve",ub.current_material.settings.applications[85].status="off",ub.current_material.settings.applications[80].status="off",ub.current_material.settings.applications[84].status="off",ub.current_material.settings.applications[79].status="off",ub.current_material.settings.applications[78].status="off"),"object"==typeof ub.config.savedDesignInfo&&_.contains(["11214"],ub.config.savedDesignInfo.savedDesignID)&&(console.error("---- Start Patch ----"),_.each(ub.current_material.settings.applications,function(e,t){console.log(e),console.log(e.application.layer),console.log(t),"Back Insert"===e.application.layer&&(console.log("Deleting "+t),delete ub.current_material.settings.applications[t]),"83"===t&&(console.log("Hiding 83"),e.status="off"),"78"===t&&(console.log("Hiding 78"),e.status="off"),"82"===t&&(console.log("Hiding 82"),e.status="off"),"80"===t&&(console.log("Hiding 80"),e.status="off"),"81"===t&&(console.log("Hiding 81"),e.status="off")}),console.error("---- End Patch ----"))},ub.dataPatches.run=function(){ub.dataPatches.patch4874to5728()},ub.dataPatches.forRandomFeedPatching=function(){var e="object"==typeof ub.config.savedDesignInfo&&_.contains(["13233"],ub.config.savedDesignInfo.savedDesignID);return e&&(ub.current_material.settings.randomFeeds={}),e}}),$(document).ready(function(){ub.loadCategories=function(e){ub.displayDoneAt("Categories loaded.");var t,i,n,a,o,r,s,l,c,u=1;window.ub.config.toString&&(u="1"),t=ub.funcs.menActiveSportsApparel(e,{type:"sports",active:u,active_male:u,active_type:"active"}),a=ub.funcs.menActiveSportsApparel(e,{type:"apparel",active:u,active_male:u,active_type:"active"}),s=ub.funcs.menActiveSportsApparel(e,{type:"esports",active:u,active_male:u,active_type:"active"}),i=ub.funcs.womenActiveSportsApparel(e,{type:"sports",active:u,active_female:u,active_type:"active"}),o=ub.funcs.womenActiveSportsApparel(e,{type:"apparel",active:u,active_female:u,active_type:"active"}),l=ub.funcs.womenActiveSportsApparel(e,{type:"esports",active:u,active_female:u,active_type:"active"}),n=ub.funcs.youthActiveSportsApparel(e,{type:"sports",active:u,active_youth:u,active_type:"active"}),r=ub.funcs.youthActiveSportsApparel(e,{type:"apparel",active:u,active_youth:u,active_type:"active"}),c=ub.funcs.youthActiveSportsApparel(e,{type:"esports",active:u,active_youth:u,active_type:"active"}),ub.data.activeSports.items=ub.funcs.getActiveSports(e,{active:u,active_type:"active"}),ub.data.tempSports.items=ub.funcs.getTempSports(e,{active:u,active_type:"temp"}),ub.data.sports=[{gender:"Men",sports:ub.funcs.menSortOrder(t)},{gender:"Women",sports:ub.funcs.womenSortOrder(i)},{gender:"Youth",sports:ub.funcs.youthSortOrder(n)}],ub.data.apparel=[{gender:"Men",sports:ub.funcs.menSortOrder(a)},{gender:"Women",sports:ub.funcs.womenSortOrder(o)},{gender:"Youth",sports:ub.funcs.youthSortOrder(r)}],ub.data.esports=[{gender:"Men",sports:ub.funcs.menSortOrder(s)},{gender:"Women",sports:ub.funcs.womenSortOrder(l)},{gender:"Youth",sports:ub.funcs.youthSortOrder(c)}],ub.data.sportsCategory={esports:[{gender:"Men",sports:[{active:1,name:"eSports",thumbnail_male:"/images/main-ui/pickers/Men/eSports.png"}]},{gender:"Women",sports:[]},{gender:"Youth",sports:[]}],apparel:[{gender:"Men",sports:[{active:1,name:"Apparel",thumbnail_male:"/images/main-ui/pickers/hoodie.png"}]},{gender:"Women",sports:[{active:1,name:"Apparel",thumbnail_female:"/images/main-ui/pickers/hoodie.png"}]},{gender:"Youth",sports:[]}]}},ub.funcs.menActiveSportsApparel=function(e,t){return _.where(e,t).filter(function(e){return 0<e.thumbnail_male.length?e.thumbnail_male:""})},ub.funcs.womenActiveSportsApparel=function(e,t){return _.where(e,t).filter(function(e){return 0<e.thumbnail_female.length?e.thumbnail_female:""})},ub.funcs.youthActiveSportsApparel=function(e,t){return _.where(e,t).filter(function(e){return 0<e.thumbnail_youth.length?e.thumbnail_youth:""})},ub.funcs.getActiveSports=function(e,t){return _.where(e,t)},ub.funcs.getTempSports=function(e,t){return _.where(e,t)},ub.funcs.menSortOrder=function(e){return _.sortBy(e,function(e){return parseInt(e.sort_order_male)})},ub.funcs.womenSortOrder=function(e){return _.sortBy(e,function(e){return parseInt(e.sort_order_female)})},ub.funcs.youthSortOrder=function(e){return _.sortBy(e,function(e){return parseInt(e.sort_order_youth)})}}),$(document).ready(function(){window.ub.initialize=function(){ub.errorCodes.prepareShortcuts(),1===parseInt(ub.render)&&ub.funcs.removePanels(),ub.funcs.beforeLoad(),ub.config.print_version(),ub.current_material.id=window.ub.config.material_id,ub.current_material.code=window.ub.config.code,ub.funcs.hideMainLinks(),ub.config.setFeatureFlags(),ub.current_material.taggedStyles=window.ub.config.api_host+"/api/tagged_styles/",ub.loader(ub.current_material.taggedStyles,"tagged_styles",ub.callback),-1!==window.ub.config.material_id&&ub.funcs.loadHomePickers(),-1!==ub.config.material_id&&(ub.funcs.initCanvas(),ub.startTime(),ub.config.sport=ub.utilities.domParserDecoder(ub.config.sport),ub.config.option=ub.utilities.domParserDecoder(ub.config.option),ub.config.blockPattern=ub.utilities.domParserDecoder(ub.config.blockPattern),ubsv.mascotScales.fetchValues(),ub.current_material.fonts_url=ub.config.api_host+"/api/fonts/"+ub.config.brand,ub.current_material.colors_url=ub.config.api_host+"/api/colors/"+ub.config.brand.toLowerCase(),ub.current_material.patterns_url=ub.config.api_host+"/api/patterns/",ub.current_material.mascots_url=ub.config.api_host+"/api/mascots/",ub.current_material.cutlinks_url=ub.config.api_host+"/api/cut_links/",ub.current_material.block_patterns_url=ub.config.api_host+"/api/block_patterns/",ub.current_material.mascot_categories_url=ub.config.api_host+"/api/mascot_categories",ub.current_material.mascot_groups_categories_url=ub.config.api_host+"/api/mascots_groups_categories/",ub.current_material.single_view_applications=ub.config.api_host+"/api/v1-0/single_view_applications/",ub.loader(ub.current_material.mascots_url,"mascots",ub.callback),ub.loader(ub.current_material.mascot_categories_url,"mascots_categories",ub.callback),ub.loader(ub.current_material.mascot_groups_categories_url,"mascots_groups_categories",ub.callback),ub.loader(ub.current_material.colors_url,"colors",ub.callback),ub.loader(ub.current_material.fonts_url,"fonts",ub.callback),ub.loader(ub.current_material.patterns_url,"patterns",ub.callback),ub.loader(ub.current_material.block_patterns_url,"block_patterns",ub.callback),ub.loader(ub.current_material.cutlinks_url,"cuts_links",ub.callback),ub.loader(ub.current_material.single_view_applications,"single_view_applications",ub.callback),ub.current_material.colors_sets=ub.config.api_host+"/api/colors_sets/",ub.loader(ub.current_material.colors_sets,"colors_sets",ub.callback),ub.current_material.logo_request_url=window.ub.config.api_host+"/api/v1-0/logo_request/user_id/"+ub.user.id,ub.loader(ub.current_material.logo_request_url,"logo_request",ub.callback),ub.current_material.application_sizes_url=window.ub.config.api_host+"/api/application_sizes/"+ub.config.sport+"/"+ub.config.blockPattern+"/"+ub.config.option,ub.loader(ub.current_material.application_sizes_url,"application_size",ub.callback),ub.current_material.hidden_bodies_url=window.ub.config.api_host+"/api/v1-0/hidden_bodies/"+ub.config.sport+"/"+ub.config.blockPattern+"/"+ub.config.option+"/"+ub.config.type,ub.loader(ub.current_material.hidden_bodies_url,"hidden_bodies",ub.callback)),-1===window.ub.config.material_id&&(ub.pickersStartTime(),ub.categories_url=ub.config.api_host+"/api/categories",ub.materials_url=ub.config.api_host+"/api/materials/styleSheets",ub.displayDoneAt("Loading Categories ..."),ub.loader(ub.categories_url,"categories",ub.loadCategories),ub.displayDoneAt("Loading Styles ..."),ub.loader(ub.materials_url,"materials",ub.load_materials),ub.afterLoadScripts()),void 0!==ub.user.id&&-1===ub.config.material_id?(ub.orders_url=ub.config.api_host+"/api/order/user/"+ub.user.id,ub.loader(ub.orders_url,"orders",ub.load_orders)):$(".open-save-design-modal").hide(),void 0!==ub.user.id&&-1!==ub.config.material_id&&ub.funcs.updateEmbellishmentList(),ub.zoom_off()},ub.funcs.loggedInUsers=function(){void 0!==ub.user.id&&ub.funcs.checkDefaultRepID()},ub.funcs.initCanvas=function(){$("body").addClass("generic-canvas")},ub.funcs.preprocessGenderTerm=function(e){return e.toTitleCase()},ub.funcs.preprocessSportTerm=function(e){return e.toTitleCase()},ub.funcs.callDirectLinks=function(){var e=ub.data.urlAlias.getAlias(ub.config.styles.gender),t=ub.data.urlAlias.getAlias(ub.config.styles.sport);if(ub.picker.isNew){if("1"===ub.config.isFromHSEL)return;var i=t.urlAlias,n=e.shortCode;"Football"===t.urlAlias&&(i="Football 2017"),"Wrestling"===t.urlAlias&&(i="Wrestling 2018");var a=_.find(ub.data.activeSports.items,{name:i}).type;ub.funcs.setV2Gender(n),ub.funcs.setV2Sport(i),ub.funcs.setV2UniformType(a),ub.funcs.resetSecondaryBarFilter(),ub.funcs.setSideBarSportFilter()}ub.funcs.directLinks(e.urlAlias,t.urlAlias)},ub.funcs.loadHomePickers=function(){$("div.backlink").addClass("back-link-on"),ub.current_material.material_url=ub.config.api_host+"/api/material/"+ub.current_material.id,ub.current_material.material_options_url=ub.config.api_host+"/api/materials_options/"+ub.current_material.id,ub.loader(ub.current_material.material_url,"material",ub.callback),ub.loader(ub.current_material.material_options_url,"materials_options",ub.callback),$("#main_view").parent().fadeIn(),$("div.header-container").fadeIn(),ub.refresh_thumbnails()},ub.funcs.getPrice=function(e){var t=parseFloat(e.web_price_sale).toFixed(2),i=parseFloat(e.msrp).toFixed(2),n=0;return n=t<i&&1<t?"Sale Price: $"+t:"MSRP $"+i,(isNaN(t)||isNaN(t))&&(n="Call for Pricing"),ub.funcs.processMaterialPrice(e),n},ub.funcs.getPriceElements=function(e){return ub.funcs.processMaterialPrice(e),e.parsedPricingTable},ub.funcs.createMessage=function(e,t,i,n,a,o){var r={type:e,subject:i,order_code:t,content:n,recipient_id:0,sender_id:ub.user.id,parent_id:a,sender_name:ub.user.fullname,read:"0"},s=ub.config.api_host+"/api/message";$.ajax({url:s,type:"POST",data:JSON.stringify(r),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){$.smkAlert({text:"Message Sent!",type:"warning",time:3,marginTop:"80px"})}})},ub.funcs.updateMessageBadges=function(e){var t=$("span.badge.badge-"+e),i=e.toTitleCase();"Pm"===i&&(i="PM");var n=_.chain(ub.data.unreadMessages).filter({type:i}).size().value();_countStr=0!==n?n:"",t.html(_countStr)},ub.funcs.updateMessageCount=function(){void 0!==$.ajaxSettings.headers&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({url:ub.config.api_host+"/api/messages/recipient/unread/"+ub.user.id,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){var t=e.messages,i=_.size(t);ub.data.unreadMessages=e.messages,$("a#messages > span.message-badge").hide(),$("a#messages > span.message-badge").html(i),$("a#messages > span.message-badge").fadeIn(),_.each(ub.data.messageTypes,ub.funcs.updateMessageBadges)}})},ub.funcs.isCustomizerAvailable=function(){var e=1;return window.ub.config.toString&&(e="1"),ub.current_material.material.customizer_available===e},ub.funcs.turnOnOrderButton=function(){$('a.footer-buttons[data-view="team-info"]').removeClass("disabled")},ub.funcs.turnOffOrderButton=function(){$('a.footer-buttons[data-view="team-info"]').addClass("disabled")},ub.funcs.beforeLoad=function(){ub.funcs.turnOffOrderButton(),"number"==typeof ub.user.id&&ub.funcs.updateMessageCount()},ub.funcs.pushState=function(e){history.pushState(e.data,e.title,e.url)},ub.data.orderFormInitialized=void 0,ub.funcs.reShowCustomizer=function(){ub.data.rosterInitialized=!1,$("div#right-pane-column").fadeIn(),$("div#left-pane-column").fadeIn(),$("div#roster-input").fadeOut()},ub.funcs.reShowRosterInput=function(){$("div#roster-input").fadeIn(),$("div#validate-order-form, div#order-form").hide()},ub.funcs.reShowOrderFrom=function(){$("div#roster-input").fadeOut(),$("div#validate-order-form").fadeOut(),$("div#order-form").fadeIn(),$("span.back-to-roster-form-button").unbind("click"),$("span.back-to-roster-form-button").on("click",function(){ub.funcs.reShowRosterInput()})},ub.funcs.setupEventHandlers=function(){window.addEventListener("popstate",function(e){"customize-uniform"===e.state&&$.smkAlert({text:"Ability to go back to the customizer is not yet implemented.",type:"warning",time:3,marginTop:"80px"}),"roster-form"===e.state&&ub.funcs.reShowRosterInput(),"order-form"===e.state&&ub.funcs.reShowOrderFrom()}),window.onbeforeunload=function(e){return"Please save your work first before going to another page so that your work might not be lost."}},ub.funcs.prepareBottomTabs=function(){$('a.change-view[data-view="save"]').removeClass("disabled"),ub.funcs.isCurrentSport("Baseball")||ub.funcs.isCurrentSport("Fastpitch")?$('a.change-view[data-view="pipings"]').removeClass("hidden"):$('a.change-view[data-view="pipings"]').addClass("hidden"),ub.funcs.isSocks()&&"Hockey Sock"!==ub.config.blockPattern&&!ub.data.randomFeedExemptions.isExempted(ub.config.option)?$('a.change-view[data-view="randomFeed"]').removeClass("hidden"):$('a.change-view[data-view="randomFeed"]').addClass("hidden"),$('a.change-view[data-view="team-info"]').removeClass("disabled"),ub.funcs.isCurrentSport("Cinch Sack (Apparel)")&&$('a.footer-buttons[data-view="right"], a.footer-buttons[data-view="left"]').addClass("disabled"),ub.data.hasProcessedArtworks&&($('a.footer-buttons[data-view="save"]').addClass("disabled"),ub.funcs.turnOffOrderButton()),ub.funcs.isCustomizerAvailable()||ub.funcs.turnOffOrderButton()},ub.funcs.perUniformPriceCustomizerCleanup=function(){var e=ub.current_material.material.uniform_category;!ub.data.sportsWithHiddenYouthPrices.isHidden(e)&&"Fight Short"!==ub.current_material.material.neck_option||($("span.youthPriceCustomizer").hide(),$("span.youthPriceCustomizerSale").hide(),$("span.adult-label").html("Price starts from "),$("div#uniform-price-youth").hide(),$("span.adult-str").html("Price Starts "),$("div#uniform-price-adult").addClass("single"),$("div#uniform-price-call-for-team-pricing").addClass("single"))},ub.funcs.afterLogin=function(){ub.funcs.updateEmbellishmentList()},ub.data.afterLoadCalled=0,ub.funcs.afterLoad=function(){if(!(0<ub.data.afterLoadCalled)){ub.sport=ub.current_material.material.uniform_category,ub.neckOption=ub.current_material.material.neck_option,ub.current_material.settings.hiddenBody=ub.config.hiddenBody,ub.funcs.activatePartByIndex(0),$("div.left-pane-column-full").fadeIn(),$("span.fullscreen-btn").fadeIn(),ub.funcs.afterLoadEmbellishments(),_.contains(ub.fontGuideIDs,window.ub.valid)&&$("div.activate_qa_tools").fadeIn();var e=ub.current_material.material.uniform_application_type.replace("_"," "),t=ub.funcs.getPriceElements(ub.current_material.material);$("div#uniform_name").html('<span class="type">'+e+"</span><br />"+ub.current_material.material.name),$("div#uniform-price-youth").html("Youth <span class='youthPriceCustomizer "+t.youth_sale+"'> from $"+t.youth_min_msrp+"</span> <span class='youthPriceCustomizerSale "+t.youth_sale+"'>now from $"+t.youth_min_web_price_sale+'<span class="sales-badge">Sale!</span></span><br />'),$("div#uniform-price-adult").html('<span class="adult-str">Adult &nbsp</span><span class=\'adultPriceCustomizer '+t.adult_sale+"'>from $"+t.adult_min_msrp+"</span> <span class='adultPriceCustomizerSale "+t.adult_sale+"'>now from $"+t.adult_min_web_price_sale+'<span class="sales-badge">Sale!</span></span><br />'),void 0===t.youth_min_msrp&&$("div#uniform-price-youth").addClass("hide"),void 0===t.adult_min_msrp&&$("div#uniform-price-adult").hide(),$("div.header-container").css("display","none !important"),ub.funcs.perUniformPriceCustomizerCleanup(),ub.funcs.restoreTeamColorSelectionsFromInitialUniformColors(),ub.hideFontGuides(),ub.data.afterLoadCalled=1,ub.funcs.initToolBars(),TeamStoreToolBox.is_enabled&&(TeamStoreToolBox.init(),window.is_show_teamstore_toolbox&&(ub.render?TeamStoreToolBox.hide():TeamStoreToolBox.show())),ub.data.undoHistory=[],ub.funcs.initUndo(),ub.funcs.initTeamColors(),void 0===ub.temp&&ub.funcs.colorArrayFix(),ub.funcs.prepareBottomTabs(),ub.funcs.loadOtherFonts();var i=ub.current_material.material.block_pattern,n=(i=ub.current_material.material.block_pattern,ub.data.buffsBoldAdjustments.getSettings(i));ub.data.buffsBoldAdjustment=n;n=ub.data.blockPatternLengths.getSettings(i);ub.data.blockPatternLength=n,ub.funcs.setupEventHandlers(),"Order"===ub.config.pageType&&ub.funcs.getCustomArtworRequestStatus(function(e){if(ub.config.orderArtworkStatus=e.order.artwork_status,"rejected"===ub.config.orderArtworkStatus){$('a[data-view="team-info"]').hide();var t=$("span.resubmit-order-btn");t.show(),$("div#order-status").html("Artwork Rejected, please upload a new one."),$("div#order-status").addClass("rejected"),$("div#order-status").show(),$("div#order-status").attr("data-intro","This order has a rejected custom artwork, please upload a new file and resubmit the order."),$("div#order-status").attr("data-position","right"),$('a[data-view="layers"]').attr("data-step","2"),$('a[data-view="layers"]').attr("data-position","left"),$('a[data-view="layers"]').attr("data-intro","Please select the application here where you have previously uploaded the custom artwork request to reupload a new image."),t.attr("data-step","3"),t.attr("data-position","right"),t.attr("data-intro","After uploading a new one, please click here to resubmit your order."),introJs().start(),t.unbind("click"),t.on("click",function(){ub.funcs.initOrderProcess()})}}),"Saved Design"===ub.config.pageType&&ub.funcs.initGuideSavedDesign(),"Order"===ub.config.pageType&&ub.funcs.initGuideOrder(),"1"!==ub.render&&ub.funcs.pushState({data:"customize-uniform",title:"Customize Uniform",url:"?customize-uniform"}),1===parseInt(ub.render)?(ub.funcs.removeUI(),$("button#button-return-to-customizer").html("Customize this uniform"),""!==ub.savedDesignName&&$("div#saved_design_name").html(ub.savedDesignName)):($("button#button-return-to-customizer").hide(),$("div#saved_design_name").hide()),ub.funcs.initUniformSizesAndPrices(),ub.funcs.initMiscUIEvents(),ub.afterLoadScripts(),ub.funcs.afterLoadChecks(),void 0===ub.current_material.settings.cut_pdf&&(ub.current_material.settings.cut_pdf=ub.config.cut_pdf),void 0===ub.current_material.settings.styles_pdf&&(ub.current_material.settings.styles_pdf=null!==ub.current_material.material.styles_pdf?ub.current_material.material.styles_pdf:""),ub.funcs.updateLabels(),ub.funcs.printUniformInfo(ub.current_material.material,ub.current_material.settings),void 0!==ub.user.id&&1979===ub.user.id&&3810===ub.config.material_id&&ub.showFontGuides(),ub.branding.useAllColors&&ub.funcs.addAllColorToTeamColors(),ub.funcs.addFunctionToAfterloadList(ub.funcs.resizeRightMainWindow),ub.funcs.executeAfterLoadFunctionList()}},ub.funcs.updateLabels=function(){ub.funcs.isSocks()&&($('a.change-view[data-view="left"]').html("I<br><span>Inside View</span>"),$('a.change-view[data-view="right"]').html("O<br><span>Outside View</span>"),$('span.perspective[data-id="left"]').text("Inside"),$('span.perspective[data-id="right"]').text("Outside"),_.isEqual(ub.config.blockPattern,"Hockey Sock")&&($('a.change-view[data-view="left"]').html("O<br><span>Outside View</span>"),$('a.change-view[data-view="right"]').html("I<br><span>Inside View</span>"),$('span.perspective[data-id="left"]').text("Outside"),$('span.perspective[data-id="right"]').text("Inside")))},ub.funcs.isAFavoriteItem=function(e){var t=_.find(ub.data.tagged_styles,{uniform_id:e.toString()});return void 0!==t&&(ub.config.favoriteID=t.id),void 0!==t},ub.funcs.initFavorite=function(){var t=$("span.favorite-btn");t.fadeIn(),$("hr.left-side-divider").fadeIn(),ub.funcs.isAFavoriteItem(ub.current_material.material.id)&&(ub.utilities.info("This is a favorite item! ["+ub.config.favoriteID+"]"),ub.funcs.setFavoriteStatusOn()),t.unbind("click"),t.on("click",function(e){t.hasClass("added")?ub.funcs.removeFromFavorites():ub.funcs.addToFavorites()})},ub.funcs.ok=function(e){void 0!==e?(ub.current_material.taggedStyles=window.ub.config.api_host+"/api/tagged_styles/",ub.loader(ub.current_material.taggedStyles,"tagged_styles",ub.callBackPostLoad)):ub.funcs.initFavorite()},ub.funcs.notOk=function(){$("span.favorite-btn").hide(),$("hr.left-side-divider.bottom").fadeIn(),$("hr.left-side-divider.middle").fadeIn(),$("hr.left-side-divider.fav-top").hide()},ub.funcs.initMiscUIEvents=function(){$("span.undo-btn").fadeIn(),void 0!==ub.user.id?ub.funcs.ok():ub.funcs.notOk()},ub.funcs.addToFavorites=function(){var t=$("span.favorite-btn");t.fadeOut();var e={uniform_id:ub.config.material_id.toString(),type:"stock",tags:"favorites"},i=ub.config.api_host+"/api/tagged_style";$.ajax({url:i,type:"POST",data:JSON.stringify(e),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.config.favoriteID=e.id,$.smkAlert({text:"Added ["+ub.config.uniform_name+"] To Favorites!",type:"warning",time:3,marginTop:"80px"}),ub.funcs.setFavoriteStatusOn(),t.fadeIn()}})},ub.funcs.setFavoriteStatusOn=function(){var e=$("span.favorite-btn");e.html(' <i class="fa fa-star" aria-hidden="true"></i><span class="toolbar-item-label">FAVORITE!</span>'),e.addClass("added")},ub.funcs.setFavoriteStatusOff=function(){var e=$("span.favorite-btn");e.html(' <i class="fa fa-star-o" aria-hidden="true"></i><span class="toolbar-item-label">ADD TO<br />FAVORITES!</span>'),e.removeClass("added")},ub.funcs.removeFromFavorites=function(){var t=$("span.favorite-btn");t.fadeOut();var e={id:ub.config.favoriteID},i=ub.config.api_host+"/api/tagged_style/delete";$.ajax({url:i,type:"POST",data:JSON.stringify(e),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){$.smkAlert({text:"Removed ["+ub.config.uniform_name+"] from Favorites!",type:"warning",time:3,marginTop:"80px"}),ub.funcs.setFavoriteStatusOff(),t.fadeIn()}})},ub.funcs.loadOtherFonts=function(){_.each(ub.data.fonts,function(e,t){0!==t&&WebFont.load({custom:{families:[e.name]}})})},ub.funcs.initToolBars=function(){"Wrestling"===ub.funcs.getCurrentUniformCategory()?$('a.change-view[data-view="layers"]').show():($('a.change-view[data-view="save"]').show(),$('a.change-view[data-view="start-over"]').show()),$('a.change-view[data-view="locations-add"]').hide(),$('a.change-view[data-view="locations"]').hide()},ub.updateLayersOrder=function(e){e.children.sort(function(e,t){return e.zIndex=e.zIndex||0,t.zIndex=t.zIndex||0,t.zIndex-e.zIndex})},ub.callback_update=function(e,t){ub.data[t]=e,"fonts"===t&&(ub.data.fonts=_.filter(ub.data.fonts,{active:"1"}),ub.data.fonts=_.sortBy(ub.data.fonts,"name"))},ub.convertToString=function(e){var i=["id","active","debug_mode","sublimation_only","is_blank"];_.each(e,function(t){null!==t&&_.each(i,function(e){"number"==typeof t[e]&&(t[e]=t[e].toString())})})},ub.funcs.optimize=function(){var e=ub.data.placeHolderOverrides;ub.pha=_.find(ub.pha,{name:ub.current_material.material.block_pattern}),void 0!==ub.pha&&(e=JSON.parse(ub.pha.placeholder_overrides),ub.data.placeHolderOverrides.items=e)},ub.callBackPostLoad=function(e,t){var i=ub.data.loadingOptionsAlias.getAlias(t);ub.displayDoneAt(i+" loaded."),ub.convertToString(e),"tagged_styles"===t&&(ub.data.tagged_styles=_.filter(ub.data.tagged_styles,{user_id:ub.user.id.toString()}),ub.funcs.initFavorite())},ub.funcs.updateTagStyleCount=function(){$("span.slink > span.count").html(_.size(ub.data.tagged_styles))},ub.callback=function(e,t){var i=ub.data.loadingOptionsAlias.getAlias(t);ub.displayDoneAt(i+" loaded."),ub.convertToString(e);if(_.contains(["colors","patterns","fonts","mascots","mascots_categories","tagged_styles","mascots_groups_categories","cuts_links","logo_request","application_size","single_view_applications","colors_sets","hidden_bodies"],t)?(ub.data[t]=e,"tailSweeps"===t&&(_.each(e,function(e,t){"blank"===e.code?e.sortOrder=0:e.sortOrder=t+1}),ub.data.tailSweeps=_.sortBy(ub.data.tailSweeps,"sortOrder"))):ub.current_material[t]=e,"block_patterns"===t){var n=_.filter(e,function(e){return null!==e.placeholder_overrides&&""!==e.placeholder_overrides});ub.pha=n}if("application_size"===t&&ub.funcs.setupApplicationSizes(e),"fonts"===t&&ub.funcs.processFonts(),"logo_request"===t&&ub.funcs.processLogoRequests(),"patterns"===t&&ub.funcs.transformPatterns(e),"mascots"===t&&ub.funcs.transformMascots(),"colors"===t&&ub.funcs.prepareColors(),"single_view_applications"===t&&ub.funcs.processSingleViewApplications(),"colors_sets"===t){ub.funcs.getThreadColors()}"hidden_bodies"===t&&ub.funcs.setupHiddenBody(e),"cuts_links"===t&&(ub.current_material.settings.cut_pdf="",ub.current_material.settings.cuts_links=void 0,ub.current_material.settings.cuts_links=_.find(e,{sport_name:ub.config.sport,block_pattern:ub.config.blockPattern,neck_option:ub.config.option}),void 0!==ub.current_material.settings.cuts_links&&(ub.current_material.settings.cut_pdf=ub.current_material.settings.cuts_links.cuts_pdf,ub.config.cut_pdf=ub.current_material.settings.cuts_links.cuts_pdf)),void 0!==ub.user.id&&"tagged_styles"===t&&(ub.data.tagged_styles=_.filter(ub.data.tagged_styles,{user_id:ub.user.id.toString()}),ub.funcs.updateTagStyleCount()),void 0!==ub.current_material.material&&void 0!==ub.current_material.materials_options&&void 0!==ub.data.colors&&void 0!==ub.data.patterns&&void 0!==ub.data.fonts&&void 0!==ub.data.mascots&&void 0!==ub.data.mascots_categories&&void 0!==ub.data.tagged_styles&&void 0!==ub.data.mascots_groups_categories&&(ub.displayDoneAt("Loading assets completed"),ub.load_assets(),ub.displayDoneAt("Configuration of style - "+ub.config.uniform_name+" started"),ub.utilities.info(" "),ub.funcs.transformedApplications(),ub.funcs.transformedBoundaries(),ub.funcs.get_modifier_labels(),ub.init_settings_object(),ub.init_style(),ub.funcs.optimize(),ub.funcs.setupRetain(),ub.displayDoneAt("Configuration of style done."),ub.displayDoneAt("Rendering awesomeness ..."))},ub.loader=function(e,t,i){$.ajax({url:e,type:"GET",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){i("tailSweeps"===t?e.tailsweeps:e[t],t)}})},ub.loaderWOToken=function(e,t,i){$.ajax({url:e,type:"GET",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){i("tailSweeps"===t?e.tailsweeps:e[t],t)}})},ub.callbackSimple=function(e,t){var i=ub.data.loadingOptionsAlias.getAlias(t);ub.displayDoneAt(i+" loaded."),ub.convertToString(e);_.contains(["mascots","mascots_categories","mascots_groups_categories"],t)?ub.data[t]=e:ub.current_material[t]=e,"mascots"===t&&ub.funcs.transformMascots(),void 0!==ub.data.mascots&&void 0!==ub.data.mascots_categories&&void 0!==ub.data.mascots_groups_categories&&ub.displayDoneAt("Loading mascots completed")},ub.saveLogo=function(e,t){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$.ajax({data:JSON.stringify({dataUrl:e}),url:ub.config.host+"/saveLogo",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?ub.current_material.settings.applications[t].filename=e.filename:util.error("Logo upload not successful.")}})},ub.display_gender_picker=function(){$("#arrow_design_sets").remove(),$("#main_view > .picker_container").hide(),$("#main_view > .picker_container").html("");var a="";_.each(["Men","Women","Youth"],function(e,t){var i=window.ub.config.thumbnails_path+e.toLowerCase()+".png",n="<div class='gender_picker_header'>"+e+"</div>";a+=n+='<div class="gender_picker" data-picker-type="gender" data-index = "'+t+'" data-gender="'+e+'" style="background-image:url('+i+');"></span></div>'}),$("#main_view > .picker_container").html(a),$("#main_view > .picker_container").fadeIn(),ub.bind_handler_design_set_picker()},ub.display_categories=function(a){$("#arrow_design_sets").remove();var e=_.find(ub.data.sports,{gender:a}),t=_.where(e.sports,{active:"1"});$("#main_view > .picker_container").hide(),$("#main_view > .picker_container").html("");var o="";o='<div class="picker_header">'+("<span>"+a+"</span>")+'<button onclick="ub.display_gender_picker()"><i class="fa fa-chevron-circle-left"></i></button></div>',_.each(t,function(e,t){var i=window.ub.config.thumbnails_path+e.name.toLowerCase()+".jpg",n='<div class="sports_categories" data-gender="'+a+'" data-category="'+e.name+'" style="background-image:url('+i+');"><span class="categories_label">'+e.name+"</span></div>";o+=n}),$("#main_view > .picker_container").html(o),$("#main_view > .picker_container").fadeIn(),ub.bind_handler_category_picker()},ub.display_design_sets=function(e,t,n){$("#arrow_design_sets").remove(),$("#main_view > .picker_container").hide(),$("#main_view > .picker_container").html("");var a="";a='<div class="picker_header">'+("<span>"+t+"</span>")+'<button onclick="ub.display_gender_picker()"><i class="fa fa-chevron-circle-left"></i></button></div>'+('<div class="picker_header">'+("<span>"+e+"</span>")+('<button onclick=ub.display_categories("'+t+'")><i class="fa fa-chevron-circle-left"></i></button>')+"</div>")+('<div class="picker_header picker_header_tabs" style="text-align: center;">'+('<button class="button_tabs upper" data-type="upper" data-gender="'+t+'" data-category="'+e+'">Jersey</button>')+('<button class="button_tabs lower" data-type="lower" data-gender="'+t+'" data-category="'+e+'">Pant</button>')+"</div>");var i=_.where(ub.design_sets,{category:e,gender:t.toLowerCase()});i="All"===n?_.where(ub.design_sets,{category:e,gender:t.toLowerCase()}):_.where(ub.materials,{uniform_category:e,gender:t.toLowerCase(),type:n.toLowerCase()}),_.each(i,function(e){var t=e.thumbnail_path,i='<div class="style_entry" data-option="'+n+'" data-picker-type="design_sets" data-id = "'+e.id+'" data-name="'+e.name+'" style="background-image:url('+t+');"><span class="style_label">'+e.name+"</span></div>";a+=i});var o="for <strong>"+t+" / "+e+"</strong>.";0===i.length?a+="<div style='clear:both;'></div><div class='no_designs'>No Uniform Designs "+o+"</div>":1===i.length?a+="<div style='clear:both;'></div><div class='no_designs'>1 Uniform Design "+o+"</div>":a+="<div style='clear:both;'></div><div style='clear: both'></div><div><div class='no_designs' style='clear:both;'>"+i.length+" Uniform Designs found "+o+"</div></div>",$("#main_view > .picker_container").html(a),$("#main_view > .picker_container").show();var r=$(".button_tabs."+n.toLowerCase());$("body").append('<div id="arrow_design_sets" class="down_arrow">');var s=$("#arrow_design_sets"),l=new Tether({element:s,target:r,attachment:"top center",targetAttachment:"bottom center"});r.css("background-color","#353536"),r.css("color","#f8f8f8"),$(".down_arrow:not(.tether-element)").remove(),ub.tethers.design_sets=l,ub.bind_handler_design_set_picker(),ub.bind_design_sets_tab_handlers()};function e(t){return function(i,e){var n=[];$.each(t,function(e,t){-1!==t.toLowerCase().indexOf(i.toLowerCase())&&n.push(t)}),e(n)}}function t(e){$(".options_panel").hide();var t=$("div#right-sidebar > a.sidebar-buttons").css("background-color","#acacac");t.removeClass("highlighter_on"),t.addClass("highlighter_off"),$(e).show()}if(ub.overrideTypeAheadEvent=function(e){var t=$(e);t.data("value"),t.data("id")},ub.funcs.getSearchObject=function(e,t){var i,n,a;return"materials"===e?(n=(i=_.find(ub.materials,{searchName:t})).id,a=i.thumbnail_path):"orders"===e?(n=(i=_.find(ub.orders,{design_name:t})).order_id,a=null!==i.upper_front_thumbnail_path?i.upper_front_thumbnail_path:i.lower_front_thumbnail_path):i=void 0,{object:i,id:n,thumbnail:a}},ub.addToSearchResults=function(e,t){var i=$("input#search_field").val(),n=ub.searchResults;Array.isArray(n[i])||(n[i]=[]);var a=ub.funcs.getSearchObject(e,t);n[i].push({type:e,name:t,thumbnail:a.thumbnail,uniform_category:a.object.uniform_category,uniform_application_type:a.object.uniform_application_type,id:a.id}),$(".picker-header").html("Search Results: "+$("input#search_field").val()),ub.funcs.initSearchPicker(i,n[i])},ub.funcs.hideMainLinks=function(){$("span.slink").hide(),$('span.slink[data-item="Loading"]').fadeIn()},ub.funcs.showMainLinks=function(){$("span.slink").fadeIn(),$('span.slink[data-item="Loading"]').hide()},ub.prepareTypeAhead=function(){void 0!==ub.user.id?"object"==typeof ub.data.searchSource.materials&&"object"==typeof ub.data.searchSource.orders&&($(".typeahead").typeahead({minLength:3,highlight:!0,limit:30},{name:"materials",source:e(ub.data.searchSource.materials),templates:{header:'<h3 class="header-name">Styles</h3>',suggestion:function(e){return ub.addToSearchResults("materials",e),'<div class="typeahead_results_template" onclick="ub.overrideTypeAheadEvent(this);" data-value="'+e+'" data-id="materials">'+e+"</div>"}}}),$(".typeahead").unbind("typeahead:idle"),$(".typeahead").bind("typeahead:idle",function(e,t,i,n){ub.searchResults={}}),$(".typeahead").unbind("typeahead:select"),$(".typeahead").bind("typeahead:select",function(e,t){$('[data-item="'+t+'"]').click()}),$("#search_field").attr("placeholder","Search: Style"),ub.funcs.showMainLinks(),ub.funcs.closePickersDialog()):"object"==typeof ub.data.searchSource.materials&&($(".typeahead").typeahead({minLength:3,highlight:!0},{name:"materials",source:e(ub.data.searchSource.materials),templates:{header:'<h3 class="header-name">Styles</h3>',suggestion:function(e){return ub.addToSearchResults("materials",e),'<div class="typeahead_results_template" onclick="ub.overrideTypeAheadEvent(this);" data-value="'+e+'" data-id="materials">'+e+"</div>"}}}),$(".typeahead").unbind("typeahead:idle"),$(".typeahead").bind("typeahead:idle",function(e,t,i,n){ub.searchResults={}}),$(".typeahead").unbind("typeahead:select"),$(".typeahead").bind("typeahead:select",function(e,t){$('[data-item="'+t+'"]').click()}),$("#search_field").attr("placeholder","Search: Style"),ub.funcs.showMainLinks(),ub.funcs.closePickersDialog()),$("input#search_field").prop("disabled",!1)},ub.load_design_sets=function(e,t){ub.design_sets={},ub.design_sets=e,ub.design_sets=_.where(ub.design_sets,{active:"1"})},ub.funcs.processMaterialPrice=function(e){"Football"===e.uniform_category||e.uniform_category;var t=JSON.parse(e.pricing);e.parsedPricingTable=t,null===e.pricing?e.parsedPricingTable={youth_min_msrp:" (Call for Pricing)",adult_min_msrp:" (Call for Pricing)",youth_sale:"nosale",adult_sale:"nosale",callForPricing:"callForPricingOff"}:("0.00"===t.youth_min_web_price_sale?t.youth_sale="nosale":t.youth_sale="sale","0.00"===t.adult_min_web_price_sale?t.adult_sale="nosale":t.adult_sale="sale")},ub.funcs.getSearchName=function(e){return e.name.trim()+" ("+e.gender+")"},ub.load_materials=function(e,t){ub.displayDoneAt("Styles loaded."),ub.materials={},ub.convertToString(e),ub.materials=_.filter(e,{debug_mode:"0"}),ub.materials=_.filter(ub.materials,{asset_target:"web"}),_.each(ub.materials,function(e){if(e.searchName=ub.funcs.getSearchName(e),e.calculatedPrice=ub.funcs.getPrice(e),ub.funcs.processMaterialPrice(e),_result=_.find(ub.data.tagged_styles,{uniform_id:e.id}),e.is_favorite="undefined"!=typeof _result,""===e.thumbnail_path_left&&(e.thumbnail_path_left=e.thumbnail_path),"Baseball"===e.uniform_category&&"lower"===e.type||"Fastpitch"===e.uniform_category&&"lower"===e.type||"Basketball"===e.uniform_category&&"lower"===e.type||"Lacrosse"===e.uniform_category&&"lower"===e.type||"Football"===e.uniform_category&&"lower"===e.type||"Football 2017"===e.uniform_category&&"lower"===e.type||"Soccer"===e.uniform_category&&"lower"===e.type||"Compression Pant (Apparel)"===e.uniform_category&&"lower"===e.type||"Track and Field"===e.uniform_category&&"lower"===e.type||"Crew Socks (Apparel)"===e.uniform_category||"Socks (Apparel)"===e.uniform_category||"SFN Jogger (Apparel)"===e.uniform_category||"Yoga Pant (Apparel)"===e.uniform_category){var t=e.thumbnail_path_left;e.thumbnail_path_left=e.thumbnail_path_front,"Hockey Sock"===e.block_pattern&&(e.thumbnail_path_left=t)}"Cinch Sack (Apparel)"===e.uniform_category&&(e.thumbnail_path_left=e.thumbnail_path_back),"Tech Tee (eSports)"===e.uniform_category&&(e.thumbnail_path_left=e.thumbnail_path_back)});var i=_.map(ub.materials,function(e){return ub.funcs.getSearchName(e)});ub.data.searchSource.materials=i,ub.displayDoneAt("Price Preparation Complete."),ub.displayDoneAt("Preparing Search..."),"builder"===ub.page&&ub.prepareTypeAhead(),ub.config.styles&&ub.funcs.callDirectLinks();var n=_.map(ub.data.tagged_styles,function(e){return _.find(ub.materials,{id:e.uniform_id})});ub.data.tagged_styles=_.filter(ub.data.tagged_styles,function(e){return void 0!==_.find(n,{id:e.uniform_id})}),ub.funcs.updateTagStyleCount(),ub.funcs.initHSELLogo()},ub.load_orders=function(e,t){ub.orders={},ub.orders=e,ub.data.searchSource.orders=_.pluck(ub.orders,"design_name"),ub.prepareTypeAhead()},ub.load_save_designs=function(e,t){ub.savedDesigns={},ub.savedDesigns=e,ub.data.searchSource.savedDesigns=_.pluck(ub.savedDesigns,"name"),ub.prepareTypeAhead()},ub.load_patterns=function(e,t){ub.patterns={},ub.patterns=e,ub.patterns=_.where(ub.patterns,{active:"1"})},ub.load_assets=function(){ub.assets={},ub.assets.folder_name="/images/builder-assets/",ub.assets.blank=ub.assets.folder_name+"blank.png";ub.current_material.material.options=ub.current_material.materials_options,_.each(ub.views,function(e){var t=e;t+="left"===t||"right"===t?"_side_view":"_view";var i=e+"_view";ub.assets[i]={}}),ub.assets.pattern={},ub.assets.pattern.layers=[],ub.objects.pattern_view={},ub.funcs.load_fonts(),ub.setup_views(),ub.setup_material_options(),ub.pass=0,requestAnimationFrame(ub.render_frames);var e=ub.current_material.material.name;$("span#design_name_input").text(e),$('input[name="design_name"]').val(e),ub.funcs.showViewports(),$("#main-row").fadeIn(),$("div#design_name_container").fadeIn();var t=500;"1"!==ub.render&&ub.status.fullView.getStatus()?ub.funcs.setVisibleView("front"):t=3e3,setTimeout(function(){ub.funcs.afterLoad()},t)},ub.funcs.setVisibleView=function(t){ub.render||_.each(ub.views,function(e){e!==t?ub.render||(ub[e+"_view"].visible=!1):ub[e+"_view"].visible=!0})},window.ub.render_frames=function(){ub.data.rosterInitialized||ub.status.render.getRenderStatus()&&(ub.renderer.render(ub.stage),requestAnimationFrame(ub.render_frames))},window.ub.setup_views=function(){_.each(ub.views,function(e){var t=e+"_view";ub.objects[t]={}})},ub.exportSettings=function(){var e=ub.current_material.material.type;return ub.current_material.settings[e].preview=ub.getThumbnailImage("front_view"),ub.current_material.settings},ub.data.getTeamColorObjByIndex=function(e){_colorsUsed=ub.data.colorsUsed,n=_.find(_colorsUsed,{teamColorID:e});var t=ub.funcs.getColorObjByHexCode(n.hexCode);if(void 0===t){var i=ub.funcs.getMaterialOptionSettingsObject("Locker Tag"),n=util.decimalToHex(i.color);t=ub.funcs.getColorObjByHexCode(n)}return t},ub.funcs.getValidApplicationTypes=function(e){var t=[],i=e.application,n=!ub.funcs.isSocks();return 1!==i.hasLogo&&!ub.funcs.isSublimated()||t.push("logo"),(1===i.hasNumber||ub.funcs.isSublimated()&&n)&&t.push("number"),1!==i.hasPlayerName&&!ub.funcs.isSublimated()||t.push("player_name"),1!==i.hasTeamName&&!ub.funcs.isSublimated()||t.push("team_name"),1!==i.hasEmbellishment&&!ub.funcs.isSublimated()||t.push("embellishments"),t},ub.funcs.getColorObjArrayByCodes=function(e,t){var n=[];return _.each(e,function(e,t){var i=ub.funcs.getColorByColorCode(e);n.push(i)}),n},ub.funcs.isSublimated=function(){return"sublimated"===ub.current_material.material.uniform_application_type},ub.funcs.moveToExtra=function(e){(ub.funcs.isCurrentSport("Compression (Apparel)")||ub.funcs.isCurrentSport("Tech-Tee (Apparel)")||ub.funcs.isCurrentSport("Baseball")&&ub.funcs.isSublimated())&&("Body"!==e.layer&&"Back Body"!==e.layer||(e.layer="Extra"))},ub.data.convertDefaultApplications=function(){if(void 0===ub.temp&&0===_.size(ub.current_material.settings.applications)){var e=ub.data.applications_transformed_one_dimensional;_.each(e,function(f){ub.funcs.moveToExtra(f),_.each(f.views,function(e){var t=_.find(ub.data.accents.items,{id:parseInt(e.application.accents)}),n=e.application.colors.split(","),i=[],a=[],o=_.find(ub.data.fonts,{id:e.application.defaultFont}),r=e.application.fontSizes.split(","),s={};if("Mascot"===f.name&&1===e.application.isFlipped&&(e.application.flip=1),"logo"!==f.type&&"mascot"!==f.type&&"free"!==f.type&&void 0!==e.application){s={},_.each(t.layers,function(e,t){if(void 0!==n[t-1]){var i=ub.funcs.getColorByColorCode(n[t-1]).hex_code;e.default_color=i}}),i=_.map(n,function(e){return ub.funcs.getColorByColorCode(e)}),void 0===o&&ub.utilities.warn("Invalid Font ID detected for #"+f.id+" (font ID: "+e.application.defaultFont+")");var l=ub.data.getPixelFontSize(o.id,r[0],e.perspective,{id:f.id});if(s={accent_obj:t,application_type:f.type,application:f,code:f.id,colorArrayText:n,color_array:JSON.parse(JSON.stringify(i)),font_obj:o,font_size:parseFloat(r[0]),scaleXOverride:parseFloat(r[1]),scaleYOverride:parseFloat(r[2]),pixelFontSize:l.pixelFontSize,object_type:"text object",text:e.application.defaultText,type:f.type,verticalText:e.application.verticalText,angle:1===e.application.rotatedTailsweep?"rotated":"straight",validApplicationTypes:ub.funcs.getValidApplicationTypes(e)},"1"===e.application.id&&ub.funcs.isCurrentSport("Baseball")){var c="straight";if(1===e.application.rotatedTailsweep&&(c="rotated"),""!==e.application.tailsweeps){var u=ub.funcs.getTailSweepByID(e.application.tailsweeps);if(void 0!==u){c="straight";1===e.application.rotatedTailsweep&&(c="rotated"),s.tailsweep={id:parseInt(u.id),code:u.code,thumbnail:u.code+".png",length:1,angle:c}}}}}if("mascot"===f.type&&void 0!==e.application){var p=e.application.defaultMascot,d=_.find(ub.data.mascots,{id:p});n=e.application.colors.split(",");s={},_.each(d.layers_properties,function(e,t){if(void 0!==n[t-1]){ub.funcs.getColorByColorCode(n[t-1]).hex_code;e.default_color=n[t-1]}}),a=_.map(n,function(e){return ub.funcs.getColorByColorCode(e)}),s={application_type:f.type,application:f,code:f.id,color_array:a,colorArrayText:n,size:parseFloat(r[0]),font_size:parseFloat(r[0]),scaleXOverride:parseFloat(r[1]),scaleYOverride:parseFloat(r[2]),mascot:d,object_type:"mascot",type:f.type,validApplicationTypes:ub.funcs.getValidApplicationTypes(e)}}"free"===f.type&&void 0!==e.application&&(s={},s={application_type:f.type,application:f,code:f.id,type:f.type,validApplicationTypes:ub.funcs.getValidApplicationTypes(e),status:"off"}),s.configurationSource="Default",ub.current_material.settings.applications[parseInt(f.id)]=s})}),ub.funcs.initzIndex()}},ub.funcs.colorArrayFix=function(){_.each(ub.current_material.settings.applications,function(e){"mascot"!==e.type&&"free"!==e.type&&(e.color_array=_.map(e.colorArrayText,function(e){return ub.funcs.getColorByColorCode(e)}))})},ub.funcs.initzIndex=function(){var t=1;_.each(ub.current_material.settings.applications,function(e){e.zIndex=t,t+=1})},ub.funcs.setupTempPiping=function(){},ub.funcs.applicationObjHasCustomArtwork=function(e){var t=ub.funcs.getApplicationSettings(e);return void 0!==t.customFilename&&""!==t.customFilename&0<t.customFilename.length},ub.funcs.updateArtworkRequest=function(e,t){delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({url:ub.endpoints.getFullUrlString("updateArtworkRequest"),type:"POST",dataType:"json",data:JSON.stringify(e),crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){t(e)}})},ub.funcs.approveRejectArtwork=function(e,t){var i={artworks:t,note:"Click the approve or reject button for the custom artwork request so that we can adjust the mascot if it was rejected or proceed to the order processing if everthing is ok. You can use the notes field to enter your comment to give the reason why you rejected the processed mascot."},n=ub.utilities.buildTemplateString("#m-car-approve-dialog",i),o=bootbox.dialog({title:"Approve / Reject Artwork",message:n,size:"large"});o.init(function(){$("span.approve").unbind("click"),$("span.approve").on("click",function(){var e=$(this).data("code");$('span.btn[data-code="'+e+'"]').removeClass("active"),$(this).addClass("active")}),$("span.reject").unbind("click"),$("span.reject").on("click",function(){var e=$(this).data("code");$('span.btn[data-code="'+e+'"]').removeClass("active"),$(this).addClass("active")}),$("span.btn.cancel").unbind("click"),$("span.btn.cancel").on("click",function(){o.modal("hide")}),$("span.btn.submit").unbind("click"),$("span.btn.submit").on("click",function(){o.modal("hide"),_artworksField=JSON.parse(e.artworks),e.item="test",e.user_id=ub.user.id;var a=[];$("td.approve-reject").find("span.btn.active").each(function(e){var t=$(this).data("code"),i=$(this).data("state"),n=_.find(_artworksField,{code:t.toString()});void 0!==n&&(n.approved="approve"===i?"1":"0","reject"===i&&(n.user_rejected="1"),n.user_notes=$('textarea[data-code="'+t+'"]').val(),a.push(n))}),e.artworks=JSON.stringify(a),ub.data.artworks=e,$("span.approve-reject-artwork-btn").hide(),ub.funcs.initOrderProcess()})})},ub.funcs.initGuide=function(){ub.data.hasProcessedArtworks?($("span.approve-reject-artwork-btn").show(),$("div#order-status").html("Artwork Processed, please review and approve or reject."),$("div#order-status").show(),$("div#order-status").attr("data-intro","This order has its artwork ready for your review."),$("div#order-status").attr("data-position","right"),$("span.approve-reject-artwork-btn").attr("data-step","2"),$("span.approve-reject-artwork-btn").attr("data-position","right"),$("span.approve-reject-artwork-btn").attr("data-intro","After reviewing the mascots, please click here to approve or reject, so we can make the necessary changes or if you approve we can submit this order for processing."),introJs().start()):console.log("No Processed Artworks...")},ub.funcs.customArtworkRequestCheck=function(r){ub.funcs.getOrdersWItems(function(e){var t=!1;if(void 0!==e.order_info.artworks[0]){var i=e.order_info.artworks[0],n=JSON.parse(i.artworks);if(t=!0,ub.funcs.applicationObjHasCustomArtwork(r.code)){var a=_.find(n,{code:r.code});if(void 0!==a&&"number"==typeof parseInt(a.mascot_id)){var o=ub.funcs.getMascotByID(a.mascot_id);ub.data.hasProcessedArtworks=t,ub.config.orderArtworkStatus="artwork processed",r.mascotOld=r.mascot,r.mascot=o,r.preview=!0,ub.funcs.update_application_mascot(r.application,o),$("span.approve-reject-artwork-btn").fadeIn(),$("span.approve-reject-artwork-btn").unbind("click"),$("span.approve-reject-artwork-btn").on("click",function(){ub.funcs.approveRejectArtwork(i,n)}),ub.funcs.initGuide()}}}})},ub.loadSettings=function(e){ub.current_material.settings=e;var t=ub.current_material.material.type,o=!1,r=!1;ub.current_material.settings.styles_pdf=null!==ub.current_material.material.styles_pdf?ub.current_material.material.styles_pdf:"",void 0!==ub.config.savedDesignInfo&&ub.config.savedDesignInfo.frontBodyOverride&&"upper"===ub.current_material.material.type&&(o="object"==typeof ub.current_material.settings[t]["Front Body"],r="object"==typeof ub.current_material.settings[t].Body,ub.config.hiddenBody&&r&&!o&&(ub.current_material.settings[t]["Front Body"]=JSON.parse(JSON.stringify(ub.current_material.settings[t].Body)),ub.current_material.settings[t]["Front Body"].code="front_body"),delete ub.current_material.settings[t].Body),void 0!==ub.team_colors&&0<ub.team_colors.length&&(ub.current_material.settings=ub.prepareForTeamStoresMaterialOptions(ub.current_material.settings));var s="";_.each(ub.current_material.settings[t],function(e){if("highlights"!==e.setting_type&&"shadows"!==e.setting_type&&"mesh_highlights"!==e.setting_type&&"mesh_shadows"!==e.setting_type&&"static_layer"!==e.setting_type&&void 0!==e.code)if(ub.data.skipTeamColorProcessing.shouldSkip(ub.current_material.material.uniform_category,e.code))void 0!==e.code&&ub.utilities.info(e.code.toTitleCase()+" layer detected, skipping add to Team Colors...");else{if(void 0!==e.code){var t=_.find(ub.current_material.materials_options,{name:e.code.toTitleCase()});if(void 0===t)return;var i=parseInt(t.team_color_id);e.team_color_id=i;var n=parseInt(t.allow_pattern);e.has_pattern=n,1===e.has_pattern&&(null!==t.pattern_properties&&""!==t.pattern_properties?(void 0!==e.pattern&&""!==e.pattern.pattern_id||void 0!==t.pattern_properties&&0!==t.pattern_properties.length&&(e.pattern=ub.funcs.getPatternObjectFromMaterialOption(t),void 0!==ub.team_colors&&0<ub.team_colors.length&&(e.pattern=ub.prepareForTeamStoresPatterns(e.pattern))),void 0===e.pattern&&(e.pattern=ub.funcs.getPatternObjectFromMaterialOptionBlank(t)),s+=e.pattern.pattern_id+" set for "+t.name+"\n"):void 0===e.pattern&&(s+="No Default Pattern is set for "+t.name+" using Blank.\n",e.pattern=ub.funcs.getPatternObjectFromMaterialOptionBlank(t)))}if(ub.change_material_option_color16(e.code,e.color),void 0!==e.color){var a=e.color.toString(16),o=util.padHex(a,6),r=e.code.toTitleCase();void 0===ub.data.materialOptionWithLimitedColors.getLimitedColorSet(r)&&"Extra"!==r?(ub.data.colorsUsed[o]={hexCode:o,parsedValue:util.decimalToHex(e.color,6),teamColorID:i},"000000"===o&&ub.utilities.errorWithCode(ub.errorCode.namesDontMatch,e.code)):"Extra"===r?ub.utilities.info(r+" layer detected, skipping add to Team Colors..."):ub.utilities.info(r+" has a different color set, skipping add to Team Colors...")}if(void 0!==e.gradient&&void 0!==e.gradient.gradient_obj&&ub.generate_gradient(e.gradient.gradient_obj,e.code),void 0!==e.pattern&&void 0!==e.pattern.pattern_obj){if("Blank"===e.pattern.pattern_obj.name)return;ub.generate_pattern(e.code,e.pattern.pattern_obj,e.pattern.opacity,e.pattern.position,e.pattern.rotation,e.pattern.scale)}}}),ub.utilities.info(""),ub.utilities.info("----- Patterns -----"),ub.utilities.info(s),ub.utilities.info("--------------------"),void 0===ub.temp&&ub.data.convertDefaultApplications(),ub.dataPatches.run(),ub.funcs.showLocations();void 0!==ub.team_colors&&0<ub.team_colors.length&&(ub.current_material.settings.applications=ub.prepareForTeamStoresApplications(ub.current_material.settings.applications)),_.each(ub.current_material.settings.applications,function(e){if(void 0===e.originalSize&&(e.originalSize=e.font_size),void 0!==ub.config.savedDesignInfo&&ub.config.savedDesignInfo.frontBodyOverride&&"upper"===ub.current_material.material.type&&ub.config.hiddenBody&&r&&!o&&"Body"===e.application.layer&&(e.application.layer="Front Body"),void 0===e.patternID){var t,i=0;(e=ub.funcs.prepBackendPatternSettings(e)).withPattern&&null!==e.patternID&&(t=_.find(ub.data.patterns.items,{id:e.patternID}),_.contains(ub.uiData.patternSliderRange.forCalibration,t.name)&&(i=ub.uiData.patternSliderRange.adjustedStart,e.patternConfigFromBackend.position.y+=i),ub.funcs.changePatternFromBackend(e,e.patternID,e.patternConfigFromBackend)),void 0!==ub.config.savedDesignInfo&&void 0!==e.pattern_settings&&(t=_.find(ub.data.patterns.items,{id:e.pattern_obj.id}),_.contains(ub.uiData.patternSliderRange.forCalibration,t.name)&&(i=ub.uiData.patternSliderRange.adjustedStart,e.pattern_settings.position.y+=i))}if((e=ub.funcs.prepareBackendOpacitySettings(e)).withOpacity&&ub.funcs.changeMascotOpacityFromBackend(e,e.opacityConfig),"mascot"!==e.type&&"logo"!==e.type&&"free"!==e.type){_.contains(["player_name","front_number","team_name","back_number","shoulder_number","tv_number","sleeve_number","numbers_extra"],e.type)&&WebFont.load({custom:{families:[e.font_obj.name]},active:function(){ub.create_application(e,void 0),"off"===e.status&&(ub.utilities.info("Disabled application detected: #"+e.code),ub.funcs.toggleApplication(e.code,"off"))}})}if("embellishments"===e.type&&(ub.funcs.update_application_embellishments(e.application,e.embellishment),"order"===ub.page&&ub.funcs.customArtworkRequestCheck(e)),"mascot"===e.type){var n=ub.funcs.getPrimaryViewObject(e.application),a=n.application.inksoftDesignID;void 0!==n&&(void 0!==a&&0<a.length?window.is.isMessage(a,e.code,!0):ub.funcs.processMascots(e))}"logo"===e.type&&ub.update_application_logo(e)}),(ub.funcs.isCurrentSport("Baseball")||ub.funcs.isCurrentSport("Fastpitch"))&&null!==ub.current_material.pipings&&(ub.funcs.processPipings(ub.current_material.material.pipings),0<_.size(ub.current_material.settings.pipings)&&ub.funcs.processSavedPipings()),null!==ub.current_material.material.random_feed&&(ub.funcs.processRandomFeeds(ub.current_material.material.random_feed),0<_.size(ub.current_material.settings.randomFeeds)&&ub.funcs.processSavedRandomFeeds()),ub.funcs.isSocks()&&"Hockey Sock"!==ub.config.blockPattern&&ub.funcs.activateLeftView()},ub.funcs.processMascots=function(e){ub.funcs.update_application_mascot(e.application,e.mascot),"order"===ub.page&&ub.funcs.customArtworkRequestCheckOrders(e),"saved-design"===ub.page&&ub.funcs.customArtworkRequestCheckSavedDesign(e)},ub.funcs.activateLeftView=function(){$('a.footer-buttons.change-view[data-view="left"]').trigger("click")},ub.init_settings_object=function(){ub.current_material.containers={};var n=ub.current_material.settings;n.team_colors=[],n.uniform_category=ub.current_material.material.uniform_category,n.upper={},n.lower={preview:""},n.upper={preview:""},ub.current_material.containers.files={},ub.current_material.containers.files.logos=[],n.applications={};var e=ub.current_material.material,t=ub.current_material.materials_options,a=e.type;n[a].material_id=e.id,n[a].code=e.code,ub.current_material.containers[a]={},ub.current_material.containers[a].application_containers={},_.each(t,function(e){var t="",i="";t=e.name,n[a][t]={},ub.current_material.containers[a][t]={},ub.current_material.containers[a][t].pattern_containers={},(i=n[a][t]).setting_type=e.setting_type,i.code=t.toCodeCase(),i.color="",i.gradient_is_above_pattern=!1,i.has_gradient=!1,i.has_pattern=!1,i.pattern_containers={},i.gradient={gradient_obj:void 0,gradient_id:"",scale:0,rotation:0,opacity:0,position:{x:0,y:0},color_stops:[{value:0,color:""},{value:1,color:""}]},i.pattern={pattern_id:"",pattern_obj:void 0,scale:0,rotation:0,opacity:0,position:{x:0,y:0}},i.fabric={fabric_id:""},i.logo={filename:"",rotation:0,scale:0,position_id:0,position:{x:0,y:0}},i.team_name={text:"",font:{name:"",font_size:"",font_style:""},colors:[{color:"",opacity:"",width:""},{color:"",opacity:"",width:""},{color:"",opacity:"",width:""}],rotation:0,scale:0,position_id:0,position:{x:0,y:0},has_texture:!1,has_pattern:!1,texture_is_above_pattern:!1,gradient:{gradient_id:"",scale:0,rotation:0,opacity:0,position:{x:0,y:0},color_stops:[{value:0,color:""},{value:1,color:""}]},pattern:{pattern_id:"",scale:0,rotation:0,opacity:0,position:{x:0,y:0}}},i.number={text:"",font:{name:"",font_size:"",font_style:""},colors:[{color:"",opacity:"",width:""},{color:"",opacity:"",width:""},{color:"",opacity:"",width:""}],rotation:0,scale:0,position_id:0,position:{x:0,y:0},has_texture:!1,has_pattern:!1,texture_is_above_pattern:!1,gradient:{gradient_id:"",scale:0,rotation:0,opacity:0,position:{x:0,y:0},color_stops:[{value:0,color:""},{value:1,color:""}]},pattern:{pattern_id:"",scale:0,rotation:0,opacity:0,position:{x:0,y:0}}},i.player_name={text:"",font:{name:"",font_size:"",font_style:""},colors:[{color:"",opacity:"",width:""},{color:"",opacity:"",width:""},{color:"",opacity:"",width:""}],rotation:0,scale:0,position_id:0,position:{x:0,y:0},has_texture:!1,has_pattern:!1,texture_is_above_pattern:!1,gradient:{gradient_id:"",scale:0,rotation:0,opacity:0,position:{x:0,y:0},color_stops:[{value:0,color:""},{value:1,color:""}]},pattern:{pattern_id:"",scale:0,rotation:0,opacity:0,position:{x:0,y:0}}},i.team_roster=[]})},ub.funcs.showViewports=function(){$("#main_view").fadeIn()},window.ub.setup_material_options=function(){ub.fabric.fabricCollections=[],ub.current_material.options_distinct_names={},ub.maxLayers=0,ub.utilities.info(" "),_.each(ub.views,function(p){var e=_.where(ub.current_material.material.options,{perspective:p}),d=ub.objects[p+"_view"],f=0;_.each(e,function(e,t){f+=1;var i=e.name.toCodeCase(),n=ub.pixi.new_sprite(e.material_option_path);d[i]=n;var a=d[i];if("highlights"!==(a.name=i)&&"shadows"!==i||ub.fabric.fabricCollections.push({code:i,name:i+"_"+e.layer_level,id:e.layer_level,perspective:e.perspective,obj:n}),a.spriteID=i+"_"+e.layer_level,a.zIndex=e.layer_level*ub.zIndexMultiplier*-1,a.originalZIndex=2*e.layer_level*-1,ub.funcs.isSocks()&&("back_tab"===i&&(a.zIndex=ub.data.backTabLayer,a.originalZIndex=ub.data.backTabLayer),"prolook"===i&&(a.zIndex=ub.data.prolookLayer,a.originalZIndex=ub.data.prolookLayer)),"mesh_highlights"===e.setting_type?a.blendMode=PIXI.BLEND_MODES.SCREEN:"mesh_shadows"===e.setting_type&&(a.blendMode=PIXI.BLEND_MODES.MULTIPLY),"highlights"===e.setting_type)a.blendMode=PIXI.BLEND_MODES.SCREEN,a.layerID=e.layer_level;else if("shadows"===e.setting_type)a.layerID=e.layer_level,a.blendMode=PIXI.BLEND_MODES.MULTIPLY;else{var o="";null===e.default_color?o="B":""===(o=e.default_color)&&(o="B"),ub.data.excludedColors.isExcluded(ub.config.sport,ub.config.uniform_application_type,o)&&ub.utilities.error(o+" is turned off for football / tackle twill uniforms");var r=_.find(ub.data.colors,{color_code:o}),s=parseInt(r.hex_code,16),l=i;"object"!=typeof ub.current_material.options_distinct_names[i]&&(ub.current_material.options_distinct_names[i]={setting_type:e.setting_type,modifier_label:l,material_option:i,default_color:r.hex_code,available_colors:JSON.parse(e.colors),layer_order:e.layer_level},ub.data.defaultUniformStyle[i]={name:i,default_color:s,colorObj:r})}if("shape"===e.setting_type){var c=ub.pixi.new_sprite(e.material_option_path);c.name=i+"_mask",c.zIndex=a.zIndex+-1,c.blendMode=PIXI.BLEND_MODES.MULTIPLY;var u=_.clone(ub.current_material.options_distinct_names[i]);u.setting_type="static_layer",ub.current_material.options_distinct_names[c.name]=u,d[c.name]=c,ub[p+"_view"].addChild(c)}ub[p+"_view"].addChild(a)}),ub.utilities.info("Layer Count for "+p.toTitleCase()+" View: "+f),f>ub.maxLayers&&(ub.maxLayers=f),ub.updateLayersOrder(ub[p+"_view"])}),ub.utilities.info(" "),$("select#parts_dropdown").html("");var t="";_.each(ub.current_material.options_distinct_names,function(e){t!==e.material_option&&($("select#parts_dropdown").append('<option value="'+e.material_option+'">'+e.material_option.replace("_"," ").toUpperCase()+"</option>"),t=e.material_option)}),$("select#parts_dropdown").val("body")},ub.funcs.getCustomizations=function(e){var t="";"order"===window.ub.page?t=window.ub.config.api_host+"/api/order/items/"+e:"saved-design"===window.ub.page&&(t=window.ub.config.api_host+"/api/saved_design/"+e),$.ajax({url:t,type:"GET",dataType:"json",crossDomain:!0,contentType:"application/json",success:function(e){"order"===window.ub.page?(_settings=JSON.parse(e.order[0].builder_customizations),console.log("response (from Get Customizations) ---- "),console.log(e)):"saved-design"===window.ub.page&&(_settings=JSON.parse(e.saved_design.builder_customizations)),ub.loadSettings(_settings)}})},ub.init_style=function(){void 0!==window.ub.temp?ub.funcs.getCustomizations(window.ub.temp):ub.loadDefaulUniformStyle(ub.data.defaultUniformStyle)},ub.loadDefaulUniformStyle=function(e){_.each(e,function(e){var t=ub.current_material.material.type,i=_.find(ub.current_material.settings[t],{code:e.name});i.color=e.default_color,i.colorObj=e.colorObj}),ub.loadSettings(ub.current_material.settings)},ub.change_material_option_color=function(i,e){var n=parseInt(e,16);ub.save_color(i,n),_.each(ub.views,function(e){var t=ub.objects[e+"_view"];_.has(t,i)&&(t[i].tint=n)})},ub.change_material_option_color16=function(i,e){var n=e;_.each(ub.views,function(e){var t=ub.objects[e+"_view"];_.has(t,i)&&(t[i].tint=n)})},ub.applyMaterial=function(e){var i=new PIXI.RenderTexture(ub.renderer,ub.dimensions.width,ub.dimensions.height);i.render(ub.pattern_view);var n={};_.each(["front","back","left","right"],function(e){var t=e+"_view";n[e]=new PIXI.Sprite(i),void 0!==ub.objects[t].pattern&&ub[t].removeChild(ub.objects[t].pattern),n[e].mask=ub.objects[t].shape_mask,ub.objects[t].pattern=n[e],ub[t].addChild(n[e]),ub.updateLayersOrder(ub[t])})},ub.getThumbnailImage=function(e,t){ub.funcs.resetHighlights();var i=new PIXI.RenderTexture(ub.renderer,1e3,1100);return i.render(ub[e]),i.getImage().src},ub.getThumbnailImage2=function(e,t){var i=new PIXI.RenderTexture(ub.renderer,1e3,1100);return i.render(ub[e]),i.getImage().src},ub.showThumbnail=function(){var e="<img src ='"+ub.getThumbnailImage2("front_view")+"' />";ub.showModalTool(e)},ub.showThumbnail2=function(){var e="<img src ='"+ub.getThumbnailImage2(ub.active_view+"_view")+"' />";ub.showModalTool(e)},ub.showThumbnail3=function(){var e="Current: <img width='388px;' src ='"+ub.getThumbnailImage2(ub.active_view+"_view")+"' />",t="Saved Thumbnail: <img src='"+ub.current_material.material.thumbnail_path+"'/>";ub.showModalTool(e+t)},ub.refresh_thumbnails=function(){"Edge"===ub.VERSION&&(_.each(ub.views,function(e){var t=e+"_view";$("a#view_"+e+" > img").attr("src",ub.getThumbnailImage(t))}),$("a#view_pattern > img").attr("src",ub.getThumbnailImage("pattern_view")))},window.ub.initialize(),t("#materials_panel"),$("div#right-sidebar > a.sidebar-buttons").on("click",function(e){return $("#arrow_design_sets").remove(),null!==ub.active&&(filename=ub.config.host+"/images/sidebar/"+ub.active.data("filename")+".png",ub.active.removeClass("active_button")),ub.active=$(this),filename=ub.config.host+"/images/sidebar/"+ub.active.data("filename")+"-on.png",ub.active.addClass("active_button"),t("#"+ub.active.data("filename")+"_panel"),!1}),$("div#right-sidebar > a.sidebar-buttons").hover(function(e){var t=$(e.currentTarget);t.is($("#right-sidebar > a.active_button")[0])||(t.removeClass("highlighter_off"),t.addClass("highlighter_on"))},function(e){var t=$(e.currentTarget);t.is($("#right-sidebar > a.active_button")[0])||(t.removeClass("highlighter_on"),t.addClass("highlighter_off"))}),$("div#left-sidebar > a.sidebar-buttons").hover(function(e){var t=$(e.currentTarget).attr("class").split(" ")[0];if(_.contains(["btn-new","btn-load","btn-compare","btn-save"],t)){if("btn-new"===t&&"close"===$("a."+t).data("status"))return;$("a."+t).removeClass("highlighter_off"),$("a."+t).addClass("highlighter_on")}},function(e){var t=$(e.currentTarget).attr("class").split(" ")[0];_.contains(["btn-new","btn-load","btn-compare","btn-save"],t)&&("new"!==$("a."+t).data("status")&&"btn-new"===t||($("a."+t).removeClass("highlighter_on"),$("a."+t).addClass("highlighter_off")))}),$("div#left-sidebar > a.sidebar-buttons").on("click",function(e){if($("#arrow_design_sets").remove(),"btn-new"===$(e.currentTarget).attr("class").split(" ")[0])if("new"===$("a.btn-new").data("status")){$("#main_view > canvas").hide(),$("#right-main-window > .options_panel").hide(),$("#right-sidebar > a").hide();$("#main_view").append("<div class='picker_container'></div>"),$("#left-main-window").css("overflow-y","scroll");$("a.btn-new").removeClass("highlighter_off"),$("a.btn-new").addClass("highlighter_on"),$("a.btn-new").data("status","close"),$("#right-main-window").css("background-color","#f8f8f8"),ub.display_gender_picker()}else{$("#main_view > canvas").fadeIn(),$("#right-main-window > .options_panel").fadeIn(),$("#right-sidebar > a").fadeIn(),$("#main_view > div.picker_container").remove(),$("#right-main-window > div.picker_container").remove(),$("#left-main-window").css("overflow-y","hidden");$("a.btn-new").removeClass("highlighter_off"),$("a.btn-new").addClass("highlighter_on"),$("a.btn-new").data("status","new"),$("#right-main-window").css("background-color","#ffffff"),$("#left-main-window").css("background-color","#ffffff"),t("#materials_panel")}return!1}),ub.bind_handler_category_picker=function(){$("div.sports_categories").hover(function(e){$("div.sports_categories").removeClass("sports_categories_highlighted"),$(e.currentTarget).addClass("sports_categories_highlighted")},function(e){$(e.currentTarget).removeClass("sports_categories_highlighted")}),$("div.sports_categories").click(function(e){void 0!==ub.ui.active_element&&ub.ui.active_element.removeClass("sports_categories_activated"),ub.ui.active_element=$(e.currentTarget),ub.ui.active_element.addClass("sports_categories_activated");var t=ub.ui.active_element.data("category"),i=ub.ui.active_element.data("gender");ub.display_design_sets(t,i,"Upper")})},ub.bind_handler_design_set_picker=function(){$("div.style_entry").hover(function(e){$("div.style_entry").removeClass("style_entry_highlighted"),$(e.currentTarget).addClass("style_entry_highlighted")},function(e){$(e.currentTarget).removeClass("style_entry_highlighted")}),$("div.style_entry").click(function(e){if(ub.ui.active_style_element=$(e.currentTarget),"design_sets"===ub.ui.active_style_element.data("picker-type")){var t,i="",n=ub.ui.active_style_element.data("option");t=ub.ui.active_style_element.data("id"),i="All"===n?ub.config.host+"/builder/"+t:ub.config.host+"/builder/0/"+t,ub.ui.current_design_set=_.find(ub.design_sets,{id:t}),window.location=i}else{var a=ub.ui.active_style_element.data("category-name"),o=ub.ui.active_style_element.data("gender").toLowerCase();ub.display_design_sets(a,o,"All"),$("#active_sports_category").text(a.toUpperCase()+" > "+o.toUpperCase())}}),$("div.gender_picker").click(function(e){var t=$(e.currentTarget).data("gender");ub.display_categories(t)}),$("div.gender_picker").hover(function(e){$("div.gender_picker").removeClass("gender_picker_highlighted"),$(e.currentTarget).addClass("gender_picker_highlighted")},function(e){$(e.currentTarget).removeClass("gender_picker_highlighted")})},ub.bind_handlers=function(){$(".change-color").on("click",function(e){var t=$(this).data("color"),i=$(this).data("target"),n=$(this).data("panel"),a=$(this);window.ce=a;$(window.ce).data("selection");a.parent().data("active_color",t),ub.change_color(i,t,n);var o="/images/sidebar/";o+="#ffffff"===t?"highlighter-dark.png":"highlighter_1.png"}),ub.change_color=function(e,t,i){var n=t;"#ffffff"===n&&(n="#ebebeb");var a=parseInt(n.substring(1),16);"body"===i?(ub.change_material_option_color("body",n.substring(1)),void 0!==ub.objects.left_view.pattern&&(ub.objects.front_view.pattern.visible=!1,ub.objects.back_view.pattern.visible=!1,ub.objects.left_view.pattern.visible=!1,ub.objects.right_view.pattern.visible=!1),"object"==typeof ub.objects.pattern_view.gradient_layer&&("object"==typeof ub.objects.front_view.gradient&&(ub.objects.front_view.gradient.visible=!1),"object"==typeof ub.objects.back_view.gradient&&(ub.objects.back_view.gradient.visible=!1),"object"==typeof ub.objects.left_view.gradient&&(ub.objects.left_view.gradient.visible=!1),"object"==typeof ub.objects.right_view.gradient&&(ub.objects.right_view.gradient.visible=!1))):"patterns"==i?("object"==typeof ub.objects.pattern_view.gradient_layer&&(ub.objects.pattern_view.gradient_layer.visible=!1),ub.objects.pattern_view[e].tint=a,ub.applyMaterial(i),ub.objects.front_view.pattern.visible=!0,ub.objects.back_view.pattern.visible=!0,ub.objects.left_view.pattern.visible=!0,ub.objects.right_view.pattern.visible=!0):ub.change_material_option_color(e,n.substring(1)),$('[rel="popover"]').popover("hide"),ub.refresh_thumbnails()},$(".change-pattern").on("click",function(e){var t=$(this).data("pattern"),i=$(this).data("target-pattern"),n=$(this).data("panel"),a=$(this);window.ce=a;$(window.ce).data("selection");a.parent().data("active_pattern",t),ub.change_pattern(i,t,n),$("button[data-target-pattern='"+i+"']").html("");var o,r="/images/sidebar/";o="<img src = '"+(r+="highlighter_1.png")+"'>",$(this).html(o)}),ub.change_pattern=function(u,a,e){var o=_.find(ub.data.patterns.items,{code:a}),l=_.clone(o),t=$("[data-group=patterns][data-option="+u+"]").find("div.layers_container");t.html("");var r="";0<o.layers.length&&(r="<br />Layers<br /><br />"),_.each(o.layers,function(e,t){var i=e.default_color,n=e.default_color;e.filename;r+=ub.create_pattern_color_picker(t,i,n,u,o.code)}),r+="<br />",r+="Rotation: <span class='pattern_slider_label' data-target='pattern' data-layer='"+u+"' data-label='rotation' data-id='"+u+"'>100</span>%<br />",r+="<div id='rotation_pattern_slider_"+u+"' class='pattern_slider pattern_rotation_slider'></div>",r+="<br />",r+="Opacity: <span class='pattern_slider_label' data-target='pattern' data-layer='"+u+"' data-label='opacity' data-id='"+u+"'>100</span>%<br />",r+="<div id='opacity_pattern_slider_"+u+"' class='pattern_slider'></div>",r+="<br />",r+="Scale: <span class='pattern_slider_label' data-target='pattern' data-layer='"+u+"' data-label='scale' data-id='"+u+"'>100</span>%<br />",r+="<div id='scale_pattern_slider_"+u+"' class='pattern_slider'></div>",r+="<br />",r+="Position X: <span class='pattern_slider_label' data-target='pattern' data-layer='"+u+"' data-label='position_x' data-id='"+u+"'>100</span>%<br />",r+="<div id='position_x_slider_"+u+"' class='pattern_slider'></div>",r+="<br />",r+="Position Y: <span class='pattern_slider_label' data-target='pattern' data-layer='"+u+"' data-label='position_y' data-id='"+u+"'>100</span>%<br />",r+="<div id='position_y_slider_"+u+"' class='pattern_slider'></div>",r+="<hr />",r+="<div id='angle_pattern_slider_"+u+"' class='pattern_slider_angle'></div>",r+="<hr />",r+="<button style='width: 100%;' id='update-pattern-"+u+"' data-target='"+u+"' data-pattern='"+o.code+"'>Update Pattern</button>",t.html(r),$("input.pattern_"+u).ubColorPicker({target:u,type:"pattern"});var i=_.pluck(l.color_layers,"value"),n=[];_.each(i,function(e){n.push(100*e)});var s=$("div#rotation_pattern_slider_"+u);s.roundSlider({values:[0],min:0,max:620,gap:0,width:5,handleSize:"+14",startAngle:90,change:function(e,t){var i=parseInt(s.find("span.edit").html());$('span[data-target="pattern"][data-label="rotation"][data-layer="'+u+'"]').text(i),$("button#update-pattern-"+u).click()}});$("#opacity_pattern_slider_"+u).limitslider({values:[100],min:0,max:100,gap:0,change:function(e,t){var i=$(this).limitslider("values")[0];$('span[data-target="pattern"][data-label="opacity"][data-id="'+u+'"]').text(i),$("button#update-pattern-"+u).click()}});$("#scale_pattern_slider_"+u).limitslider({values:[100],min:0,max:200,gap:0,change:function(e,t){var i=$(this).limitslider("values")[0];$('span[data-target="pattern"][data-label="scale"][data-id="'+u+'"]').text(i),$("button#update-pattern-"+u).click()}});$("#position_x_slider_"+u).limitslider({values:[50],min:0,max:100,gap:0,change:function(e,t){var i=$(this).limitslider("values")[0];$('span[data-target="pattern"][data-label="slider_x"][data-id="'+u+'"]').text(i),$("button#update-pattern-"+u).click()}});$("#position_y_slider_"+u).limitslider({values:[50],min:0,max:100,gap:0,change:function(e,t){var i=$(this).limitslider("values")[0];$('span[data-target="pattern"][data-label="slider_y"][data-id="'+u+'"]').text(i),$("button#update-pattern-"+u).click()}}),$("button#update-pattern-"+u).click("click",function(e){var t=ub.current_material.material.type,i=u.toTitleCase(),s=ub.current_material.containers[t][i];s.pattern_containers={};var n=ub.data.views;_.each(n,function(e){s.pattern_containers[e]={};var t=s.pattern_containers[e];t.container=new PIXI.Container;var c=t.container;c.sprites={};var i=$("div#rotation_pattern_slider_"+u),n=parseInt(i.find("span.edit").html());c.rotation=n/100,container_rotation=c.rotation;n=$("div#scale_pattern_slider_"+u).limitslider("values")[0];var a=new PIXI.Point(n/100,n/100);c.scale=a,container_scale=c.scale,_.each(l.layers,function(e,t){$('[data-index="'+t+'"][data-target="'+u+'"]');c.sprites[t]=ub.pixi.new_sprite(e.filename);var i=c.sprites[t];i.zIndex=-1*e.layer_number,i.tint=parseInt(e.default_color,16),i.anchor.set(.5,.5);var n=$("input.pattern_"+u+'[data-index="'+t+'"]').val();7===n.length&&(n=n.substr(1,6)),i.tint=parseInt(n,16),c.addChild(i);var a=$("#opacity_pattern_slider_"+u).limitslider("values")[0];c.alpha=a/100;var o=$("#position_x_slider_"+u).limitslider("values")[0],r=$("#position_y_slider_"+u).limitslider("values")[0],s=ub.dimensions.width*(o/100),l=ub.dimensions.height*(r/100);c.position=new PIXI.Point(s,l),ub._temp=c,e.color=i.tint,e.container_position=c.position,e.container_opacity=c.alpha,e.container_rotation=container_rotation,e.container_scale=container_scale}),ub.updateLayersOrder(c);var o=e+"_view",r=ub.objects[o][u+"_mask"];void 0!==r&&(c.mask=r,c.name="pattern_"+u,"object"==typeof ub.objects[o]["pattern_"+u]&&ub[o].removeChild(ub.objects[o]["pattern_"+u]),c.position.set(c.position.x+7*ub.offset.x,c.position.y+7*ub.offset.y),ub.objects[o]["pattern_"+u]=c,ub[o].addChild(c),c.zIndex=r.zIndex+-1,ub.updateLayersOrder(ub[o]),c)}),ub.refresh_thumbnails(),ub.save_pattern(u,l,a)}),$("button#update-pattern-"+u).click()},$(".change-gradient").on("click",function(e){var t=$(this).data("gradient"),i=$(this).data("target-gradient"),n=$(this).data("panel"),a=$(this);window.ce=a;$(window.ce).data("selection");a.parent().data("active_gradient",t),ub.change_gradient(i,t,n),$("button[data-target-gradient='"+i+"']").html("");var o,r="/images/sidebar/";o="<img src = '"+(r+="highlighter_1.png")+"'>",$(this).html(o)})},ub.change_gradient=function(o,a,r){var s=_.find(ub.data.gradients.items,{code:a}),l={},e=(l=_.clone(s),$("[data-group=gradients][data-option="+o+"]").find("div.color_stops_container"));e.html("");var c="";if(0<s.color_stops.length&&(c="<br />Color Stops<br /><br />"),_.each(s.color_stops,function(e,t){var i=e.value,n=e.color;c+=ub.create_color_picker(t,i,n,o,s.code)}),"custom"===s.code){c+="<br />",c+="<div class='color_picker_container add_delete_color_stop'><button id='add_gradient_color_stop'><i class='fa fa-plus-circle'></i></button>&nbsp;<button id='delete_gradient_color_stop'><i class='fa fa-minus-circle'></i></button></div>"}c+="<div id='gradient_slider_"+o+"' class='gradient_slider'></div>",c+="<hr />",c+="<div id='angle_gradient_slider_"+o+"' class='gradient_slider_angle'></div>",c+="<hr />",c+="<button style='width: 100%;' id='update-gradient-"+o+"' data-target='"+o+"' data-gradient='"+s.code+"'>Update Gradient</button>",e.html(c),$("input.gradient_"+o).ubColorPicker({target:o,type:"gradient"});var t=_.pluck(l.color_stops,"value"),i=[];_.each(t,function(e){i.push(100*e)}),$("#gradient_slider_"+o).limitslider({values:i,min:0,max:100,gap:0,change:function(e,t){$("button#update-gradient-"+o).click()}}),$("#angle_gradient_slider_"+o).roundSlider({value:s.angle,min:0,max:360,startAngle:90,width:5,handleSize:"+14",change:function(e,t){$("button#update-gradient-"+o).click()}}),$("button#update-gradient-"+o).click("click",function(e){_.each(l.color_stops,function(e,t){var i="gradient_"+o.toLowerCase()+"_"+t,n=$('input[data-elid="'+i+'"]');$("#gradient_slider_"+o).find("span:eq("+t+")").css("background",n.val()),e.color=n.val();var a=$("#gradient_slider_"+o).limitslider("values")[t];a=Math.floor(a/10),a/=10,e.value=a}),l.angle=parseInt($("#angle_gradient_slider_"+o).find("span.edit").html()),ub.generate_gradient(l,o)}),"custom"===s.code&&($("#add_gradient_color_stop").on("click",function(){var e=_.find(ub.current_material.material.options,{name:window.util.toTitleCase(o)}),t=JSON.parse(e.colors)[l.color_stops.length+1];color_obj=_.find(ub.data.colors,{color_code:t});var i={id:l.color_stops.length+1,value:0,color:"#"+color_obj.hex_code};l.color_stops.push(i);var n=1/(l.color_stops.length-1);_.each(l.color_stops,function(e,t){e.value=t*n}),ub.change_gradient(o,a,r)}),$("#delete_gradient_color_stop").on("click",function(){if(2<l.color_stops.length){l.color_stops.pop();var i=1/(l.color_stops.length-1);_.each(l.color_stops,function(e,t){e.value=t*i}),ub.change_gradient(o,a,r)}})),$("button#update-gradient-"+o).click()},ub.create_mascot_color_picker=function(e,t,i,n,a){return"<div class='mascot_color_picker_container'><label class='color_stop_label'>"+(e+1)+".</label><input readonly='true' class='mascot_"+n+"' type='text' data-elid='mascot_"+n+"_"+e+"' data-index='"+e+"' data-target='"+n+"' data-value='"+t+"' data-mascot='"+a+"'  value='"+i+"'/></div>"},ub.create_pattern_color_picker=function(e,t,i,n,a){return"<div class='pattern_color_picker_container'><label class='color_stop_label'>"+(e+1)+".</label><input readonly='true' class='pattern_"+n+"' type='text' data-elid='pattern_"+n+"_"+e+"' data-index='"+e+"' data-target='"+n+"' data-value='"+t+"' data-pattern='"+a+"'  value='"+i+"'/></div>"},ub.create_color_picker=function(e,t,i,n,a){return"<div class='color_picker_container'><label class='color_stop_label'>"+(e+1)+".</label><input readonly='true' class='gradient_"+n+"' type='text' data-elid='gradient_"+n+"_"+e+"' data-index='"+e+"' data-target='"+n+"' data-value='"+t+"' data-gradient='"+a+"'  value='"+i+"'/></div>"},ub.bind_design_sets_tab_handlers=function(){$("button.button_tabs").click(function(e){$("button.button_tabs").css("background-color","#f8f8f8"),$("button.button_tabs").css("color","#353536");var t=$(e.currentTarget),i=t.data("category"),n=t.data("gender"),a=t.data("type");ub.display_design_sets(i,n,a)})},ub.bind_left_sidebar_tab_handlers=function(){$(".color_base").click(function(e){var t=$(this).data("option");$("div[data-group='colors']").css("display","none"),$("div[data-option='"+t+"']").show(100),$(".color_base").removeClass("tether_button");var i=$(this);$("body").append('<div id="arrow_design_sets" class="down_arrow">');var n=$("#arrow_design_sets"),a=new Tether({element:n,target:i,attachment:"top center",targetAttachment:"bottom center"});i.addClass("tether_button"),$(".down_arrow:not(.tether-element)").remove(),ub.tethers.modifiers=a}),$("div[data-group='colors']").hide(),$("div[data-option='body']").fadeIn("fast"),$(".gradient_base").click(function(e){var t=$(this).data("option");$("[data-group='gradients']").css("display","none"),$("div[data-option='"+t+"']").show(100),$(".gradient_base").removeClass("tether_button");var i=$(this);$("body").append('<div id="arrow_design_sets" class="down_arrow">');var n=$("#arrow_design_sets"),a=new Tether({element:n,target:i,attachment:"top center",targetAttachment:"bottom center"});i.addClass("tether_button"),$(".down_arrow:not(.gra-element)").remove(),ub.tethers.modifiers=a}),$("div[data-group='patterns']").hide(),$("div[data-group='gradients']").hide(),$("div[data-option='body']").fadeIn("fast"),$(".pattern_base").click(function(e){var t=$(this).data("option");$("[data-group='patterns']").css("display","none"),$("div[data-option='"+t+"']").show(100),$(".pattern_base").removeClass("tether_button");var i=$(this);$("body").append('<div id="arrow_design_sets" class="down_arrow">');var n=$("#arrow_design_sets"),a=new Tether({element:n,target:i,attachment:"top center",targetAttachment:"bottom center"});i.addClass("tether_button"),$(".down_arrow:not(.pattern-element)").remove(),ub.tethers.modifiers=a}),$("div[data-group='patterns']").hide(),$("div[data-group='gradients']").hide(),$("div[data-option='body']").fadeIn("fast")},ub.generate_gradient=function(e,n){ub.current_material.material.type;var t=document.createElement("canvas");t.width=ub.dimensions.width,t.height=ub.dimensions.height;var i,a=t.getContext("2d");if("radial"===e.code){i=a.createRadialGradient(250,250,20,250,250,100)}else i=a.createLinearGradient(0,22,0,410);_.each(e.color_stops,function(e){6===e.color.length&&(e.color="#"+e.color),i.addColorStop(e.value,e.color)}),a.fillStyle=i;var o=e.angle;a.fillRect(0,0,ub.dimensions.height,ub.dimensions.height);var r=t.toDataURL();a.clearRect(0,0,ub.dimensions.height,ub.dimensions.height),a.translate(t.width/2,t.height/2),a.rotate(o*Math.PI/180),a.translate(-t.width/2,-t.height/2),a.fillRect(0,0,ub.dimensions.height,ub.dimensions.height);var s=PIXI.Texture.fromCanvas(t),l={},c=new PIXI.Sprite(s);c.zIndex=1,"object"==typeof ub.objects.pattern_view.gradient_layer&&ub.pattern_view.removeChild(ub.objects.pattern_view.gradient_layer),ub.objects.pattern_view.gradient_layer=c,ub.pattern_view.addChild(ub.objects.pattern_view.gradient_layer),ub.updateLayersOrder(ub.pattern_view);_.each(["front","back","left","right"],function(e){var t=e+"_view";if(l[e]=new PIXI.Sprite(s),void 0!==ub.objects[t]["gradient_"+n]&&ub[t].removeChild(ub.objects[t]["gradient_"+n]),l[e].zIndex=1,"body"===n)l[e].mask=ub.objects[t].shape_mask;else{var i=ub.objects[t][n+"_mask"];if(void 0===i)return;l[e].mask=i,l[e].zIndex=i.zIndex}ub.objects[t]["gradient_"+n]=l[e],ub[t].addChild(l[e]),ub.updateLayersOrder(ub[t])}),ub.refresh_thumbnails();var u="url("+r+")",p=$("#gradient_slider_"+n),d=$("#angle_gradient_slider_"+n);p.find(".range_container").remove(),p.prepend('<div class="range_container"><div class="range"></div></div>').find("div.range").css("background-image",u);parseInt(d.find("span.edit").html());d.find("div.rs-bg-color").css({"background-image":u,"-webkit-transform":"rotate("+o+"deg)"}),ub.save_gradient(n,e,e.angle)},$("#view_pattern").hide(),$("button#toggle_pattern_preview").on("click",function(e){$("#view_pattern").toggle()}),ub.save_color=function(e,t){var i=ub.current_material.material.type,n=(ub.current_material.settings[i],_.find(ub.current_material.settings[i],{code:e}));return n.color=t,n},ub.save_gradient=function(e,t,i){var n=ub.current_material.material.type,a=(ub.current_material.settings[n],_.find(ub.current_material.settings[n],{code:e}));return a.gradient.gradient_obj=t,a.gradient.rotation=i,a},ub.save_pattern=function(e,t,i){var n=ub.current_material.material.type,a=(ub.current_material.settings[n],_.find(ub.current_material.settings[n],{code:e}));a.pattern.pattern_id=i,a.pattern.pattern_obj=t},ub.save_pattern_color=function(e,t,i){var n=ub.current_material.material.type;ub.current_material.settings[n];_.find(ub.current_material.settings[n],{code:e}).pattern.pattern_obj.layers[t].color=i},ub.create_application=function(e,t,i,n,a,o,r,s){if(0!==e.text.length){var l=void 0,c=void 0,u=void 0,p=void 0,d=void 0,f=void 0,h=void 0;void 0!==t&&(l=t),void 0!==i&&(c=i),void 0!==n&&(u=n),void 0!==a&&(p=a),void 0!==o&&(d=o),void 0!==r&&(f=r),void 0!==s&&(h=s);var m={text_input:(window.at=e).text,font_name:e.font_obj.name,application:e.application,settingsObject:ub.current_material.settings,applicationObj:e,fontSize:e.font_size,accentObj:e.accent_obj,typeofWindowTemp:typeof e.accent_obj,overrideSize:l,overrideOffsetX:c,overrideOffsetY:u,overrideScaleX:p,overrideScaleY:d,innerStroke:f,outerStroke:h},b=ub.current_material.material.type,g=ub.funcs.renderApplication($.ub.create_text,m,e.application.id.toString()),v=(ub.current_material.settings.applications[e.application.id],ub.current_material.containers[b].application_containers);if(void 0===v[e.id]&&(v[e.code]={},v[e.code].object={},v[e.code].object.sprite=g),"object"==typeof m.applicationObj&&("object"==typeof m.applicationObj.gradient_obj&&$.ub.mvChangeGradient(m.applicationObj,m.applicationObj.gradient_obj,g),"object"==typeof m.applicationObj.pattern_obj)){var _=ub.current_material.settings.applications[m.applicationObj.code],y=ub.funcs.getPrimaryView(_.application),w=ub.objects[y+"_view"]["objects_"+m.applicationObj.code];(void 0===_.pattern_settings||0<_.pattern_settings.length)&&(_.pattern_settings={rotation:0,scale:{x:1,y:1},position:{x:1,y:1},opacity:1}),$.ub.mvChangePattern(m.applicationObj.application,m.applicationObj.code,m.applicationObj.pattern_obj,w)}}},ub.save_text_pattern_color=function(e,t,i){ub.current_material.settings.applications[e.id].pattern_obj.layers[t].default_color=i},ub.generate_pattern_for_text=function(e,t,i,n,a){var o=_.find(n.children,{ubName:"Mask"});o.alpha=1;ub.current_material.material.type;var r=t,s=(a.rotation,a.scale,a.position.x),l=a.position.y;e.toTitleCase();ub.current_material.containers[i.id]={};var c=ub.current_material.containers[i.id];void 0===c.pattern&&(c.pattern=new PIXI.Container);var u=c.pattern;i.perspective;u.sprites={},_.each(r.layers,function(e,t){u.sprites[t]=ub.pixi.new_sprite(e.filename);var i=u.sprites[t];i.zIndex=-1*e.layer_number,i.tint=parseInt(e.default_color,16),i.anchor.set(.5,.5),u.addChild(i),u.alpha=1;var n=s,a=l;u.position=new PIXI.Point(n,a)}),ub.updateLayersOrder(u);if(void 0!==(p=o)){var p=o;(n.pattern_layer=u).mask=p,u.zIndex=-11,ub.pl=u,n.addChild(n.pattern_layer),ub.updateLayersOrder(n),ub.refresh_thumbnails()}},ub.generate_gradient_for_text=function(e,t,i,n){var a=_.find(i.children,{ubName:"Base Color"});"none"===e.code?a.alpha=1:a.alpha=0;var o=_.find(i.children,{ubName:"Mask"});o.alpha=1;ub.current_material.material.type;var r=document.createElement("canvas");r.width=ub.dimensions.width,r.height=ub.dimensions.height;var s,l=r.getContext("2d");if("radial"===e.code){s=l.createRadialGradient(250,250,20,250,250,100)}else s=l.createLinearGradient(0,22,0,410);_.each(e.color_stops,function(e){s.addColorStop(e.value,e.color)}),l.fillStyle=s;var c=e.angle;l.fillRect(0,0,ub.dimensions.height,ub.dimensions.height);var u=r.toDataURL();l.clearRect(0,0,ub.dimensions.height,ub.dimensions.height),l.translate(r.width/2,r.height/2),l.rotate(c*Math.PI/180),l.translate(-r.width/2,-r.height/2),l.fillRect(0,0,ub.dimensions.height,ub.dimensions.height);var p=PIXI.Texture.fromCanvas(r),d={};new PIXI.Sprite(p).zIndex=1;var f=n.perspective;d[f]=new PIXI.Sprite(p),d[f].zIndex=1;var h=o;i.gradient_layer=d[f],d[f].anchor.set(.5,.5),d[f].mask=h,d[f].zIndex=-10,d[f].height=o.height,i.addChild(d[f]),ub.updateLayersOrder(i),ub.refresh_thumbnails();var m="url("+u+")",b=$("#gradient_slider_"+t),g=$("#angle_gradient_slider_"+t);b.find(".range_container").remove(),b.prepend('<div class="range_container"><div class="range"></div></div>').find("div.range").css("background-image",m);parseInt(g.find("span.edit").html());g.find("div.rs-bg-color").css({"background-image":m,"-webkit-transform":"rotate("+c+"deg)"})},ub.create_text=function(a,o,e,t,r){ub.funcs.removeUIHandles();var s={},l=new PIXI.Container;$('div.accent_drop[data-id="'+e.id+'"]').data("accent-id");return _.each(t.layers,function(e){var t="";s[e.layer_no]={},(t=s[e.layer_no]).no=e.layer_no,t.accent_obj=e;var i={font:r+"px "+o,fill:"white",padding:10};1===e.outline&&(i.stroke="#ffffff",i.strokeThickness=6),2===e.outline&&(i.stroke="#ffffff",i.strokeThickness=12,"string"==typeof e.type&&(i.stroke="#ffffff")),"middle_stroke"===e.type&&1===e.outline&&(i.stroke="#ffffff",i.strokeThickness=6),"outer_stroke"===e.type&&2===e.outline&&(i.stroke="#ffffff",i.strokeThickness=12),"outer_stroke"===e.type&&1===e.outline&&(i.stroke="#ffffff",i.strokeThickness=6),"shadow"===e.type&&0<e.outline&&(i.fill="#ffffff",i.stroke="#ffffff"),t.text_sprite=new PIXI.Text(" "+a+" ",i),t.text_sprite.ubName=e.name,t.text_sprite.ubDefaultColor=e.default_color,t.text_sprite.ubLayerNo=e.layer_no;var n=new PIXI.Text("A",i);t.text_sprite.zIndex=e.zIndex,t.text_sprite.x+=n.width*e.increment_x,t.text_sprite.y+=n.height*e.increment_y,t.text_sprite.anchor.set(.5,.5),l.addChild(t.text_sprite),"Mask"===e.name&&(t.text_sprite.alpha=0)}),ub.updateLayersOrder(l),l},ub.get_colors_obj=function(e){var t=_.find(ub.current_material.materials_options,{name:window.util.toTitleCase(e)}),i=JSON.parse(t.colors);return _.filter(ub.data.colors,function(e){return-1!==_.indexOf(i,e.color_code)})},ub.recreate_gradient_obj=function(e){var n={};return n.angle=e.angle,n.code=e.code,n.name=e.name,n.color_stops=[],_.each(e.color_stops,function(e,t){var i={index:e.index,color:e.color,value:e.value};n.color_stops.push(i)}),n},ub.update_application_logo=function(e){var t=e.application,i=ub.dimensions.width*t.position.x,n=ub.dimensions.height*t.position.y,a=ub.current_material.settings,o=e.filename,r=ub[t.perspective+"_view"],s=ub.objects[t.perspective+"_view"],l=PIXI.Sprite.fromImage(o),c=_.find(ub.current_material.material.options,{perspective:t.perspective,name:t.layer});c=ub.pixi.new_sprite(c.material_option_path);l.mask=c;s["objects_"+t.id];s["objects_"+t.id]=l,r.addChild(l),l.position=new PIXI.Point(i,n),l.rotation=t.rotation,1===l.width&&(l.position.x-=l.width/2,l.position.y-=l.height/2),l.anchor.set(.5,.5),l.position=e.position,l.rotation=e.rotation,l.scale=e.scale,l.alpha=e.alpha;var u=10+t.layer_order;l.originalZIndex=-1*u,l.zIndex=-1*u,a.applications[t.id].layer_order=u,ub.updateLayersOrder(r),ub.funcs.createDraggable(l,t,r),ub.funcs.createClickable(l,t,r,"application")},ub.update_application_mascot=function(e){console.log("Here..."),console.log(e);var o=e.application,r=e.mascot,t=(ub.dimensions.width,o.position.x,ub.dimensions.height,o.position.y,ub.current_material.settings),i=(o.id,r.id,ub[o.perspective+"_view"]),n=ub.objects[o.perspective+"_view"],s=new PIXI.Container;_.each(r.layers,function(e,t){var i=PIXI.Sprite.fromImage(e.filename);i.tint=e.color,i.anchor.set(.5,.5),s.addChild(i);var n=e.default_color,a=e.default_color;e.filename;ub.create_mascot_color_picker(t,n,a,o.id,r.code)}),s.scale=new PIXI.Point(.5,.5);var a=s,l=_.find(ub.current_material.material.options,{perspective:o.perspective,name:o.layer});l=ub.pixi.new_sprite(l.material_option_path);a.mask=l;n["objects_"+o.id];n["objects_"+o.id]=a,i.addChild(a),a.position=e.position,a.rotation=e.rotation,a.scale=e.scale,a.alpha=e.alpha;var c=10+e.layer_order;a.originalZIndex=-1*c,a.zIndex=-1*c,t.applications[o.id].layer_order=c,ub.updateLayersOrder(i),ub.funcs.createClickable(a,o,i,"application")},ub.save_property=function(e){void 0!==e.application_id&&void 0!==e.property&&void 0!==e.value?ub.current_material.settings.applications[e.application_id][e.property]=e.value:console.warning("Incomplete Input")},ub.funcs.setActiveIcon=function(t){_.each(ub.views,function(e){e!==t&&$('a.change-view[data-view="'+e+'"]').removeClass("active-icon")}),$('a.change-view[data-view="'+t+'"]').addClass("active-icon")},ub.funcs.createQuickRegistrationPopup=function(n){if(!$("div#primaryQuickRegistrationPopup").is(":visible")){ub.status.quickRegistrationPopup=!0;var e=$("#m-quick-registration-popup").html(),t=Mustache.render(e,{});$("body").append(t),$popup=$("div#primaryQuickRegistrationPopup"),$("label.quickRegistrationPassword, input.quickRegistrationPassword, div.quickPasswordContainer").hide(),$popup.fadeIn(),$("input.quickRegistrationEmail").focus(),ub.funcs.centerPatternPopup(),$("input.quickRegistrationEmail").on("focus",function(e){e.preventDefault(),$("div#primaryQuickRegistrationPopup").unbind("mousedown",ub.funcs.handle_mousedown)}),$("input.quickRegistrationEmail").on("blur",function(e){e.preventDefault(),$("div#primaryQuickRegistrationPopup").bind("mousedown",ub.funcs.handle_mousedown)}),$("input.quickRegistrationEmail").on("keypress",function(e){13==(e.keyCode?e.keyCode:e.which)&&($("input.quickRegistrationPassword").is(":visible")?$("div.quickRegistrationPassword").focus():$("span.next").trigger("click"),e.preventDefault())}),$("input.quickRegistrationPassword").on("keypress",function(e){13==(e.keyCode?e.keyCode:e.which)&&($("span.next").trigger("click"),e.preventDefault())}),$("span.next").unbind("click"),$("span.next").on("click",function(){if($("em.message").html("Logging In..."),$("input.quickRegistrationPassword").is(":visible")){var e=$("input.quickRegistrationEmail").val(),t=$("input.quickRegistrationPassword").val();ub.funcs.lRest(e,t,!0,n)}var i=$("input.quickRegistrationEmail").val();return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i.test(i)?(void 0!==$.ajaxSettings.headers&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({data:JSON.stringify({email:i}),url:ub.config.api_host+"/api/user/quickRegistration",dataType:"json",type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){return e.success?(window.ub.user={id:e.data.user_id,fullname:"New User",email:i,headerValue:e.accessToken,type:"quickRegistration"},$.smkAlert({text:"You have sucessfully registered an account using "+i+"! Please check your email for your temp password",type:"success",time:3,marginTop:"80px"}),$popup.remove(),ub.status.quickRegistrationPopup=!1,"order"===n?ub.funcs.initRoster():"save"===n&&ub.funcs.initSaveDesign(),!0):($("a.login-link").trigger("click"),!1)}}),!0):($("em.message").html("Please enter a valid email: "),!1)}),$("a.login-link").unbind("click"),$("a.login-link").on("click",function(){$("div.quickPasswordContainer").is(":visible")?($("em.instructions").fadeOut(),$("em.instructions").html("You're not logged in, please enter your email so we can create an account for you. A temporary password will be emailed to you."),$("em.instructions").fadeIn(),$("span.text").html("Quick Registration"),$("a.login-link").html("Already have an account?"),$("label.quickRegistrationPassword, input.quickRegistrationPassword, div.quickPasswordContainer").hide()):($("em.instructions").fadeOut(),$("em.instructions").html("You already have an account, please enter your password below to login."),$("em.instructions").fadeIn(),$("em.message").html(""),$("label.quickRegistrationPassword, input.quickRegistrationPassword, div.quickPasswordContainer").show(),$("input.quickRegistrationPassword").focus(),$("span.text").html("Login"),$("a.login-link").html(""))}),$("div.close-popup").on("click",function(){$("div#primaryQuickRegistrationPopup").remove(),ub.status.quickRegistrationPopup=!1})}},ub.funcs.getOrderAndDetailsInfo=function(){ub.funcs.uiPrepBeforeOrderForm();var i=bootbox.dialog({message:ub.utilities.buildTemplateString("#m-loading",{type:"Order Form"})}),e=window.ub.config.api_host+"/api/order/orderswItems/"+ub.config.orderCode;ub.loaderWOToken(e,"order_info",function(e){i.modal("hide");var t=e;ub.data.orderInfo=t,ub.funcs.initRoster(t)})},ub.funcs.quickRegistration=function(e){ub.funcs.createQuickRegistrationPopup(e)},ub.funcs.cleanupBeforeOrder=function(){$("div.preview-panel").hide(),ub.funcs.resetHighlights()},ub.funcs.initOrderProcess=function(){ub.funcs.cleanupBeforeOrder();if(void 0!==ub.current_material.material.parsedPricingTable.properties){var e="Are you sure you want to go to the order form?";"rejected"===ub.config.orderArtworkStatus&&(e="Press OK to resubmit this order with your new artwork."),ub.data.updateOrderFromCustomArtworkRequest&&(e="Press OK to resubmit this order with your new artwork."),bootbox.confirm(e,function(e){return!e||(0!==ub.data.afterLoadCalled?void 0===window.ub.user.id?(ub.funcs.quickRegistration("order"),!0):void(void 0!==ub.temp&&"none"!==ub.config.orderCode?ub.funcs.getOrderAndDetailsInfo():ub.funcs.initRoster()):void 0)})}else ub.utilities.warn("No Price Table set for this uniform, cancelling order form.")},ub.funcs.removeApplicationsPanel=function(){$("div#layers-order").is(":visible")&&$("div.layers-header > span.close").trigger("click")},$("div.drop.parts").on("click",function(){$("div#primaryQuickRegistrationPopup").is(":visible")||$("#select_part").click()}),$("a.change-view").on("click",function(e){var t=$(this).data("view");if("parts"!==t)if("refresh"!==t){if("colors"===t)return ub.funcs.activateColorPickers(),void ub.funcs.activeStyle("colors");if("patterns"===t){if(_.size(ub.current_material.settings.team_colors)<=1)return;return 0===ub.current_part&&$('div.pd-dropdown-links[data-ctr="1"]').trigger("click"),ub.funcs.hideOtherPanels(),void ub.funcs.activatePatterns()}if("pipings"===t){if($(this).hasClass("disabled"))return;return ub.funcs.removeApplicationsPanel(),ub.funcs.removeRandomFeedsPanel(),void ub.funcs.showPipingsPanel()}if("randomFeed"===t){if($(this).hasClass("disabled"))return;return ub.funcs.removeApplicationsPanel(),void ub.funcs.showRandomFeedPanel()}if("start-over"!==t)if("home"!==t){if("locations"===t)return ub.funcs.deActivateZoom(),ub.funcs.hidePipingFunctions(),void(ub.showLocation?(ub.funcs.removeLocations(),$(this).removeClass("zoom_on")):(ub.funcs.gotoFirstMaterialOption(),$(this).addClass("zoom_on")));if("locations-add"===t)return ub.funcs.deActivateZoom(),void ub.funcs.addLocation();if("layers"===t)return ub.funcs.removePipingsPanel(),ub.funcs.removeRandomFeedsPanel(),void ub.funcs.showLayerTool();if("zoom"===t)return ub.funcs.deActivateLocations(),e.altKey?void ub.funcs.removeUI():void(ub.zoom?(ub.zoom_off(),$(this).removeClass("zoom_on")):(ub.zoom_on(!0),$(this).addClass("zoom_on")));if("team-info"===t)return ub.front_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0,ub.back_view.visible=!0,void ub.funcs.initOrderProcess();if("open-design"===t)return void 0===window.ub.user.id?void alert("Only logged-in users can open their saved designs."):void(window.location.href=window.ub.config.host+"/my-saved-designs");if("save"!==t){if("left"!==t&&"right"!==t||!$(this).hasClass("disabled")){ub.zoom_off();var i=5*window.innerWidth;ub.funcs.setVisibleView(t),ub.left_view.position.x=i,ub.right_view.position.x=i,ub.front_view.position.x=i,ub.back_view.position.x=i,ub.pattern_view.position.x=i,ub[t+"_view"].position.set(ub.offset.x,ub.offset.y),ub.funcs.setActiveIcon(t),$("#main_view").fadeIn(),ub.active_view=t,e.altKey&&(ub.showThumbnail2(),$.smkAlert({text:"Thumbnail Generated for ["+ub.active_view+" view]",type:"warning",time:3,marginTop:"80px"}))}}else{bootbox.confirm("Are you sure you want to save this design?",function(e){e&&(void 0===window.ub.user.id?ub.funcs.quickRegistration("save"):ub.funcs.initSaveDesign())})}}else window.location.href=ub.config.host;else window.location.href=window.ub.config.host+"/builder/0/"+ub.current_material.material.id}else window.location.reload();else $("#select_part").click()}),$('a.change-view[data-view="front"]').click(),$(window).scroll(function(e){_.each(ub.tethers,function(e){e.position()})}),ub.getAngleofPattern=function(e,t){var i=_.find(ub.current_material.materials_options,{name:t,perspective:e});if(void 0!==i)return{angle:ub.funcs.translateAngle(i.angle),px:i.patternOffsetX,py:i.patternOffsetY};util.log("Can't find material option "+t)},ub.funcs.coordinateAdjustments=function(e,t,i){var n={x:0,y:0};ub.data.adjustmentX=550,ub.data.divisor=2.3,$(window).width()<=1440&&(ub.data.divisor=2.2),_offsetX=($(window).width()-$("#right-pane-column").width()-ub.data.adjustmentX)/ub.data.divisor;var a=3;800<$(window).height()&&(a=5);var o=($(window).height()-580)/a;return ub.offset={x:_offsetX,y:o},"Body"!==e&&"Back Body"!==e||(n={x:0,y:ub.front_view.position.y},"NK Stripe"===t.name&&(n.y+=200,800<$(window).height()&&(n.y+=50))),"front"===i&&"Left Sleeve Insert"===e&&(n={x:50,y:-40}),"front"===i&&"Left Arm Trim"===e&&(n={x:50,y:-40}),"front"===i&&"Left Sleeve Insert"===e&&(n={x:50,y:-40}),"back"===i&&"Right Shoulder Cowl Insert"===e&&(n={x:0,y:-185}),"back"===i&&"Right Sleeve Insert"===e&&(n={x:0,y:-18}),"front"===i&&"Right Sleeve Insert"===e&&(n={x:10,y:0}),"back"===i&&"Right Sleeve Insert"===e&&(n={x:100,y:0}),"back"===i&&"Right Arm Trim"===e&&(n={x:100,y:0}),800<ub.funcs.getWindowSize().height&&("front"===i&&"Right Sleeve Insert"===e&&(n={x:-200,y:7}),"back"===i&&"Left Sleeve Insert"===e&&(n={x:-200,y:7}),"front"===i&&"Right Arm Trim"===e&&(n={x:-200,y:0}),"back"===i&&"Left Arm Trim"===e&&(n={x:-200,y:0}),"back"===i&&"Left Shoulder Cowl Insert"===e&&(n={x:0,y:-220})),"Wrestling"===ub.funcs.getCurrentUniformCategory()&&(n={x:0,y:0}),n},ub.funcs.getMaxTeamColorID=function(){return max=_.max(_.pluck(ub.data.colorsUsed,"teamColorID")),_.each(ub.data.colorsUsed,function(e){void 0!==e.teamColorID&&e.teamColorID>max&&(max=e.teamColorID)}),max},ub.generate_pattern=function(r,s,e,l,t,i){var n=ub.current_material.material.type,c=r.toTitleCase(),u="",a=ub.data.views,p=0,d={};c=util.toTitleCase(c),(u=ub.current_material.containers[n][c]).containers={},_.each(a,function(e){ub.funcs.coordinateAdjustments(c,s,e),d=ub.getAngleofPattern(e,c),p=void 0!==d?d.angle:0,u.containers[e]={};var t=u.containers[e];t.container=new PIXI.Container;var o=t.container;o.sprites={},_.each(s.layers,function(e,t){$('[data-index="'+t+'"][data-target="'+r+'"]');o.sprites[t]=ub.pixi.new_sprite(e.filename);var i=o.sprites[t];i.zIndex=-1*e.layer_number,i.tint=parseInt(e.default_color,16);var n=i.tint.toString(16),a=util.padHex(n,6);void 0===ub.data.colorsUsed[a]&&(void 0!==e.team_color_id?ub.data.colorsUsed[a]={hexCode:a,parsedValue:util.decimalToHex(i.tint,6),teamColorID:e.team_color_id}:ub.data.colorsUsed[a]={hexCode:a,parsedValue:util.decimalToHex(i.tint,6),teamColorID:ub.funcs.getMaxTeamColorID()+1}),i.anchor.set(.5,.5),i.pivot.set(.5,.5),i.tint=s.layers[t].color,o.addChild(i);o.position={x:0,y:0},o.alpha=e.container_opacity,o.rotation=p,o.scale=e.container_scale}),ub.updateLayersOrder(o);var i=e+"_view",n=ub.objects[i][r+"_mask"];if(void 0!==n){o.mask=n,o.name="pattern_"+r,"object"==typeof ub.objects[i]["pattern_"+r]&&ub[i].removeChild(ub.objects[i]["pattern_"+r]),ub.objects[i]["pattern_"+r]=o;var a=ub.objects[i]["pattern_"+r];ub[i].addChild(o),o.zIndex=n.zIndex+-1,a.position.x+=ub.dimensions.width/2,a.position.y+=ub.dimensions.height/2,ub.funcs.getMaterialOptionSettingsObject(c).pattern.dirty&&(a.position=l),a.anchor={x:.5,y:.5},a.pivot={x:.5,y:.5},ub.updateLayersOrder(ub[i])}})},$('input[name="design_name"]').on("change",function(){$("span#design_name_input").text($(this).val())}),$("span#design_name_input").bind("click",function(){$(this).attr("contentEditable",!0)}).blur(function(){$(this).attr("contentEditable",!1);var e=$("span#design_name_input").text();$('input[name="design_name"]').val(e)}),$("a#pencil_link").on("click",function(){return!1}),ub.funcs.identify=function(e){$('button[data-action="identify"][data-id='+e+"]").click()},$("a.mod_primary").click(),$("#right-sidebar > a.sidebar-buttons").hide(),ub.funcs.fadeOutElements=function(){$("#main-picker-scroller").hide(),$("div.uniform_details").hide(),$(".picker-header").hide(),$("div.back-link").hide()},ub.funcs.scrollize=function(e,t,a,i){var o=$(a).length*(i+22),n=60;".color_picker_item"===a&&(o/=2,n=30);var r,s,l=$(e),c=$(t),u=l.outerWidth();wDiff=2,mPadd=60,damp=n,mX=0,mX2=0,posX=0,mmAA=u,mmAAr=u/mmAA,ub.th=c,l.mousemove(function(e){if(".color_picker_item"!==a){var t=c.offset().top,i=c.offset().top+c.height(),n=e.clientY;if(n<t||i<n)return}$(a).length-4<5||(mX=e.pageX-this.offsetLeft,mX2=Math.min(Math.max(0,mX-mPadd),mmAA)*mmAAr,r=e.clientX-this.offsetLeft,ub.vars.travel=r/u,s=ub.vars.travel*o*-1,c.css({marginLeft:s}))}),ub.data.intervalFunction=setInterval(function(){posX+=(mX2-posX)/damp},10)},ub.funcs.hideSecondaryBar=function(){$("div.secondary-bar").hide(),$("div.secondary-bar").css("margin-top","-50px"),$("div.tertiary-bar").hide(),$("div.quarternary-bar").hide(),$("div.secondary-bar").css("margin-top","-50px")},ub.funcs.setActiveGender=function(e){$("span.slink").removeClass("active"),$('span.slink[data-item="'+e+'"]').addClass("active")},ub.funcs.prepPickers=function(){ub.funcs.fadeOutBackgrounds(),$("body").addClass("pickers-enabled"),$("div#main-row").hide(),$("div.special_modifiers").hide(),$("input#search_field").fadeIn(),ub.funcs.enableBetaSports()},ub.funcs.directLinks=function(e,t){if(ub.funcs.prepFilters(),ub.funcs.prepPickers(),$('span.slink[data-item="'+e+'"]').addClass("active"),""===t)return ub.funcs.setActiveGender(e.toTitleCase()),void ub.funcs.initSportsPicker(e.toTitleCase());"Wrestling"===t&&(t="Wrestling 2018"),ub.funcs.initUniformsPicker(t,e,!0),ub.funcs.setupEvents()},ub.funcs.reBindEventsPickers=function(){$("div.main-picker-items, span.main-picker-items").on("click",function(){$picker_item=$(this);var e=$(this).data("picker-type"),t=$(this).data("item"),i=$(this).data("id"),n=$(this).data("gender");if("my-favorites"!==e&&"gender"!==e){if("sports"===e){if(!_.contains(["Apparel","eSports"],t)){if(!ub.data.activeSports.isSportOK(t)&&!ub.data.tempSports.isSportOK(t))return;if("Preparing search, please wait..."===$("#search_field").attr("placeholder"))return;var a=ub.config.features.isOn("uniforms","betaSportUniforms");if(ub.data.tempSports.isSportOK(t)&&!a)return}ub.funcs.initUniformsPicker(t,n)}if("uniforms"!==e){if("search-result"===e||"favorites"===e){$("input#search_field").hide(),ub.funcs.fadeOutElements(),$("body").removeClass("pickers-enabled");var o=$(this).data("uniform-type"),r=(i=$(this).data("id"),window.ub.config.host);window.location.href="materials"===o?r+"/builder/0/"+i:"orders"===o?r+"/orders/"+i:r+"/builder/0/"+i}if(ub.picker.isNew){var s=_.find(ub.data.activeSports.items,{name:t}).type;ub.funcs.setV2Gender(n),ub.funcs.setV2Sport(t),ub.funcs.setV2UniformType(s),ub.funcs.resetSecondaryBarFilter(),ub.funcs.setSideBarSportFilter()}}else{var l="/builder/0/"+i;window.open(l,"_blank")}}}),ub.funcs.setupEvents()},ub.funcs.setupEvents=function(){$(".grow").hover(function(){$(this).find("span.main-picker-item-caption");if("uniforms"===$(this).data("picker-type")){$("div.uniform_details").hide(),$("span.uniform_name").html($(this).data("item"));var e=_.find(ub.materials,{name:$(this).data("item")}).description;$("span.uniform_description").html(e),$("div.uniform_details").fadeIn()}else $("div.uniform_details").hide()},function(){$(this).find("span.main-picker-item-caption").css("margin-top","0px")}),$('div#topbar > span.slink[data-picker-type="gender"]').unbind("click"),$('div#topbar > span.slink[data-picker-type="gender"]').on("click",function(){ub.picker.isNew&&($(".cd-filter .cd-close").trigger("click"),$("main.cd-main-content").css({display:"none"}),ub.funcs.resetSecondaryBarFilter()),$picker_item=$(this);$(this).data("picker-type");var e=$(this).data("item");$(this).data("id"),$(this).data("gender");if("My-Favorites"!==e)return"Home"===e?(ub.funcs.setActiveGender(e),ub.funcs.initGenderPicker(),void ub.funcs.hideSecondaryBar()):void("Men"!==e&&"Women"!==e||(ub.funcs.setActiveGender(e),ub.funcs.initSportsPicker(e)))}),$("span.slink.my-favorites").unbind("click"),$("span.slink.my-favorites").on("click",function(){ub.funcs.initGenderPicker(),ub.funcs.initFavoritesPicker()})},ub.funcs.prepareSecondaryBar=function(e,t){$('span.slink.primary-filters[data-item="All"]').attr("data-gender",t),$('span.slink.secondary-filters[data-item="All"]').attr("data-gender",t),$('span.slink[data-item="Jersey"]').attr("data-gender",t),$('span.slink[data-item="Pant"]').attr("data-gender",t),$('span.slink[data-item="Twill"]').attr("data-gender",t),$('span.slink[data-item="Sublimated"]').data("gender",t),$('span.slink[data-item="Knitted"]').data("gender",t),$('span.slink[data-item="Jersey"]').html("Jersey"),$('span.slink[data-item="Pant"]').html("Pant"),$('span.slink[data-item="Jersey"]').show(),$('span.slink[data-item="Pant"]').show(),$('span.slink[data-item="Twill"]').show();var i=ub.data.secondaryBarLabels.getLabel(e);void 0!==i&&("upper"===i.type?($('span.slink[data-item="Jersey"]').html(i.upperLabel),$('span.slink[data-item="Pant"]').hide(),$('span.slink[data-item="Twill"]').hide()):"lower"===i.type?($('span.slink[data-item="Jersey"]').hide(),$('span.slink[data-item="Pant"]').html(i.lowerLabel),$('span.slink[data-item="Twill"]').hide(),"Socks (Apparel)"===e&&($('span.slink[data-item="Twill"]').hide(),$('span.slink[data-item="Knitted"]').show())):"both"===i.type&&($('span.slink[data-item="Jersey"]').html(i.upperLabel),$('span.slink[data-item="Pant"]').html(i.lowerLabel),$('span.slink[data-item="Twill"]').hide())),"Socks (Apparel)"!==e&&$('span.slink[data-item="Knitted"]').hide(),ub.data.nonTackleTwillItems.isNonTackleTwill(e)&&$('span.slink[data-item="Twill"]').hide(),ub.data.tackleTwillOnly.isTackleTwillOnly(e)?($('span.slink[data-item="Twill"]').show(),$('span.slink[data-item="Sublimated"]').hide()):$('span.slink[data-item="Sublimated"]').show()},ub.funcs.hideIpadUniforms=function(){_.each(["Trial"],function(e){$('div.main-picker-items[data-item="'+e+'"]').hide()})},ub.funcs.sortPickerItems=function(e){return _.sortBy(e,function(e){var t=parseInt(e.block_pattern_id);return"upper"===e.type?t+=100:t+=200,1===parseInt(e.is_blank)&&(t+=1e3),"Basketball"===e.uniform_category&&0<=e.neck_option.indexOf("USA")&&(t+=100),_.isEqual(e.block_pattern,"Volleyball Round Neck")&&(t-=100),t})},ub.funcs.cleanupPricesPerSport=function(e,t){ub.data.sportsWithHiddenYouthPrices.isHidden(e)&&($("span.youthPrice").hide(),$("span.youthPriceSale").hide(),$("span.adult-label").html("Price starts from ")),$('div.main-picker-items[data-option="Fight Short"]').find("span.youthPrice").hide(),$('div.main-picker-items[data-option="Fight Short"]').find("span.youthPriceSale").hide(),$('div.main-picker-items[data-option="Fight Short"]').find("span.adult-label").html("Price starts from ")},ub.funcs.getBlockPatternsAlias=function(e){var t=[];return _.uniq(_.map(e,function(e){""!==e.block_pattern_alias&&void 0!==e.block_pattern_alias?t.push(e.block_pattern_alias):t.push(e.block_pattern)})),_.uniq(t)},ub.funcs.getNeckOptionsAlias=function(e){var t=[];return _.each(e,function(e){var t=JSON.parse(e.block_pattern_options),i=_.find(t,{name:e.neck_option});e.neck_option_alias=void 0!==i.alias&&"undefined"!==i.alias&&""!==i.alias?i.alias:e.neck_option}),_.uniq(_.map(e,function(e){""!==e.neck_option_alias&&void 0!==e.neck_option_alias?t.push(e.neck_option_alias):t.push(e.neck_option)})),_.uniq(t)},ub.funcs.array_move=function(e,t,i){return i=(i%e.length+e.length)%e.length,e.splice(i,0,e.splice(t,1)[0]),e},ub.funcs.updateTertiaryBar=function(o,r){setTimeout(function(){$(".tertiary-bar").html(""),$(".tertiary-bar").hide(),$(".tertiary-bar").css("margin-top","-50px");var e=$("#m-tertiary-links").html(),t=_.filter(o,function(e){return"Soccer"===e.uniform_category}),i=_.filter(o,function(e){return"Volleyball"===e.uniform_category&&"women"===e.gender});if(0<t.length)var n={block_patterns:ub.funcs.array_move(_blockPatternsCollection,3,1),block_patterns:ub.funcs.array_move(_blockPatternsCollection,0,3)};else n={block_patterns:_blockPatternsCollection};if(0<i.length)n={block_patterns:ub.funcs.array_move(_blockPatternsCollection,2,1),block_patterns:ub.funcs.array_move(_blockPatternsCollection,0,2)};else n={block_patterns:_blockPatternsCollection};var a=Mustache.render(e,n);$(".tertiary-bar").html(a),$("div.tertiary-bar").fadeIn(),$("div.tertiary-bar").css("margin-top","0px"),window.origItems=o,$("span.slink-small.tertiary").unbind("click"),$("span.slink-small.tertiary").on("click",function(){var t=$(this).data("item");ub.filters.tertiary=t.toString(),"All"===t?_newSet=window.origItems:(_newSet=_.filter(window.origItems,function(e){return e.block_pattern===t||e.block_pattern_alias===t}),"Premier Series"===t&&(_newSet=_.filter(window.origItems,function(e){return e.block_pattern===t||e.block_pattern_alias===t}).reverse()),"Blank Styles"===t&&(_newSet=_.filter(window.origItems,function(e){return"1"===e.is_blank})),"Favorites"===t&&(_newSet=_.filter(window.origItems,function(e){return!0===e.is_favorite}))),ub.funcs.initScroller("uniforms",_newSet,r,!0),$("span.slink-small.tertiary").removeClass("active"),$(this).addClass("active"),ub.funcs.updateQuarternaryBar(o,r,t)})},100)},ub.funcs.omitNeckOptionsOnBasketballFilter=function(){var t=[];t.push("Cavaliers Neck","Lakers Neck","Round Neck","V-Neck","Infuse Short (M)","SFN Short (M)","Side Seam Jersey","Back Panel Jersey","Sublimated Short"),t.push("Gold State Neck","Infuse Short (W)","SFN Short (W)"),_optionsCollection=_.omit(_optionsCollection,function(e){return _.contains(t,e.item)})},ub.funcs.updateQuarternaryBar=function(n,a,o){setTimeout(function(){ub.funcs.omitNeckOptionsOnBasketballFilter(),$(".quarternary-bar").html(""),$(".quarternary-bar").hide(),$(".quarternary-bar").css("margin-top","-50px");var e=$("#m-quarternary-links").html();if(0<_.filter(n,function(e){return"Soccer"===e.uniform_category}).length)var t={block_patterns:_optionsCollection.reverse()};else t={block_patterns:_optionsCollection};t.block_patterns=_.filter(t.block_patterns,function(e){return!ub.data.filterExclusions.isExcluded(e.alias)});var i=Mustache.render(e,t);$(".quarternary-bar").html(i),0<_.size(_optionsCollection)&&$("div.quarternary-bar").fadeIn(),0===t.block_patterns.length&&$("div.quarternary-bar").hide(),$("div.quarternary-bar").css("margin-top","0px"),window.origItems=n,$("span.slink-small.quarternary").unbind("click"),$("span.slink-small.quarternary").on("click",function(){var t=$(this).data("item"),i=$("span.tertiary.active").data("item");"All"===t?_newSet=_.filter(window.origItems,function(e){return e.block_pattern===i}):"All"===i?_newSet=_.filter(window.origItems,function(e){return e.neck_option===t||e.neck_option_alias===t}):(_newSet=_.filter(window.origItems,function(e){return!(e.block_pattern!==i&&e.block_pattern_alias!==i||e.neck_option!==t&&e.neck_option_alias!==t)}),"Blank Styles"===o&&(_newSet=_.filter(window.origItems,function(e){return e.neck_option===t||e.neck_option_alias===t&&"1"===e.is_blank})),"Favorites"===o&&(_newSet=_.filter(window.origItems,function(e){return e.neck_option===t||e.neck_option_alias===t&&!0===e.is_favorite}))),ub.funcs.initScroller("uniforms",_newSet,a,!0),$("span.slink-small.quarternary").removeClass("active"),$(this).addClass("active")})},100)},ub.funcs.prepFilters=function(){ub.filters={},ub.filters.primary="All",ub.filters.secondary="All",ub.filters.tertiary="All",$("span.secondary-filters").removeClass("active"),$("span.primary-filters").removeClass("active"),$('span.secondary-filters[data-item="All"]').addClass("active"),$('span.primary-filters[data-item="All"]').addClass("active")},ub.funcs.sortBlockPatternForFilters=function(e,t){var i=t,n=[];return"Wrestling 2018"===e&&(_.each(t,function(e){var t=ub.data.sortIDs.getSortID(e);n.push({blockPattern:e,sortID:t}),n=_.sortBy(n,"sortID")}),i=_.pluck(n,"blockPattern")),i},ub.funcs.initScroller=function(e,i,a,t,n,o,r){ub.funcs.fadeOutElements();var s=$('span.slink.main-picker-items.active[data-picker-type="gender"]');o=s.data("item").toLowerCase();var l=$("#main-picker-scroller"),c=($("div.uniform_details"),$(".picker-header"));if($("input#search_field").show(),"number"==typeof ub.data.intervalFunction&&($("#main-picker-container").unbind("mousemove"),clearInterval(ub.data.intervalFunction)),"gender"===e){var u=i,p=$("#m-picker-items").html(),d={picker_type:"gender",picker_items:u},f=Mustache.render(p,d);l.html(f),$(".picker-header").html("Choose a Gender"),$("div.back-link").html(""),void 0!==ub.user.id?$("span.slink.my-favorites").show():$("span.slink.my-favorites").addClass("hidden")}"gender"!==e&&$("div.back-link").fadeIn();if("sports"===e){ub.funcs.hideSecondaryBar();p=$("#m-picker-items-sport").html(),d={gender:a,picker_type:e,picker_items:i,apparel:n,esports:r};_.isEqual(a,"Men")&&(d.is_men=!0),_.isEqual(a,"Women")&&(d.is_women=!0),_.isEqual(a,"Youth")&&(d.is_youth=!0);f=Mustache.render(p,d);l.html(f),$(".picker-header").html("Choose a Sport"),$("div.back-link").html('<img src="/images/main-ui/back.png" /> <span> | </span>'),$("div.back-link").on("click",function(){ub.funcs.initGenderPicker(),ub.funcs.reBindEventsPickers()}),$(".cSoon").each(function(){$(this).text()||$(this).hide()}),ub.funcs.prepFilters()}if("uniforms"===e){var h=a;_.size(i),p="";if(ub.tempItems=ub.funcs.sortPickerItems(i),ub.picker.isNew?(ub.tempItems=ub.funcs.addFilterObject(ub.tempItems),ub.funcs.prepareSecondaryBarV2(h,o),p=$("#m-picker-items-uniforms-v2").html(),$("main.cd-main-content").css({display:"block"}),l=$("section#picker-items-container ul")):(ub.funcs.prepareSecondaryBar(h,o),ub.funcs.updateActivePrimaryFilter(i,h,o),ub.funcs.updateActiveSecondaryFilter(i,h,o),p=$("#m-picker-items-uniforms").html(),$("div.secondary-bar").fadeIn(),$("div.secondary-bar").css("margin-top","0px")),void 0===a)return;d={sport:a,picker_type:e,picker_items:ub.tempItems,filters:_.find(ub.data.sportFilters,{sport:a}).filters,uniform_type:function(){return function(e,t){return"<b>"+t(t(e).replace("_"," "))+"</b>"}}},f=Mustache.render(p,d);$.when(l.html(f)).then($(".main-picker-items").each(function(e){var t=$(this).find("img");if(t.attr("src")==="?v="+ub.config.asset_version){var i="/images/main-ui/pickers/"+o.toTitleCase()+"/"+ub.data.sportAliases.getAlias(a).alias+".png";t.attr("src",i)}$(this).find("span.calculatedPrice").html();if(void 0!==ub.user.id&&-1===window.ub.config.material_id){var n=$(this).data("id");void 0!==n&&(n=n.toString()),_result=_.find(ub.data.tagged_styles,{uniform_id:n}),"undefined"!=typeof _result&&$(this).find("div.favorite").show()}_priceItemName=ub.config.features.isOn("uniforms","priceItemName"),"undefined"!=typeof _priceItemName&&(_priceItemName?($(this).find("div.price_item_template_name").show(),$(this).find("div.material_id").show()):($(this).find("div.price_item_template_name").hide(),$(this).find("div.material_id").hide())),""===$(this).data("youth-price")&&(console.warn("Hiding Youth Price for "+$(this).data("item")+" ("+$(this).data("id")+")"),$(this).find("span.youthPrice").addClass("hide"),$(this).find("span.youthPriceSale").addClass("hide")),""===$(this).data("adult-price")&&(console.warn("Hiding Adult Price for "+$(this).data("item")+" ("+$(this).data("id")+")"),$(this).find("span.adultPrice").addClass("hide"),$(this).find("span.adultPriceSale").addClass("hide"))})),ub.funcs.hideIpadUniforms(),$(".picker-header").html("Choose a Style"),$("div.back-link").html('<img src="/images/main-ui/back.png" /> <span> | </span>'),$("div.back-link").on("click",function(){ub.funcs.initGenderPicker()});var m=[],b=i,g=[];"Football"===a||"Football 2017"===a?(b=_.filter(i,{type:"lower"}),m=ub.funcs.getBlockPatternsAlias(b),"lower"===ub.filters.primary&&"Sublimated 17"===ub.filters.tertiary?g=["Belted Pant","Elastic Waistband Pant"]:$("div.quarternary-bar").hide()):(m=ub.funcs.getBlockPatternsAlias(b),g=ub.funcs.getNeckOptionsAlias(b));_.union(m,g);_blockPatternsCollection=[],_optionsCollection=[];var v=["BASEBALL","WRESTLING","Fight Short","Baseball Pants","Compression","Volleyball"],y=ub.funcs.sortBlockPatternForFilters(a,m);_.each(y,function(e){if(!_.contains(v,e)&&null!==e){var t=e.replace("Baseball Jersey","").toTitleCase();t=ub.data.blockPatternsAlias.getAlias(t),_blockPatternsCollection.push({alias:t,item:e})}}),"knitted"!==ub.filters.secondary&&"tackle_twill"!==ub.filters.secondary&&_blockPatternsCollection.push({alias:"Blank Styles",item:"Blank Styles"}),_blockPatternsCollection.push({alias:"Favorites",item:"Favorites"}),_.each(g,function(e){if(!_.contains(v,e)&&null!==e){var t=e.replace("Baseball Jersey","").toTitleCase();t=ub.data.neckOptionsAlias.getAlias(t),_optionsCollection.push({alias:t,item:e})}}),"boolean"!=typeof t&&(ub.picker.isNew||(ub.funcs.updateTertiaryBar(i,a),ub.funcs.updateQuarternaryBar(i,a))),$("span.secondary-filters").unbind("click"),$("span.primary-filters").unbind("click"),$("span.secondary-filters").on("click",function(){ub.filters.tertiary="All";var e=$(this).data("item"),t=($(this).data("gender").toLowerCase(),a);"separator"!==e&&(ub.data.uniSexSports.isUniSex(t)&&(o="unisex"),$("span.secondary-filters").removeClass("active"),$(this).addClass("active"),ub.filters.secondary="Sublimated"===e?"sublimated":"Twill"===e?"tackle_twill":"Knitted"===e?"knitted":"All",i="All"===e?"All"!==ub.filters.primary?"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.type===ub.filters.primary&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,type:ub.filters.primary,gender:o}):"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,gender:o}):"All"!==ub.filters.primary?"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.uniform_application_type===ub.filters.secondary&&e.type===ub.filters.primary&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,uniform_application_type:ub.filters.secondary,type:ub.filters.primary,gender:o}):"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.uniform_application_type===ub.filters.secondary&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,uniform_application_type:ub.filters.secondary,gender:o}),$("div#main-picker-scroller").fadeOut().html(""),ub.funcs.initScroller("uniforms",i,a))}),$("span.primary-filters").on("click",function(){ub.filters.tertiary="All";$(this).data("gender").toLowerCase();var e=a;ub.data.uniSexSports.isUniSex(e)&&(o="unisex"),$("span.primary-filters").removeClass("active"),$(this).addClass("active");var t=$(this).data("item");ub.filters.primary="Jersey"===t?"upper":"Pant"===t?"lower":"All",i="All"===t?"All"!==ub.filters.secondary?"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.uniform_application_type===ub.filters.secondary&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,uniform_application_type:ub.filters.secondary,gender:o}):"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,gender:o}):"All"!==ub.filters.secondary?"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.type===ub.filters.primary&&e.uniform_application_type===ub.filters.secondary&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,type:ub.filters.primary,uniform_application_type:ub.filters.secondary,gender:o}):"Football"===a?_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.type===ub.filters.primary&&e.gender===o}):_.filter(ub.materials,{uniform_category:a,type:ub.filters.primary,gender:o}),$("div#main-picker-scroller").fadeOut().html(""),ub.funcs.initScroller("uniforms",i,a)}),$(window).scrollTop(1),ub.picker.isNew&&(ub.funcs.resetSecondaryBarFilter(),$("div#main-picker-scroller").fadeOut().html(""))}if("search_results"===e){ub.funcs.hideSecondaryBar();p=$("#m-picker-items-uniforms").html();var w=_.pluck(i,"id"),S=_.map(w,function(e){return _.find(ub.materials,{id:e})});ub.config.features.isOn("uniforms","betaSportUniforms")||(S=_.reject(S,function(e){return ub.data.tempSports.isSportOK(e.uniform_category)})),_transformedUnique=_.uniq(S);d={picker_type:e,picker_items:_transformedUnique,uniform_type:function(){return function(e,t){return"<b>"+t(t(e).replace("_"," "))+"</b>"}}},f=Mustache.render(p,d);$.when(l.html(f)).then($(".main-picker-items").each(function(e){var t=$(this).find("img");if(t.attr("src")==="?v="+ub.config.asset_version){var i="/images/main-ui/pickers/"+o.toTitleCase()+"/"+ub.data.sportAliases.getAlias(a).alias+".png";t.attr("src",i)}$(this).find("span.calculatedPrice").html();if(void 0!==ub.user.id&&-1===window.ub.config.material_id){var n=$(this).data("id");void 0!==n&&(n=n.toString()),_result=_.find(ub.data.tagged_styles,{uniform_id:n}),"undefined"!=typeof _result&&$(this).find("div.favorite").show()}_priceItemName=ub.config.features.isOn("uniforms","priceItemName"),"undefined"!=typeof _priceItemName&&(_priceItemName?($(this).find("div.price_item_template_name").show(),$(this).find("div.material_id").show()):($(this).find("div.price_item_template_name").hide(),$(this).find("div.material_id").hide())),""===$(this).data("youth-price")&&(console.warn("Hiding Youth Price for "+$(this).data("item")+" ("+$(this).data("id")+")"),$(this).find("span.youthPrice").addClass("hide"),$(this).find("span.youthPriceSale").addClass("hide")),""===$(this).data("adult-price")&&(console.warn("Hiding Adult Price for "+$(this).data("item")+" ("+$(this).data("id")+")"),$(this).find("span.adultPrice").addClass("hide"),$(this).find("span.adultPriceSale").addClass("hide"))})),$("div.back-link").html('<img src="/images/main-ui/back.png" /> <span> | </span>'),$("div.back-link").on("click",function(){ub.funcs.initGenderPicker()})}if("favorites"===e){ub.funcs.hideSecondaryBar();p=$("#m-picker-items-favorites").html();var x=i;ub.config.features.isOn("uniforms","betaSportUniforms")||(x=_.reject(x,function(e){return ub.data.tempSports.isSportOK(e.uniform_category)}));d={picker_type:e,picker_items:x,uniform_type:function(){return function(e,t){return"<b>"+t(t(e).replace("_"," "))+"</b>"}}},f=Mustache.render(p,d);if($.when(l.html(f)).then($(".main-picker-items").each(function(e){if(void 0!==ub.user.id&&-1===window.ub.config.material_id){var t=$(this).data("id");void 0!==t&&(t=t.toString()),_result=_.find(ub.data.tagged_styles,{uniform_id:t}),"undefined"!=typeof _result&&$(this).find("div.favorite").show()}})),0===_.size(x)){p=$("#m-no-favorite").html(),f=Mustache.render(p,{});l.html(f)}$("span.slink").removeClass("active"),$("span.slink.my-favorites").addClass("active"),$("div.back-link").html('<img src="/images/main-ui/back.png" /> <span> | </span>'),$("div.back-link").on("click",function(){ub.funcs.initGenderPicker()})}l.fadeIn(),c.fadeIn(),ub.funcs.reBindEventsPickers(),$(window).trigger("resize")},ub.funcs.initGenderPicker=function(){$("body").removeClass("generic-canvas"),$("div#main-picker-container").css("background-image","url(/images/main-ui/_unleash_new.png)"),ub.funcs.hideRosterAndOrderForm(),$("body").addClass("pickers-enabled"),$(".main_viewport").hide(),$("div#main-row").hide(),$("div.special_modifiers").hide(),$("div#main-picker-container").show();var e=ub.data.genders;ub.funcs.initScroller("gender",e),$("div.main-picker-items").hide()},ub.funcs.fadeOutBackgrounds=function(){$("div#main-picker-container").css("background-image","none"),$("body").css("background-image","none")},ub.funcs.enableSport=function(e,t,i){var n=_.find(e,{gender:t}),a=_.find(n.sports,{code:i});a.active="1",a.tooltip="BETA",a.disabledClass=""},ub.funcs.disableSport=function(e,t,i){var n=_.find(e,{gender:t}),a=_.find(n.sports,{code:i});a.active="0",a.tooltip="COMING SOON",a.disabledClass="disabledClass"},ub.funcs.enableBetaSports=function(){ub.config.features.isOn("uniforms","betaSportUniforms")},ub.funcs.initSportsPicker=function(e){ub.funcs.prepPickers();var t=_.find(ub.data.sports,{gender:e}),i=_.find(ub.data.sportsCategory.esports,{gender:e}),n=_.find(ub.data.sportsCategory.apparel,{gender:e});ub.funcs.initScroller("sports",t.sports,e,void 0,n.sports,void 0,i.sports)},ub.funcs.initFavoritesPicker=function(){ub.funcs.prepPickers(),$("div#main-picker-container").show();var e=_.filter(ub.materials,{is_favorite:!0});ub.funcs.initScroller("favorites",e,"",void 0,void 0)},ub.funcs.showPickerMessage=function(e){var t=$("#main-picker-scroller"),i=$("#m-picker-message").html(),n=Mustache.render(i,e);t.html(n)},ub.funcs.initUniformsPicker=function(e,t,i){var n=ub.data.uniSexSports.isUniSex(e);n&&(t="unisex"),$("body").addClass("pickers-enabled"),$("div#main-row").hide(),$("div.special_modifiers").hide(),$("div#main-picker-container").show();var a=t;if("Football"===e)items=_.filter(ub.materials,function(e){return("Football"===e.uniform_category||"Football 2017"===e.uniform_category)&&e.gender===t.toLowerCase()});else{if("eSports"===e){$(window).scrollTop(0);var o=_.find(ub.data.esports,{gender:t});return void ub.funcs.initScroller("sports",o.sports,t,void 0,void 0,void 0,void 0)}if("Apparel"===e){$(window).scrollTop(0);var r=_.find(ub.data.apparel,{gender:t});return void ub.funcs.initScroller("sports",r.sports,t,void 0,void 0,void 0,void 0)}items=n?_.filter(ub.materials,{uniform_category:e,gender:t}):_.filter(ub.materials,{uniform_category:e,gender:t.toLowerCase()})}if(void 0!==i&&0===_.size(items)){var s="No Styles Found for "+ub.config.styles.gender+" / "+ub.config.styles.sport,l="",c="",u="";return ub.nlp.query(ub.config.styles.sport,function(e){if(0<_.size(e.result)){var t,i=e.result[0][0];l="Did you mean "+i+"?",void 0!==(t=ub.data.urlAlias.getAlias(i))&&(u=$("#m-did-you-mean-link-templates").html(),c=Mustache.render(u,{alias:t,gender:t.gender,toUpper:function(){return function(e,t){var i=t(e);return t(i="men"===i?"Men":"Women")}}}))}}),ub.funcs.showPickerMessage({message:s,didYouMean:l}),void $("div.generic-message").append(c)}ub.funcs.setupItemTotals(items),ub.funcs.initScroller("uniforms",items,e,void 0,void 0,a)},ub.funcs.setupItemTotals=function(e){var t=_.size(e),i=_.countBy(e,function(e){return"upper"===e.type?"upper":"lower"===e.type?"lower":void 0}),n=_.countBy(e,function(e){return"sublimated"===e.uniform_application_type?"sublimated":"tackle_twill"===e.uniform_application_type?"tackle_twill":"knitted"===e.uniform_application_type?"knitted":"infused"===e.uniform_application_type?"infused":void 0});ub.filterStructure={primary:[{name:"all",count:t},{name:"upper",count:void 0!==i.upper?i.upper:0},{name:"lower",count:void 0!==i.lower?i.lower:0}],secondary:[{name:"all",count:0},{name:"tackle_twill",count:void 0!==n.tackle_twill?n.tackle_twill:0},{name:"sublimated",count:void 0!==n.sublimated?n.sublimated:0},{name:"knitted",count:void 0!==n.knitted?n.knitted:0},{name:"infused",count:void 0!==n.infused?n.infused:0}],tertiary:[],quarternary:[]}},ub.funcs.updateActivePrimaryFilter=function(e,t,i){var n=$("span.primary-filters.active").data("item"),a="Jersey"===n?"upper":"All"===n?"all":"lower",o=_.find(ub.filterStructure.primary,{name:a}),r=_.find(ub.data.sportFilters,{sport:t}).filters;if(_.isEqual(t,"Tennis")){var s=_.contains(r,"Shorts")?r.indexOf("Shorts"):_.contains(r,"Skorts")?r.indexOf("Skorts"):r.indexOf("Shorts");r[s]="men"===i?"Shorts":"Skorts"}$("span.primary-filters").each(function(e,t){var i=r[e];void 0!==i?$(t).data("filter-name",i):$(t).data("filter-name",$(t).data("item")),$(t).html($(t).data("filter-name"))}),$('span.primary-filters[data-item="'+n+'"]').html($('span.primary-filters[data-item="'+n+'"]').data("filter-name")+" ("+o.count+")")},ub.funcs.updateActiveSecondaryFilter=function(e,t,i){var n=_.size(e);$("span.secondary-filters").each(function(e,t){"separator"!==$(t).data("item")&&$(t).html($(t).data("item"))});var a=$("span.secondary-filters.active").data("item");$("span.secondary-filters.active").html(a+" ("+n+")")},ub.funcs.initSearchPicker=function(e,t){ub.funcs.fadeOutBackgrounds(),$("body").addClass("pickers-enabled"),$("div#main-row").hide(),$("div.special_modifiers").hide(),$("div#main-picker-container").show();t=t;ub.funcs.initScroller("search_results",t,e)},$("input#search_field").on("keyup",function(e){0===$(this).val().length&&ub.funcs.initMen()}),ub.funcs.initMen=function(){$('span.slink[data-item="Men"]').click()},ub.funcs.backHome=function(){ub.funcs.initGenderPicker()},ub.funcs.showPartsDropdown=function(){var e=$("div#parts_dropdown");"closed"===e.data("status")?(e.data("status","open"),e.fadeIn(),$(".mod_primary_panels").hide()):(e.data("status","closed"),e.css("display","none"),$(".mod_primary_panels").fadeIn("fast"))},$("div#select_part").on("click",function(){ub.funcs.showPartsDropdown()}),-1===window.ub.config.material_id&&void 0===window.ub.temp&&ub.funcs.initGenderPicker(),ub.funcs.turnOffMTAB=function(i){$("div.mTab").each(function(e){var t=$(this).data("type");t!==i&&($(this).find("img").attr("src","/images/uiV1/modifier_tabs/inactive/"+t+".png?v=0.01"),$(this).css("border-top-color","#d7d7d7"),$(this).css("background-color","#e6e6e6"),$(this).css("padding-bottom","7px"),$(this).css("padding-top","7px"))}),$("div.mod_primary_panels").each(function(){$(this).data("type")!==i&&$(this).hide()})},ub.funcs.turnOnMTAB=function(e){var t=$('div.mTab[data-type="'+e+'"]');t.find("img").attr("src","/images/uiV1/modifier_tabs/active/"+e+".png?v=0.01"),t.css("border-top-color","#ffffff"),t.css("background-color","#ffffff"),t.css("margin-left","0px"),t.css("margin-right","0px"),t.css("padding","10px"),$('div.mod_primary_panels[data-type="'+e+'"]').fadeIn(),ub.funcs.turnOffMTAB(e)},$("div.mTab").on("click",function(){var e=$(this).data("type");ub.funcs.turnOnMTAB(e)}),$('div.mTab[data-type="color"]').click(),$("body").dblclick(function(){ub.status.onText||ub.states.canDoubleClick&&($("div#cogPopupContainer").is(":visible")||(ub.zoom_on(),$('a.change-view[data-view="zoom"]').addClass("zoom_on")))}),ub.funcs.displayLoginForm=function(){$("a.dropdown-toggle").trigger("click")},ub.funcs.getOrders=function(){},ub.funcs.parseJSON=function(e){var t=e;return _.each(e,function(e){_.each(e.items,function(e){var t=JSON.parse(e.builder_customizations);e.thumbnails=t.thumbnails})}),t},ub.funcs.shareSavedDesign=function(e,t){},ub.funcs.deleteSavedDesign=function(t,e){!0===confirm("Are you sure you want to delete '"+e+"'?")&&(data={id:t},$.ajax({url:ub.config.api_host+"/api/saved_design/delete/",data:JSON.stringify(data),type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){$('tr.saved-design-row[data-id="'+t+'"]').fadeOut()}}))},ub.funcs.runDataTable=function(){$(".data-table").DataTable({paging:!0,lengthChange:!1,searching:!0,ordering:!1,info:!0,autoWidth:!0,initComplete:function(){this.api().columns().every(function(){var t=this,i=$('<select><option value=""></option></select>').appendTo($(t.footer()).empty()).on("change",function(){var e=$.fn.dataTable.util.escapeRegex($(this).val());t.search(e?"^"+e+"$":"",!0,!1).draw()});t.data().unique().sort().each(function(e,t){i.append('<option value="'+e+'">'+e+"</option>")})}),$(".data-table-filter-hide select").hide(),$(".dataTables_filter,.dataTables_paginate").attr("style","float: right;"),$(".dataTables_filter label").attr("style","margin-bottom: 10px;"),$(".dataTables_info").attr("style","margin-top: 10px;"),$(".dataTables_filter input").attr("style","width: 300px; margin-left: 10px;")}})},ub.funcs.rebindSaveButtons=function(s){var l=$("div.saved-designs-list");$("img.tview");$("div.saved-designs-list").on("click","img.tview",function(){var e="<img src ='"+$(this).data("file")+"' />";ub.showModalTool(e)}),$("div.saved-designs-list").on("click","span.action-button.view",function(){var e="/my-saved-design/"+$(this).data("saved-design-id")+"/render";window.open(e,"_blank")}),$("div.saved-designs-list").on("click","span.action-button.delete",function(){var e=$(this).data("saved-design-id"),t=$(this).data("name");ub.funcs.deleteSavedDesign(e,t)}),r(),$(document).on("change",".fil-to,.fil-from",function(){var i=$(".fil-from").val(),n=$(".fil-to").val(),e=$("#m-saved-designs-table").html(),t=JSON.stringify(s.savedDesigns),a=JSON.parse(t);a.forEach(function(e,t){e.created_at=e.created_at.split(" ").slice(0,1).join(" "),i<=e.created_at&&n>=e.created_at||delete a[t]});var o={savedDesigns:a.filter(function(e){return""!==e})},r=Mustache.render(e,o);l.html(r),$(".created-at").each(function(e){var t=util.dateFormat($(this).text());t=t.split(" ").slice(0,3).join(" "),$(this).text(t)}),ub.funcs.runDataTable(),ub.funcs.rebindSaveButtons()})},ub.funcs.displayMySavedDesigns=function(){$.ajax({url:ub.config.api_host+"/api/saved_design/getByUserId/"+ub.user.id,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){$("div.my-saved-designs-loading").hide();var t=$("div.saved-designs-list"),i=$("#m-saved-designs-table").html(),n={savedDesigns:ub.funcs.parseJSON(e.saved_designs)};n.savedDesigns.forEach(function(e,t){n.savedDesigns[t].created_at_time=util.dateFormat(e.created_at),n.savedDesigns[t].created_at_time=n.savedDesigns[t].created_at_time.split(" ").slice(3,5).join(" ")});var a=Mustache.render(i,n);t.html(a),$(".created-at").each(function(e){var t=util.dateFormat($(this).text());t=t.split(" ").slice(0,3).join(" "),$(this).text(t)}),ub.funcs.runDataTable(),ub.funcs.rebindSaveButtons(n),0===e.saved_designs.length&&$("div.saved-designs-list table tfoot").hide()}})},"my-saved-designs"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return void ub.funcs.displayLoginForm();ub.funcs.displayMySavedDesigns()}if(ub.funcs.deleteSavedOrder=function(t,i){!0===confirm("Are you sure you want to delete saved order ["+i+"]?")&&(data={id:t},$.ajax({url:ub.config.api_host+"/api/order/delete/",data:JSON.stringify(data),type:"POST",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){$.smkAlert({text:"Saved Order ["+i+"] Deleted.",type:"success",time:3,marginTop:"80px"}),$('tr.saved-order-row[data-id="'+t+'"]').fadeOut()}}))},ub.funcs.displayMyOrders=function(){$.ajax({url:ub.config.api_host+"/api/order/user/orderswItems/"+ub.user.id,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){var t=0,i=1;ub.config.toString&&(t="0",i="1"),$("div.my-orders-loading").hide();var n=$("div.order-list.saved"),a=$("#m-orders-table").html(),o={orders:_.filter(ub.funcs.parseJSON(e.orders),{submitted:t})};o.orders.forEach(function(e,t){e.created_at=util.dateFormat(e.created_at),e.created_at_time=util.dateFormat(e.created_at),e.created_at=e.created_at.split(" ").slice(0,3).join(" "),e.created_at_time=e.created_at_time.split(" ").slice(3,5).join(" ")});var r=Mustache.render(a,o);n.html(r);var s=$("div.order-list.submitted"),l=(a=$("#m-orders-table").html(),{orders:_.filter(ub.funcs.parseJSON(e.orders),{submitted:i})});l.orders.forEach(function(e,t){e.created_at=util.dateFormat(e.created_at),e.created_at_time=util.dateFormat(e.created_at),e.created_at=e.created_at.split(" ").slice(0,3).join(" "),e.created_at_time=e.created_at_time.split(" ").slice(3,5).join(" ")});r=Mustache.render(a,l);s.html(r),ub.funcs.runDataTable(),0===o.orders.length&&$("div.order-list table tfoot").hide(),$("div.order-list.submitted").find("span.action-button.delete, span.action-button.edit").hide(),$("div.order-list.saved").find("span.action-button.delete, span.action-button.view").hide();var c=$("img.thumbs");c.unbind("click"),c.on("click",function(){var e="<img src ='"+$(this).data("file")+"' />";ub.showModalTool(e)}),$("span.action-button.edit").unbind("click"),$("span.action-button.edit").on("click",function(){var e=$(this).data("order-id");$(this).data("id");window.location.href="/order/"+e}),$("span.action-button.delete").unbind("click"),$("span.action-button.delete").on("click",function(){var e=$(this).data("order-id"),t=$(this).data("id");ub.funcs.deleteSavedOrder(t,e)}),$("span.action-button.view").unbind("click"),$("span.action-button.view").on("click",function(){var e=$(this).data("order-id");$(this).data("id");$("div.order-list.submitted").hide(),$("div.order-list.saved").hide(),$("div.my-orders-loading").fadeIn(),$("span.orders.header").hide(),$("div.order-tabs").hide(),window.location.href="/order/view/"+e}),$("div.order-tabs > span.tab").unbind("click"),$("div.order-tabs > span.tab").on("click",function(){var e=$(this).data("type");$("div.order-list").hide(),$("div.order-list."+e).fadeIn(),$("span.tab").removeClass("active"),$(this).addClass("active"),$("span.orders.header").html("My "+e+" Orders")}),$("div.order-list.submitted").hide(),$('span.tab[data-type="submitted"]').trigger("click")}})},"my-orders"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return void ub.funcs.displayLoginForm();ub.funcs.displayMyOrders()}if(ub.funcs.previewEmbellishment=function(){var e,t="";a=ub.embellishmentDetails,a.design_summary=JSON.parse(a.design_summary),a.design_details=JSON.parse(a.design_details),e=ub.data.inkSoftBaseURL+a.design_summary.Canvases[0].SvgRelativeUrl,$("img.previewSVG").attr("src",e),$("a.main-preview-window").attr("href",e),$("span.design-id").html(a.design_id),$("span.design-name").html(a.design_name),$("em.filename").html(e),_.each(a.design_details.Data.Canvases[0].Elements,function(e){"object"==typeof e.Colors?t+=ub.utilities.buildTemplateString("#m-embellishment-preview-vector",{name:_.last(e.ArtName.split("/")),baseVectorPath:ub.data.inkSoftBaseURL+e.OriginalArtPath,mainObject:e,colors:_.map(_.uniq(e.Colors),function(e){var t=ub.funcs.getSublimationColorCodeByHexCode(e.toLowerCase());return{hexCode:e,colorCode:void 0===t?"Color code not found":t.color_code}})}):t+=ub.utilities.buildTemplateString("#m-embellishment-preview-font",{style:e.Font.FontStyleName,fillcolor:e.FillColor,name:e.Font.FamilyName,curveShape:e.CurveShape,fontPath:ub.data.inksoftFontsFolder+e.Font.FontStyleName+"/"+e.Font.FamilyName+".ttf",mainObject:e,text:e.Text,displayStroke:0===e.StrokeWidth?"none":"block",strokeColor:_.map(_.uniq([e.StrokeColor]),function(e){var t=ub.funcs.getSublimationColorCodeByHexCode(e.toLowerCase());return{hexCode:e,colorCode:void 0===t?"Color code not found":t.color_code}}),fillColor:_.map(_.uniq([e.FillColor]),function(e){var t=ub.funcs.getSublimationColorCodeByHexCode(e.toLowerCase());return{hexCode:e,colorCode:void 0===t?"Color code not found":t.color_code}})})}),$("div.embellishmentInfo").html(t),$("div.mainPreviewLink").fadeIn(),$("h3.header").fadeIn()},ub.funcs.getSublimationColorCodeByHexCode=function(e){var t=e;return-1!==t.indexOf("#")&&(t=t.replace("#","")),_.find(ub.data.colors,{hex_code:t,sublimation_only:0})},"preview-embellishment"===ub.page){$("div#main-picker-container").remove(),$("body").css("background-image","none");var i=window.ub.config.api_host+"/api/colors";ub.loader(i,"colors",function(e){ub.data.colors=e,ub.funcs.previewEmbellishment()})}if(ub.funcs.messagesCallBack=function(e){var t=e;_.size(t);$("div.my-messages-loading").hide(),$("div.messages-loading").hide();$("div.message-list");var n=ub.funcs.parseJSON(t),i={messages:n=_.chain(n).map(function(e){return e.statusPreview="0"===e.read?"New!":"",void 0!==e.content&&null!==e.content&&(e.contentPreview=e.content.substring(0,33)+"..."),e.numericId=parseInt(e.id),e}).sortBy(function(e){return-1*e.numericId}).value()},a=$("div.message-list.right-pane"),o=$("#messages-table").html();_messagesMarkup=Mustache.render(o,i),$.when(a.html(_messagesMarkup)).then(function(){}),$("span.message-count").html("Messages: "+_.size(n));var r=$("span.action-button.view-message");r.unbind("click"),r.on("click",function(){var t=$(this).data("id"),e=($(this).data("type"),$("#m-message-popup").html()),i=_.find(n,{id:t});_messagesPopupMarkup=Mustache.render(e,i),$("#primaryMessagePopup").remove(),$("body").append(_messagesPopupMarkup),$("#primaryMessagePopup").fadeIn(),$("body").scrollTop(0),ub.funcs.centerPatternPopup(),"sent"===$("div#messages > span.header").html()?$("div.reply-box").hide():ub.funcs.markAsRead(t),$("span.submit-reply").unbind("click"),$("span.submit-reply").on("click",function(){var e=$('textarea[name="reply"]').val();""!==e?(ub.funcs.createMessage(i.type,"N/A","Re: "+i.subject,e,t),$("#primaryMessagePopup").remove()):$.smkAlert({text:"Please put in a message.",type:"warning",time:3,marginTop:"80px"})}),$("div.close-popup").unbind("click"),$("div.close-popup").on("click",function(){$("#primaryMessagePopup").remove()})});var s=$("span.message-type");s.unbind("click"),s.on("click",function(){var e=$(this).data("type");s.removeClass("active"),$(this).addClass("active"),$("div#messages > span.header").html(e),$("tr.message-row").remove(),$("div.messages-loading").fadeIn(),ub.funcs.filterMessages(e)})},ub.funcs.filterMessages=function(e){var t=_.find(ub.data.notificationMessage,{type:e});$("div.notification-description").html(t.description),$("div#messages > span.header").html(e),"unread"!==e?ub.funcs.displayMyMessages(e):ub.funcs.displayMyMessages()},ub.funcs.markAsRead=function(t){void 0!==$.ajaxSettings.headers&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"],$.ajax({url:ub.config.api_host+"/api/message/"+t,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.funcs.updateMessageCount(),"unread"===$("div#messages > span.header").html()&&$('tr.message-row[data-id="'+t+'"]').remove()}})},ub.funcs.displayMyMessages=function(a){void 0!==$.ajaxSettings.headers&&delete $.ajaxSettings.headers["X-CSRF-TOKEN"];var e=ub.config.api_host+"/api/messages/recipient/unread/"+ub.user.id;void 0!==a&&(e=ub.config.api_host+"/api/messages/recipient/"+ub.user.id),"sent"===a&&(e=ub.config.api_host+"/api/messages/sender/"+ub.user.id),$.ajax({url:e,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){if(void 0===a||"sent"===a)ub.funcs.messagesCallBack(e.messages);else{var t=a.toUpperCase(),i=_.map(e.messages,function(e){return e.type=e.type.toUpperCase(),e});"Pm"===t&&(t="PM");var n=_.filter(i,{type:t});ub.funcs.messagesCallBack(n)}}})},"my-messages"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return void ub.funcs.displayLoginForm();ub.funcs.displayMyMessages()}if(ub.funcs.displaySignup=function(){var e=$("div.signup-container"),t=$("#m-signup-page").html(),i=Mustache.render(t,{application_id:"1"});e.html(i)},ub.funcs.sortRepsDropDown=function(){$selectOptionsTemp=$('select[name="rep"] > option'),$selectOptionsTemp.sort(function(e,t){return aSort=$(e).data("sort"),bSort=$(t).data("sort"),aSort-bSort}),$('select[name="rep"]').html($selectOptionsTemp)},ub.funcs.prependSeparators=function(e,t){$('select[name="rep"]').append('<option data-sort="0" data-name="disabled" disabled>--- Local Reps (ZIP CODE: '+t+") ---</option>"),e&&$('select[name="rep"]').append('<option data-sort="1" value="-1" data-name="Anyone is ok (if no Rep is within the areas)">Anyone is ok for me (if no Rep is within the area)</option>'),$('select[name="rep"]').append('<option data-sort="2" data-name="disabled" disabled>---------------------------</option>')},ub.funcs.markLocalReps=function(e,t,i){ub.utilities.buildTemplateString("#m-sales-reps-options",{rep:e});if($('select[name="rep"]').find('option[data-sort="1"], option[data-sort="0"], option[data-sort="2"]').remove(),0<e.length){$('select[name="rep"] > option').each(function(e,t){$(this).html($(this).data("name")+" - ("+$(this).data("dealer")+")"),$(this).data("sort","3")}),_.each(e,function(e){$option=$('select[name="rep"]').find('option[value="'+e.id+'"]'),$option.html($option.data("name")+" - ("+e.dealer+") (LOCAL REP)"),$option.data("sort","1")}),ub.funcs.prependSeparators(!1,i),ub.funcs.sortRepsDropDown();var n=e[0].id;$('select[name="rep"]').val(n),$("span.message-rep").html("Found: "+e.length+" local reps."),$('select[name="rep"]').removeAttr("disabled")}else ub.funcs.prependSeparators(!0,i),ub.funcs.sortRepsDropDown(),$('select[name="rep"]').val(-1),$("span.message-rep").html("No reps found for your zip code ["+i+"], It is still ok to proceed without a sales rep, we will just assign a default rep to you in case you submit an order, you can still use the customizer, but please do check that you entered a correct zip code before proceeding.");void 0!==t&&0<t.length&&($('select[name="rep"]').val(t),$('select[name="rep"]').attr("disabled","disabled"),$('input[name="find-rep"]').attr("disabled","disabled"),$('input[name="zip"]').attr("disabled","disabled"),$("span.message-rep").html("")),"0"!==t&&"-1"!==t||($('select[name="rep"]').val(-1),$('select[name="rep"]').removeAttr("disabled"),$('input[name="find-rep"]').removeAttr("disabled"),$('input[name="zip"]').removeAttr("disabled"))},ub.funcs.updateRepsList=function(e,t){var i=ub.utilities.buildTemplateString("#m-sales-reps-options",{rep:e});$('select[name="rep"]').html(i),$("span.message-rep").html("Found: "+e.length+" reps."),0<e.length?$('select[name="rep"]').removeAttr("disabled"):($('select[name="rep"]').attr("disabled","disabled"),$("span.message-rep").html("No reps found for your zip code ["+_id+"], It is still ok to proceed without a sales rep, we will just assign a default rep to you in case you submit an order, you can still use the customizer, but please do check that you entered a correct zip code before proceeding.")),void 0!==t&&0<t.length&-1!==t&&($('select[name="rep"]').val(t),$('select[name="rep"]').attr("disabled","disabled"),$('input[name="zip"]').attr("disabled","disabled"),$('input[name="find-rep"]').attr("disabled","disabled")),"signup"===ub.page&&(ub.funcs.prependSeparators(!0,"blank"),ub.funcs.sortRepsDropDown(),$('select[name="rep"]').val(-1))},ub.funcs.getAllReps=function(i,e){$("span.message-rep").html("Loading..."),$.ajax({url:ub.endpoints.getFullUrlString("getAllSalesReps"),type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){if(e.success){var t=_.without(e.sales_reps,_.findWhere(e.sales_reps,{rep_id:"4321"}));t=_.without(t,_.findWhere(t,{rep_id:"179"})),t=_.filter(t,function(e){if(0!==e.active)return e}),i(t)}}})},ub.funcs.getRepsByZipCode=function(t,i,n){var e=t;$("span.message-rep").html("Searching..."),$.ajax({url:ub.endpoints.getFullUrlString("getSalesRepByZipCode")+e,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success&&i(e.sales_reps,n,t)}})},"signup"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),$("input.findRep").unbind("click"),$("input.findRep").on("click",function(){var e=$('input[name="zip"]').val();0!==e.trim().length?ub.funcs.getRepsByZipCode(e,ub.funcs.markLocalReps):$("span.message-rep").html("Please enter a valid Zip Code!")}),ub.funcs.getAllReps(ub.funcs.updateRepsList),!window.ub.user)return;ub.funcs.displaySignup()}if(ub.funcs.updateProfile=function(e){var t={id:ub.user.id,first_name:e.firstName,last_name:e.lastName,state:e.state,zip:e.zip,default_rep_id:parseInt(e.repID)},i=ub.config.api_host+"/api/user/update";$.ajax({url:i,type:"POST",data:JSON.stringify(t),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){$("button.update-profile").removeAttr("disabled"),$("#myProfileAlert").removeClass("hidden").fadeIn(500,function(){$("#myProfileAlert").delay(3e3).fadeOut(500)})}})},ub.funcs.displayMyProfile=function(){var e=$("div.profile-container"),t=$("#m-profile-page").html(),i={email:ub.user.email,firstName:ub.user.firstName,lastName:ub.user.lastName,state:ub.user.state,zip:ub.user.zip,application_id:"1"},n=Mustache.render(t,i);e.html(n),$("button.update-profile").unbind("click"),$("#myProfile").submit(function(){var e=$('input[name="first-name"]').val(),t=$('input[name="last-name"]').val(),i=$('input[name="state"]').val(),n=$('input[name="zip"]').val(),a=$('select[name="rep"]').val();return $(this).attr("disabled","disabled"),ub.funcs.updateProfile({firstName:e,lastName:t,state:i,zip:n,repID:a}),!1}),$("input.findRep").unbind("click"),$("input.findRep").on("click",function(){var e=$('input[name="zip"]').val();0!==e.trim().length?ub.funcs.getRepsByZipCode(e,ub.funcs.markLocalReps):$("span.message-rep").html("Please enter a valid Zip Code!")}),ub.funcs.getAllReps(ub.funcs.updateRepsList),$('select[name="rep"]').removeAttr("disabled"),ub.user.zip,0<ub.user.zip.length?ub.funcs.getRepsByZipCode(ub.user.zip,ub.funcs.markLocalReps,ub.user.defaultRepID):ub.funcs.getRepsByZipCode("blank",ub.funcs.markLocalReps,ub.user.defaultRepID)},"my-profile"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return void ub.funcs.displayLoginForm();ub.funcs.displayMyProfile()}if(ub.funcs.submitChangePasswordPOST=function(){var e={user_id:$("input.user_id").val(),hash:$("input.hash").val(),_token:$("input.csrf-token").val(),old_password:$("input#old-password").val(),new_password:$("input#new-password").val()};$.ajax({url:"/saveChangedPassword",type:"POST",data:JSON.stringify(e),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?($.smkAlert({text:"Your Password has been changed successfully",type:"success",permanent:!1,time:5,marginTop:"90px"}),window.location.href="/logout"):$.smkAlert({text:e.message,type:"error",permanent:!1,time:5,marginTop:"90px"})}})},ub.funcs.submitForgotPasswordPOST=function(){var e={user_id:$("input.user-id").val(),hash:$("input.hash").val(),_token:$("input.csrf-token").val(),password:$("input#rpassword").val()};$.ajax({url:"/saveNewPassword",type:"POST",data:JSON.stringify(e),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?($.smkAlert({text:"Your Password has been changed successfully",type:"success",permanent:!1,time:5,marginTop:"90px"}),window.location.href=window.ub.config.host):$.smkAlert({text:e.message,type:"error",permanent:!1,time:5,marginTop:"90px"})}})},ub.funcs.forgotPasswordPOST=function(){var e={email:$("input#forgot-password-email").val(),_token:$('input[name="_token"]').val()};$.ajax({url:"/recoverPassword",type:"POST",data:JSON.stringify(e),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success?($.smkAlert({text:"A password reset link has been sent to your email",type:"success",permanent:!1,time:5,marginTop:"90px"}),window.location.href=window.ub.config.host):$.smkAlert({text:"You have entered an invalid email!",type:"error",permanent:!1,time:5,marginTop:"90px"})}})},ub.funcs.forgotPassword=function(){var e=$("div.forgot-password-container"),t=$("#m-forgot-password").html(),i=Mustache.render(t,{application_id:"1"});e.html(i),$("div#main-row").css("display","block")},"forgot-password"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return;ub.funcs.forgotPassword()}if(ub.funcs.resetPassword=function(){var e=$("div.forgot-password-container"),t=$("#m-forgot-password").html(),i=Mustache.render(t,{application_id:"1"});e.html(i)},"reset-password"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return;ub.funcs.resetPassword()}if($(".new-design").on("click",function(){}),$(".open-design").on("click",function(){!function(e){var o={weekday:"long",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"};$.ajax({url:ub.config.api_host+"/api/order/user/"+e,type:"GET",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){if(e.success){var t=e.orders;$("#orders-list").html(""),$.each(t,function(e,t){var i=$("#list-saved-designs").html(),n=new Date(t.created_at);t.created_at=n.toLocaleTimeString("en-us",o);var a=Mustache.to_html(i,t);$("#orders-list").append(a)}),$('#orders-list [data-toggle="tooltip"]').tooltip(),$("#open-design-modal").modal("show")}r(),$(".delete-uniform-design").on("click",function(){var t={id:$(this).data("order-id")};$.ajax({url:ub.config.api_host+"/api/order/delete",type:"POST",dataType:"json",data:JSON.stringify(t),crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){e.success&&$('.delete-uniform-design[data-order-id="'+t.id+'"]').parents(".uniform-design-item").fadeOut()}})})}})}(ub.user.id)}),$(".compare-design").on("click",function(){}),$(".open-save-design-modal").on("click",function(){if(!1!==ub.user){var e=ub.exportSettings();e.upper.preview="",$("#builder_customizations").val(JSON.stringify(e)),$("#save-design-modal").modal("show")}else showSignUpModal()}),ub.funcs.displayOrderDetails=function(e){var t=JSON.parse(e.builder_customizations),i=JSON.parse(e.additional_attachments);$("img.right").attr("src",t.thumbnails.right_view),$("img.front").attr("src",t.thumbnails.front_view),$("img.back").attr("src",t.thumbnails.back_view),$("img.left").attr("src",t.thumbnails.left_view),$("img.right").attr("data-src",t.thumbnails.right_view),$("img.front").attr("data-src",t.thumbnails.front_view),$("img.back").attr("data-src",t.thumbnails.back_view),$("img.left").attr("data-src",t.thumbnails.left_view),$("img.thumbs").unbind("click"),$("img.thumbs").on("click",function(){var e="<img src ='"+$(this).attr("data-src")+"' />";ub.showModalTool(e)}),null!=i&&0<i.length?($("img.attachments").attr("src",i),$("img.attachments").attr("data-src",i),$("a.download-attachment").attr("href",i)):($("img.attachments").hide(),$("a.download-attachment").hide()),$("span.order-id").html(e.order_id),$("span.description").html(e.description),$("a.pdfOrderForm").html("View Order Form PDF ("+t.pdfOrderForm+")"),$("a.pdfOrderForm").attr("href",t.pdfOrderForm),$("span.notes").html(e.notes),$("span.additional-attachments").html(e.additional_attachments);var n="/pdfjs/web/viewer.html?file="+t.pdfOrderForm;$("iframe#pdfViewer").attr("src",n)},ub.funcs.hightlightItemInGroup=function(e,t){$(e).removeClass("active"),$(t).addClass("active")},ub.funcs.showTab=function(e,t){$(e).hide(),$(t).show()},ub.funcs.customArtworkRequestNotificationThread=function(e){var t=["Custom Artwork Request Received.","Artwork finished.","This order was rejected because of the following reasons: "],i=_.filter(e,function(e){return _.contains(t,e.subject)});i=_.sortBy(i,function(e){return parseInt(e.id)}).reverse();var n=ub.utilities.buildTemplateString("#m-car-notification-thread-container",{messages:i});if($("div.car-notification-thread-container").html(n),ub.content=i,0<_.size(i)){var a=_.first(i);void 0!==a?($("span.last-message").html(a.content),$("a.edit-order-link").show()):($("span.last-message").hide(),$("a.edit-order-link").hide(),$("span.edit-order-link").hide())}},ub.funcs.displayMessagesForOrder=function(e,t){var i=_.filter(e,{order_code:t}),n=ub.utilities.buildTemplateString("#m-order-info-messages",{messages:i});$.when($("div.order-info-messages").html(n)).then($("span.message-count").html("Messages: "+_.size(i))),ub.funcs.customArtworkRequestNotificationThread(i)},ub.funcs.setupOrderInfoEvents=function(){$('span.tab[data-type="main-info"]').unbind("click"),$('span.tab[data-type="main-info"]').on("click",function(){ub.funcs.hightlightItemInGroup("div.order-tabs > span.tab",'span.tab[data-type="main-info"]'),ub.funcs.showTab("div.order-info","div.order-info.main-info")}),$('span.tab[data-type="custom-artwork-request-status"]').unbind("click"),$('span.tab[data-type="custom-artwork-request-status"]').on("click",function(){ub.funcs.hightlightItemInGroup("div.order-tabs > span.tab",'span.tab[data-type="custom-artwork-request-status"]'),ub.funcs.showTab("div.order-info","div.order-info.custom-artwork-request-status")}),$('span.tab[data-type="status-thread"]').unbind("click"),$('span.tab[data-type="status-thread"]').on("click",function(){ub.funcs.hightlightItemInGroup("div.order-tabs > span.tab",'span.tab[data-type="status-thread"]'),ub.funcs.showTab("div.order-info","div.order-info.status-thread")}),$('span.tab[data-type="pdf"]').unbind("click"),$('span.tab[data-type="pdf"]').on("click",function(){var e=location.pathname,t="https://service-pdf.s3.us-west-2.amazonaws.com/pdf/prolook-"+e.substring(e.lastIndexOf("/")+1)+".pdf";$("iframe#pdfViewer").attr("src",t),ub.funcs.hightlightItemInGroup("div.order-tabs > span.tab",'span.tab[data-type="pdf"]'),ub.funcs.showTab("div.order-info","div.order-info.pdf")})},ub.funcs.processCustomArtworkRequestStatus=function(e){$("td.custom-artwork-requests.action").hide(),"rejected"===e?$("span.custom-artwork-status").addClass("rejected"):($("span.last-message").hide(),$("a.edit-order-link").hide(),$("span.edit-order-link").hide())},ub.funcs.viewOrderInfo=function(){ub.current_material.mascots_url=window.ub.config.api_host+"/api/mascots/",ub.current_material.mascot_categories_url=window.ub.config.api_host+"/api/mascot_categories",ub.current_material.mascot_groups_categories_url=window.ub.config.api_host+"/api/mascots_groups_categories/",ub.loader(ub.current_material.mascots_url,"mascots",ub.callback),ub.loader(ub.current_material.mascot_categories_url,"mascots_categories",ub.callbackSimple),ub.loader(ub.current_material.mascot_groups_categories_url,"mascots_groups_categories",ub.callbackSimple);var e=ub.endpoints.getFullUrlString("getOrderInfoByOrderID")+ub.config.orderID;$.ajax({url:e,type:"Get",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){var t=ub.config.host+"/order/"+ub.config.orderID;$("span.status").html(e.order.status),$("a.view-submitted-design").attr("src",t),$("a.view-submitted-design").attr("href",t),$("a.view-submitted-design").html(t)}});e=ub.endpoints.getFullUrlString("getOrderItemsByOrderID")+ub.config.orderID;$.ajax({url:e,type:"Get",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.funcs.displayOrderDetails(e.order[0]),ub.data.orderInfo=e.order[0],$("div.my-orders-loading").hide(),ub.funcs.hightlightItemInGroup("div.order-tabs > span.tab",'span.tab[data-type="main-info"]'),ub.funcs.showTab("div.order-info","div.order-info.main-info")}}),$.ajax({url:ub.endpoints.getFullUrlString("getMessagesByRecipientID")+ub.user.id,type:"Get",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.funcs.displayMessagesForOrder(e.messages,ub.config.orderID)}}),ub.funcs.getCustomArtworRequestStatus(function(e,t){$("span.custom-artwork-status").html(t),ub.funcs.processCustomArtworkRequestStatus(t)}),ub.funcs.getOrdersWItems(function(e){var n=!1;if(void 0!==e.order_info.artworks[0]){var a=JSON.parse(e.order_info.artworks[0].artworks);"string"==typeof a&&(a=JSON.parse(a)),_.each(a,function(e){if(null!==e.mascot_id){var t=ub.config.host+"/order/"+ub.config.orderID;n=!0,$("span.custom-artwork-status").html("Mascot Ready for Review"),$("span.last-message").html('You can now review to approve / reject the mascot/s you submitted for custom artwork processing in your design. <br /> Click this link to load the design: <a target="_new" href="'+t+'">'+t+"</a>"),$("span.last-message").show()}})}var t=JSON.parse(e.order_info.items[0].builder_customizations),o="",r='<table class="">';t.applications;if(r+='<thead><tr> <td>Application #</td> <td class="notes">Notes</td> <td>Images / Link</td> <td>Status / Mascot ID</td> <td class="custom-artwork-requests action"></td></tr> </thead>',_.each(t.applications,function(e){if(e.customLogo){var t=e.customFilename.substr(e.customFilename.length-3);if(o="<tr >",o+="<td>",o+=e.code+"<br /><br />",o+="</td>",o+='<td class="notes">',o+=e.additionalNotes+"<br />",o+="</td>",o+="<td>",_.contains(["png","jpg","bmp","gif"],t)&&(o+="<img class='grow customFilename' data-src='"+e.customFilename+"' src='"+e.customFilename+"' /><br />"),o+="<a href='"+e.customFilename+"' target='new'>Open In New Tab</a><br />",o+="</td>",n){var i=_.find(a,{code:e.code});o+='<td class="status">',void 0!==i&&(o+=i.mascot_id),o+="</td>",o+='<td class="custom-artwork-requests action">',o+="<span class='btn approve-artwork' data-application-code='"+e.code+"'>Approve</span><br />",o+="</td>"}else o+='<td class="status">',o+="Processing<br />",o+="</td>",o+='<td class="custom-artwork-requests action">',o+="",o+="</td>";r+=o+="</tr>"}}),r+="</table>",$("span.custom-artwork-applications").html(r),n){var i=ub.config.host+"/order/"+ub.config.orderID;$("a.show-design").attr("href",i)}else $("div.link-row").hide();$("span.btn.approve-artwork").unbind("click"),$("span.btn.approve-artwork").on("click",function(){$(this).data("application-code")}),$("span.btn.approve-artwork").hide(),$("img.customFilename, img.attachments").unbind("click"),$("img.customFilename, img.attachments").on("click",function(){var e="<img src ='"+$(this).attr("data-src")+"' />";ub.showModalTool(e)})}),ub.funcs.setupOrderInfoEvents()},ub.funcs.updateArtworkRequestStatus=function(e,t){$.ajax({url:ub.config.api_host+ub.endpoints.getFullUrlString("updateArtworkRequest"),type:"POST",data:JSON.stringify(e),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){}})},ub.funcs.getCustomArtworRequestStatus=function(t){$.ajax({url:ub.config.api_host+"/api/order/"+ub.config.orderCode+"/artworkStatus",type:"Get",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){t(e,e.order.artwork_status)}})},ub.funcs.getOrdersWItems=function(t){$.ajax({url:ub.endpoints.getFullUrlString("getOrdersWItems")+ub.config.orderCode,type:"Get",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){t(e)}})},"view-order-info"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return void ub.funcs.displayLoginForm();ub.funcs.viewOrderInfo()}if($(".save-uniform-design").on("click",function(){$("#save-uniform-design-form .upper_body_uniform").val(ub.current_material.settings.upper.code),$("#save-uniform-design-form .lower_body_uniform").val(ub.current_material.settings.lower.code);var e=0;void 0!==ub.current_material.team_roster&&(e=ub.current_material.team_roster.length),$("#save-uniform-design-form .total_upper_uniforms").val(e),$("#save-uniform-design-form .total_lower_uniforms").val(e),$("#save-uniform-design-form .upper_front_view").val(ub.getThumbnailImage("front_view")),$("#save-uniform-design-form .upper_back_view").val(ub.getThumbnailImage("back_view")),$("#save-uniform-design-form .upper_right_view").val(ub.getThumbnailImage("right_view")),$("#save-uniform-design-form .upper_left_view").val(ub.getThumbnailImage("left_view")),$("#save-design-modal .fa-save").removeClass("fa-save").addClass("fa-spin fa-circle-o-notch"),$(this).attr("disabled","disabled"),$("#save-uniform-design-form").submit()}),!1!==ub.user){var n=Creditly.initialize(".creditly-wrapper .expiration-month-and-year",".creditly-wrapper .credit-card-number",".creditly-wrapper .security-code",".creditly-wrapper .card-type");$(".creditly-card-form .validate-cc").click(function(e){e.preventDefault();n.validate()})}function o(){var e=$("#roster-record").html(),t=Mustache.to_html(e,{uniformSizes:ub.uniformSizes});$("#team-roster-form .table-roster-list").append(t),$(".remove-roster-record").on("click",function(){$(this).parents("tr").remove()})}function r(){$("div.saved-designs-list").on("click",".share-uniform-design",function(){var e=$(this).data("saved-design-id");$("#open-design-modal").modal("hide"),$("#share-design-modal .share-uniform-design-by-email").data("order-id",e),$("#share-design-modal").modal("show")})}$(".open-team-roster-modal").on("click",function(){$("#team-roster-modal").modal("show")}),$(".add-roster-record").on("click",o),$(".share-uniform-design-by-email").on("click",function(){var e=$(this).data("order-id"),t={emails:$("#share-design-modal .team-email").val(),id:e,sharer_name:ub.user.fullname,sharer_message:$("#share-design-modal .message").val()};if(0==$("#share-design-modal .g-recaptcha-response").val().length)return $.smkAlert({text:"Please answer the reCAPTCHA verification",type:"warning",permanent:!1,time:5,marginTop:"90px"}),!1;$.ajax({url:ub.config.api_host+"/api/saved_design/sendToEmails/",data:JSON.stringify(t),type:"POST",dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){$("#share-design-modal").modal("hide");var t=e.success?"success":"warning";$.smkAlert({text:e.message,type:t,permanent:!1,time:10,marginTop:"90px"}),grecaptcha.reset()}})}),$(".save-team-roster").on("click",function(){var r=[];$(".table-roster-list tr").each(function(e,t){if(0<e){var i=$(t).find("td").eq(0).find("input").val(),n=$(t).find("td").eq(1).find("input").val(),a=$(t).find("td").eq(2).find("select").val(),o=$(t).find("td").eq(3).find("select").val();""!=i&&""!=n&&r.push({number:i,name:n,application:a,size:o})}}),$(".roster-list").html(""),$.each(r,function(e,t){var i=$("#roster-list").html(),n=Mustache.to_html(i,t);$(".roster-list").append(n)}),$("#team-roster-modal").modal("hide"),$.smkAlert({text:"Updated team roster list",type:"info",permanent:!1,time:5,marginTop:"90px"})}),$(".uniform-sizes .uniform-size").on("click",function(){var e=parseInt($(this).data("is-selected")),t=$(this).data("size");e?($(this).removeClass("selected"),$(this).data("is-selected",0),ub.uniformSizes[t].active=!1):($(this).addClass("selected"),$(this).data("is-selected",1),ub.uniformSizes[t].active=!0);$(".row-roster-size").each(function(e,t){$(t).html("");var i=$("#roster-sizes-options").html(),n=Mustache.to_html(i,{uniformSizes:ub.uniformSizes});$(t).html(n)})}),o()}),$(document).ready(function(){ub.sportsSpecific={},ub.sportsSpecific.freeFromExemptions={items:[],isExempted:function(e,t,i){return 0<_.filter(this.items,function(e){return e.sport===t}).length}}}),$(document).ready(function(){if(ub.funcs.initGuideSavedDesign=function(){ub.data.hasProcessedArtworks&&($("span.approve-reject-artwork-btn").show(),$("div#order-status").html("Artwork Processed, please review the logo and press <br/ > the Approve / Reject Artwork button below to finalize <br/ > the artwork for submission."),$("div#order-status").show(),$("div#order-status").attr("data-intro","This saved design has its artwork ready for your review."),$("div#order-status").attr("data-position","right"),$("span.approve-reject-artwork-btn").attr("data-step","2"),$("span.approve-reject-artwork-btn").attr("data-position","right"),$("span.approve-reject-artwork-btn").attr("data-intro","After reviewing the mascots, please click here to approve or reject, so we can make the necessary changes or if you approve we can submit this order for processing."),introJs().start())},ub.funcs.initGuideOrder=function(){ub.data.hasProcessedArtworks&&($("span.approve-reject-artwork-btn").show(),$("div#order-status").html("Artwork Processed, please review the logo and press the <br/ >Approve / Reject Artwork button below to finalize the artwork for submission."),$("div#order-status").show(),$("div#order-status").attr("data-intro","This order has its artwork ready for your review."),$("div#order-status").attr("data-position","right"),$("span.approve-reject-artwork-btn").attr("data-step","2"),$("span.approve-reject-artwork-btn").attr("data-position","right"),$("span.approve-reject-artwork-btn").attr("data-intro","After reviewing the mascots, please click here to approve or reject, so we can make the necessary changes or if you approve we can submit this order for processing."),introJs().start())},ub.funcs.updateSavedDesign=function(){ub.data.updateSaveDesignFromCustomArtworkRequest=!0,ub.front_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0,ub.back_view.visible=!0,ub.funcs.turnLocationsOff(),ub.funcs.showSaveDialogBox(),ub.funcs.cleanupsBeforeSave(),$("img.front_view").attr("src",""),$("img.back_view").attr("src",""),$("img.left_view").attr("src",""),$("img.right_view").attr("src",""),ub.current_material.settings.thumbnails={front_view:"",back_view:"",left_view:"",right_view:""},ub.funcs.removeLocations(),$(this).removeClass("zoom_on"),ub.funcs.uploadThumbnailSaveDesign("front_view"),ub.funcs.uploadThumbnailSaveDesign("back_view"),ub.funcs.uploadThumbnailSaveDesign("left_view"),ub.funcs.uploadThumbnailSaveDesign("right_view")},ub.funcs.updateOrder=function(){ub.data.updateOrderFromCustomArtworkRequest=!0,ub.front_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0,ub.back_view.visible=!0,ub.funcs.turnLocationsOff(),ub.funcs.cleanupsBeforeSave(),$("img.front_view").attr("src",""),$("img.back_view").attr("src",""),$("img.left_view").attr("src",""),$("img.right_view").attr("src",""),ub.current_material.settings.thumbnails={front_view:"",back_view:"",left_view:"",right_view:""},ub.funcs.removeLocations(),$(this).removeClass("zoom_on"),ub.funcs.uploadThumbnailSaveDesign("front_view"),ub.funcs.uploadThumbnailSaveDesign("back_view"),ub.funcs.uploadThumbnailSaveDesign("left_view"),ub.funcs.uploadThumbnailSaveDesign("right_view"),ub.funcs.initOrderProcess()},ub.funcs.updateLogoRequest=function(){var e,t;dialog=bootbox.dialog({title:"Logo Request",message:"Updating Logo Request...",size:"large"}),e=ub.config.api_host+"/api/v1-0/logo_request/update",t=JSON.stringify(ub.data.logo_request.parsedProperties),delete ub.data.logo_request.parsedProperties,ub.data.logo_request.properties=JSON.parse(t),$.ajax({url:e,type:"POST",data:JSON.stringify(ub.data.logo_request),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){"completed"===ub.data.logo_request.status&&("Saved Design"===ub.config.pageType&&ub.funcs.updateSavedDesign(),"Order"===ub.config.pageType&&ub.funcs.updateOrder()),dialog.modal("hide"),$("span.approve-reject-artwork-btn").fadeOut(),$("div#order-status").fadeOut()}})},ub.funcs.approveRejectArtworkOrders=function(e,r){var t;t=ub.utilities.buildTemplateString("#m-car-approve-dialog",{artworks:r,note:"Click the approve or reject button for the custom artwork request so that we can adjust the mascot if it was rejected or proceed to the order processing if everthing is ok. You can use the notes field to enter your comment to give the reason why you rejected the processed mascot."}),dialog=bootbox.dialog({title:"Approve / Reject Artwork",message:t,size:"large"}),dialog.init(function(){$("span.approve").unbind("click"),$("span.approve").on("click",function(){var e=$(this).data("code");$('span.btn[data-code="'+e+'"]').removeClass("active"),$(this).addClass("active")}),$("span.reject").unbind("click"),$("span.reject").on("click",function(){var e=$(this).data("code");$('span.btn[data-code="'+e+'"]').removeClass("active"),$(this).addClass("active")}),$("span.btn.cancel").unbind("click"),$("span.btn.cancel").on("click",function(){dialog.modal("hide")}),$("span.btn.submit").unbind("click"),$("span.btn.submit").on("click",function(){dialog.modal("hide");var a=[],o=!1;$("td.approve-reject").find("span.btn.active").each(function(e){var t=$(this).data("code"),i=$(this).data("state"),n=_.find(r,{code:t.toString()});void 0!==n&&(n.approved="approve"===i?"1":"0",n.updated=0,"reject"===i&&(n.user_rejected="1",n.approved=-1,n.user_notes=$('textarea.notes[data-code="'+t+'"]').val(),o=!0),n.user_notes=$('textarea[data-code="'+t+'"]').val(),a.push(n))}),ub.data.logo_request.status=o?"user_rejected":"completed",ub.data.logo_request.parsedProperties=a,ub.data.logo_request.properties=JSON.stringify(a),ub.funcs.updateLogoRequest()})})},ub.funcs.approveRejectArtworkSavedDesign=function(e,r){var t;t=ub.utilities.buildTemplateString("#m-car-approve-dialog",{artworks:r,note:"Click the approve or reject button for the custom artwork request so that we can adjust the mascot if it was rejected or proceed to the order processing if everthing is ok. You can use the notes field to enter your comment to give the reason why you rejected the processed mascot."}),dialog=bootbox.dialog({title:"Approve / Reject Artwork",message:t,size:"large"}),dialog.init(function(){$("span.approve").unbind("click"),$("span.approve").on("click",function(){var e=$(this).data("code");$('span.btn[data-code="'+e+'"]').removeClass("active"),$(this).addClass("active")}),$("span.reject").unbind("click"),$("span.reject").on("click",function(){var e=$(this).data("code");$('span.btn[data-code="'+e+'"]').removeClass("active"),$(this).addClass("active")}),$("span.btn.cancel").unbind("click"),$("span.btn.cancel").on("click",function(){dialog.modal("hide")}),$("span.btn.submit").unbind("click"),$("span.btn.submit").on("click",function(){dialog.modal("hide");var a=[],o=!1;$("td.approve-reject").find("span.btn.active").each(function(e){var t=$(this).data("code"),i=$(this).data("state"),n=_.find(r,{code:t.toString()});void 0!==n&&(n.approved="approve"===i?"1":"0",n.updated=0,"reject"===i&&(n.user_rejected="1",n.approved=-1,n.user_notes=$('textarea.notes[data-code="'+t+'"]').val(),o=!0),n.user_notes=$('textarea[data-code="'+t+'"]').val(),a.push(n))}),ub.data.logo_request.status=o?"user_rejected":"completed",ub.data.logo_request.parsedProperties=a,ub.data.logo_request.properties=JSON.stringify(a),ub.funcs.updateLogoRequest()})})},ub.funcs.customArtworkRequestCheckSavedDesign=function(e){var t=void 0;if(void 0!==ub.data.logo_request&&void 0!==(t=_.find(ub.data.logo_request.parsedProperties,{code:e.code}))&&(ub.data.hasProcessedArtworks=null!==t.mascot_id&&"1"!==t.approved&&"1"!==t.user_rejected||"for_review"===ub.data.logo_request.status,ub.data.hasProcessedArtworks)){var i=ub.funcs.getMascotByID(t.mascot_id);ub.data.hasProcessedArtworks=ub.data.hasProcessedArtworks,ub.config.orderArtworkStatus="artwork processed",e.mascotOld=e.mascot,e.mascot=i,e.preview=!0,ub.funcs.update_application_mascot(e.application,i),$("span.approve-reject-artwork-btn").fadeIn(),$("span.approve-reject-artwork-btn").unbind("click"),$("span.approve-reject-artwork-btn").on("click",function(){ub.funcs.approveRejectArtworkSavedDesign(ub.data.logo_request,ub.data.logo_request.parsedProperties)})}},ub.funcs.customArtworkRequestCheckOrders=function(e){var t=void 0;if(void 0!==ub.data.logo_request&&void 0!==(t=_.find(ub.data.logo_request.parsedProperties,{code:e.code}))&&(ub.data.hasProcessedArtworks=null!==t.mascot_id&&"1"!==t.approved&&"1"!==t.user_rejected||"for_review"===ub.data.logo_request.status,ub.data.hasProcessedArtworks)){var i=ub.funcs.getMascotByID(t.mascot_id);ub.data.hasProcessedArtworks=ub.data.hasProcessedArtworks,ub.config.orderArtworkStatus="artwork processed",e.mascotOld=e.mascot,e.mascot=i,e.preview=!0,ub.funcs.update_application_mascot(e.application,i),$("span.approve-reject-artwork-btn").fadeIn(),$("span.approve-reject-artwork-btn").unbind("click"),$("span.approve-reject-artwork-btn").on("click",function(){ub.funcs.approveRejectArtworkOrders(ub.data.logo_request,ub.data.logo_request.parsedProperties)})}},ub.funcs.processLogoRequests=function(){var t=[];_.each(ub.data.logo_request,function(e){e.parsedProperties=JSON.parse(e.properties),0<e.parsedProperties.length&&t.push(e)}),ub.data.logo_request=t,-1!==ub.config.material_id&&("Saved Design"===ub.config.pageType&&(ub.data.logo_request=_.find(ub.data.logo_request,{reference_id:ub.config.savedDesignInfo.savedDesignID})),"Order"===ub.config.pageType&&(ub.data.logo_request=_.find(ub.data.logo_request,{reference_id:ub.config.orderCode})))},ub.funcs.changeActiveTab=function(e,t){$(e).removeClass("active"),$(e+"."+t).addClass("active")},ub.funcs.changeCustomArtworkRequestType=function(e){$("div.custom-artwork-request-list.pending").html(""),$("div.my-custom-artwork-requests-loading").show(),ub.funcs.prepareCustomArtworkRequestTable(e)},ub.funcs.initPreviewCanvas=function(e){ub.current_material.settings.team_colors=[];function o(){$("span.colorItem").on("click",function(){var e=$(this).data("layer-no"),t=$(this).data("color-code"),i=($(this).data("layer-name"),$(this).data("temp"),ub.funcs.getColorByColorCode(t));!function(e,t){ub.preview_layers["layer_"+t].tint=parseInt(e.hex_code,16)}(i,e),ub.funcs.changeActiveColorSmallColorPicker(e,t,i)})}var t=document.getElementById("preview-canvas"),r=new PIXI.Container,i=PIXI.autoDetectRenderer(348,348,{transparent:!1},!1);i.backgroundColor=16250871,void 0!==i&&null!==t&&t.appendChild(i.view),ub.preview_layers=[],_.each(e.parsedLayersProperties,function(e,t){ub.current_material.settings.team_colors.push(ub.funcs.getColorByColorCode(e.default_color));var i=function(e){return new PIXI.Sprite(PIXI.Texture.fromImage(e+"?v="+new Date/1e3))}(e.filename),n=_.find(ub.data.colors,{color_code:e.default_color});r.addChild(i),i.tint=parseInt(n.hex_code,16),i.width=348,i.height=348,i.position={x:174,y:174},i.anchor.set(.5,.5),ub.sp=i,ub.st=r,ub.preview_layers["layer_"+t]=i;var a=function(o,r,s,e,t){var l="",i=(ub.funcs.getColorByColorCode(o),ub.data.colors),c=t;return void 0===t&&(c="not-set"),l='<div class="smallPickerContainer" data-layer-no="'+r+'">',l+='<label class="smallColorPickerLabel" >'+s+" </label>",i=_.sortBy(i,"order"),_.each(i,function(e){var t,i="&nbsp;",n="25px",a="";o===e.color_code&&(i='<i class="fa fa-check" aria-hidden="true"></i>',n="40px",a="activeColorItem"),t=ub.funcs.getColorByColorCode(e.color_code),l+='<span style="width: '+n+";background-color: #"+t.hex_code+"; color: #"+t.forecolor+';" class="colorItem '+a+'" data-layer-name="'+s+'" data-color-code="'+e.color_code+'" data-layer-no="'+r+'" data-object-type='+c+">"+i+"</span>"}),l+="</div>"}(e.default_color,e.layer_number,"Layer "+e.layer_number,e.default_color,"Mascot");$.when($("div.color-pickers").append(a)).then(o())});var n=function(){i.render(r),requestAnimationFrame(n)};requestAnimationFrame(n)},ub.funcs.initMascotRealTimePreview=function(e,t){var i=ub.utilities.buildTemplateString("#m-custom-artwork-requests-mascot-preview",{mascot:e}),n=bootbox.dialog({title:"Realtime Mascot Preview",message:i,size:"large",closeButton:!1});n.init(function(){e.parsedLayersProperties=JSON.parse(e.layers_properties),ub.funcs.initPreviewCanvas(e),$("span.btn.close").unbind("click"),$("span.btn#close").on("click",function(){$('span[data-action="preview-prepared-artwork"][data-reference-id="'+t+'"]').html("Preview Processed Mascot"),n.modal("hide")})})},ub.funcs.prepareCustomArtworkRequestTable=function(c){$("div.my-custom-artwork-requests-loading").hide(),void 0!==c&&(_data=_.filter(ub.data.logo_request,function(e){var t=e.status===c;return"pending"===c&&(t=e.status===c||"user_rejected"===e.status),t})),_markup=ub.utilities.buildTemplateString("#m-custom-artwork-requests",{car:_data,titleCase:function(){return function(e,t){var i=t(e);return t(i=i.toString().toTitleCase())}}}),$container=$("div.custom-artwork-request-list.pending"),$container.html(_markup),$container.fadeIn(),"pending"===c&&($spanPreviewPreparedArtwork=$('span[data-action="preview-prepared-artwork"]'),$spanPreviewPreparedArtwork.addClass("pending"),$spanPreviewPreparedArtwork.attr("title","This will be available when this item is in the For Review or the Rejected stages"));var t=$("span.tab");t.unbind("click"),t.on("click",function(){var e=$(this).data("type");$("span.tab.active").data("type")!==e&&(t.removeClass("active"),$(this).addClass("active"),ub.funcs.changeCustomArtworkRequestType(e))});var e=$("span.link");e.unbind("click"),e.on("click",function(){var e=$(this).data("reference-id"),t=$(this).data("type"),i="";"order"===t&&(i=ub.config.host+"/orders/view/"+e),"saved_design"===t&&(i=ub.config.host+"/my-saved-design/"+e),ub.dialog.confirm("Leave this page and load "+t.toTitleCase()+" "+e+", continue?",function(e){e&&(window.location=i)})});var i=$('span[data-btn-type="preview"]');i.unbind("click"),i.on("click",function(){var e,i=$(this).data("reference-id"),t=$(this).data("action"),n=_.find(_data,{reference_id:i.toString()}),a=$(this).data("code");if(void 0!==a&&(e=_.find(n.parsedProperties,{code:a.toString()})),!$(this).hasClass("pending")){if("preview-submitted-artwork"===t&&0<n.parsedProperties.length){var o="<img style='max-width: 100%;' src ='"+e.file+"' />";ub.showModalTool(o)}if("preview-prepared-artwork"===t){if("pending"===c)return;var r=e.mascot_id;$(this).html('Loading <img src="/images/loading.gif" style="width: 20px"/>');var s=ub.config.api_host+"/api/mascot/"+r;ub.funcs.callAPI(s,function(e){var t=e.mascot.mascot;void 0!==t&&ub.funcs.initMascotRealTimePreview(t,i)})}if("preview-in-customizer"===t){i=$(this).data("reference-id");var l=$(this).data("type");s="";"order"===l&&(s=ub.config.host+"/order/"+i),"saved_design"===l&&(s=ub.config.host+"/my-saved-design/"+i),ub.dialog.confirm("Leave this page and load "+l.toTitleCase()+" "+i+", continue?",function(e){e&&(window.location=s)})}}}),Tipped.create("a.btn"),Tipped.create("span.tab"),Tipped.create("span.link"),Tipped.create('span[data-action="preview-submitted-artwork"]'),Tipped.create('span[data-action="preview-prepared-artwork"]',{position:"bottom"}),Tipped.create('span[data-action="preview-in-customizer"]')},ub.funcs.prepareCustomArtworkRequestsUI=function(){ub.funcs.prepareCustomArtworkRequestTable("for_review")},ub.funcs.displayMyCustomArtworkRequests=function(){$.ajax({url:ub.config.api_host+"/api/v1-0/logo_request/user_id/"+ub.user.id,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.data.logo_request=e.logo_request,ub.funcs.processLogoRequests(),ub.funcs.prepareCustomArtworkRequestsUI()}})},ub.funcs.callAPI=function(e,t){$.ajax({url:e,type:"GET",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){t(e)}})},ub.funcs.preparePrerequisites=function(){ub.data.colors=[],ub.funcs.callAPI(window.ub.config.api_host+"/api/colors/",function(e){ub.data.colors=e.colors,ub.funcs.prepareColors()})},"my-custom-artwork-requests"===ub.page){if($("div#main-picker-container").remove(),$("body").css("background-image","none"),!window.ub.user)return void ub.funcs.displayLoginForm();ub.funcs.displayMyCustomArtworkRequests(),ub.funcs.preparePrerequisites()}}),$(document).ready(function(){ub.debug={},ub.debug.mode=!0,ub.debug.UI_VERSION=1,ub.funcs.uiV2=function(){ub.uiVersion="v2",ub.dimensions.width=1e3,ub.dimensions.height=1100,$("a.mod_primary").click(),$("#design_name_container").css({"text-align":"center",width:"100%"}),$("div.main_steps_bar").show(),$("div#right-sidebar > a.sidebar-buttons").hide(),$("div#right-main-window").css("float","left"),$("div#right-main-window.team-color-pane").show(),$("div#right-main-window").css("height","530px"),$("div#right-main-window").css("display","block"),$("div#right-main-window").css("width","550px"),$("div#right-main-window.team-color-pane").addClass("team_color_pane"),$("div#right-main-window.team-color-pane").css("display","block"),$("div#left-pane-column").css("padding-right","5px !important"),$("div#right-pane-column").css("padding-left","5px !important"),$("div.pane-main-window").css("overflow","visible !important"),$("#right-sidebar > a.sidebar-buttons").hide(),$("div.old-change-views").hide()},ub.funcs.uiV1=function(){ub.uiVersion="v1",ub.dimensions.width=496,$("div.special_modifiers").hide(),$("#design_name_container").css({float:"right",width:"90%"}),$("div.main_steps_bar").hide(),$("div#right-sidebar > a.sidebar-buttons").show(),$("div#right-main-window").css("float","right"),$("div#right-main-window").css("width","470px"),$("div#right-main-window.team-color-pane").hide(),$("div#right-main-window").css("height","616px"),$("div#right-main-window.team-color-pane").removeClass("team_color_pane"),$("div#right-main-window.team-color-pane").css("display","none"),$("div#left-pane-column").css("padding-right","15px !important"),$("div#right-pane-column").css("padding-left","15px !important"),$("div#right-main-window").css("overflow","hidden !important"),$("div.pane-main-window").css("overflow","scroll"),$("#right-sidebar > a.sidebar-buttons").show(),$("a.colors").click(),$(window).trigger("resize")},ub.funcs.uiV2()}),Object.prototype.watch||Object.defineProperty(Object.prototype,"watch",{enumerable:!1,configurable:!0,writable:!1,value:function(t,i){var n=this[t],a=n;delete this[t]&&Object.defineProperty(this,t,{get:function(){return a},set:function(e){return n=a,a=i.call(this,t,n,e)},enumerable:!0,configurable:!0})}}),Object.prototype.unwatch||Object.defineProperty(Object.prototype,"unwatch",{enumerable:!1,configurable:!0,writable:!1,value:function(e){var t=this[e];delete this[e],this[e]=t}}),$(document).ready(function(){ub.shortcut={all_shortcuts:{},add:function(u,p,d){var e={type:"keydown",propagate:!1,disable_in_input:!1,target:document,keycode:!1};if(d)for(var t in e)void 0===d[t]&&(d[t]=e[t]);else d=e;var i=d.target;"string"==typeof d.target&&(i=document.getElementById(d.target));u=u.toLowerCase();function n(e){var t;if(e=e||window.event,!d.disable_in_input||(e.target?t=e.target:e.srcElement&&(t=e.srcElement),3==t.nodeType&&(t=t.parentNode),"INPUT"!=t.tagName&&"TEXTAREA"!=t.tagName)){var i=!1;e.keyCode?i=e.keyCode:e.which&&(i=e.which);var n=String.fromCharCode(i).toLowerCase();188==i&&(n=","),190==i&&(n=".");var a=u.split("+"),o=0,r={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"},s={esc:27,escape:27,tab:9,space:32,return:13,enter:13,backspace:8,scrolllock:145,scroll_lock:145,scroll:145,capslock:20,caps_lock:20,caps:20,numlock:144,num_lock:144,num:144,pause:19,break:19,insert:45,home:36,delete:46,end:35,pageup:33,page_up:33,pu:33,pagedown:34,page_down:34,pd:34,left:37,up:38,right:39,down:40,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},l={shift:{wanted:!1,pressed:!1},ctrl:{wanted:!1,pressed:!1},alt:{wanted:!1,pressed:!1},meta:{wanted:!1,pressed:!1}};e.ctrlKey&&(l.ctrl.pressed=!0),e.shiftKey&&(l.shift.pressed=!0),e.altKey&&(l.alt.pressed=!0),e.metaKey&&(l.meta.pressed=!0);for(var c=0;k=a[c],c<a.length;c++)"ctrl"==k||"control"==k?(o++,l.ctrl.wanted=!0):"shift"==k?(o++,l.shift.wanted=!0):"alt"==k?(o++,l.alt.wanted=!0):"meta"==k?(o++,l.meta.wanted=!0):1<k.length?s[k]==i&&o++:d.keycode?d.keycode==i&&o++:n==k?o++:r[n]&&e.shiftKey&&(n=r[n])==k&&o++;return o!=a.length||l.ctrl.pressed!=l.ctrl.wanted||l.shift.pressed!=l.shift.wanted||l.alt.pressed!=l.alt.wanted||l.meta.pressed!=l.meta.wanted||(p(e),d.propagate)?void 0:(e.cancelBubble=!0,e.returnValue=!1,e.stopPropagation&&(e.stopPropagation(),e.preventDefault()),!1)}}this.all_shortcuts[u]={callback:n,target:i,event:d.type},i.addEventListener?i.addEventListener(d.type,n,!1):i.attachEvent?i.attachEvent("on"+d.type,n):i["on"+d.type]=n},remove:function(e){e=e.toLowerCase();var t=this.all_shortcuts[e];if(delete this.all_shortcuts[e],t){var i=t.event,n=t.target,a=t.callback;n.detachEvent?n.detachEvent("on"+i,a):n.removeEventListener?n.removeEventListener(i,a,!1):n["on"+i]=!1}}},ub.shortcut.add("Alt+1",function(){ub.toggleFontGuides()}),ub.shortcut.add("Alt+2",function(){ub.toggleFullView()}),ub.shortcut.add("Alt+3",function(){ub.togglePatternMasks()}),ub.shortcut.add("Alt+4",function(){ub.showThumbnail3()}),ub.shortcut.add("Alt+5",function(){ub.funcs.enableAlternativeUI()}),ub.shortcut.add("Esc",function(){ub.status.fullView.getStatus()&&($("div.verbiage-container").removeClass("preview-verbiage-container"),$("p.verbiage-text").removeClass("preview-verbiage-text"),$("div#main_view").css("background-color",""),ub.funcs.restoreUI())}),$("body").keydown(function(e){"Alt"===e.key&&($('a.footer-buttons.change-view[data-view="front"]').html("F<br /><span>Thumbnail</span>"),$('a.footer-buttons.change-view[data-view="back"]').html("B<br /><span>Thumbnail</span>"),$('a.footer-buttons.change-view[data-view="left"]').html("L<br /><span>Thumbnail</span>"),$('a.footer-buttons.change-view[data-view="right"]').html("R<br /><span>Thumbnail</span>"),$('a.footer-buttons.change-view[data-view="zoom"]').html('<i class="fa fa-arrows-alt" aria-hidden="true"></i><br /><span>Full View</span>'))}),$("body").keyup(function(e){"Alt"===e.key&&($('a.footer-buttons.change-view[data-view="front"]').html("F<br /><span>Front View</span>"),$('a.footer-buttons.change-view[data-view="back"]').html("B<br /><span>Back View</span>"),$('a.footer-buttons.change-view[data-view="left"]').html("L<br /><span>Left View</span>"),$('a.footer-buttons.change-view[data-view="right"]').html("R<br /><span>Right View</span>"),$('a.footer-buttons.change-view[data-view="zoom"]').html('<i class="fa fa-search"></i><br /><span>Zoom</span>'))})}),$(document).ready(function(){function o(e){return"\t"+e+"\n"}ub.generators={},ub.generators.phData="",ub.generators.generatePlaceholderOverrides=function(){var e=ub.current_material.settings.applications,n="",a=[];_.each(e,function(i){_.each(i.application.views,function(e){n+=function(e){return e+"\n"}("{"),n+=o('sport: "'+ub.current_material.material.uniform_category+'",'),n+=o('blockPattern: "'+ub.current_material.material.block_pattern+'",'),n+=o('part: "'+i.application.layer+'",'),n+=o('perspective: "'+e.perspective+'",'),n+=o("position: {x: "+e.application.center.x+", y: "+e.application.center.y+"},"),n+=o("rotation: "+e.application.rotation+","),n+="},";var t={sport:ub.current_material.material.uniform_category,blockPattern:ub.current_material.material.block_pattern,part:i.application.layer,perspective:e.perspective,position:{x:e.application.center.x,y:e.application.center.y},rotation:e.application.rotation};a.push(t)});ub.generators.phData=JSON.stringify(a)});var t=bootbox.dialog({title:"Generate PHA Settings",message:'<div class="generator-container"><textarea class="code">'+n+'</textarea><button class="btn post-this">Save Placeholder Applications</button></div>'});t.init(function(){$("button.post-this").unbind("click"),$("button.post-this").on("click",function(){ub.generators.updateBlockPattern(ub.generators.phData)})}),t.show()},ub.generators.updateBlockPattern=function(e){var t={id:ub.current_material.material.block_pattern_id,placeholder_overrides:e},i=ub.config.api_host+"/api/block_pattern/update";$.ajax({url:i,type:"POST",data:JSON.stringify(t),dataType:"json",crossDomain:!0,contentType:"application/json",headers:{accessToken:!1!==ub.user?atob(ub.user.headerValue):null},success:function(e){ub.utilities.info("Response: "),ub.utilities.info(e),bootbox.alert("Placeholder Overrides Updated!")}})}});var TeamStoreAPI={base_url:$("meta[name=team-store-api]").attr("content"),endpoints:{},init:function(){this.endpoints.save_customized_thumbnails=this.base_url+"product/save_customized_thumbnails",this.endpoints.add_product_to_team_store=this.base_url+"product/add_product_to_team_store",this.endpoints.get_team_store_products=this.base_url+"store/get_products"}};TeamStoreAPI.init();var TeamStoreToolBox={is_enabled:!0,products_modal:null,progress_modal:null,init:function(){$("#team-store-toolbox .create-team-store").on("click",TeamStoreToolBox.create_team_store),$("#team-store-toolbox .open-team-store").on("click",TeamStoreToolBox.open_team_store),$("#team-store-toolbox .update-images").on("click",TeamStoreToolBox.update_images),$("#team-store-toolbox .add-to-team-store").on("click",ub.funcs.initSaveDesign),$("#team-store-toolbox .view-product-page").on("click",TeamStoreToolBox.view_product_page),$("#team-store-toolbox .open-team-store-manager-products").on("click",TeamStoreToolBox.open_store_manager_products),$("#team-store-toolbox .close").on("click",TeamStoreToolBox.close),$("#show-team-store-toolbox")&&$("#show-team-store-toolbox").on("click",TeamStoreToolBox.show),$("#team-store-toolbox").draggable(),$("#left-side-toolbar span.team-store").show(),$("#team-store-toolbox").addClass("visible")},has_team_store_account:function(){return!1},show:function(){$("#team-store-toolbox").fadeIn()},hide:function(){$("#team-store-toolbox").fadeOut()},close:function(){$("#team-store-toolbox").fadeOut()},create_team_store:function(){var e=$("#team-store-toolbox .create-team-store").data("create-store");window.open(e,"_blank")},open_team_store:function(){var e=$("#team-store-toolbox .open-team-store").data("store");window.open(e,"_blank")},update_images:function(e){ub.front_view.visible=!0,ub.left_view.visible=!0,ub.right_view.visible=!0,ub.back_view.visible=!0,ub.funcs.prepareThumbnails(),setTimeout(function(){ub.funcs.updateTeamStoreImages()},3e3)},add_to_team_store:function(e){e&&!isNaN(e)||(e=ub.config.material_id),TeamStoreToolBox.get_material(e)},get_material:function(t){var e=ub.config.api_host+"/api/material/"+t;ub.utilities.getJSON(e,function(o){if(o.success){o.material.pricing_details=o.material.pricing;var e=ub.config.api_host+"/api/materials_options/"+t;ub.utilities.getJSON(e,function(e){if(e.success){var i=e.materials_options,n=[];Object.keys(i).forEach(function(e){if(("back"==i[e].perspective||"front"==i[e].perspective)&&i[e].applications_properties){var t=i[e].applications_properties.slice(1,-1);t=JSON.parse(t),Object.keys(t).forEach(function(e){n.push(t[e])})}});var t=n.some(function(e){return 1===e.hasPlayerName});o.material.has_jersey_name=t?1:0;var a=n.some(function(e){return 1===e.hasNumber});o.material.has_jersey_number=a?1:0}return o.material.pricing=JSON.parse(o.material.pricing),o.material.pricing&&(o.material.pricing.adult_min_msrp&&(o.material.price=o.material.pricing.adult_min_msrp),o.material.pricing.adult_min_web_price_sale&&(o.material.price_sale=o.material.pricing.adult_min_web_price_sale),o.material.pricing.youth_min_msrp&&(o.material.price_youth=o.material.pricing.youth_min_msrp),o.material.pricing.youth_min_web_price_sale&&(o.material.price_youth_sale=o.material.pricing.youth_min_web_price_sale),o.material.uniform_category&&(o.material.uniform_category=o.material.uniform_category)),TeamStoreToolBox.offer_product_to_team_store(o.material)})}return!1})},offer_product_to_team_store:function(e){var t=TeamStoreAPI.endpoints.add_product_to_team_store,n=[];if(ub.current_material.settings.team_colors)for(i=0;i<ub.current_material.settings.team_colors.length;i++)n.push(ub.current_material.settings.team_colors[i].color_code);var a={store_code:ub.store_code,material_id:e.id,parts_alias_id:e.parts_alias_id,name:e.name,slug:e.slug,description:e.description,sports_group_id:e.sports_group_id,uniform_application_type:e.uniform_application_type,uniform_category:e.uniform_category,uniform_category_id:e.uniform_category_id,uniform_group:e.uniform_group,sku:e.sku,is_infused:e.is_infused,is_sublimated:e.is_sublimated,is_twill:e.is_twill,price:e.price,price_youth:e.price_youth,pricing:e.pricing_details,created_by:parseInt($("#team-store-toolbox").data("team-store-user-id")),image_front:e.thumbnail_path,image_back:e.thumbnail_path_back,image_right:e.thumbnail_path_right,image_left:e.thumbnail_path_left,block_pattern:e.block_pattern,block_pattern_id:e.block_pattern_id,product_type:e.block_pattern,gender_type:e.gender,factory_code:e.factory_code,sport:e.uniform_category.toLowerCase(),has_jersey_number:e.has_jersey_number,has_jersey_name:e.has_jersey_name,colors:JSON.stringify(n)};ub.utilities.postJSON(t,a,function(e){e.success&&($("#team-store-toolbox").data("product-id",e.product.id),TeamStoreToolBox.bind_product_id(ub.team_stores_material_id,e.product.id),$("#team-store-toolbox .add-to-team-store").off("click"),$("#team-store-toolbox .add-to-team-store").addClass("disabled").removeClass("add-to-team-store"))})},bind_product_id:function(e,t){var i=ub.config.api_host+"/api/team_stores_material/update_product_id";ub.utilities.postJSON(i,{id:e,product_id:t},function(e){e.success&&TeamStoreToolBox.update_images(!0)})},view_product_page:function(){var e=$("#team-store-toolbox .view-product-page").data("product");window.open(e,"_blank")},open_products:function(){if(null==TeamStoreToolBox.products_modal){var e=$("#team-store-products-picker-template").html();$("body").append(e),TeamStoreToolBox.products_modal=$("div#team-store-products-picker"),TeamStoreToolBox.products_modal.center(),TeamStoreToolBox.products_modal.draggable(),TeamStoreToolBox.open_products_modal(),$("div#team-store-products-picker .close-popup").on("click",TeamStoreToolBox.close_products_modal);var t=TeamStoreAPI.endpoints.get_team_store_products+"/"+ub.store_code;ub.utilities.getJSON(t,function(e){if(e.success){var t=$("#team-store-products-template").html(),i=(e.products,Mustache.render(t,e));$("div#team-store-products-picker .team-store-products-list").html(i),$("div#team-store-products-picker .team-store-products-list .name").on("mousemove",function(){$(this).addClass("pullUp")}),$("div#team-store-products-picker .team-store-products-list .name").on("mouseout",function(){$(this).removeClass("pullUp")}),$("div#team-store-products-picker .team-store-products-list .item").on("click",function(){var e=$(this).data("material-id"),t=$(this).data("product-id"),i=$(this).data("product-colors");TeamStoreToolBox.load_material(e,t,i)})}})}else TeamStoreToolBox.open_products_modal()},open_store_manager_products:function(){var e=$("#team-store-toolbox .open-team-store-manager-products").data("store-manager-products-url");window.open(e,"_blank")},load_material:function(e,t,i){var n=$("#team-store-toolbox").data("team-name");0==n.trim().length&&(n="DEFAULT");var a=$("#team-store-toolbox").data("team-colors");i?a=i:0==a.trim().length&&(a="DEFAULT");var o="/builder/0/"+e+"/"+ub.store_code+"/"+n+"/"+a+"/PLAYER/23/0/0/0/"+t;location.href=o},open_products_modal:function(){TeamStoreToolBox.products_modal.fadeIn()},close_products_modal:function(){TeamStoreToolBox.products_modal.fadeOut()}};
//# sourceMappingURL=ub.min.js.map
